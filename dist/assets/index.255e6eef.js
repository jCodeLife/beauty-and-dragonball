var $4=Object.defineProperty,Q4=Object.defineProperties;var J4=Object.getOwnPropertyDescriptors;var xp=Object.getOwnPropertySymbols;var KT=Object.prototype.hasOwnProperty,$T=Object.prototype.propertyIsEnumerable;var _y=(n,e,t)=>e in n?$4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,vt=(n,e)=>{for(var t in e||(e={}))KT.call(e,t)&&_y(n,t,e[t]);if(xp)for(var t of xp(e))$T.call(e,t)&&_y(n,t,e[t]);return n},Ii=(n,e)=>Q4(n,J4(e));var yu=(n,e)=>{var t={};for(var i in n)KT.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&xp)for(var i of xp(n))e.indexOf(i)<0&&$T.call(n,i)&&(t[i]=n[i]);return t};var QT=(n,e,t)=>(_y(n,typeof e!="symbol"?e+"":e,t),t);const e5=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}};e5();var Vu=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},pt={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var od=Symbol.for("react.element"),t5=Symbol.for("react.portal"),n5=Symbol.for("react.fragment"),i5=Symbol.for("react.strict_mode"),r5=Symbol.for("react.profiler"),s5=Symbol.for("react.provider"),o5=Symbol.for("react.context"),a5=Symbol.for("react.forward_ref"),l5=Symbol.for("react.suspense"),u5=Symbol.for("react.memo"),c5=Symbol.for("react.lazy"),JT=Symbol.iterator;function h5(n){return n===null||typeof n!="object"?null:(n=JT&&n[JT]||n["@@iterator"],typeof n=="function"?n:null)}var yR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xR=Object.assign,_R={};function Hc(n,e,t){this.props=n,this.context=e,this.refs=_R,this.updater=t||yR}Hc.prototype.isReactComponent={};Hc.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Hc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function wR(){}wR.prototype=Hc.prototype;function t1(n,e,t){this.props=n,this.context=e,this.refs=_R,this.updater=t||yR}var n1=t1.prototype=new wR;n1.constructor=t1;xR(n1,Hc.prototype);n1.isPureReactComponent=!0;var eE=Array.isArray,SR=Object.prototype.hasOwnProperty,i1={current:null},MR={key:!0,ref:!0,__self:!0,__source:!0};function bR(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)SR.call(e,i)&&!MR.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];r.children=u}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:od,type:n,key:s,ref:o,props:r,_owner:i1.current}}function f5(n,e){return{$$typeof:od,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function r1(n){return typeof n=="object"&&n!==null&&n.$$typeof===od}function d5(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var tE=/\/+/g;function wy(n,e){return typeof n=="object"&&n!==null&&n.key!=null?d5(""+n.key):e.toString(36)}function Lm(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case od:case t5:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+wy(o,0):i,eE(r)?(t="",n!=null&&(t=n.replace(tE,"$&/")+"/"),Lm(r,e,t,"",function(c){return c})):r!=null&&(r1(r)&&(r=f5(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(tE,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",eE(n))for(var a=0;a<n.length;a++){s=n[a];var u=i+wy(s,a);o+=Lm(s,e,t,u,r)}else if(u=h5(n),typeof u=="function")for(n=u.call(n),a=0;!(s=n.next()).done;)s=s.value,u=i+wy(s,a++),o+=Lm(s,e,t,u,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function _p(n,e,t){if(n==null)return n;var i=[],r=0;return Lm(n,i,"","",function(s){return e.call(t,s,r++)}),i}function p5(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Vi={current:null},Dm={transition:null},m5={ReactCurrentDispatcher:Vi,ReactCurrentBatchConfig:Dm,ReactCurrentOwner:i1};Dt.Children={map:_p,forEach:function(n,e,t){_p(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return _p(n,function(){e++}),e},toArray:function(n){return _p(n,function(e){return e})||[]},only:function(n){if(!r1(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Dt.Component=Hc;Dt.Fragment=n5;Dt.Profiler=r5;Dt.PureComponent=t1;Dt.StrictMode=i5;Dt.Suspense=l5;Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m5;Dt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=xR({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=i1.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(u in e)SR.call(e,u)&&!MR.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=t;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:od,type:n.type,key:r,ref:s,props:i,_owner:o}};Dt.createContext=function(n){return n={$$typeof:o5,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:s5,_context:n},n.Consumer=n};Dt.createElement=bR;Dt.createFactory=function(n){var e=bR.bind(null,n);return e.type=n,e};Dt.createRef=function(){return{current:null}};Dt.forwardRef=function(n){return{$$typeof:a5,render:n}};Dt.isValidElement=r1;Dt.lazy=function(n){return{$$typeof:c5,_payload:{_status:-1,_result:n},_init:p5}};Dt.memo=function(n,e){return{$$typeof:u5,type:n,compare:e===void 0?null:e}};Dt.startTransition=function(n){var e=Dm.transition;Dm.transition={};try{n()}finally{Dm.transition=e}};Dt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Dt.useCallback=function(n,e){return Vi.current.useCallback(n,e)};Dt.useContext=function(n){return Vi.current.useContext(n)};Dt.useDebugValue=function(){};Dt.useDeferredValue=function(n){return Vi.current.useDeferredValue(n)};Dt.useEffect=function(n,e){return Vi.current.useEffect(n,e)};Dt.useId=function(){return Vi.current.useId()};Dt.useImperativeHandle=function(n,e,t){return Vi.current.useImperativeHandle(n,e,t)};Dt.useInsertionEffect=function(n,e){return Vi.current.useInsertionEffect(n,e)};Dt.useLayoutEffect=function(n,e){return Vi.current.useLayoutEffect(n,e)};Dt.useMemo=function(n,e){return Vi.current.useMemo(n,e)};Dt.useReducer=function(n,e,t){return Vi.current.useReducer(n,e,t)};Dt.useRef=function(n){return Vi.current.useRef(n)};Dt.useState=function(n){return Vi.current.useState(n)};Dt.useSyncExternalStore=function(n,e,t){return Vi.current.useSyncExternalStore(n,e,t)};Dt.useTransition=function(){return Vi.current.useTransition()};Dt.version="18.0.0-fc46dba67-20220329";pt.exports=Dt;var Gn=pt.exports,Qx={},TR={exports:{}},Tr={},ER={exports:{}},AR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(B,Z){var ee=B.length;B.push(Z);e:for(;0<ee;){var se=ee-1>>>1,ae=B[se];if(0<r(ae,Z))B[se]=Z,B[ee]=ae,ee=se;else break e}}function t(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var Z=B[0],ee=B.pop();if(ee!==Z){B[0]=ee;e:for(var se=0,ae=B.length,Le=ae>>>1;se<Le;){var ze=2*(se+1)-1,Pe=B[ze],oe=ze+1,rt=B[oe];if(0>r(Pe,ee))oe<ae&&0>r(rt,Pe)?(B[se]=rt,B[oe]=ee,se=oe):(B[se]=Pe,B[ze]=ee,se=ze);else if(oe<ae&&0>r(rt,ee))B[se]=rt,B[oe]=ee,se=oe;else break e}}return Z}function r(B,Z){var ee=B.sortIndex-Z.sortIndex;return ee!==0?ee:B.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var u=[],c=[],f=1,d=null,p=3,g=!1,v=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(B){for(var Z=t(c);Z!==null;){if(Z.callback===null)i(c);else if(Z.startTime<=B)i(c),Z.sortIndex=Z.expirationTime,e(u,Z);else break;Z=t(c)}}function w(B){if(y=!1,_(B),!v)if(t(u)!==null)v=!0,X(T);else{var Z=t(c);Z!==null&&K(w,Z.startTime-B)}}function T(B,Z){v=!1,y&&(y=!1,M(P),P=-1),g=!0;var ee=p;try{for(_(Z),d=t(u);d!==null&&(!(d.expirationTime>Z)||B&&!C());){var se=d.callback;if(typeof se=="function"){d.callback=null,p=d.priorityLevel;var ae=se(d.expirationTime<=Z);Z=n.unstable_now(),typeof ae=="function"?d.callback=ae:d===t(u)&&i(u),_(Z)}else i(u);d=t(u)}if(d!==null)var Le=!0;else{var ze=t(c);ze!==null&&K(w,ze.startTime-Z),Le=!1}return Le}finally{d=null,p=ee,g=!1}}var E=!1,R=null,P=-1,V=5,F=-1;function C(){return!(n.unstable_now()-F<V)}function N(){if(R!==null){var B=n.unstable_now();F=B;var Z=!0;try{Z=R(!0,B)}finally{Z?Q():(E=!1,R=null)}}else E=!1}var Q;if(typeof S=="function")Q=function(){S(N)};else if(typeof MessageChannel!="undefined"){var G=new MessageChannel,Y=G.port2;G.port1.onmessage=N,Q=function(){Y.postMessage(null)}}else Q=function(){x(N,0)};function X(B){R=B,E||(E=!0,Q())}function K(B,Z){P=x(function(){B(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){v||g||(v=!0,X(T))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(B){switch(p){case 1:case 2:case 3:var Z=3;break;default:Z=p}var ee=p;p=Z;try{return B()}finally{p=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,Z){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ee=p;p=B;try{return Z()}finally{p=ee}},n.unstable_scheduleCallback=function(B,Z,ee){var se=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?se+ee:se):ee=se,B){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=ee+ae,B={id:f++,callback:Z,priorityLevel:B,startTime:ee,expirationTime:ae,sortIndex:-1},ee>se?(B.sortIndex=ee,e(c,B),t(u)===null&&B===t(c)&&(y?(M(P),P=-1):y=!0,K(w,ee-se))):(B.sortIndex=ae,e(u,B),v||g||(v=!0,X(T))),B},n.unstable_shouldYield=C,n.unstable_wrapCallback=function(B){var Z=p;return function(){var ee=p;p=Z;try{return B.apply(this,arguments)}finally{p=ee}}}})(AR);ER.exports=AR;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CR=pt.exports,Mr=ER.exports;function we(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var RR=new Set,Sf={};function Xl(n,e){mc(n,e),mc(n+"Capture",e)}function mc(n,e){for(Sf[n]=e,n=0;n<e.length;n++)RR.add(e[n])}var Ao=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Jx=Object.prototype.hasOwnProperty,g5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nE={},iE={};function v5(n){return Jx.call(iE,n)?!0:Jx.call(nE,n)?!1:g5.test(n)?iE[n]=!0:(nE[n]=!0,!1)}function y5(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function x5(n,e,t,i){if(e===null||typeof e=="undefined"||y5(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Hi(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var gi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){gi[n]=new Hi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];gi[e]=new Hi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){gi[n]=new Hi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){gi[n]=new Hi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){gi[n]=new Hi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){gi[n]=new Hi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){gi[n]=new Hi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){gi[n]=new Hi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){gi[n]=new Hi(n,5,!1,n.toLowerCase(),null,!1,!1)});var s1=/[\-:]([a-z])/g;function o1(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(s1,o1);gi[e]=new Hi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(s1,o1);gi[e]=new Hi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(s1,o1);gi[e]=new Hi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){gi[n]=new Hi(n,1,!1,n.toLowerCase(),null,!1,!1)});gi.xlinkHref=new Hi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){gi[n]=new Hi(n,1,!1,n.toLowerCase(),null,!0,!0)});function a1(n,e,t,i){var r=gi.hasOwnProperty(e)?gi[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(x5(e,t,r,i)&&(t=null),i||r===null?v5(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var ko=CR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wp=Symbol.for("react.element"),Wu=Symbol.for("react.portal"),ju=Symbol.for("react.fragment"),l1=Symbol.for("react.strict_mode"),e_=Symbol.for("react.profiler"),PR=Symbol.for("react.provider"),LR=Symbol.for("react.context"),u1=Symbol.for("react.forward_ref"),t_=Symbol.for("react.suspense"),n_=Symbol.for("react.suspense_list"),c1=Symbol.for("react.memo"),fa=Symbol.for("react.lazy"),DR=Symbol.for("react.offscreen"),rE=Symbol.iterator;function Ah(n){return n===null||typeof n!="object"?null:(n=rE&&n[rE]||n["@@iterator"],typeof n=="function"?n:null)}var Ln=Object.assign,Sy;function Jh(n){if(Sy===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Sy=e&&e[1]||""}return`
`+Sy+n}var My=!1;function by(n,e){if(!n||My)return"";My=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var u=`
`+r[o].replace(" at new "," at ");return n.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",n.displayName)),u}while(1<=o&&0<=a);break}}}finally{My=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Jh(n):""}function _5(n){switch(n.tag){case 5:return Jh(n.type);case 16:return Jh("Lazy");case 13:return Jh("Suspense");case 19:return Jh("SuspenseList");case 0:case 2:case 15:return n=by(n.type,!1),n;case 11:return n=by(n.type.render,!1),n;case 1:return n=by(n.type,!0),n;default:return""}}function i_(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ju:return"Fragment";case Wu:return"Portal";case e_:return"Profiler";case l1:return"StrictMode";case t_:return"Suspense";case n_:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case LR:return(n.displayName||"Context")+".Consumer";case PR:return(n._context.displayName||"Context")+".Provider";case u1:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case c1:return e=n.displayName||null,e!==null?e:i_(n.type)||"Memo";case fa:e=n._payload,n=n._init;try{return i_(n(e))}catch{}}return null}function w5(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return i_(e);case 8:return e===l1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function La(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function IR(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function S5(n){var e=IR(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t!="undefined"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Sp(n){n._valueTracker||(n._valueTracker=S5(n))}function OR(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=IR(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Zm(n){if(n=n||(typeof document!="undefined"?document:void 0),typeof n=="undefined")return null;try{return n.activeElement||n.body}catch{return n.body}}function r_(n,e){var t=e.checked;return Ln({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:n._wrapperState.initialChecked})}function sE(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=La(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function FR(n,e){e=e.checked,e!=null&&a1(n,"checked",e,!1)}function s_(n,e){FR(n,e);var t=La(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?o_(n,e.type,t):e.hasOwnProperty("defaultValue")&&o_(n,e.type,La(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function oE(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function o_(n,e,t){(e!=="number"||Zm(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var ef=Array.isArray;function oc(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+La(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function a_(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(we(91));return Ln({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function aE(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(we(92));if(ef(t)){if(1<t.length)throw Error(we(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:La(t)}}function kR(n,e){var t=La(e.value),i=La(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function lE(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function NR(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function l_(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?NR(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Mp,zR=function(n){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Mp=Mp||document.createElement("div"),Mp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mp.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Mf(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var of={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},M5=["Webkit","ms","Moz","O"];Object.keys(of).forEach(function(n){M5.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),of[e]=of[n]})});function BR(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||of.hasOwnProperty(n)&&of[n]?(""+e).trim():e+"px"}function UR(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=BR(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var b5=Ln({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function u_(n,e){if(e){if(b5[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(we(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(we(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(we(61))}if(e.style!=null&&typeof e.style!="object")throw Error(we(62))}}function c_(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var h_=null;function h1(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var f_=null,ac=null,lc=null;function uE(n){if(n=ud(n)){if(typeof f_!="function")throw Error(we(280));var e=n.stateNode;e&&(e=iv(e),f_(n.stateNode,n.type,e))}}function VR(n){ac?lc?lc.push(n):lc=[n]:ac=n}function HR(){if(ac){var n=ac,e=lc;if(lc=ac=null,uE(n),e)for(n=0;n<e.length;n++)uE(e[n])}}function GR(n,e){return n(e)}function WR(){}var Ty=!1;function jR(n,e,t){if(Ty)return n(e,t);Ty=!0;try{return GR(n,e,t)}finally{Ty=!1,(ac!==null||lc!==null)&&(WR(),HR())}}function bf(n,e){var t=n.stateNode;if(t===null)return null;var i=iv(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(we(231,e,typeof t));return t}var d_=!1;if(Ao)try{var Ch={};Object.defineProperty(Ch,"passive",{get:function(){d_=!0}}),window.addEventListener("test",Ch,Ch),window.removeEventListener("test",Ch,Ch)}catch{d_=!1}function T5(n,e,t,i,r,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(f){this.onError(f)}}var af=!1,Km=null,$m=!1,p_=null,E5={onError:function(n){af=!0,Km=n}};function A5(n,e,t,i,r,s,o,a,u){af=!1,Km=null,T5.apply(E5,arguments)}function C5(n,e,t,i,r,s,o,a,u){if(A5.apply(this,arguments),af){if(af){var c=Km;af=!1,Km=null}else throw Error(we(198));$m||($m=!0,p_=c)}}function ql(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,(e.flags&4098)!==0&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function XR(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function cE(n){if(ql(n)!==n)throw Error(we(188))}function R5(n){var e=n.alternate;if(!e){if(e=ql(n),e===null)throw Error(we(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return cE(r),n;if(s===i)return cE(r),e;s=s.sibling}throw Error(we(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(we(189))}}if(t.alternate!==i)throw Error(we(190))}if(t.tag!==3)throw Error(we(188));return t.stateNode.current===t?n:e}function qR(n){return n=R5(n),n!==null?YR(n):null}function YR(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=YR(n);if(e!==null)return e;n=n.sibling}return null}var ZR=Mr.unstable_scheduleCallback,hE=Mr.unstable_cancelCallback,P5=Mr.unstable_shouldYield,L5=Mr.unstable_requestPaint,Wn=Mr.unstable_now,D5=Mr.unstable_getCurrentPriorityLevel,f1=Mr.unstable_ImmediatePriority,KR=Mr.unstable_UserBlockingPriority,Qm=Mr.unstable_NormalPriority,I5=Mr.unstable_LowPriority,$R=Mr.unstable_IdlePriority,Jg=null,Ns=null;function O5(n){if(Ns&&typeof Ns.onCommitFiberRoot=="function")try{Ns.onCommitFiberRoot(Jg,n,void 0,(n.current.flags&128)===128)}catch{}}var ws=Math.clz32?Math.clz32:N5,F5=Math.log,k5=Math.LN2;function N5(n){return n>>>=0,n===0?32:31-(F5(n)/k5|0)|0}var bp=64,Tp=4194304;function tf(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Jm(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=tf(a):(s&=o,s!==0&&(i=tf(s)))}else o=t&~r,o!==0?i=tf(o):s!==0&&(i=tf(s));if(i===0)return 0;if(e!==0&&e!==i&&(e&r)===0&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if((i&4)!==0&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-ws(e),r=1<<t,i|=n[t],e&=~r;return i}function z5(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function B5(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-ws(s),a=1<<o,u=r[o];u===-1?((a&t)===0||(a&i)!==0)&&(r[o]=z5(a,e)):u<=e&&(n.expiredLanes|=a),s&=~a}}function m_(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ey(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function ad(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ws(e),n[e]=t}function U5(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-ws(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function d1(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-ws(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var en=0;function QR(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var JR,p1,e3,t3,n3,g_=!1,Ep=[],wa=null,Sa=null,Ma=null,Tf=new Map,Ef=new Map,pa=[],V5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fE(n,e){switch(n){case"focusin":case"focusout":wa=null;break;case"dragenter":case"dragleave":Sa=null;break;case"mouseover":case"mouseout":Ma=null;break;case"pointerover":case"pointerout":Tf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ef.delete(e.pointerId)}}function Rh(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=ud(e),e!==null&&p1(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function H5(n,e,t,i,r){switch(e){case"focusin":return wa=Rh(wa,n,e,t,i,r),!0;case"dragenter":return Sa=Rh(Sa,n,e,t,i,r),!0;case"mouseover":return Ma=Rh(Ma,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Tf.set(s,Rh(Tf.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ef.set(s,Rh(Ef.get(s)||null,n,e,t,i,r)),!0}return!1}function i3(n){var e=Pl(n.target);if(e!==null){var t=ql(e);if(t!==null){if(e=t.tag,e===13){if(e=XR(t),e!==null){n.blockedOn=e,n3(n.priority,function(){e3(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Im(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=v_(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);h_=i,t.target.dispatchEvent(i),h_=null}else return e=ud(t),e!==null&&p1(e),n.blockedOn=t,!1;e.shift()}return!0}function dE(n,e,t){Im(n)&&t.delete(e)}function G5(){g_=!1,wa!==null&&Im(wa)&&(wa=null),Sa!==null&&Im(Sa)&&(Sa=null),Ma!==null&&Im(Ma)&&(Ma=null),Tf.forEach(dE),Ef.forEach(dE)}function Ph(n,e){n.blockedOn===e&&(n.blockedOn=null,g_||(g_=!0,Mr.unstable_scheduleCallback(Mr.unstable_NormalPriority,G5)))}function Af(n){function e(r){return Ph(r,n)}if(0<Ep.length){Ph(Ep[0],n);for(var t=1;t<Ep.length;t++){var i=Ep[t];i.blockedOn===n&&(i.blockedOn=null)}}for(wa!==null&&Ph(wa,n),Sa!==null&&Ph(Sa,n),Ma!==null&&Ph(Ma,n),Tf.forEach(e),Ef.forEach(e),t=0;t<pa.length;t++)i=pa[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<pa.length&&(t=pa[0],t.blockedOn===null);)i3(t),t.blockedOn===null&&pa.shift()}var uc=ko.ReactCurrentBatchConfig;function W5(n,e,t,i){var r=en,s=uc.transition;uc.transition=null;try{en=1,m1(n,e,t,i)}finally{en=r,uc.transition=s}}function j5(n,e,t,i){var r=en,s=uc.transition;uc.transition=null;try{en=4,m1(n,e,t,i)}finally{en=r,uc.transition=s}}function m1(n,e,t,i){var r=v_(n,e,t,i);if(r===null)ky(n,e,i,eg,t),fE(n,i);else if(H5(r,n,e,t,i))i.stopPropagation();else if(fE(n,i),e&4&&-1<V5.indexOf(n)){for(;r!==null;){var s=ud(r);if(s!==null&&JR(s),s=v_(n,e,t,i),s===null&&ky(n,e,i,eg,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else ky(n,e,i,null,t)}var eg=null;function v_(n,e,t,i){if(eg=null,n=h1(i),n=Pl(n),n!==null)if(e=ql(n),e===null)n=null;else if(t=e.tag,t===13){if(n=XR(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return eg=n,null}function r3(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(D5()){case f1:return 1;case KR:return 4;case Qm:case I5:return 16;case $R:return 536870912;default:return 16}default:return 16}}var ga=null,g1=null,Om=null;function s3(){if(Om)return Om;var n,e=g1,t=e.length,i,r="value"in ga?ga.value:ga.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return Om=r.slice(n,1<i?1-i:void 0)}function Fm(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Ap(){return!0}function pE(){return!1}function Er(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ap:pE,this.isPropagationStopped=pE,this}return Ln(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Ap)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Ap)},persist:function(){},isPersistent:Ap}),e}var Gc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},v1=Er(Gc),ld=Ln({},Gc,{view:0,detail:0}),X5=Er(ld),Ay,Cy,Lh,ev=Ln({},ld,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:y1,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Lh&&(Lh&&n.type==="mousemove"?(Ay=n.screenX-Lh.screenX,Cy=n.screenY-Lh.screenY):Cy=Ay=0,Lh=n),Ay)},movementY:function(n){return"movementY"in n?n.movementY:Cy}}),mE=Er(ev),q5=Ln({},ev,{dataTransfer:0}),Y5=Er(q5),Z5=Ln({},ld,{relatedTarget:0}),Ry=Er(Z5),K5=Ln({},Gc,{animationName:0,elapsedTime:0,pseudoElement:0}),$5=Er(K5),Q5=Ln({},Gc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),J5=Er(Q5),eV=Ln({},Gc,{data:0}),gE=Er(eV),tV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rV(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=iV[n])?!!e[n]:!1}function y1(){return rV}var sV=Ln({},ld,{key:function(n){if(n.key){var e=tV[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Fm(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?nV[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:y1,charCode:function(n){return n.type==="keypress"?Fm(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Fm(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),oV=Er(sV),aV=Ln({},ev,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vE=Er(aV),lV=Ln({},ld,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:y1}),uV=Er(lV),cV=Ln({},Gc,{propertyName:0,elapsedTime:0,pseudoElement:0}),hV=Er(cV),fV=Ln({},ev,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),dV=Er(fV),pV=[9,13,27,32],x1=Ao&&"CompositionEvent"in window,lf=null;Ao&&"documentMode"in document&&(lf=document.documentMode);var mV=Ao&&"TextEvent"in window&&!lf,o3=Ao&&(!x1||lf&&8<lf&&11>=lf),yE=String.fromCharCode(32),xE=!1;function a3(n,e){switch(n){case"keyup":return pV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function l3(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xu=!1;function gV(n,e){switch(n){case"compositionend":return l3(e);case"keypress":return e.which!==32?null:(xE=!0,yE);case"textInput":return n=e.data,n===yE&&xE?null:n;default:return null}}function vV(n,e){if(Xu)return n==="compositionend"||!x1&&a3(n,e)?(n=s3(),Om=g1=ga=null,Xu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return o3&&e.locale!=="ko"?null:e.data;default:return null}}var yV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _E(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!yV[n.type]:e==="textarea"}function u3(n,e,t,i){VR(i),e=tg(e,"onChange"),0<e.length&&(t=new v1("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var uf=null,Cf=null;function xV(n){_3(n,0)}function tv(n){var e=Zu(n);if(OR(e))return n}function _V(n,e){if(n==="change")return e}var c3=!1;if(Ao){var Py;if(Ao){var Ly="oninput"in document;if(!Ly){var wE=document.createElement("div");wE.setAttribute("oninput","return;"),Ly=typeof wE.oninput=="function"}Py=Ly}else Py=!1;c3=Py&&(!document.documentMode||9<document.documentMode)}function SE(){uf&&(uf.detachEvent("onpropertychange",h3),Cf=uf=null)}function h3(n){if(n.propertyName==="value"&&tv(Cf)){var e=[];u3(e,Cf,n,h1(n)),jR(xV,e)}}function wV(n,e,t){n==="focusin"?(SE(),uf=e,Cf=t,uf.attachEvent("onpropertychange",h3)):n==="focusout"&&SE()}function SV(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return tv(Cf)}function MV(n,e){if(n==="click")return tv(e)}function bV(n,e){if(n==="input"||n==="change")return tv(e)}function TV(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Vs=typeof Object.is=="function"?Object.is:TV;function Rf(n,e){if(Vs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!Jx.call(e,r)||!Vs(n[r],e[r]))return!1}return!0}function ME(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function bE(n,e){var t=ME(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=ME(t)}}function f3(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?f3(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function d3(){for(var n=window,e=Zm();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Zm(n.document)}return e}function _1(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function EV(n){var e=d3(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&f3(t.ownerDocument.documentElement,t)){if(i!==null&&_1(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=bE(t,s);var o=bE(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var AV=Ao&&"documentMode"in document&&11>=document.documentMode,qu=null,y_=null,cf=null,x_=!1;function TE(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;x_||qu==null||qu!==Zm(i)||(i=qu,"selectionStart"in i&&_1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),cf&&Rf(cf,i)||(cf=i,i=tg(y_,"onSelect"),0<i.length&&(e=new v1("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=qu)))}function Cp(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Yu={animationend:Cp("Animation","AnimationEnd"),animationiteration:Cp("Animation","AnimationIteration"),animationstart:Cp("Animation","AnimationStart"),transitionend:Cp("Transition","TransitionEnd")},Dy={},p3={};Ao&&(p3=document.createElement("div").style,"AnimationEvent"in window||(delete Yu.animationend.animation,delete Yu.animationiteration.animation,delete Yu.animationstart.animation),"TransitionEvent"in window||delete Yu.transitionend.transition);function nv(n){if(Dy[n])return Dy[n];if(!Yu[n])return n;var e=Yu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in p3)return Dy[n]=e[t];return n}var m3=nv("animationend"),g3=nv("animationiteration"),v3=nv("animationstart"),y3=nv("transitionend"),x3=new Map,EE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ga(n,e){x3.set(n,e),Xl(e,[n])}for(var Iy=0;Iy<EE.length;Iy++){var Oy=EE[Iy],CV=Oy.toLowerCase(),RV=Oy[0].toUpperCase()+Oy.slice(1);Ga(CV,"on"+RV)}Ga(m3,"onAnimationEnd");Ga(g3,"onAnimationIteration");Ga(v3,"onAnimationStart");Ga("dblclick","onDoubleClick");Ga("focusin","onFocus");Ga("focusout","onBlur");Ga(y3,"onTransitionEnd");mc("onMouseEnter",["mouseout","mouseover"]);mc("onMouseLeave",["mouseout","mouseover"]);mc("onPointerEnter",["pointerout","pointerover"]);mc("onPointerLeave",["pointerout","pointerover"]);Xl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PV=new Set("cancel close invalid load scroll toggle".split(" ").concat(nf));function AE(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,C5(i,e,void 0,n),n.currentTarget=null}function _3(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&r.isPropagationStopped())break e;AE(r,a,c),s=u}else for(o=0;o<i.length;o++){if(a=i[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&r.isPropagationStopped())break e;AE(r,a,c),s=u}}}if($m)throw n=p_,$m=!1,p_=null,n}function mn(n,e){var t=e[M_];t===void 0&&(t=e[M_]=new Set);var i=n+"__bubble";t.has(i)||(w3(e,n,2,!1),t.add(i))}function Fy(n,e,t){var i=0;e&&(i|=4),w3(t,n,i,e)}var Rp="_reactListening"+Math.random().toString(36).slice(2);function Pf(n){if(!n[Rp]){n[Rp]=!0,RR.forEach(function(t){t!=="selectionchange"&&(PV.has(t)||Fy(t,!1,n),Fy(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Rp]||(e[Rp]=!0,Fy("selectionchange",!1,e))}}function w3(n,e,t,i){switch(r3(e)){case 1:var r=W5;break;case 4:r=j5;break;default:r=m1}t=r.bind(null,e,t,n),r=void 0,!d_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function ky(n,e,t,i,r){var s=i;if((e&1)===0&&(e&2)===0&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===r||u.nodeType===8&&u.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Pl(a),o===null)return;if(u=o.tag,u===5||u===6){i=s=o;continue e}a=a.parentNode}}i=i.return}jR(function(){var c=s,f=h1(t),d=[];e:{var p=x3.get(n);if(p!==void 0){var g=v1,v=n;switch(n){case"keypress":if(Fm(t)===0)break e;case"keydown":case"keyup":g=oV;break;case"focusin":v="focus",g=Ry;break;case"focusout":v="blur",g=Ry;break;case"beforeblur":case"afterblur":g=Ry;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=mE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Y5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=uV;break;case m3:case g3:case v3:g=$5;break;case y3:g=hV;break;case"scroll":g=X5;break;case"wheel":g=dV;break;case"copy":case"cut":case"paste":g=J5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=vE}var y=(e&4)!==0,x=!y&&n==="scroll",M=y?p!==null?p+"Capture":null:p;y=[];for(var S=c,_;S!==null;){_=S;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,M!==null&&(w=bf(S,M),w!=null&&y.push(Lf(S,w,_)))),x)break;S=S.return}0<y.length&&(p=new g(p,v,null,t,f),d.push({event:p,listeners:y}))}}if((e&7)===0){e:{if(p=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",p&&t!==h_&&(v=t.relatedTarget||t.fromElement)&&(Pl(v)||v[Co]))break e;if((g||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=t.relatedTarget||t.toElement,g=c,v=v?Pl(v):null,v!==null&&(x=ql(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=c),g!==v)){if(y=mE,w="onMouseLeave",M="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(y=vE,w="onPointerLeave",M="onPointerEnter",S="pointer"),x=g==null?p:Zu(g),_=v==null?p:Zu(v),p=new y(w,S+"leave",g,t,f),p.target=x,p.relatedTarget=_,w=null,Pl(f)===c&&(y=new y(M,S+"enter",v,t,f),y.target=_,y.relatedTarget=x,w=y),x=w,g&&v)t:{for(y=g,M=v,S=0,_=y;_;_=xu(_))S++;for(_=0,w=M;w;w=xu(w))_++;for(;0<S-_;)y=xu(y),S--;for(;0<_-S;)M=xu(M),_--;for(;S--;){if(y===M||M!==null&&y===M.alternate)break t;y=xu(y),M=xu(M)}y=null}else y=null;g!==null&&CE(d,p,g,y,!1),v!==null&&x!==null&&CE(d,x,v,y,!0)}}e:{if(p=c?Zu(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var T=_V;else if(_E(p))if(c3)T=bV;else{T=SV;var E=wV}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(T=MV);if(T&&(T=T(n,c))){u3(d,T,t,f);break e}E&&E(n,p,c),n==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&o_(p,"number",p.value)}switch(E=c?Zu(c):window,n){case"focusin":(_E(E)||E.contentEditable==="true")&&(qu=E,y_=c,cf=null);break;case"focusout":cf=y_=qu=null;break;case"mousedown":x_=!0;break;case"contextmenu":case"mouseup":case"dragend":x_=!1,TE(d,t,f);break;case"selectionchange":if(AV)break;case"keydown":case"keyup":TE(d,t,f)}var R;if(x1)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Xu?a3(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(o3&&t.locale!=="ko"&&(Xu||P!=="onCompositionStart"?P==="onCompositionEnd"&&Xu&&(R=s3()):(ga=f,g1="value"in ga?ga.value:ga.textContent,Xu=!0)),E=tg(c,P),0<E.length&&(P=new gE(P,n,null,t,f),d.push({event:P,listeners:E}),R?P.data=R:(R=l3(t),R!==null&&(P.data=R)))),(R=mV?gV(n,t):vV(n,t))&&(c=tg(c,"onBeforeInput"),0<c.length&&(f=new gE("onBeforeInput","beforeinput",null,t,f),d.push({event:f,listeners:c}),f.data=R))}_3(d,e)})}function Lf(n,e,t){return{instance:n,listener:e,currentTarget:t}}function tg(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=bf(n,t),s!=null&&i.unshift(Lf(n,s,r)),s=bf(n,e),s!=null&&i.push(Lf(n,s,r))),n=n.return}return i}function xu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function CE(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,u=a.alternate,c=a.stateNode;if(u!==null&&u===i)break;a.tag===5&&c!==null&&(a=c,r?(u=bf(t,s),u!=null&&o.unshift(Lf(t,u,a))):r||(u=bf(t,s),u!=null&&o.push(Lf(t,u,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var LV=/\r\n?/g,DV=/\u0000|\uFFFD/g;function RE(n){return(typeof n=="string"?n:""+n).replace(LV,`
`).replace(DV,"")}function Pp(n,e,t){if(e=RE(e),RE(n)!==e&&t)throw Error(we(425))}function ng(){}var __=null;function w_(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var S_=typeof setTimeout=="function"?setTimeout:void 0,IV=typeof clearTimeout=="function"?clearTimeout:void 0,PE=typeof Promise=="function"?Promise:void 0,OV=typeof queueMicrotask=="function"?queueMicrotask:typeof PE!="undefined"?function(n){return PE.resolve(null).then(n).catch(FV)}:S_;function FV(n){setTimeout(function(){throw n})}function Ny(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Af(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Af(e)}function xo(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function LE(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Wc=Math.random().toString(36).slice(2),Is="__reactFiber$"+Wc,Df="__reactProps$"+Wc,Co="__reactContainer$"+Wc,M_="__reactEvents$"+Wc,kV="__reactListeners$"+Wc,NV="__reactHandles$"+Wc;function Pl(n){var e=n[Is];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Co]||t[Is]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=LE(n);n!==null;){if(t=n[Is])return t;n=LE(n)}return e}n=t,t=n.parentNode}return null}function ud(n){return n=n[Is]||n[Co],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Zu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(we(33))}function iv(n){return n[Df]||null}var b_=[],Ku=-1;function Wa(n){return{current:n}}function vn(n){0>Ku||(n.current=b_[Ku],b_[Ku]=null,Ku--)}function ln(n,e){Ku++,b_[Ku]=n.current,n.current=e}var Da={},Ei=Wa(Da),er=Wa(!1),Bl=Da;function gc(n,e){var t=n.type.contextTypes;if(!t)return Da;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function tr(n){return n=n.childContextTypes,n!=null}function ig(){vn(er),vn(Ei)}function DE(n,e,t){if(Ei.current!==Da)throw Error(we(168));ln(Ei,e),ln(er,t)}function S3(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(we(108,w5(n)||"Unknown",r));return Ln({},t,i)}function rg(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Da,Bl=Ei.current,ln(Ei,n),ln(er,er.current),!0}function IE(n,e,t){var i=n.stateNode;if(!i)throw Error(we(169));t?(n=S3(n,e,Bl),i.__reactInternalMemoizedMergedChildContext=n,vn(er),vn(Ei),ln(Ei,n)):vn(er),ln(er,t)}var go=null,rv=!1,zy=!1;function M3(n){go===null?go=[n]:go.push(n)}function zV(n){rv=!0,M3(n)}function ja(){if(!zy&&go!==null){zy=!0;var n=0,e=en;try{var t=go;for(en=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}go=null,rv=!1}catch(r){throw go!==null&&(go=go.slice(n+1)),ZR(f1,ja),r}finally{en=e,zy=!1}}return null}var BV=ko.ReactCurrentBatchConfig;function vs(n,e){if(n&&n.defaultProps){e=Ln({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var sg=Wa(null),og=null,$u=null,w1=null;function S1(){w1=$u=og=null}function M1(n){var e=sg.current;vn(sg),n._currentValue=e}function T_(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function cc(n,e){og=n,w1=$u=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&e)!==0&&(vr=!0),n.firstContext=null)}function es(n){var e=n._currentValue;if(w1!==n)if(n={context:n,memoizedValue:e,next:null},$u===null){if(og===null)throw Error(we(308));$u=n,og.dependencies={lanes:0,firstContext:n}}else $u=$u.next=n;return e}var ks=null,da=!1;function b1(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function b3(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Mo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ba(n,e){var t=n.updateQueue;t!==null&&(t=t.shared,$n!==null&&(n.mode&1)!==0&&(Ut&2)===0?(n=t.interleaved,n===null?(e.next=e,ks===null?ks=[t]:ks.push(t)):(e.next=n.next,n.next=e),t.interleaved=e):(n=t.pending,n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e))}function km(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,d1(n,t)}}function OE(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function ag(n,e,t,i){var r=n.updateQueue;da=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var f=n.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=u))}if(s!==null){var d=r.baseState;o=0,f=c=u=null,a=s;do{var p=a.lane,g=a.eventTime;if((i&p)===p){f!==null&&(f=f.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,y=a;switch(p=e,g=t,y.tag){case 1:if(v=y.payload,typeof v=="function"){d=v.call(g,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,p=typeof v=="function"?v.call(g,d,p):v,p==null)break e;d=Ln({},d,p);break e;case 2:da=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=g,u=d):f=f.next=g,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(1);if(f===null&&(u=d),r.baseState=u,r.firstBaseUpdate=c,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);wc|=o,n.lanes=o,n.memoizedState=d}}function FE(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(we(191,r));r.call(i)}}}var T3=new CR.Component().refs;function E_(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Ln({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var sv={isMounted:function(n){return(n=n._reactInternals)?ql(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=zi(),r=Ea(n),s=Mo(i,r);s.payload=e,t!=null&&(s.callback=t),ba(n,s),e=Kr(n,r,i),e!==null&&km(e,n,r)},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=zi(),r=Ea(n),s=Mo(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),ba(n,s),e=Kr(n,r,i),e!==null&&km(e,n,r)},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=zi(),i=Ea(n),r=Mo(t,i);r.tag=2,e!=null&&(r.callback=e),ba(n,r),e=Kr(n,i,t),e!==null&&km(e,n,i)}};function kE(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Rf(t,i)||!Rf(r,s):!0}function E3(n,e,t){var i=!1,r=Da,s=e.contextType;return typeof s=="object"&&s!==null?s=es(s):(r=tr(e)?Bl:Ei.current,i=e.contextTypes,s=(i=i!=null)?gc(n,r):Da),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sv,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function NE(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&sv.enqueueReplaceState(e,e.state,null)}function A_(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=T3,b1(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=es(s):(s=tr(e)?Bl:Ei.current,r.context=gc(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(E_(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&sv.enqueueReplaceState(r,r.state,null),ag(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}var Qu=[],Ju=0,lg=null,ug=0,Gr=[],Wr=0,Ul=null,_o=1,wo="";function Sl(n,e){Qu[Ju++]=ug,Qu[Ju++]=lg,lg=n,ug=e}function A3(n,e,t){Gr[Wr++]=_o,Gr[Wr++]=wo,Gr[Wr++]=Ul,Ul=n;var i=_o;n=wo;var r=32-ws(i)-1;i&=~(1<<r),t+=1;var s=32-ws(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,_o=1<<32-ws(e)+r|t<<r|i,wo=s+n}else _o=1<<s|t<<r|i,wo=n}function T1(n){n.return!==null&&(Sl(n,1),A3(n,1,0))}function E1(n){for(;n===lg;)lg=Qu[--Ju],Qu[Ju]=null,ug=Qu[--Ju],Qu[Ju]=null;for(;n===Ul;)Ul=Gr[--Wr],Gr[Wr]=null,wo=Gr[--Wr],Gr[Wr]=null,_o=Gr[--Wr],Gr[Wr]=null}var _r=null,Ki=null,Sn=!1,ys=null;function C3(n,e){var t=Xr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function zE(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,_r=n,Ki=xo(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,_r=n,Ki=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ul!==null?{id:_o,overflow:wo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Xr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,_r=n,Ki=null,!0):!1;default:return!1}}function C_(n){return(n.mode&1)!==0&&(n.flags&128)===0}function R_(n){if(Sn){var e=Ki;if(e){var t=e;if(!zE(n,e)){if(C_(n))throw Error(we(418));e=xo(t.nextSibling);var i=_r;e&&zE(n,e)?C3(i,t):(n.flags=n.flags&-4097|2,Sn=!1,_r=n)}}else{if(C_(n))throw Error(we(418));n.flags=n.flags&-4097|2,Sn=!1,_r=n}}}function BE(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;_r=n}function Dh(n){if(n!==_r)return!1;if(!Sn)return BE(n),Sn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!w_(n.type,n.memoizedProps)),e&&(e=Ki)){if(C_(n)){for(n=Ki;n;)n=xo(n.nextSibling);throw Error(we(418))}for(;e;)C3(n,e),e=xo(e.nextSibling)}if(BE(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(we(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Ki=xo(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Ki=null}}else Ki=_r?xo(n.stateNode.nextSibling):null;return!0}function vc(){Ki=_r=null,Sn=!1}function A1(n){ys===null?ys=[n]:ys.push(n)}function Ih(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(we(309));var i=t.stateNode}if(!i)throw Error(we(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===T3&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(we(284));if(!t._owner)throw Error(we(290,n))}return n}function Lp(n,e){throw n=Object.prototype.toString.call(e),Error(we(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function UE(n){var e=n._init;return e(n._payload)}function R3(n){function e(M,S){if(n){var _=M.deletions;_===null?(M.deletions=[S],M.flags|=16):_.push(S)}}function t(M,S){if(!n)return null;for(;S!==null;)e(M,S),S=S.sibling;return null}function i(M,S){for(M=new Map;S!==null;)S.key!==null?M.set(S.key,S):M.set(S.index,S),S=S.sibling;return M}function r(M,S){return M=Ia(M,S),M.index=0,M.sibling=null,M}function s(M,S,_){return M.index=_,n?(_=M.alternate,_!==null?(_=_.index,_<S?(M.flags|=2,S):_):(M.flags|=2,S)):(M.flags|=1048576,S)}function o(M){return n&&M.alternate===null&&(M.flags|=2),M}function a(M,S,_,w){return S===null||S.tag!==6?(S=Wy(_,M.mode,w),S.return=M,S):(S=r(S,_),S.return=M,S)}function u(M,S,_,w){var T=_.type;return T===ju?f(M,S,_.props.children,w,_.key):S!==null&&(S.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===fa&&UE(T)===S.type)?(w=r(S,_.props),w.ref=Ih(M,S,_),w.return=M,w):(w=Vm(_.type,_.key,_.props,null,M.mode,w),w.ref=Ih(M,S,_),w.return=M,w)}function c(M,S,_,w){return S===null||S.tag!==4||S.stateNode.containerInfo!==_.containerInfo||S.stateNode.implementation!==_.implementation?(S=jy(_,M.mode,w),S.return=M,S):(S=r(S,_.children||[]),S.return=M,S)}function f(M,S,_,w,T){return S===null||S.tag!==7?(S=kl(_,M.mode,w,T),S.return=M,S):(S=r(S,_),S.return=M,S)}function d(M,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Wy(""+S,M.mode,_),S.return=M,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case wp:return _=Vm(S.type,S.key,S.props,null,M.mode,_),_.ref=Ih(M,null,S),_.return=M,_;case Wu:return S=jy(S,M.mode,_),S.return=M,S;case fa:var w=S._init;return d(M,w(S._payload),_)}if(ef(S)||Ah(S))return S=kl(S,M.mode,_,null),S.return=M,S;Lp(M,S)}return null}function p(M,S,_,w){var T=S!==null?S.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return T!==null?null:a(M,S,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case wp:return _.key===T?u(M,S,_,w):null;case Wu:return _.key===T?c(M,S,_,w):null;case fa:return T=_._init,p(M,S,T(_._payload),w)}if(ef(_)||Ah(_))return T!==null?null:f(M,S,_,w,null);Lp(M,_)}return null}function g(M,S,_,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return M=M.get(_)||null,a(S,M,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case wp:return M=M.get(w.key===null?_:w.key)||null,u(S,M,w,T);case Wu:return M=M.get(w.key===null?_:w.key)||null,c(S,M,w,T);case fa:var E=w._init;return g(M,S,_,E(w._payload),T)}if(ef(w)||Ah(w))return M=M.get(_)||null,f(S,M,w,T,null);Lp(S,w)}return null}function v(M,S,_,w){for(var T=null,E=null,R=S,P=S=0,V=null;R!==null&&P<_.length;P++){R.index>P?(V=R,R=null):V=R.sibling;var F=p(M,R,_[P],w);if(F===null){R===null&&(R=V);break}n&&R&&F.alternate===null&&e(M,R),S=s(F,S,P),E===null?T=F:E.sibling=F,E=F,R=V}if(P===_.length)return t(M,R),Sn&&Sl(M,P),T;if(R===null){for(;P<_.length;P++)R=d(M,_[P],w),R!==null&&(S=s(R,S,P),E===null?T=R:E.sibling=R,E=R);return Sn&&Sl(M,P),T}for(R=i(M,R);P<_.length;P++)V=g(R,M,P,_[P],w),V!==null&&(n&&V.alternate!==null&&R.delete(V.key===null?P:V.key),S=s(V,S,P),E===null?T=V:E.sibling=V,E=V);return n&&R.forEach(function(C){return e(M,C)}),Sn&&Sl(M,P),T}function y(M,S,_,w){var T=Ah(_);if(typeof T!="function")throw Error(we(150));if(_=T.call(_),_==null)throw Error(we(151));for(var E=T=null,R=S,P=S=0,V=null,F=_.next();R!==null&&!F.done;P++,F=_.next()){R.index>P?(V=R,R=null):V=R.sibling;var C=p(M,R,F.value,w);if(C===null){R===null&&(R=V);break}n&&R&&C.alternate===null&&e(M,R),S=s(C,S,P),E===null?T=C:E.sibling=C,E=C,R=V}if(F.done)return t(M,R),Sn&&Sl(M,P),T;if(R===null){for(;!F.done;P++,F=_.next())F=d(M,F.value,w),F!==null&&(S=s(F,S,P),E===null?T=F:E.sibling=F,E=F);return Sn&&Sl(M,P),T}for(R=i(M,R);!F.done;P++,F=_.next())F=g(R,M,P,F.value,w),F!==null&&(n&&F.alternate!==null&&R.delete(F.key===null?P:F.key),S=s(F,S,P),E===null?T=F:E.sibling=F,E=F);return n&&R.forEach(function(N){return e(M,N)}),Sn&&Sl(M,P),T}function x(M,S,_,w){if(typeof _=="object"&&_!==null&&_.type===ju&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case wp:e:{for(var T=_.key,E=S;E!==null;){if(E.key===T){if(T=_.type,T===ju){if(E.tag===7){t(M,E.sibling),S=r(E,_.props.children),S.return=M,M=S;break e}}else if(E.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===fa&&UE(T)===E.type){t(M,E.sibling),S=r(E,_.props),S.ref=Ih(M,E,_),S.return=M,M=S;break e}t(M,E);break}else e(M,E);E=E.sibling}_.type===ju?(S=kl(_.props.children,M.mode,w,_.key),S.return=M,M=S):(w=Vm(_.type,_.key,_.props,null,M.mode,w),w.ref=Ih(M,S,_),w.return=M,M=w)}return o(M);case Wu:e:{for(E=_.key;S!==null;){if(S.key===E)if(S.tag===4&&S.stateNode.containerInfo===_.containerInfo&&S.stateNode.implementation===_.implementation){t(M,S.sibling),S=r(S,_.children||[]),S.return=M,M=S;break e}else{t(M,S);break}else e(M,S);S=S.sibling}S=jy(_,M.mode,w),S.return=M,M=S}return o(M);case fa:return E=_._init,x(M,S,E(_._payload),w)}if(ef(_))return v(M,S,_,w);if(Ah(_))return y(M,S,_,w);Lp(M,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,S!==null&&S.tag===6?(t(M,S.sibling),S=r(S,_),S.return=M,M=S):(t(M,S),S=Wy(_,M.mode,w),S.return=M,M=S),o(M)):t(M,S)}return x}var yc=R3(!0),P3=R3(!1),cd={},zs=Wa(cd),If=Wa(cd),Of=Wa(cd);function Ll(n){if(n===cd)throw Error(we(174));return n}function C1(n,e){switch(ln(Of,e),ln(If,n),ln(zs,cd),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:l_(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=l_(e,n)}vn(zs),ln(zs,e)}function xc(){vn(zs),vn(If),vn(Of)}function L3(n){Ll(Of.current);var e=Ll(zs.current),t=l_(e,n.type);e!==t&&(ln(If,n),ln(zs,t))}function R1(n){If.current===n&&(vn(zs),vn(If))}var En=Wa(0);function cg(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var By=[];function P1(){for(var n=0;n<By.length;n++)By[n]._workInProgressVersionPrimary=null;By.length=0}var Nm=ko.ReactCurrentDispatcher,Yr=ko.ReactCurrentBatchConfig,_c=0,kn=null,Si=null,ai=null,hg=!1,hf=!1,Ff=0,UV=0;function xi(){throw Error(we(321))}function L1(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Vs(n[t],e[t]))return!1;return!0}function D1(n,e,t,i,r,s){if(_c=s,kn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nm.current=n===null||n.memoizedState===null?WV:jV,n=t(i,r),hf){s=0;do{if(hf=!1,Ff=0,25<=s)throw Error(we(301));s+=1,ai=Si=null,e.updateQueue=null,Nm.current=XV,n=t(i,r)}while(hf)}if(Nm.current=fg,e=Si!==null&&Si.next!==null,_c=0,ai=Si=kn=null,hg=!1,e)throw Error(we(300));return n}function I1(){var n=Ff!==0;return Ff=0,n}function po(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ai===null?kn.memoizedState=ai=n:ai=ai.next=n,ai}function Xs(){if(Si===null){var n=kn.alternate;n=n!==null?n.memoizedState:null}else n=Si.next;var e=ai===null?kn.memoizedState:ai.next;if(e!==null)ai=e,Si=n;else{if(n===null)throw Error(we(310));Si=n,n={memoizedState:Si.memoizedState,baseState:Si.baseState,baseQueue:Si.baseQueue,queue:Si.queue,next:null},ai===null?kn.memoizedState=ai=n:ai=ai.next=n}return ai}function Ol(n,e){return typeof e=="function"?e(n):e}function Dp(n){var e=Xs(),t=e.queue;if(t===null)throw Error(we(311));t.lastRenderedReducer=n;var i=Si,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,u=null,c=s;do{var f=c.lane;if((_c&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=d,o=i):u=u.next=d,kn.lanes|=f,wc|=f}c=c.next}while(c!==null&&c!==s);u===null?o=i:u.next=a,Vs(i,e.memoizedState)||(vr=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=u,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,kn.lanes|=s,wc|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Ip(n){var e=Xs(),t=e.queue;if(t===null)throw Error(we(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);Vs(s,e.memoizedState)||(vr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function D3(){}function I3(n,e){var t=kn,i=Xs(),r=e(),s=!Vs(i.memoizedState,r);if(s&&(i.memoizedState=r,vr=!0),i=i.queue,Nf(k3.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||ai!==null&&ai.memoizedState.tag&1){if(t.flags|=2048,kf(9,F3.bind(null,t,i,r,e),void 0,null),$n===null)throw Error(we(349));(_c&30)!==0||O3(t,e,r)}return r}function O3(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=kn.updateQueue,e===null?(e={lastEffect:null,stores:null},kn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function F3(n,e,t,i){e.value=t,e.getSnapshot=i,N3(e)&&Kr(n,1,-1)}function k3(n,e,t){return t(function(){N3(e)&&Kr(n,1,-1)})}function N3(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Vs(n,t)}catch{return!0}}function Uy(n){var e=po();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ol,lastRenderedState:n},e.queue=n,n=n.dispatch=GV.bind(null,kn,n),[e.memoizedState,n]}function kf(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=kn.updateQueue,e===null?(e={lastEffect:null,stores:null},kn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function z3(){return Xs().memoizedState}function zm(n,e,t,i){var r=po();kn.flags|=n,r.memoizedState=kf(1|e,t,void 0,i===void 0?null:i)}function ov(n,e,t,i){var r=Xs();i=i===void 0?null:i;var s=void 0;if(Si!==null){var o=Si.memoizedState;if(s=o.destroy,i!==null&&L1(i,o.deps)){r.memoizedState=kf(e,t,s,i);return}}kn.flags|=n,r.memoizedState=kf(1|e,t,s,i)}function Vy(n,e){return zm(8390656,8,n,e)}function Nf(n,e){return ov(2048,8,n,e)}function B3(n,e){return ov(4,2,n,e)}function U3(n,e){return ov(4,4,n,e)}function V3(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function H3(n,e,t){return t=t!=null?t.concat([n]):null,ov(4,4,V3.bind(null,e,n),t)}function O1(){}function G3(n,e){var t=Xs();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&L1(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function W3(n,e){var t=Xs();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&L1(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function VV(n,e){var t=en;en=t!==0&&4>t?t:4,n(!0);var i=Yr.transition;Yr.transition={};try{n(!1),e()}finally{en=t,Yr.transition=i}}function j3(){return Xs().memoizedState}function HV(n,e,t){var i=Ea(n);t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},X3(n)?q3(e,t):(Y3(n,e,t),t=zi(),n=Kr(n,i,t),n!==null&&Z3(n,e,i))}function GV(n,e,t){var i=Ea(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(X3(n))q3(e,r);else{Y3(n,e,r);var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Vs(a,o))return}catch{}finally{}t=zi(),n=Kr(n,i,t),n!==null&&Z3(n,e,i)}}function X3(n){var e=n.alternate;return n===kn||e!==null&&e===kn}function q3(n,e){hf=hg=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Y3(n,e,t){$n!==null&&(n.mode&1)!==0&&(Ut&2)===0?(n=e.interleaved,n===null?(t.next=t,ks===null?ks=[e]:ks.push(e)):(t.next=n.next,n.next=t),e.interleaved=t):(n=e.pending,n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t)}function Z3(n,e,t){if((t&4194240)!==0){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,d1(n,t)}}var fg={readContext:es,useCallback:xi,useContext:xi,useEffect:xi,useImperativeHandle:xi,useInsertionEffect:xi,useLayoutEffect:xi,useMemo:xi,useReducer:xi,useRef:xi,useState:xi,useDebugValue:xi,useDeferredValue:xi,useTransition:xi,useMutableSource:xi,useSyncExternalStore:xi,useId:xi,unstable_isNewReconciler:!1},WV={readContext:es,useCallback:function(n,e){return po().memoizedState=[n,e===void 0?null:e],n},useContext:es,useEffect:Vy,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,zm(4194308,4,V3.bind(null,e,n),t)},useLayoutEffect:function(n,e){return zm(4194308,4,n,e)},useInsertionEffect:function(n,e){return zm(4,2,n,e)},useMemo:function(n,e){var t=po();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=po();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=HV.bind(null,kn,n),[i.memoizedState,n]},useRef:function(n){var e=po();return n={current:n},e.memoizedState=n},useState:Uy,useDebugValue:O1,useDeferredValue:function(n){var e=Uy(n),t=e[0],i=e[1];return Vy(function(){var r=Yr.transition;Yr.transition={};try{i(n)}finally{Yr.transition=r}},[n]),t},useTransition:function(){var n=Uy(!1),e=n[0];return n=VV.bind(null,n[1]),po().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=kn,r=po();if(Sn){if(t===void 0)throw Error(we(407));t=t()}else{if(t=e(),$n===null)throw Error(we(349));(_c&30)!==0||O3(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,Vy(k3.bind(null,i,s,n),[n]),i.flags|=2048,kf(9,F3.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=po(),e=$n.identifierPrefix;if(Sn){var t=wo,i=_o;t=(i&~(1<<32-ws(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Ff++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=UV++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},jV={readContext:es,useCallback:G3,useContext:es,useEffect:Nf,useImperativeHandle:H3,useInsertionEffect:B3,useLayoutEffect:U3,useMemo:W3,useReducer:Dp,useRef:z3,useState:function(){return Dp(Ol)},useDebugValue:O1,useDeferredValue:function(n){var e=Dp(Ol),t=e[0],i=e[1];return Nf(function(){var r=Yr.transition;Yr.transition={};try{i(n)}finally{Yr.transition=r}},[n]),t},useTransition:function(){var n=Dp(Ol)[0],e=Xs().memoizedState;return[n,e]},useMutableSource:D3,useSyncExternalStore:I3,useId:j3,unstable_isNewReconciler:!1},XV={readContext:es,useCallback:G3,useContext:es,useEffect:Nf,useImperativeHandle:H3,useInsertionEffect:B3,useLayoutEffect:U3,useMemo:W3,useReducer:Ip,useRef:z3,useState:function(){return Ip(Ol)},useDebugValue:O1,useDeferredValue:function(n){var e=Ip(Ol),t=e[0],i=e[1];return Nf(function(){var r=Yr.transition;Yr.transition={};try{i(n)}finally{Yr.transition=r}},[n]),t},useTransition:function(){var n=Ip(Ol)[0],e=Xs().memoizedState;return[n,e]},useMutableSource:D3,useSyncExternalStore:I3,useId:j3,unstable_isNewReconciler:!1};function F1(n,e){try{var t="",i=e;do t+=_5(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r}}function P_(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var qV=typeof WeakMap=="function"?WeakMap:Map;function K3(n,e,t){t=Mo(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){mg||(mg=!0,B_=i),P_(n,e)},t}function $3(n,e,t){t=Mo(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){P_(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){P_(n,e),typeof i!="function"&&(Ta===null?Ta=new Set([this]):Ta.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function VE(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new qV;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=aH.bind(null,n,e,t),e.then(n,n))}function HE(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function GE(n,e,t,i,r){return(n.mode&1)===0?(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Mo(-1,1),e.tag=2,ba(t,e))),t.lanes|=1),n):(n.flags|=65536,n.lanes=r,n)}var Q3,L_,J3,eP;Q3=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};L_=function(){};J3=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Ll(zs.current);var s=null;switch(t){case"input":r=r_(n,r),i=r_(n,i),s=[];break;case"select":r=Ln({},r,{value:void 0}),i=Ln({},i,{value:void 0}),s=[];break;case"textarea":r=a_(n,r),i=a_(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=ng)}u_(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Sf.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var u=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(t||(t={}),t[o]=u[o])}else t||(s||(s=[]),s.push(c,t)),t=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Sf.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&mn("scroll",n),s||a===u||(s=[])):(s=s||[]).push(c,u))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};eP=function(n,e,t,i){t!==i&&(e.flags|=4)};function Oh(n,e){if(!Sn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function _i(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function YV(n,e,t){var i=e.pendingProps;switch(E1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _i(e),null;case 1:return tr(e.type)&&ig(),_i(e),null;case 3:return i=e.stateNode,xc(),vn(er),vn(Ei),P1(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Dh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,ys!==null&&(H_(ys),ys=null))),L_(n,e),_i(e),null;case 5:R1(e);var r=Ll(Of.current);if(t=e.type,n!==null&&e.stateNode!=null)J3(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(we(166));return _i(e),null}if(n=Ll(zs.current),Dh(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Is]=e,i[Df]=s,n=(e.mode&1)!==0,t){case"dialog":mn("cancel",i),mn("close",i);break;case"iframe":case"object":case"embed":mn("load",i);break;case"video":case"audio":for(r=0;r<nf.length;r++)mn(nf[r],i);break;case"source":mn("error",i);break;case"img":case"image":case"link":mn("error",i),mn("load",i);break;case"details":mn("toggle",i);break;case"input":sE(i,s),mn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},mn("invalid",i);break;case"textarea":aE(i,s),mn("invalid",i)}u_(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(Pp(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(Pp(i.textContent,a,n),r=["children",""+a]):Sf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&mn("scroll",i)}switch(t){case"input":Sp(i),oE(i,s,!0);break;case"textarea":Sp(i),lE(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=ng)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=NR(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Is]=e,n[Df]=i,Q3(n,e,!1,!1),e.stateNode=n;e:{switch(o=c_(t,i),t){case"dialog":mn("cancel",n),mn("close",n),r=i;break;case"iframe":case"object":case"embed":mn("load",n),r=i;break;case"video":case"audio":for(r=0;r<nf.length;r++)mn(nf[r],n);r=i;break;case"source":mn("error",n),r=i;break;case"img":case"image":case"link":mn("error",n),mn("load",n),r=i;break;case"details":mn("toggle",n),r=i;break;case"input":sE(n,i),r=r_(n,i),mn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=Ln({},i,{value:void 0}),mn("invalid",n);break;case"textarea":aE(n,i),r=a_(n,i),mn("invalid",n);break;default:r=i}u_(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?UR(n,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&zR(n,u)):s==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&Mf(n,u):typeof u=="number"&&Mf(n,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Sf.hasOwnProperty(s)?u!=null&&s==="onScroll"&&mn("scroll",n):u!=null&&a1(n,s,u,o))}switch(t){case"input":Sp(n),oE(n,i,!1);break;case"textarea":Sp(n),lE(n);break;case"option":i.value!=null&&n.setAttribute("value",""+La(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?oc(n,!!i.multiple,s,!1):i.defaultValue!=null&&oc(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=ng)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _i(e),null;case 6:if(n&&e.stateNode!=null)eP(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(we(166));if(t=Ll(Of.current),Ll(zs.current),Dh(e)){if(i=e.stateNode,t=e.memoizedProps,i[Is]=e,(s=i.nodeValue!==t)&&(n=_r,n!==null))switch(o=(n.mode&1)!==0,n.tag){case 3:Pp(i.nodeValue,t,o);break;case 5:n.memoizedProps[void 0]!==!0&&Pp(i.nodeValue,t,o)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Is]=e,e.stateNode=i}return _i(e),null;case 13:if(vn(En),i=e.memoizedState,Sn&&Ki!==null&&(e.mode&1)!==0&&(e.flags&128)===0){for(i=Ki;i;)i=xo(i.nextSibling);return vc(),e.flags|=98560,e}if(i!==null&&i.dehydrated!==null){if(i=Dh(e),n===null){if(!i)throw Error(we(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(we(317));i[Is]=e}else vc(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;return _i(e),null}return ys!==null&&(H_(ys),ys=null),(e.flags&128)!==0?(e.lanes=t,e):(i=i!==null,t=!1,n===null?Dh(e):t=n.memoizedState!==null,i&&!t&&(e.child.flags|=8192,(e.mode&1)!==0&&(n===null||(En.current&1)!==0?ii===0&&(ii=3):V1())),e.updateQueue!==null&&(e.flags|=4),_i(e),null);case 4:return xc(),L_(n,e),n===null&&Pf(e.stateNode.containerInfo),_i(e),null;case 10:return M1(e.type._context),_i(e),null;case 17:return tr(e.type)&&ig(),_i(e),null;case 19:if(vn(En),s=e.memoizedState,s===null)return _i(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Oh(s,!1);else{if(ii!==0||n!==null&&(n.flags&128)!==0)for(n=e.child;n!==null;){if(o=cg(n),o!==null){for(e.flags|=128,Oh(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ln(En,En.current&1|2),e.child}n=n.sibling}s.tail!==null&&Wn()>Sc&&(e.flags|=128,i=!0,Oh(s,!1),e.lanes=4194304)}else{if(!i)if(n=cg(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Oh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Sn)return _i(e),null}else 2*Wn()-s.renderingStartTime>Sc&&t!==1073741824&&(e.flags|=128,i=!0,Oh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Wn(),e.sibling=null,t=En.current,ln(En,i?t&1|2:t&1),e):(_i(e),null);case 22:case 23:return U1(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&(e.mode&1)!==0?(gr&1073741824)!==0&&(_i(e),e.subtreeFlags&6&&(e.flags|=8192)):_i(e),null;case 24:return null;case 25:return null}throw Error(we(156,e.tag))}var ZV=ko.ReactCurrentOwner,vr=!1;function Fi(n,e,t,i){e.child=n===null?P3(e,null,t,i):yc(e,n.child,t,i)}function WE(n,e,t,i,r){t=t.render;var s=e.ref;return cc(e,r),i=D1(n,e,t,i,s,r),t=I1(),n!==null&&!vr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Ro(n,e,r)):(Sn&&t&&T1(e),e.flags|=1,Fi(n,e,i,r),e.child)}function jE(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!H1(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,tP(n,e,s,i,r)):(n=Vm(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,(n.lanes&r)===0){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Rf,t(o,i)&&n.ref===e.ref)return Ro(n,e,r)}return e.flags|=1,n=Ia(s,i),n.ref=e.ref,n.return=e,e.child=n}function tP(n,e,t,i,r){if(n!==null&&Rf(n.memoizedProps,i)&&n.ref===e.ref)if(vr=!1,(n.lanes&r)!==0)(n.flags&131072)!==0&&(vr=!0);else return e.lanes=n.lanes,Ro(n,e,r);return D_(n,e,t,i,r)}function nP(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null},ln(ec,gr),gr|=t;else if((t&1073741824)!==0)e.memoizedState={baseLanes:0,cachePool:null},i=s!==null?s.baseLanes:t,ln(ec,gr),gr|=i;else return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null},e.updateQueue=null,ln(ec,gr),gr|=n,null;else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,ln(ec,gr),gr|=i;return Fi(n,e,r,t),e.child}function iP(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function D_(n,e,t,i,r){var s=tr(t)?Bl:Ei.current;return s=gc(e,s),cc(e,r),t=D1(n,e,t,i,s,r),i=I1(),n!==null&&!vr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Ro(n,e,r)):(Sn&&i&&T1(e),e.flags|=1,Fi(n,e,t,r),e.child)}function XE(n,e,t,i,r){if(tr(t)){var s=!0;rg(e)}else s=!1;if(cc(e,r),e.stateNode===null)n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),E3(e,t,i),A_(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=es(c):(c=tr(t)?Bl:Ei.current,c=gc(e,c));var f=t.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||u!==c)&&NE(e,o,i,c),da=!1;var p=e.memoizedState;o.state=p,ag(e,i,o,r),u=e.memoizedState,a!==i||p!==u||er.current||da?(typeof f=="function"&&(E_(e,t,f,i),u=e.memoizedState),(a=da||kE(e,t,a,i,p,u,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),o.props=i,o.state=u,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,b3(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:vs(e.type,a),o.props=c,d=e.pendingProps,p=o.context,u=t.contextType,typeof u=="object"&&u!==null?u=es(u):(u=tr(t)?Bl:Ei.current,u=gc(e,u));var g=t.getDerivedStateFromProps;(f=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==u)&&NE(e,o,i,u),da=!1,p=e.memoizedState,o.state=p,ag(e,i,o,r);var v=e.memoizedState;a!==d||p!==v||er.current||da?(typeof g=="function"&&(E_(e,t,g,i),v=e.memoizedState),(c=da||kE(e,t,c,i,p,v,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=u,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return I_(n,e,t,i,s,r)}function I_(n,e,t,i,r,s){iP(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&IE(e,t,!1),Ro(n,e,s);i=e.stateNode,ZV.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=yc(e,n.child,null,s),e.child=yc(e,null,a,s)):Fi(n,e,a,s),e.memoizedState=i.state,r&&IE(e,t,!0),e.child}function rP(n){var e=n.stateNode;e.pendingContext?DE(n,e.pendingContext,e.pendingContext!==e.context):e.context&&DE(n,e.context,!1),C1(n,e.containerInfo)}function qE(n,e,t,i,r){return vc(),A1(r),e.flags|=256,Fi(n,e,t,i),e.child}var Op={dehydrated:null,treeContext:null,retryLane:0};function Fp(n){return{baseLanes:n,cachePool:null}}function sP(n,e,t){var i=e.pendingProps,r=En.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),ln(En,r&1),n===null)return R_(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((e.mode&1)===0?e.lanes=1:n.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(r=i.children,n=i.fallback,s?(i=e.mode,s=e.child,r={mode:"hidden",children:r},(i&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=r):s=yg(r,i,0,null),n=kl(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Fp(t),e.memoizedState=Op,n):O_(e,r));if(r=n.memoizedState,r!==null){if(a=r.dehydrated,a!==null){if(o)return e.flags&256?(e.flags&=-257,kp(n,e,t,Error(we(422)))):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=yg({mode:"visible",children:i.children},r,0,null),s=kl(s,r,t,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,(e.mode&1)!==0&&yc(e,n.child,null,t),e.child.memoizedState=Fp(t),e.memoizedState=Op,s);if((e.mode&1)===0)e=kp(n,e,t,null);else if(a.data==="$!")e=kp(n,e,t,Error(we(419)));else if(i=(t&n.childLanes)!==0,vr||i){if(i=$n,i!==null){switch(t&-t){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}i=(s&(i.suspendedLanes|t))!==0?0:s,i!==0&&i!==r.retryLane&&(r.retryLane=i,Kr(n,i,-1))}V1(),e=kp(n,e,t,Error(we(421)))}else a.data==="$?"?(e.flags|=128,e.child=n.child,e=lH.bind(null,n),a._reactRetry=e,e=null):(t=r.treeContext,Ki=xo(a.nextSibling),_r=e,Sn=!0,ys=null,t!==null&&(Gr[Wr++]=_o,Gr[Wr++]=wo,Gr[Wr++]=Ul,_o=t.id,wo=t.overflow,Ul=e),e=O_(e,e.pendingProps.children),e.flags|=4096);return e}return s?(i=ZE(n,e,i.children,i.fallback,t),s=e.child,r=n.child.memoizedState,s.memoizedState=r===null?Fp(t):{baseLanes:r.baseLanes|t,cachePool:null},s.childLanes=n.childLanes&~t,e.memoizedState=Op,i):(t=YE(n,e,i.children,t),e.memoizedState=null,t)}return s?(i=ZE(n,e,i.children,i.fallback,t),s=e.child,r=n.child.memoizedState,s.memoizedState=r===null?Fp(t):{baseLanes:r.baseLanes|t,cachePool:null},s.childLanes=n.childLanes&~t,e.memoizedState=Op,i):(t=YE(n,e,i.children,t),e.memoizedState=null,t)}function O_(n,e){return e=yg({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function YE(n,e,t,i){var r=n.child;return n=r.sibling,t=Ia(r,{mode:"visible",children:t}),(e.mode&1)===0&&(t.lanes=i),t.return=e,t.sibling=null,n!==null&&(i=e.deletions,i===null?(e.deletions=[n],e.flags|=16):i.push(n)),e.child=t}function ZE(n,e,t,i,r){var s=e.mode;n=n.child;var o=n.sibling,a={mode:"hidden",children:t};return(s&1)===0&&e.child!==n?(t=e.child,t.childLanes=0,t.pendingProps=a,e.deletions=null):(t=Ia(n,a),t.subtreeFlags=n.subtreeFlags&14680064),o!==null?i=Ia(o,i):(i=kl(i,s,r,null),i.flags|=2),i.return=e,t.return=e,t.sibling=i,e.child=t,i}function kp(n,e,t,i){return i!==null&&A1(i),yc(e,n.child,null,t),n=O_(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function KE(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),T_(n.return,e,t)}function Hy(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function oP(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Fi(n,e,i.children,t),i=En.current,(i&2)!==0)i=i&1|2,e.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&KE(n,t,e);else if(n.tag===19)KE(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(ln(En,i),(e.mode&1)===0)e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&cg(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Hy(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&cg(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Hy(e,!0,t,null,s);break;case"together":Hy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ro(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),wc|=e.lanes,(t&e.childLanes)===0)return null;if(n!==null&&e.child!==n.child)throw Error(we(153));if(e.child!==null){for(n=e.child,t=Ia(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ia(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function KV(n,e,t){switch(e.tag){case 3:rP(e),vc();break;case 5:L3(e);break;case 1:tr(e.type)&&rg(e);break;case 4:C1(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;ln(sg,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ln(En,En.current&1),e.flags|=128,null):(t&e.child.childLanes)!==0?sP(n,e,t):(ln(En,En.current&1),n=Ro(n,e,t),n!==null?n.sibling:null);ln(En,En.current&1);break;case 19:if(i=(t&e.childLanes)!==0,(n.flags&128)!==0){if(i)return oP(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ln(En,En.current),i)break;return null;case 22:case 23:return e.lanes=0,nP(n,e,t)}return Ro(n,e,t)}function $V(n,e){switch(E1(e),e.tag){case 1:return tr(e.type)&&ig(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return xc(),vn(er),vn(Ei),P1(),n=e.flags,(n&65536)!==0&&(n&128)===0?(e.flags=n&-65537|128,e):null;case 5:return R1(e),null;case 13:if(vn(En),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(we(340));vc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return vn(En),null;case 4:return xc(),null;case 10:return M1(e.type._context),null;case 22:case 23:return U1(),null;case 24:return null;default:return null}}var Np=!1,Dl=!1,QV=typeof WeakSet=="function"?WeakSet:Set,ke=null;function dg(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){$i(n,e,i)}else t.current=null}function F_(n,e,t){try{t()}catch(i){$i(n,e,i)}}var $E=!1;function JV(n,e){if(n=d3(),_1(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,u=-1,c=0,f=0,d=n,p=null;t:for(;;){for(var g;d!==t||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(u=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===n)break t;if(p===t&&++c===r&&(a=o),p===s&&++f===i&&(u=o),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}t=a===-1||u===-1?null:{start:a,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(__={focusedElem:n,selectionRange:t},ke=e;ke!==null;)if(e=ke,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ke=n;else for(;ke!==null;){e=ke;try{var v=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,x=v.memoizedState,M=e.stateNode,S=M.getSnapshotBeforeUpdate(e.elementType===e.type?y:vs(e.type,y),x);M.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var _=e.stateNode.containerInfo;if(_.nodeType===1)_.textContent="";else if(_.nodeType===9){var w=_.body;w!=null&&(w.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(T){$i(e,e.return,T)}if(n=e.sibling,n!==null){n.return=e.return,ke=n;break}ke=e.return}return v=$E,$E=!1,v}function zf(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&F_(e,t,s)}r=r.next}while(r!==i)}}function av(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function k_(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function QE(n,e,t){if(Ns&&typeof Ns.onCommitFiberUnmount=="function")try{Ns.onCommitFiberUnmount(Jg,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:if(n=e.updateQueue,n!==null&&(n=n.lastEffect,n!==null)){var i=n=n.next;do{var r=i,s=r.destroy;r=r.tag,s!==void 0&&((r&2)!==0||(r&4)!==0)&&F_(e,t,s),i=i.next}while(i!==n)}break;case 1:if(dg(e,t),n=e.stateNode,typeof n.componentWillUnmount=="function")try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(o){$i(e,t,o)}break;case 5:dg(e,t);break;case 4:uP(n,e,t)}}function aP(n){var e=n.alternate;e!==null&&(n.alternate=null,aP(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Is],delete e[Df],delete e[M_],delete e[kV],delete e[NV])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function lP(n){return n.tag===5||n.tag===3||n.tag===4}function JE(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||lP(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function eA(n){e:{for(var e=n.return;e!==null;){if(lP(e))break e;e=e.return}throw Error(we(160))}var t=e;switch(t.tag){case 5:e=t.stateNode,t.flags&32&&(Mf(e,""),t.flags&=-33),t=JE(n),z_(n,t,e);break;case 3:case 4:e=t.stateNode.containerInfo,t=JE(n),N_(n,t,e);break;default:throw Error(we(161))}}function N_(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=ng));else if(i!==4&&(n=n.child,n!==null))for(N_(n,e,t),n=n.sibling;n!==null;)N_(n,e,t),n=n.sibling}function z_(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(z_(n,e,t),n=n.sibling;n!==null;)z_(n,e,t),n=n.sibling}function uP(n,e,t){for(var i=e,r=!1,s,o;;){if(!r){r=i.return;e:for(;;){if(r===null)throw Error(we(160));switch(s=r.stateNode,r.tag){case 5:o=!1;break e;case 3:s=s.containerInfo,o=!0;break e;case 4:s=s.containerInfo,o=!0;break e}r=r.return}r=!0}if(i.tag===5||i.tag===6){e:for(var a=n,u=i,c=t,f=u;;)if(QE(a,f,c),f.child!==null&&f.tag!==4)f.child.return=f,f=f.child;else{if(f===u)break e;for(;f.sibling===null;){if(f.return===null||f.return===u)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}o?(a=s,u=i.stateNode,a.nodeType===8?a.parentNode.removeChild(u):a.removeChild(u)):s.removeChild(i.stateNode)}else if(i.tag===18)o?(a=s,u=i.stateNode,a.nodeType===8?Ny(a.parentNode,u):a.nodeType===1&&Ny(a,u),Af(a)):Ny(s,i.stateNode);else if(i.tag===4){if(i.child!==null){s=i.stateNode.containerInfo,o=!0,i.child.return=i,i=i.child;continue}}else if(QE(n,i,t),i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return,i.tag===4&&(r=!1)}i.sibling.return=i.return,i=i.sibling}}function Gy(n,e){switch(e.tag){case 0:case 11:case 14:case 15:zf(3,e,e.return),av(3,e),zf(5,e,e.return);return;case 1:return;case 5:var t=e.stateNode;if(t!=null){var i=e.memoizedProps,r=n!==null?n.memoizedProps:i;n=e.type;var s=e.updateQueue;if(e.updateQueue=null,s!==null){for(n==="input"&&i.type==="radio"&&i.name!=null&&FR(t,i),c_(n,r),e=c_(n,i),r=0;r<s.length;r+=2){var o=s[r],a=s[r+1];o==="style"?UR(t,a):o==="dangerouslySetInnerHTML"?zR(t,a):o==="children"?Mf(t,a):a1(t,o,a,e)}switch(n){case"input":s_(t,i);break;case"textarea":kR(t,i);break;case"select":n=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!i.multiple,s=i.value,s!=null?oc(t,!!i.multiple,s,!1):n!==!!i.multiple&&(i.defaultValue!=null?oc(t,!!i.multiple,i.defaultValue,!0):oc(t,!!i.multiple,i.multiple?[]:"",!1))}t[Df]=i}}return;case 6:if(e.stateNode===null)throw Error(we(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:n!==null&&n.memoizedState.isDehydrated&&Af(e.stateNode.containerInfo);return;case 12:return;case 13:tA(e);return;case 19:tA(e);return;case 17:return}throw Error(we(163))}function tA(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new QV),e.forEach(function(i){var r=uH.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function eH(n,e){for(ke=e;ke!==null;){e=ke;var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{uP(n,r,e);var s=r.alternate;s!==null&&(s.return=null),r.return=null}catch(P){$i(r,e,P)}}if(t=e.child,(e.subtreeFlags&12854)!==0&&t!==null)t.return=e,ke=t;else for(;ke!==null;){e=ke;try{var o=e.flags;if(o&32&&Mf(e.stateNode,""),o&512){var a=e.alternate;if(a!==null){var u=a.ref;u!==null&&(typeof u=="function"?u(null):u.current=null)}}if(o&8192)switch(e.tag){case 13:if(e.memoizedState!==null){var c=e.alternate;(c===null||c.memoizedState===null)&&(z1=Wn())}break;case 22:var f=e.memoizedState!==null,d=e.alternate,p=d!==null&&d.memoizedState!==null;t=e;e:{i=t,r=f;for(var g=null,v=i;;){if(v.tag===5){if(g===null){g=v;var y=v.stateNode;if(r){var x=y.style;typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"}else{var M=v.stateNode,S=v.memoizedProps.style,_=S!=null&&S.hasOwnProperty("display")?S.display:null;M.style.display=BR("display",_)}}}else if(v.tag===6)g===null&&(v.stateNode.nodeValue=r?"":v.memoizedProps);else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===i)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;g===v&&(g=null),v=v.return}g===v&&(g=null),v.sibling.return=v.return,v=v.sibling}}if(f&&!p&&(t.mode&1)!==0){ke=t;for(var w=t.child;w!==null;){for(t=ke=w;ke!==null;){i=ke;var T=i.child;switch(i.tag){case 0:case 11:case 14:case 15:zf(4,i,i.return);break;case 1:dg(i,i.return);var E=i.stateNode;if(typeof E.componentWillUnmount=="function"){var R=i.return;try{E.props=i.memoizedProps,E.state=i.memoizedState,E.componentWillUnmount()}catch(P){$i(i,R,P)}}break;case 5:dg(i,i.return);break;case 22:if(i.memoizedState!==null){iA(t);continue}}T!==null?(T.return=i,ke=T):iA(t)}w=w.sibling}}}switch(o&4102){case 2:eA(e),e.flags&=-3;break;case 6:eA(e),e.flags&=-3,Gy(e.alternate,e);break;case 4096:e.flags&=-4097;break;case 4100:e.flags&=-4097,Gy(e.alternate,e);break;case 4:Gy(e.alternate,e)}}catch(P){$i(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,ke=t;break}ke=e.return}}}function tH(n,e,t){ke=n,cP(n)}function cP(n,e,t){for(var i=(n.mode&1)!==0;ke!==null;){var r=ke,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Np;if(!o){var a=r.alternate,u=a!==null&&a.memoizedState!==null||Dl;a=Np;var c=Dl;if(Np=o,(Dl=u)&&!c)for(ke=r;ke!==null;)o=ke,u=o.child,o.tag===22&&o.memoizedState!==null?rA(r):u!==null?(u.return=o,ke=u):rA(r);for(;s!==null;)ke=s,cP(s),s=s.sibling;ke=r,Np=a,Dl=c}nA(n)}else(r.subtreeFlags&8772)!==0&&s!==null?(s.return=r,ke=s):nA(n)}}function nA(n){for(;ke!==null;){var e=ke;if((e.flags&8772)!==0){var t=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:Dl||av(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Dl)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:vs(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&FE(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}FE(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Af(d)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(we(163))}Dl||e.flags&512&&k_(e)}catch(p){$i(e,e.return,p)}}if(e===n){ke=null;break}if(t=e.sibling,t!==null){t.return=e.return,ke=t;break}ke=e.return}}function iA(n){for(;ke!==null;){var e=ke;if(e===n){ke=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ke=t;break}ke=e.return}}function rA(n){for(;ke!==null;){var e=ke;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{av(4,e)}catch(u){$i(e,t,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(u){$i(e,r,u)}}var s=e.return;try{k_(e)}catch(u){$i(e,s,u)}break;case 5:var o=e.return;try{k_(e)}catch(u){$i(e,o,u)}}}catch(u){$i(e,e.return,u)}if(e===n){ke=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ke=a;break}ke=e.return}}var nH=Math.ceil,pg=ko.ReactCurrentDispatcher,k1=ko.ReactCurrentOwner,Zr=ko.ReactCurrentBatchConfig,Ut=0,$n=null,Zn=null,mi=0,gr=0,ec=Wa(0),ii=0,Bf=null,wc=0,lv=0,N1=0,ff=null,Zi=null,z1=0,Sc=1/0,mg=!1,B_=null,Ta=null,zp=!1,va=null,gg=0,df=0,U_=null,Bm=-1,Um=0;function zi(){return(Ut&6)!==0?Wn():Bm!==-1?Bm:Bm=Wn()}function Ea(n){return(n.mode&1)===0?1:(Ut&2)!==0&&mi!==0?mi&-mi:BV.transition!==null?(Um===0&&(n=bp,bp<<=1,(bp&4194240)===0&&(bp=64),Um=n),Um):(n=en,n!==0||(n=window.event,n=n===void 0?16:r3(n.type)),n)}function Kr(n,e,t){if(50<df)throw df=0,U_=null,Error(we(185));var i=uv(n,e);return i===null?null:(ad(i,e,t),((Ut&2)===0||i!==$n)&&(i===$n&&((Ut&2)===0&&(lv|=e),ii===4&&ma(i,mi)),nr(i,t),e===1&&Ut===0&&(n.mode&1)===0&&(Sc=Wn()+500,rv&&ja())),i)}function uv(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}function nr(n,e){var t=n.callbackNode;B5(n,e);var i=Jm(n,n===$n?mi:0);if(i===0)t!==null&&hE(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&hE(t),e===1)n.tag===0?zV(sA.bind(null,n)):M3(sA.bind(null,n)),OV(function(){Ut===0&&ja()}),t=null;else{switch(QR(i)){case 1:t=f1;break;case 4:t=KR;break;case 16:t=Qm;break;case 536870912:t=$R;break;default:t=Qm}t=yP(t,hP.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function hP(n,e){if(Bm=-1,Um=0,(Ut&6)!==0)throw Error(we(327));var t=n.callbackNode;if(hc()&&n.callbackNode!==t)return null;var i=Jm(n,n===$n?mi:0);if(i===0)return null;if((i&30)!==0||(i&n.expiredLanes)!==0||e)e=vg(n,i);else{e=i;var r=Ut;Ut|=2;var s=dP();($n!==n||mi!==e)&&(Sc=Wn()+500,Fl(n,e));do try{sH();break}catch(a){fP(n,a)}while(1);S1(),pg.current=s,Ut=r,Zn!==null?e=0:($n=null,mi=0,e=ii)}if(e!==0){if(e===2&&(r=m_(n),r!==0&&(i=r,e=V_(n,r))),e===1)throw t=Bf,Fl(n,0),ma(n,i),nr(n,Wn()),t;if(e===6)ma(n,i);else{if(r=n.current.alternate,(i&30)===0&&!iH(r)&&(e=vg(n,i),e===2&&(s=m_(n),s!==0&&(i=s,e=V_(n,s))),e===1))throw t=Bf,Fl(n,0),ma(n,i),nr(n,Wn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(we(345));case 2:Ml(n,Zi);break;case 3:if(ma(n,i),(i&130023424)===i&&(e=z1+500-Wn(),10<e)){if(Jm(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){zi(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=S_(Ml.bind(null,n,Zi),e);break}Ml(n,Zi);break;case 4:if(ma(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-ws(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Wn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*nH(i/1960))-i,10<i){n.timeoutHandle=S_(Ml.bind(null,n,Zi),i);break}Ml(n,Zi);break;case 5:Ml(n,Zi);break;default:throw Error(we(329))}}}return nr(n,Wn()),n.callbackNode===t?hP.bind(null,n):null}function V_(n,e){var t=ff;return n.current.memoizedState.isDehydrated&&(Fl(n,e).flags|=256),n=vg(n,e),n!==2&&(e=Zi,Zi=t,e!==null&&H_(e)),n}function H_(n){Zi===null?Zi=n:Zi.push.apply(Zi,n)}function iH(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Vs(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ma(n,e){for(e&=~N1,e&=~lv,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ws(e),i=1<<t;n[t]=-1,e&=~i}}function sA(n){if((Ut&6)!==0)throw Error(we(327));hc();var e=Jm(n,0);if((e&1)===0)return nr(n,Wn()),null;var t=vg(n,e);if(n.tag!==0&&t===2){var i=m_(n);i!==0&&(e=i,t=V_(n,i))}if(t===1)throw t=Bf,Fl(n,0),ma(n,e),nr(n,Wn()),t;if(t===6)throw Error(we(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Ml(n,Zi),nr(n,Wn()),null}function B1(n,e){var t=Ut;Ut|=1;try{return n(e)}finally{Ut=t,Ut===0&&(Sc=Wn()+500,rv&&ja())}}function Vl(n){va!==null&&va.tag===0&&(Ut&6)===0&&hc();var e=Ut;Ut|=1;var t=Zr.transition,i=en;try{if(Zr.transition=null,en=1,n)return n()}finally{en=i,Zr.transition=t,Ut=e,(Ut&6)===0&&ja()}}function U1(){gr=ec.current,vn(ec)}function Fl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,IV(t)),Zn!==null)for(t=Zn.return;t!==null;){var i=t;switch(E1(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ig();break;case 3:xc(),vn(er),vn(Ei),P1();break;case 5:R1(i);break;case 4:xc();break;case 13:vn(En);break;case 19:vn(En);break;case 10:M1(i.type._context);break;case 22:case 23:U1()}t=t.return}if($n=n,Zn=n=Ia(n.current,null),mi=gr=e,ii=0,Bf=null,N1=lv=wc=0,Zi=ff=null,ks!==null){for(e=0;e<ks.length;e++)if(t=ks[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}ks=null}return n}function fP(n,e){do{var t=Zn;try{if(S1(),Nm.current=fg,hg){for(var i=kn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}hg=!1}if(_c=0,ai=Si=kn=null,hf=!1,Ff=0,k1.current=null,t===null||t.return===null){ii=1,Bf=e,Zn=null;break}e:{var s=n,o=t.return,a=t,u=e;if(e=mi,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=a,d=f.tag;if((f.mode&1)===0&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=HE(o);if(g!==null){g.flags&=-257,GE(g,o,a,s,e),g.mode&1&&VE(s,c,e),e=g,u=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(u),e.updateQueue=y}else v.add(u);break e}else{if((e&1)===0){VE(s,c,e),V1();break e}u=Error(we(426))}}else if(Sn&&a.mode&1){var x=HE(o);if(x!==null){(x.flags&65536)===0&&(x.flags|=256),GE(x,o,a,s,e),A1(u);break e}}s=u,ii!==4&&(ii=2),ff===null?ff=[s]:ff.push(s),u=F1(u,a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var M=K3(a,u,e);OE(a,M);break e;case 1:s=u;var S=a.type,_=a.stateNode;if((a.flags&128)===0&&(typeof S.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ta===null||!Ta.has(_)))){a.flags|=65536,e&=-e,a.lanes|=e;var w=$3(a,s,e);OE(a,w);break e}}a=a.return}while(a!==null)}mP(t)}catch(T){e=T,Zn===t&&t!==null&&(Zn=t=t.return);continue}break}while(1)}function dP(){var n=pg.current;return pg.current=fg,n===null?fg:n}function V1(){(ii===0||ii===3||ii===2)&&(ii=4),$n===null||(wc&268435455)===0&&(lv&268435455)===0||ma($n,mi)}function vg(n,e){var t=Ut;Ut|=2;var i=dP();$n===n&&mi===e||Fl(n,e);do try{rH();break}catch(r){fP(n,r)}while(1);if(S1(),Ut=t,pg.current=i,Zn!==null)throw Error(we(261));return $n=null,mi=0,ii}function rH(){for(;Zn!==null;)pP(Zn)}function sH(){for(;Zn!==null&&!P5();)pP(Zn)}function pP(n){var e=vP(n.alternate,n,gr);n.memoizedProps=n.pendingProps,e===null?mP(n):Zn=e,k1.current=null}function mP(n){var e=n;do{var t=e.alternate;if(n=e.return,(e.flags&32768)===0){if(t=YV(t,e,gr),t!==null){Zn=t;return}}else{if(t=$V(t,e),t!==null){t.flags&=32767,Zn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ii=6,Zn=null;return}}if(e=e.sibling,e!==null){Zn=e;return}Zn=e=n}while(e!==null);ii===0&&(ii=5)}function Ml(n,e){var t=en,i=Zr.transition;try{Zr.transition=null,en=1,oH(n,e,t)}finally{Zr.transition=i,en=t}return null}function oH(n,e,t){do hc();while(va!==null);if((Ut&6)!==0)throw Error(we(327));var i=n.finishedWork,r=n.finishedLanes;if(i===null)return null;if(n.finishedWork=null,n.finishedLanes=0,i===n.current)throw Error(we(177));n.callbackNode=null,n.callbackPriority=0;var s=i.lanes|i.childLanes;if(U5(n,s),n===$n&&(Zn=$n=null,mi=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||zp||(zp=!0,yP(Qm,function(){return hc(),null})),s=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||s){s=Zr.transition,Zr.transition=null;var o=en;en=1;var a=Ut;Ut|=4,k1.current=null,JV(n,i),eH(n,i),EV(__),__=null,n.current=i,tH(i),L5(),Ut=a,en=o,Zr.transition=s}else n.current=i;if(zp&&(zp=!1,va=n,gg=r),s=n.pendingLanes,s===0&&(Ta=null),O5(i.stateNode),nr(n,Wn()),e!==null)for(t=n.onRecoverableError,i=0;i<e.length;i++)t(e[i]);if(mg)throw mg=!1,n=B_,B_=null,n;return(gg&1)!==0&&n.tag!==0&&hc(),s=n.pendingLanes,(s&1)!==0?n===U_?df++:(df=0,U_=n):df=0,ja(),null}function hc(){if(va!==null){var n=QR(gg),e=Zr.transition,t=en;try{if(Zr.transition=null,en=16>n?16:n,va===null)var i=!1;else{if(n=va,va=null,gg=0,(Ut&6)!==0)throw Error(we(331));var r=Ut;for(Ut|=4,ke=n.current;ke!==null;){var s=ke,o=s.child;if((ke.flags&16)!==0){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(ke=c;ke!==null;){var f=ke;switch(f.tag){case 0:case 11:case 15:zf(8,f,s)}var d=f.child;if(d!==null)d.return=f,ke=d;else for(;ke!==null;){f=ke;var p=f.sibling,g=f.return;if(aP(f),f===c){ke=null;break}if(p!==null){p.return=g,ke=p;break}ke=g}}}var v=s.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}ke=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,ke=o;else e:for(;ke!==null;){if(s=ke,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:zf(9,s,s.return)}var M=s.sibling;if(M!==null){M.return=s.return,ke=M;break e}ke=s.return}}var S=n.current;for(ke=S;ke!==null;){o=ke;var _=o.child;if((o.subtreeFlags&2064)!==0&&_!==null)_.return=o,ke=_;else e:for(o=S;ke!==null;){if(a=ke,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:av(9,a)}}catch(T){$i(a,a.return,T)}if(a===o){ke=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,ke=w;break e}ke=a.return}}if(Ut=r,ja(),Ns&&typeof Ns.onPostCommitFiberRoot=="function")try{Ns.onPostCommitFiberRoot(Jg,n)}catch{}i=!0}return i}finally{en=t,Zr.transition=e}}return!1}function oA(n,e,t){e=F1(t,e),e=K3(n,e,1),ba(n,e),e=zi(),n=uv(n,1),n!==null&&(ad(n,1,e),nr(n,e))}function $i(n,e,t){if(n.tag===3)oA(n,n,t);else for(;e!==null;){if(e.tag===3){oA(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ta===null||!Ta.has(i))){n=F1(t,n),n=$3(e,n,1),ba(e,n),n=zi(),e=uv(e,1),e!==null&&(ad(e,1,n),nr(e,n));break}}e=e.return}}function aH(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=zi(),n.pingedLanes|=n.suspendedLanes&t,$n===n&&(mi&t)===t&&(ii===4||ii===3&&(mi&130023424)===mi&&500>Wn()-z1?Fl(n,0):N1|=t),nr(n,e)}function gP(n,e){e===0&&((n.mode&1)===0?e=1:(e=Tp,Tp<<=1,(Tp&130023424)===0&&(Tp=4194304)));var t=zi();n=uv(n,e),n!==null&&(ad(n,e,t),nr(n,t))}function lH(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),gP(n,t)}function uH(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(we(314))}i!==null&&i.delete(e),gP(n,t)}var vP;vP=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||er.current)vr=!0;else{if((n.lanes&t)===0&&(e.flags&128)===0)return vr=!1,KV(n,e,t);vr=(n.flags&131072)!==0}else vr=!1,Sn&&(e.flags&1048576)!==0&&A3(e,ug,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),n=e.pendingProps;var r=gc(e,Ei.current);cc(e,t),r=D1(null,e,i,n,r,t);var s=I1();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,tr(i)?(s=!0,rg(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,b1(e),r.updater=sv,e.stateNode=r,r._reactInternals=e,A_(e,i,n,t),e=I_(null,e,i,!0,s,t)):(e.tag=0,Sn&&s&&T1(e),Fi(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=hH(i),n=vs(i,n),r){case 0:e=D_(null,e,i,n,t);break e;case 1:e=XE(null,e,i,n,t);break e;case 11:e=WE(null,e,i,n,t);break e;case 14:e=jE(null,e,i,vs(i.type,n),t);break e}throw Error(we(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vs(i,r),D_(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vs(i,r),XE(n,e,i,r,t);case 3:e:{if(rP(e),n===null)throw Error(we(387));i=e.pendingProps,s=e.memoizedState,r=s.element,b3(n,e),ag(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Error(we(423)),e=qE(n,e,i,t,r);break e}else if(i!==r){r=Error(we(424)),e=qE(n,e,i,t,r);break e}else for(Ki=xo(e.stateNode.containerInfo.firstChild),_r=e,Sn=!0,ys=null,t=P3(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(vc(),i===r){e=Ro(n,e,t);break e}Fi(n,e,i,t)}e=e.child}return e;case 5:return L3(e),n===null&&R_(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,w_(i,r)?o=null:s!==null&&w_(i,s)&&(e.flags|=32),iP(n,e),Fi(n,e,o,t),e.child;case 6:return n===null&&R_(e),null;case 13:return sP(n,e,t);case 4:return C1(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=yc(e,null,i,t):Fi(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vs(i,r),WE(n,e,i,r,t);case 7:return Fi(n,e,e.pendingProps,t),e.child;case 8:return Fi(n,e,e.pendingProps.children,t),e.child;case 12:return Fi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,ln(sg,i._currentValue),i._currentValue=o,s!==null)if(Vs(s.value,o)){if(s.children===r.children&&!er.current){e=Ro(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===i){if(s.tag===1){u=Mo(-1,t&-t),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}s.lanes|=t,u=s.alternate,u!==null&&(u.lanes|=t),T_(s.return,t,e),a.lanes|=t;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(we(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),T_(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Fi(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,cc(e,t),r=es(r),i=i(r),e.flags|=1,Fi(n,e,i,t),e.child;case 14:return i=e.type,r=vs(i,e.pendingProps),r=vs(i.type,r),jE(n,e,i,r,t);case 15:return tP(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vs(i,r),n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,tr(i)?(n=!0,rg(e)):n=!1,cc(e,t),E3(e,i,r),A_(e,i,r,t),I_(null,e,i,!0,n,t);case 19:return oP(n,e,t);case 22:return nP(n,e,t)}throw Error(we(156,e.tag))};function yP(n,e){return ZR(n,e)}function cH(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xr(n,e,t,i){return new cH(n,e,t,i)}function H1(n){return n=n.prototype,!(!n||!n.isReactComponent)}function hH(n){if(typeof n=="function")return H1(n)?1:0;if(n!=null){if(n=n.$$typeof,n===u1)return 11;if(n===c1)return 14}return 2}function Ia(n,e){var t=n.alternate;return t===null?(t=Xr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Vm(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")H1(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case ju:return kl(t.children,r,s,e);case l1:o=8,r|=8;break;case e_:return n=Xr(12,t,e,r|2),n.elementType=e_,n.lanes=s,n;case t_:return n=Xr(13,t,e,r),n.elementType=t_,n.lanes=s,n;case n_:return n=Xr(19,t,e,r),n.elementType=n_,n.lanes=s,n;case DR:return yg(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case PR:o=10;break e;case LR:o=9;break e;case u1:o=11;break e;case c1:o=14;break e;case fa:o=16,i=null;break e}throw Error(we(130,n==null?n:typeof n,""))}return e=Xr(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function kl(n,e,t,i){return n=Xr(7,n,i,e),n.lanes=t,n}function yg(n,e,t,i){return n=Xr(22,n,i,e),n.elementType=DR,n.lanes=t,n.stateNode={},n}function Wy(n,e,t){return n=Xr(6,n,null,e),n.lanes=t,n}function jy(n,e,t){return e=Xr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function fH(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ey(0),this.expirationTimes=Ey(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ey(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function G1(n,e,t,i,r,s,o,a,u){return n=new fH(n,e,t,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Xr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null},b1(s),n}function dH(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wu,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function xP(n){if(!n)return Da;n=n._reactInternals;e:{if(ql(n)!==n||n.tag!==1)throw Error(we(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(tr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(we(171))}if(n.tag===1){var t=n.type;if(tr(t))return S3(n,t,e)}return e}function _P(n,e,t,i,r,s,o,a,u){return n=G1(t,i,!0,n,r,s,o,a,u),n.context=xP(null),t=n.current,i=zi(),r=Ea(t),s=Mo(i,r),s.callback=e!=null?e:null,ba(t,s),n.current.lanes=r,ad(n,r,i),nr(n,i),n}function cv(n,e,t,i){var r=e.current,s=zi(),o=Ea(r);return t=xP(t),e.context===null?e.context=t:e.pendingContext=t,e=Mo(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),ba(r,e),n=Kr(r,o,s),n!==null&&km(n,r,o),o}function xg(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function aA(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function W1(n,e){aA(n,e),(n=n.alternate)&&aA(n,e)}function pH(){return null}var wP=typeof reportError=="function"?reportError:function(n){console.error(n)};function j1(n){this._internalRoot=n}hv.prototype.render=j1.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(we(409));cv(n,e,null,null)};hv.prototype.unmount=j1.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Vl(function(){cv(null,n,null,null)}),e[Co]=null}};function hv(n){this._internalRoot=n}hv.prototype.unstable_scheduleHydration=function(n){if(n){var e=t3();n={blockedOn:null,target:n,priority:e};for(var t=0;t<pa.length&&e!==0&&e<pa[t].priority;t++);pa.splice(t,0,n),t===0&&i3(n)}};function X1(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function fv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function lA(){}function mH(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=xg(o);s.call(c)}}var o=_P(e,i,n,0,null,!1,!1,"",lA);return n._reactRootContainer=o,n[Co]=o.current,Pf(n.nodeType===8?n.parentNode:n),Vl(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=xg(u);a.call(c)}}var u=G1(n,0,!1,null,null,!1,!1,"",lA);return n._reactRootContainer=u,n[Co]=u.current,Pf(n.nodeType===8?n.parentNode:n),Vl(function(){cv(e,u,t,i)}),u}function dv(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var u=xg(o);a.call(u)}}cv(e,o,n,r)}else o=mH(t,e,n,r,i);return xg(o)}JR=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=tf(e.pendingLanes);t!==0&&(d1(e,t|1),nr(e,Wn()),(Ut&6)===0&&(Sc=Wn()+500,ja()))}break;case 13:var i=zi();Vl(function(){return Kr(n,1,i)}),W1(n,1)}};p1=function(n){if(n.tag===13){var e=zi();Kr(n,134217728,e),W1(n,134217728)}};e3=function(n){if(n.tag===13){var e=zi(),t=Ea(n);Kr(n,t,e),W1(n,t)}};t3=function(){return en};n3=function(n,e){var t=en;try{return en=n,e()}finally{en=t}};f_=function(n,e,t){switch(e){case"input":if(s_(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=iv(i);if(!r)throw Error(we(90));OR(i),s_(i,r)}}}break;case"textarea":kR(n,t);break;case"select":e=t.value,e!=null&&oc(n,!!t.multiple,e,!1)}};GR=B1;WR=Vl;var gH={usingClientEntryPoint:!1,Events:[ud,Zu,iv,VR,HR,B1]},Fh={findFiberByHostInstance:Pl,bundleType:0,version:"18.0.0-fc46dba67-20220329",rendererPackageName:"react-dom"},vH={bundleType:Fh.bundleType,version:Fh.version,rendererPackageName:Fh.rendererPackageName,rendererConfig:Fh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ko.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=qR(n),n===null?null:n.stateNode},findFiberByHostInstance:Fh.findFiberByHostInstance||pH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bp.isDisabled&&Bp.supportsFiber)try{Jg=Bp.inject(vH),Ns=Bp}catch{}}Tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gH;Tr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!X1(e))throw Error(we(200));return dH(n,e,null,t)};Tr.createRoot=function(n,e){if(!X1(n))throw Error(we(299));var t=!1,i="",r=wP;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=G1(n,1,!1,null,null,t,!1,i,r),n[Co]=e.current,Pf(n.nodeType===8?n.parentNode:n),new j1(e)};Tr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(we(188)):(n=Object.keys(n).join(","),Error(we(268,n)));return n=qR(e),n=n===null?null:n.stateNode,n};Tr.flushSync=function(n){return Vl(n)};Tr.hydrate=function(n,e,t){if(!fv(e))throw Error(we(200));return dv(null,n,e,!0,t)};Tr.hydrateRoot=function(n,e,t){if(!X1(n))throw Error(we(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=wP;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=_P(e,null,n,1,t!=null?t:null,r,!1,s,o),n[Co]=e.current,Pf(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new hv(e)};Tr.render=function(n,e,t){if(!fv(e))throw Error(we(200));return dv(null,n,e,!1,t)};Tr.unmountComponentAtNode=function(n){if(!fv(n))throw Error(we(40));return n._reactRootContainer?(Vl(function(){dv(null,null,n,!1,function(){n._reactRootContainer=null,n[Co]=null})}),!0):!1};Tr.unstable_batchedUpdates=B1;Tr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!fv(t))throw Error(we(200));if(n==null||n._reactInternals===void 0)throw Error(we(38));return dv(n,e,t,!1,i)};Tr.version="18.0.0-fc46dba67-20220329";function SP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(SP)}catch(n){console.error(n)}}SP(),TR.exports=Tr;var uA=TR.exports;Qx.createRoot=uA.createRoot,Qx.hydrateRoot=uA.hydrateRoot;var G_={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(n,e){(function(){var t,i="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",d=1,p=2,g=4,v=1,y=2,x=1,M=2,S=4,_=8,w=16,T=32,E=64,R=128,P=256,V=512,F=30,C="...",N=800,Q=16,G=1,Y=2,X=3,K=1/0,B=9007199254740991,Z=17976931348623157e292,ee=0/0,se=4294967295,ae=se-1,Le=se>>>1,ze=[["ary",R],["bind",x],["bindKey",M],["curry",_],["curryRight",w],["flip",V],["partial",T],["partialRight",E],["rearg",P]],Pe="[object Arguments]",oe="[object Array]",rt="[object AsyncFunction]",Xe="[object Boolean]",Ze="[object Date]",Se="[object DOMException]",Qe="[object Error]",ue="[object Function]",fe="[object GeneratorFunction]",ye="[object Map]",Ne="[object Number]",De="[object Null]",qe="[object Object]",$e="[object Promise]",Ue="[object Proxy]",_t="[object RegExp]",st="[object Set]",k="[object String]",D="[object Symbol]",J="[object Undefined]",he="[object WeakMap]",me="[object WeakSet]",Ce="[object ArrayBuffer]",be="[object DataView]",z="[object Float32Array]",xe="[object Float64Array]",He="[object Int8Array]",Ee="[object Int16Array]",j="[object Int32Array]",Ae="[object Uint8Array]",Te="[object Uint8ClampedArray]",Je="[object Uint16Array]",Ie="[object Uint32Array]",Ye=/\b__p \+= '';/g,Re=/\b(__p \+=) '' \+/g,lt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,nn=/&(?:amp|lt|gt|quot|#39);/g,bt=/[&<>"']/g,Rr=RegExp(nn.source),Pr=RegExp(bt.source),a0=/<%-([\s\S]+?)%>/g,nu=/<%([\s\S]+?)%>/g,Ld=/<%=([\s\S]+?)%>/g,uh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Dd=/^\w*$/,l0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ch=/[\\^$.*+?()[\]{}|]/g,u0=RegExp(ch.source),U=/^\s+/,te=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,re=/\{\n\/\* \[wrapped with (.+)\] \*/,ge=/,? & /,ot=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ht=/[()=,{}\[\]\/\s]/,yt=/\\(\\)?/g,mt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Vt=/\w*$/,It=/^[-+]0x[0-9a-f]+$/i,zt=/^0b[01]+$/i,xn=/^\[object .+?Constructor\]$/,Zs=/^0o[0-7]+$/i,Go=/^(?:0|[1-9]\d*)$/,Wo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ri=/($^)/,Ht=/['\n\r\u2028\u2029\\]/g,rs="\\ud800-\\udfff",Dn="\\u0300-\\u036f",Lr="\\ufe20-\\ufe2f",Es="\\u20d0-\\u20ff",jo=Dn+Lr+Es,iu="\\u2700-\\u27bf",Qn="a-z\\xdf-\\xf6\\xf8-\\xff",tl="\\xac\\xb1\\xd7\\xf7",hh="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ar="\\u2000-\\u206f",KO=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",CM="A-Z\\xc0-\\xd6\\xd8-\\xde",RM="\\ufe0e\\ufe0f",PM=tl+hh+ar+KO,c0="['\u2019]",$O="["+rs+"]",LM="["+PM+"]",Id="["+jo+"]",DM="\\d+",QO="["+iu+"]",IM="["+Qn+"]",OM="[^"+rs+PM+DM+iu+Qn+CM+"]",h0="\\ud83c[\\udffb-\\udfff]",JO="(?:"+Id+"|"+h0+")",FM="[^"+rs+"]",f0="(?:\\ud83c[\\udde6-\\uddff]){2}",d0="[\\ud800-\\udbff][\\udc00-\\udfff]",ru="["+CM+"]",kM="\\u200d",NM="(?:"+IM+"|"+OM+")",eF="(?:"+ru+"|"+OM+")",zM="(?:"+c0+"(?:d|ll|m|re|s|t|ve))?",BM="(?:"+c0+"(?:D|LL|M|RE|S|T|VE))?",UM=JO+"?",VM="["+RM+"]?",tF="(?:"+kM+"(?:"+[FM,f0,d0].join("|")+")"+VM+UM+")*",nF="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",iF="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",HM=VM+UM+tF,rF="(?:"+[QO,f0,d0].join("|")+")"+HM,sF="(?:"+[FM+Id+"?",Id,f0,d0,$O].join("|")+")",oF=RegExp(c0,"g"),aF=RegExp(Id,"g"),p0=RegExp(h0+"(?="+h0+")|"+sF+HM,"g"),lF=RegExp([ru+"?"+IM+"+"+zM+"(?="+[LM,ru,"$"].join("|")+")",eF+"+"+BM+"(?="+[LM,ru+NM,"$"].join("|")+")",ru+"?"+NM+"+"+zM,ru+"+"+BM,iF,nF,DM,rF].join("|"),"g"),uF=RegExp("["+kM+rs+jo+RM+"]"),cF=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,hF=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],fF=-1,dn={};dn[z]=dn[xe]=dn[He]=dn[Ee]=dn[j]=dn[Ae]=dn[Te]=dn[Je]=dn[Ie]=!0,dn[Pe]=dn[oe]=dn[Ce]=dn[Xe]=dn[be]=dn[Ze]=dn[Qe]=dn[ue]=dn[ye]=dn[Ne]=dn[qe]=dn[_t]=dn[st]=dn[k]=dn[he]=!1;var an={};an[Pe]=an[oe]=an[Ce]=an[be]=an[Xe]=an[Ze]=an[z]=an[xe]=an[He]=an[Ee]=an[j]=an[ye]=an[Ne]=an[qe]=an[_t]=an[st]=an[k]=an[D]=an[Ae]=an[Te]=an[Je]=an[Ie]=!0,an[Qe]=an[ue]=an[he]=!1;var dF={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},pF={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mF={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},gF={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},vF=parseFloat,yF=parseInt,GM=typeof Vu=="object"&&Vu&&Vu.Object===Object&&Vu,xF=typeof self=="object"&&self&&self.Object===Object&&self,ci=GM||xF||Function("return this")(),m0=e&&!e.nodeType&&e,nl=m0&&!0&&n&&!n.nodeType&&n,WM=nl&&nl.exports===m0,g0=WM&&GM.process,Dr=function(){try{var q=nl&&nl.require&&nl.require("util").types;return q||g0&&g0.binding&&g0.binding("util")}catch{}}(),jM=Dr&&Dr.isArrayBuffer,XM=Dr&&Dr.isDate,qM=Dr&&Dr.isMap,YM=Dr&&Dr.isRegExp,ZM=Dr&&Dr.isSet,KM=Dr&&Dr.isTypedArray;function lr(q,ce,ne){switch(ne.length){case 0:return q.call(ce);case 1:return q.call(ce,ne[0]);case 2:return q.call(ce,ne[0],ne[1]);case 3:return q.call(ce,ne[0],ne[1],ne[2])}return q.apply(ce,ne)}function _F(q,ce,ne,Be){for(var ut=-1,jt=q==null?0:q.length;++ut<jt;){var Jn=q[ut];ce(Be,Jn,ne(Jn),q)}return Be}function Ir(q,ce){for(var ne=-1,Be=q==null?0:q.length;++ne<Be&&ce(q[ne],ne,q)!==!1;);return q}function wF(q,ce){for(var ne=q==null?0:q.length;ne--&&ce(q[ne],ne,q)!==!1;);return q}function $M(q,ce){for(var ne=-1,Be=q==null?0:q.length;++ne<Be;)if(!ce(q[ne],ne,q))return!1;return!0}function Xo(q,ce){for(var ne=-1,Be=q==null?0:q.length,ut=0,jt=[];++ne<Be;){var Jn=q[ne];ce(Jn,ne,q)&&(jt[ut++]=Jn)}return jt}function Od(q,ce){var ne=q==null?0:q.length;return!!ne&&su(q,ce,0)>-1}function v0(q,ce,ne){for(var Be=-1,ut=q==null?0:q.length;++Be<ut;)if(ne(ce,q[Be]))return!0;return!1}function _n(q,ce){for(var ne=-1,Be=q==null?0:q.length,ut=Array(Be);++ne<Be;)ut[ne]=ce(q[ne],ne,q);return ut}function qo(q,ce){for(var ne=-1,Be=ce.length,ut=q.length;++ne<Be;)q[ut+ne]=ce[ne];return q}function y0(q,ce,ne,Be){var ut=-1,jt=q==null?0:q.length;for(Be&&jt&&(ne=q[++ut]);++ut<jt;)ne=ce(ne,q[ut],ut,q);return ne}function SF(q,ce,ne,Be){var ut=q==null?0:q.length;for(Be&&ut&&(ne=q[--ut]);ut--;)ne=ce(ne,q[ut],ut,q);return ne}function x0(q,ce){for(var ne=-1,Be=q==null?0:q.length;++ne<Be;)if(ce(q[ne],ne,q))return!0;return!1}var MF=_0("length");function bF(q){return q.split("")}function TF(q){return q.match(ot)||[]}function QM(q,ce,ne){var Be;return ne(q,function(ut,jt,Jn){if(ce(ut,jt,Jn))return Be=jt,!1}),Be}function Fd(q,ce,ne,Be){for(var ut=q.length,jt=ne+(Be?1:-1);Be?jt--:++jt<ut;)if(ce(q[jt],jt,q))return jt;return-1}function su(q,ce,ne){return ce===ce?NF(q,ce,ne):Fd(q,JM,ne)}function EF(q,ce,ne,Be){for(var ut=ne-1,jt=q.length;++ut<jt;)if(Be(q[ut],ce))return ut;return-1}function JM(q){return q!==q}function eb(q,ce){var ne=q==null?0:q.length;return ne?S0(q,ce)/ne:ee}function _0(q){return function(ce){return ce==null?t:ce[q]}}function w0(q){return function(ce){return q==null?t:q[ce]}}function tb(q,ce,ne,Be,ut){return ut(q,function(jt,Jn,on){ne=Be?(Be=!1,jt):ce(ne,jt,Jn,on)}),ne}function AF(q,ce){var ne=q.length;for(q.sort(ce);ne--;)q[ne]=q[ne].value;return q}function S0(q,ce){for(var ne,Be=-1,ut=q.length;++Be<ut;){var jt=ce(q[Be]);jt!==t&&(ne=ne===t?jt:ne+jt)}return ne}function M0(q,ce){for(var ne=-1,Be=Array(q);++ne<q;)Be[ne]=ce(ne);return Be}function CF(q,ce){return _n(ce,function(ne){return[ne,q[ne]]})}function nb(q){return q&&q.slice(0,ob(q)+1).replace(U,"")}function ur(q){return function(ce){return q(ce)}}function b0(q,ce){return _n(ce,function(ne){return q[ne]})}function fh(q,ce){return q.has(ce)}function ib(q,ce){for(var ne=-1,Be=q.length;++ne<Be&&su(ce,q[ne],0)>-1;);return ne}function rb(q,ce){for(var ne=q.length;ne--&&su(ce,q[ne],0)>-1;);return ne}function RF(q,ce){for(var ne=q.length,Be=0;ne--;)q[ne]===ce&&++Be;return Be}var PF=w0(dF),LF=w0(pF);function DF(q){return"\\"+gF[q]}function IF(q,ce){return q==null?t:q[ce]}function ou(q){return uF.test(q)}function OF(q){return cF.test(q)}function FF(q){for(var ce,ne=[];!(ce=q.next()).done;)ne.push(ce.value);return ne}function T0(q){var ce=-1,ne=Array(q.size);return q.forEach(function(Be,ut){ne[++ce]=[ut,Be]}),ne}function sb(q,ce){return function(ne){return q(ce(ne))}}function Yo(q,ce){for(var ne=-1,Be=q.length,ut=0,jt=[];++ne<Be;){var Jn=q[ne];(Jn===ce||Jn===f)&&(q[ne]=f,jt[ut++]=ne)}return jt}function kd(q){var ce=-1,ne=Array(q.size);return q.forEach(function(Be){ne[++ce]=Be}),ne}function kF(q){var ce=-1,ne=Array(q.size);return q.forEach(function(Be){ne[++ce]=[Be,Be]}),ne}function NF(q,ce,ne){for(var Be=ne-1,ut=q.length;++Be<ut;)if(q[Be]===ce)return Be;return-1}function zF(q,ce,ne){for(var Be=ne+1;Be--;)if(q[Be]===ce)return Be;return Be}function au(q){return ou(q)?UF(q):MF(q)}function ss(q){return ou(q)?VF(q):bF(q)}function ob(q){for(var ce=q.length;ce--&&te.test(q.charAt(ce)););return ce}var BF=w0(mF);function UF(q){for(var ce=p0.lastIndex=0;p0.test(q);)++ce;return ce}function VF(q){return q.match(p0)||[]}function HF(q){return q.match(lF)||[]}var GF=function q(ce){ce=ce==null?ci:lu.defaults(ci.Object(),ce,lu.pick(ci,hF));var ne=ce.Array,Be=ce.Date,ut=ce.Error,jt=ce.Function,Jn=ce.Math,on=ce.Object,E0=ce.RegExp,WF=ce.String,Or=ce.TypeError,Nd=ne.prototype,jF=jt.prototype,uu=on.prototype,zd=ce["__core-js_shared__"],Bd=jF.toString,Jt=uu.hasOwnProperty,XF=0,ab=function(){var l=/[^.]+$/.exec(zd&&zd.keys&&zd.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Ud=uu.toString,qF=Bd.call(on),YF=ci._,ZF=E0("^"+Bd.call(Jt).replace(ch,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vd=WM?ce.Buffer:t,Zo=ce.Symbol,Hd=ce.Uint8Array,lb=Vd?Vd.allocUnsafe:t,Gd=sb(on.getPrototypeOf,on),ub=on.create,cb=uu.propertyIsEnumerable,Wd=Nd.splice,hb=Zo?Zo.isConcatSpreadable:t,dh=Zo?Zo.iterator:t,il=Zo?Zo.toStringTag:t,jd=function(){try{var l=ll(on,"defineProperty");return l({},"",{}),l}catch{}}(),KF=ce.clearTimeout!==ci.clearTimeout&&ce.clearTimeout,$F=Be&&Be.now!==ci.Date.now&&Be.now,QF=ce.setTimeout!==ci.setTimeout&&ce.setTimeout,Xd=Jn.ceil,qd=Jn.floor,A0=on.getOwnPropertySymbols,JF=Vd?Vd.isBuffer:t,fb=ce.isFinite,ek=Nd.join,tk=sb(on.keys,on),ei=Jn.max,vi=Jn.min,nk=Be.now,ik=ce.parseInt,db=Jn.random,rk=Nd.reverse,C0=ll(ce,"DataView"),ph=ll(ce,"Map"),R0=ll(ce,"Promise"),cu=ll(ce,"Set"),mh=ll(ce,"WeakMap"),gh=ll(on,"create"),Yd=mh&&new mh,hu={},sk=ul(C0),ok=ul(ph),ak=ul(R0),lk=ul(cu),uk=ul(mh),Zd=Zo?Zo.prototype:t,vh=Zd?Zd.valueOf:t,pb=Zd?Zd.toString:t;function L(l){if(In(l)&&!ft(l)&&!(l instanceof Ct)){if(l instanceof Fr)return l;if(Jt.call(l,"__wrapped__"))return mT(l)}return new Fr(l)}var fu=function(){function l(){}return function(h){if(!bn(h))return{};if(ub)return ub(h);l.prototype=h;var m=new l;return l.prototype=t,m}}();function Kd(){}function Fr(l,h){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=t}L.templateSettings={escape:a0,evaluate:nu,interpolate:Ld,variable:"",imports:{_:L}},L.prototype=Kd.prototype,L.prototype.constructor=L,Fr.prototype=fu(Kd.prototype),Fr.prototype.constructor=Fr;function Ct(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=se,this.__views__=[]}function ck(){var l=new Ct(this.__wrapped__);return l.__actions__=Wi(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=Wi(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=Wi(this.__views__),l}function hk(){if(this.__filtered__){var l=new Ct(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function fk(){var l=this.__wrapped__.value(),h=this.__dir__,m=ft(l),b=h<0,A=m?l.length:0,I=bN(0,A,this.__views__),H=I.start,W=I.end,$=W-H,de=b?W:H-1,pe=this.__iteratees__,_e=pe.length,Oe=0,We=vi($,this.__takeCount__);if(!m||!b&&A==$&&We==$)return zb(l,this.__actions__);var tt=[];e:for(;$--&&Oe<We;){de+=h;for(var xt=-1,nt=l[de];++xt<_e;){var Tt=pe[xt],Ot=Tt.iteratee,fr=Tt.type,Di=Ot(nt);if(fr==Y)nt=Di;else if(!Di){if(fr==G)continue e;break e}}tt[Oe++]=nt}return tt}Ct.prototype=fu(Kd.prototype),Ct.prototype.constructor=Ct;function rl(l){var h=-1,m=l==null?0:l.length;for(this.clear();++h<m;){var b=l[h];this.set(b[0],b[1])}}function dk(){this.__data__=gh?gh(null):{},this.size=0}function pk(l){var h=this.has(l)&&delete this.__data__[l];return this.size-=h?1:0,h}function mk(l){var h=this.__data__;if(gh){var m=h[l];return m===u?t:m}return Jt.call(h,l)?h[l]:t}function gk(l){var h=this.__data__;return gh?h[l]!==t:Jt.call(h,l)}function vk(l,h){var m=this.__data__;return this.size+=this.has(l)?0:1,m[l]=gh&&h===t?u:h,this}rl.prototype.clear=dk,rl.prototype.delete=pk,rl.prototype.get=mk,rl.prototype.has=gk,rl.prototype.set=vk;function Ks(l){var h=-1,m=l==null?0:l.length;for(this.clear();++h<m;){var b=l[h];this.set(b[0],b[1])}}function yk(){this.__data__=[],this.size=0}function xk(l){var h=this.__data__,m=$d(h,l);if(m<0)return!1;var b=h.length-1;return m==b?h.pop():Wd.call(h,m,1),--this.size,!0}function _k(l){var h=this.__data__,m=$d(h,l);return m<0?t:h[m][1]}function wk(l){return $d(this.__data__,l)>-1}function Sk(l,h){var m=this.__data__,b=$d(m,l);return b<0?(++this.size,m.push([l,h])):m[b][1]=h,this}Ks.prototype.clear=yk,Ks.prototype.delete=xk,Ks.prototype.get=_k,Ks.prototype.has=wk,Ks.prototype.set=Sk;function $s(l){var h=-1,m=l==null?0:l.length;for(this.clear();++h<m;){var b=l[h];this.set(b[0],b[1])}}function Mk(){this.size=0,this.__data__={hash:new rl,map:new(ph||Ks),string:new rl}}function bk(l){var h=up(this,l).delete(l);return this.size-=h?1:0,h}function Tk(l){return up(this,l).get(l)}function Ek(l){return up(this,l).has(l)}function Ak(l,h){var m=up(this,l),b=m.size;return m.set(l,h),this.size+=m.size==b?0:1,this}$s.prototype.clear=Mk,$s.prototype.delete=bk,$s.prototype.get=Tk,$s.prototype.has=Ek,$s.prototype.set=Ak;function sl(l){var h=-1,m=l==null?0:l.length;for(this.__data__=new $s;++h<m;)this.add(l[h])}function Ck(l){return this.__data__.set(l,u),this}function Rk(l){return this.__data__.has(l)}sl.prototype.add=sl.prototype.push=Ck,sl.prototype.has=Rk;function os(l){var h=this.__data__=new Ks(l);this.size=h.size}function Pk(){this.__data__=new Ks,this.size=0}function Lk(l){var h=this.__data__,m=h.delete(l);return this.size=h.size,m}function Dk(l){return this.__data__.get(l)}function Ik(l){return this.__data__.has(l)}function Ok(l,h){var m=this.__data__;if(m instanceof Ks){var b=m.__data__;if(!ph||b.length<r-1)return b.push([l,h]),this.size=++m.size,this;m=this.__data__=new $s(b)}return m.set(l,h),this.size=m.size,this}os.prototype.clear=Pk,os.prototype.delete=Lk,os.prototype.get=Dk,os.prototype.has=Ik,os.prototype.set=Ok;function mb(l,h){var m=ft(l),b=!m&&cl(l),A=!m&&!b&&ea(l),I=!m&&!b&&!A&&gu(l),H=m||b||A||I,W=H?M0(l.length,WF):[],$=W.length;for(var de in l)(h||Jt.call(l,de))&&!(H&&(de=="length"||A&&(de=="offset"||de=="parent")||I&&(de=="buffer"||de=="byteLength"||de=="byteOffset")||to(de,$)))&&W.push(de);return W}function gb(l){var h=l.length;return h?l[U0(0,h-1)]:t}function Fk(l,h){return cp(Wi(l),ol(h,0,l.length))}function kk(l){return cp(Wi(l))}function P0(l,h,m){(m!==t&&!as(l[h],m)||m===t&&!(h in l))&&Qs(l,h,m)}function yh(l,h,m){var b=l[h];(!(Jt.call(l,h)&&as(b,m))||m===t&&!(h in l))&&Qs(l,h,m)}function $d(l,h){for(var m=l.length;m--;)if(as(l[m][0],h))return m;return-1}function Nk(l,h,m,b){return Ko(l,function(A,I,H){h(b,A,m(A),H)}),b}function vb(l,h){return l&&Cs(h,ri(h),l)}function zk(l,h){return l&&Cs(h,Xi(h),l)}function Qs(l,h,m){h=="__proto__"&&jd?jd(l,h,{configurable:!0,enumerable:!0,value:m,writable:!0}):l[h]=m}function L0(l,h){for(var m=-1,b=h.length,A=ne(b),I=l==null;++m<b;)A[m]=I?t:hy(l,h[m]);return A}function ol(l,h,m){return l===l&&(m!==t&&(l=l<=m?l:m),h!==t&&(l=l>=h?l:h)),l}function kr(l,h,m,b,A,I){var H,W=h&d,$=h&p,de=h&g;if(m&&(H=A?m(l,b,A,I):m(l)),H!==t)return H;if(!bn(l))return l;var pe=ft(l);if(pe){if(H=EN(l),!W)return Wi(l,H)}else{var _e=yi(l),Oe=_e==ue||_e==fe;if(ea(l))return Vb(l,W);if(_e==qe||_e==Pe||Oe&&!A){if(H=$||Oe?{}:oT(l),!W)return $?mN(l,zk(H,l)):pN(l,vb(H,l))}else{if(!an[_e])return A?l:{};H=AN(l,_e,W)}}I||(I=new os);var We=I.get(l);if(We)return We;I.set(l,H),FT(l)?l.forEach(function(nt){H.add(kr(nt,h,m,nt,l,I))}):IT(l)&&l.forEach(function(nt,Tt){H.set(Tt,kr(nt,h,m,Tt,l,I))});var tt=de?$?$0:K0:$?Xi:ri,xt=pe?t:tt(l);return Ir(xt||l,function(nt,Tt){xt&&(Tt=nt,nt=l[Tt]),yh(H,Tt,kr(nt,h,m,Tt,l,I))}),H}function Bk(l){var h=ri(l);return function(m){return yb(m,l,h)}}function yb(l,h,m){var b=m.length;if(l==null)return!b;for(l=on(l);b--;){var A=m[b],I=h[A],H=l[A];if(H===t&&!(A in l)||!I(H))return!1}return!0}function xb(l,h,m){if(typeof l!="function")throw new Or(o);return Th(function(){l.apply(t,m)},h)}function xh(l,h,m,b){var A=-1,I=Od,H=!0,W=l.length,$=[],de=h.length;if(!W)return $;m&&(h=_n(h,ur(m))),b?(I=v0,H=!1):h.length>=r&&(I=fh,H=!1,h=new sl(h));e:for(;++A<W;){var pe=l[A],_e=m==null?pe:m(pe);if(pe=b||pe!==0?pe:0,H&&_e===_e){for(var Oe=de;Oe--;)if(h[Oe]===_e)continue e;$.push(pe)}else I(h,_e,b)||$.push(pe)}return $}var Ko=Xb(As),_b=Xb(I0,!0);function Uk(l,h){var m=!0;return Ko(l,function(b,A,I){return m=!!h(b,A,I),m}),m}function Qd(l,h,m){for(var b=-1,A=l.length;++b<A;){var I=l[b],H=h(I);if(H!=null&&(W===t?H===H&&!hr(H):m(H,W)))var W=H,$=I}return $}function Vk(l,h,m,b){var A=l.length;for(m=gt(m),m<0&&(m=-m>A?0:A+m),b=b===t||b>A?A:gt(b),b<0&&(b+=A),b=m>b?0:NT(b);m<b;)l[m++]=h;return l}function wb(l,h){var m=[];return Ko(l,function(b,A,I){h(b,A,I)&&m.push(b)}),m}function hi(l,h,m,b,A){var I=-1,H=l.length;for(m||(m=RN),A||(A=[]);++I<H;){var W=l[I];h>0&&m(W)?h>1?hi(W,h-1,m,b,A):qo(A,W):b||(A[A.length]=W)}return A}var D0=qb(),Sb=qb(!0);function As(l,h){return l&&D0(l,h,ri)}function I0(l,h){return l&&Sb(l,h,ri)}function Jd(l,h){return Xo(h,function(m){return no(l[m])})}function al(l,h){h=Qo(h,l);for(var m=0,b=h.length;l!=null&&m<b;)l=l[Rs(h[m++])];return m&&m==b?l:t}function Mb(l,h,m){var b=h(l);return ft(l)?b:qo(b,m(l))}function Pi(l){return l==null?l===t?J:De:il&&il in on(l)?MN(l):kN(l)}function O0(l,h){return l>h}function Hk(l,h){return l!=null&&Jt.call(l,h)}function Gk(l,h){return l!=null&&h in on(l)}function Wk(l,h,m){return l>=vi(h,m)&&l<ei(h,m)}function F0(l,h,m){for(var b=m?v0:Od,A=l[0].length,I=l.length,H=I,W=ne(I),$=1/0,de=[];H--;){var pe=l[H];H&&h&&(pe=_n(pe,ur(h))),$=vi(pe.length,$),W[H]=!m&&(h||A>=120&&pe.length>=120)?new sl(H&&pe):t}pe=l[0];var _e=-1,Oe=W[0];e:for(;++_e<A&&de.length<$;){var We=pe[_e],tt=h?h(We):We;if(We=m||We!==0?We:0,!(Oe?fh(Oe,tt):b(de,tt,m))){for(H=I;--H;){var xt=W[H];if(!(xt?fh(xt,tt):b(l[H],tt,m)))continue e}Oe&&Oe.push(tt),de.push(We)}}return de}function jk(l,h,m,b){return As(l,function(A,I,H){h(b,m(A),I,H)}),b}function _h(l,h,m){h=Qo(h,l),l=cT(l,h);var b=l==null?l:l[Rs(zr(h))];return b==null?t:lr(b,l,m)}function bb(l){return In(l)&&Pi(l)==Pe}function Xk(l){return In(l)&&Pi(l)==Ce}function qk(l){return In(l)&&Pi(l)==Ze}function wh(l,h,m,b,A){return l===h?!0:l==null||h==null||!In(l)&&!In(h)?l!==l&&h!==h:Yk(l,h,m,b,wh,A)}function Yk(l,h,m,b,A,I){var H=ft(l),W=ft(h),$=H?oe:yi(l),de=W?oe:yi(h);$=$==Pe?qe:$,de=de==Pe?qe:de;var pe=$==qe,_e=de==qe,Oe=$==de;if(Oe&&ea(l)){if(!ea(h))return!1;H=!0,pe=!1}if(Oe&&!pe)return I||(I=new os),H||gu(l)?iT(l,h,m,b,A,I):wN(l,h,$,m,b,A,I);if(!(m&v)){var We=pe&&Jt.call(l,"__wrapped__"),tt=_e&&Jt.call(h,"__wrapped__");if(We||tt){var xt=We?l.value():l,nt=tt?h.value():h;return I||(I=new os),A(xt,nt,m,b,I)}}return Oe?(I||(I=new os),SN(l,h,m,b,A,I)):!1}function Zk(l){return In(l)&&yi(l)==ye}function k0(l,h,m,b){var A=m.length,I=A,H=!b;if(l==null)return!I;for(l=on(l);A--;){var W=m[A];if(H&&W[2]?W[1]!==l[W[0]]:!(W[0]in l))return!1}for(;++A<I;){W=m[A];var $=W[0],de=l[$],pe=W[1];if(H&&W[2]){if(de===t&&!($ in l))return!1}else{var _e=new os;if(b)var Oe=b(de,pe,$,l,h,_e);if(!(Oe===t?wh(pe,de,v|y,b,_e):Oe))return!1}}return!0}function Tb(l){if(!bn(l)||LN(l))return!1;var h=no(l)?ZF:xn;return h.test(ul(l))}function Kk(l){return In(l)&&Pi(l)==_t}function $k(l){return In(l)&&yi(l)==st}function Qk(l){return In(l)&&gp(l.length)&&!!dn[Pi(l)]}function Eb(l){return typeof l=="function"?l:l==null?qi:typeof l=="object"?ft(l)?Rb(l[0],l[1]):Cb(l):YT(l)}function N0(l){if(!bh(l))return tk(l);var h=[];for(var m in on(l))Jt.call(l,m)&&m!="constructor"&&h.push(m);return h}function Jk(l){if(!bn(l))return FN(l);var h=bh(l),m=[];for(var b in l)b=="constructor"&&(h||!Jt.call(l,b))||m.push(b);return m}function z0(l,h){return l<h}function Ab(l,h){var m=-1,b=ji(l)?ne(l.length):[];return Ko(l,function(A,I,H){b[++m]=h(A,I,H)}),b}function Cb(l){var h=J0(l);return h.length==1&&h[0][2]?lT(h[0][0],h[0][1]):function(m){return m===l||k0(m,l,h)}}function Rb(l,h){return ty(l)&&aT(h)?lT(Rs(l),h):function(m){var b=hy(m,l);return b===t&&b===h?fy(m,l):wh(h,b,v|y)}}function ep(l,h,m,b,A){l!==h&&D0(h,function(I,H){if(A||(A=new os),bn(I))eN(l,h,H,m,ep,b,A);else{var W=b?b(iy(l,H),I,H+"",l,h,A):t;W===t&&(W=I),P0(l,H,W)}},Xi)}function eN(l,h,m,b,A,I,H){var W=iy(l,m),$=iy(h,m),de=H.get($);if(de){P0(l,m,de);return}var pe=I?I(W,$,m+"",l,h,H):t,_e=pe===t;if(_e){var Oe=ft($),We=!Oe&&ea($),tt=!Oe&&!We&&gu($);pe=$,Oe||We||tt?ft(W)?pe=W:Bn(W)?pe=Wi(W):We?(_e=!1,pe=Vb($,!0)):tt?(_e=!1,pe=Hb($,!0)):pe=[]:Eh($)||cl($)?(pe=W,cl(W)?pe=zT(W):(!bn(W)||no(W))&&(pe=oT($))):_e=!1}_e&&(H.set($,pe),A(pe,$,b,I,H),H.delete($)),P0(l,m,pe)}function Pb(l,h){var m=l.length;if(!!m)return h+=h<0?m:0,to(h,m)?l[h]:t}function Lb(l,h,m){h.length?h=_n(h,function(I){return ft(I)?function(H){return al(H,I.length===1?I[0]:I)}:I}):h=[qi];var b=-1;h=_n(h,ur(et()));var A=Ab(l,function(I,H,W){var $=_n(h,function(de){return de(I)});return{criteria:$,index:++b,value:I}});return AF(A,function(I,H){return dN(I,H,m)})}function tN(l,h){return Db(l,h,function(m,b){return fy(l,b)})}function Db(l,h,m){for(var b=-1,A=h.length,I={};++b<A;){var H=h[b],W=al(l,H);m(W,H)&&Sh(I,Qo(H,l),W)}return I}function nN(l){return function(h){return al(h,l)}}function B0(l,h,m,b){var A=b?EF:su,I=-1,H=h.length,W=l;for(l===h&&(h=Wi(h)),m&&(W=_n(l,ur(m)));++I<H;)for(var $=0,de=h[I],pe=m?m(de):de;($=A(W,pe,$,b))>-1;)W!==l&&Wd.call(W,$,1),Wd.call(l,$,1);return l}function Ib(l,h){for(var m=l?h.length:0,b=m-1;m--;){var A=h[m];if(m==b||A!==I){var I=A;to(A)?Wd.call(l,A,1):G0(l,A)}}return l}function U0(l,h){return l+qd(db()*(h-l+1))}function iN(l,h,m,b){for(var A=-1,I=ei(Xd((h-l)/(m||1)),0),H=ne(I);I--;)H[b?I:++A]=l,l+=m;return H}function V0(l,h){var m="";if(!l||h<1||h>B)return m;do h%2&&(m+=l),h=qd(h/2),h&&(l+=l);while(h);return m}function wt(l,h){return ry(uT(l,h,qi),l+"")}function rN(l){return gb(vu(l))}function sN(l,h){var m=vu(l);return cp(m,ol(h,0,m.length))}function Sh(l,h,m,b){if(!bn(l))return l;h=Qo(h,l);for(var A=-1,I=h.length,H=I-1,W=l;W!=null&&++A<I;){var $=Rs(h[A]),de=m;if($==="__proto__"||$==="constructor"||$==="prototype")return l;if(A!=H){var pe=W[$];de=b?b(pe,$,W):t,de===t&&(de=bn(pe)?pe:to(h[A+1])?[]:{})}yh(W,$,de),W=W[$]}return l}var Ob=Yd?function(l,h){return Yd.set(l,h),l}:qi,oN=jd?function(l,h){return jd(l,"toString",{configurable:!0,enumerable:!1,value:py(h),writable:!0})}:qi;function aN(l){return cp(vu(l))}function Nr(l,h,m){var b=-1,A=l.length;h<0&&(h=-h>A?0:A+h),m=m>A?A:m,m<0&&(m+=A),A=h>m?0:m-h>>>0,h>>>=0;for(var I=ne(A);++b<A;)I[b]=l[b+h];return I}function lN(l,h){var m;return Ko(l,function(b,A,I){return m=h(b,A,I),!m}),!!m}function tp(l,h,m){var b=0,A=l==null?b:l.length;if(typeof h=="number"&&h===h&&A<=Le){for(;b<A;){var I=b+A>>>1,H=l[I];H!==null&&!hr(H)&&(m?H<=h:H<h)?b=I+1:A=I}return A}return H0(l,h,qi,m)}function H0(l,h,m,b){var A=0,I=l==null?0:l.length;if(I===0)return 0;h=m(h);for(var H=h!==h,W=h===null,$=hr(h),de=h===t;A<I;){var pe=qd((A+I)/2),_e=m(l[pe]),Oe=_e!==t,We=_e===null,tt=_e===_e,xt=hr(_e);if(H)var nt=b||tt;else de?nt=tt&&(b||Oe):W?nt=tt&&Oe&&(b||!We):$?nt=tt&&Oe&&!We&&(b||!xt):We||xt?nt=!1:nt=b?_e<=h:_e<h;nt?A=pe+1:I=pe}return vi(I,ae)}function Fb(l,h){for(var m=-1,b=l.length,A=0,I=[];++m<b;){var H=l[m],W=h?h(H):H;if(!m||!as(W,$)){var $=W;I[A++]=H===0?0:H}}return I}function kb(l){return typeof l=="number"?l:hr(l)?ee:+l}function cr(l){if(typeof l=="string")return l;if(ft(l))return _n(l,cr)+"";if(hr(l))return pb?pb.call(l):"";var h=l+"";return h=="0"&&1/l==-K?"-0":h}function $o(l,h,m){var b=-1,A=Od,I=l.length,H=!0,W=[],$=W;if(m)H=!1,A=v0;else if(I>=r){var de=h?null:xN(l);if(de)return kd(de);H=!1,A=fh,$=new sl}else $=h?[]:W;e:for(;++b<I;){var pe=l[b],_e=h?h(pe):pe;if(pe=m||pe!==0?pe:0,H&&_e===_e){for(var Oe=$.length;Oe--;)if($[Oe]===_e)continue e;h&&$.push(_e),W.push(pe)}else A($,_e,m)||($!==W&&$.push(_e),W.push(pe))}return W}function G0(l,h){return h=Qo(h,l),l=cT(l,h),l==null||delete l[Rs(zr(h))]}function Nb(l,h,m,b){return Sh(l,h,m(al(l,h)),b)}function np(l,h,m,b){for(var A=l.length,I=b?A:-1;(b?I--:++I<A)&&h(l[I],I,l););return m?Nr(l,b?0:I,b?I+1:A):Nr(l,b?I+1:0,b?A:I)}function zb(l,h){var m=l;return m instanceof Ct&&(m=m.value()),y0(h,function(b,A){return A.func.apply(A.thisArg,qo([b],A.args))},m)}function W0(l,h,m){var b=l.length;if(b<2)return b?$o(l[0]):[];for(var A=-1,I=ne(b);++A<b;)for(var H=l[A],W=-1;++W<b;)W!=A&&(I[A]=xh(I[A]||H,l[W],h,m));return $o(hi(I,1),h,m)}function Bb(l,h,m){for(var b=-1,A=l.length,I=h.length,H={};++b<A;){var W=b<I?h[b]:t;m(H,l[b],W)}return H}function j0(l){return Bn(l)?l:[]}function X0(l){return typeof l=="function"?l:qi}function Qo(l,h){return ft(l)?l:ty(l,h)?[l]:pT(Kt(l))}var uN=wt;function Jo(l,h,m){var b=l.length;return m=m===t?b:m,!h&&m>=b?l:Nr(l,h,m)}var Ub=KF||function(l){return ci.clearTimeout(l)};function Vb(l,h){if(h)return l.slice();var m=l.length,b=lb?lb(m):new l.constructor(m);return l.copy(b),b}function q0(l){var h=new l.constructor(l.byteLength);return new Hd(h).set(new Hd(l)),h}function cN(l,h){var m=h?q0(l.buffer):l.buffer;return new l.constructor(m,l.byteOffset,l.byteLength)}function hN(l){var h=new l.constructor(l.source,Vt.exec(l));return h.lastIndex=l.lastIndex,h}function fN(l){return vh?on(vh.call(l)):{}}function Hb(l,h){var m=h?q0(l.buffer):l.buffer;return new l.constructor(m,l.byteOffset,l.length)}function Gb(l,h){if(l!==h){var m=l!==t,b=l===null,A=l===l,I=hr(l),H=h!==t,W=h===null,$=h===h,de=hr(h);if(!W&&!de&&!I&&l>h||I&&H&&$&&!W&&!de||b&&H&&$||!m&&$||!A)return 1;if(!b&&!I&&!de&&l<h||de&&m&&A&&!b&&!I||W&&m&&A||!H&&A||!$)return-1}return 0}function dN(l,h,m){for(var b=-1,A=l.criteria,I=h.criteria,H=A.length,W=m.length;++b<H;){var $=Gb(A[b],I[b]);if($){if(b>=W)return $;var de=m[b];return $*(de=="desc"?-1:1)}}return l.index-h.index}function Wb(l,h,m,b){for(var A=-1,I=l.length,H=m.length,W=-1,$=h.length,de=ei(I-H,0),pe=ne($+de),_e=!b;++W<$;)pe[W]=h[W];for(;++A<H;)(_e||A<I)&&(pe[m[A]]=l[A]);for(;de--;)pe[W++]=l[A++];return pe}function jb(l,h,m,b){for(var A=-1,I=l.length,H=-1,W=m.length,$=-1,de=h.length,pe=ei(I-W,0),_e=ne(pe+de),Oe=!b;++A<pe;)_e[A]=l[A];for(var We=A;++$<de;)_e[We+$]=h[$];for(;++H<W;)(Oe||A<I)&&(_e[We+m[H]]=l[A++]);return _e}function Wi(l,h){var m=-1,b=l.length;for(h||(h=ne(b));++m<b;)h[m]=l[m];return h}function Cs(l,h,m,b){var A=!m;m||(m={});for(var I=-1,H=h.length;++I<H;){var W=h[I],$=b?b(m[W],l[W],W,m,l):t;$===t&&($=l[W]),A?Qs(m,W,$):yh(m,W,$)}return m}function pN(l,h){return Cs(l,ey(l),h)}function mN(l,h){return Cs(l,rT(l),h)}function ip(l,h){return function(m,b){var A=ft(m)?_F:Nk,I=h?h():{};return A(m,l,et(b,2),I)}}function du(l){return wt(function(h,m){var b=-1,A=m.length,I=A>1?m[A-1]:t,H=A>2?m[2]:t;for(I=l.length>3&&typeof I=="function"?(A--,I):t,H&&Li(m[0],m[1],H)&&(I=A<3?t:I,A=1),h=on(h);++b<A;){var W=m[b];W&&l(h,W,b,I)}return h})}function Xb(l,h){return function(m,b){if(m==null)return m;if(!ji(m))return l(m,b);for(var A=m.length,I=h?A:-1,H=on(m);(h?I--:++I<A)&&b(H[I],I,H)!==!1;);return m}}function qb(l){return function(h,m,b){for(var A=-1,I=on(h),H=b(h),W=H.length;W--;){var $=H[l?W:++A];if(m(I[$],$,I)===!1)break}return h}}function gN(l,h,m){var b=h&x,A=Mh(l);function I(){var H=this&&this!==ci&&this instanceof I?A:l;return H.apply(b?m:this,arguments)}return I}function Yb(l){return function(h){h=Kt(h);var m=ou(h)?ss(h):t,b=m?m[0]:h.charAt(0),A=m?Jo(m,1).join(""):h.slice(1);return b[l]()+A}}function pu(l){return function(h){return y0(XT(jT(h).replace(oF,"")),l,"")}}function Mh(l){return function(){var h=arguments;switch(h.length){case 0:return new l;case 1:return new l(h[0]);case 2:return new l(h[0],h[1]);case 3:return new l(h[0],h[1],h[2]);case 4:return new l(h[0],h[1],h[2],h[3]);case 5:return new l(h[0],h[1],h[2],h[3],h[4]);case 6:return new l(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new l(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var m=fu(l.prototype),b=l.apply(m,h);return bn(b)?b:m}}function vN(l,h,m){var b=Mh(l);function A(){for(var I=arguments.length,H=ne(I),W=I,$=mu(A);W--;)H[W]=arguments[W];var de=I<3&&H[0]!==$&&H[I-1]!==$?[]:Yo(H,$);if(I-=de.length,I<m)return Jb(l,h,rp,A.placeholder,t,H,de,t,t,m-I);var pe=this&&this!==ci&&this instanceof A?b:l;return lr(pe,this,H)}return A}function Zb(l){return function(h,m,b){var A=on(h);if(!ji(h)){var I=et(m,3);h=ri(h),m=function(W){return I(A[W],W,A)}}var H=l(h,m,b);return H>-1?A[I?h[H]:H]:t}}function Kb(l){return eo(function(h){var m=h.length,b=m,A=Fr.prototype.thru;for(l&&h.reverse();b--;){var I=h[b];if(typeof I!="function")throw new Or(o);if(A&&!H&&lp(I)=="wrapper")var H=new Fr([],!0)}for(b=H?b:m;++b<m;){I=h[b];var W=lp(I),$=W=="wrapper"?Q0(I):t;$&&ny($[0])&&$[1]==(R|_|T|P)&&!$[4].length&&$[9]==1?H=H[lp($[0])].apply(H,$[3]):H=I.length==1&&ny(I)?H[W]():H.thru(I)}return function(){var de=arguments,pe=de[0];if(H&&de.length==1&&ft(pe))return H.plant(pe).value();for(var _e=0,Oe=m?h[_e].apply(this,de):pe;++_e<m;)Oe=h[_e].call(this,Oe);return Oe}})}function rp(l,h,m,b,A,I,H,W,$,de){var pe=h&R,_e=h&x,Oe=h&M,We=h&(_|w),tt=h&V,xt=Oe?t:Mh(l);function nt(){for(var Tt=arguments.length,Ot=ne(Tt),fr=Tt;fr--;)Ot[fr]=arguments[fr];if(We)var Di=mu(nt),dr=RF(Ot,Di);if(b&&(Ot=Wb(Ot,b,A,We)),I&&(Ot=jb(Ot,I,H,We)),Tt-=dr,We&&Tt<de){var Un=Yo(Ot,Di);return Jb(l,h,rp,nt.placeholder,m,Ot,Un,W,$,de-Tt)}var ls=_e?m:this,ro=Oe?ls[l]:l;return Tt=Ot.length,W?Ot=NN(Ot,W):tt&&Tt>1&&Ot.reverse(),pe&&$<Tt&&(Ot.length=$),this&&this!==ci&&this instanceof nt&&(ro=xt||Mh(ro)),ro.apply(ls,Ot)}return nt}function $b(l,h){return function(m,b){return jk(m,l,h(b),{})}}function sp(l,h){return function(m,b){var A;if(m===t&&b===t)return h;if(m!==t&&(A=m),b!==t){if(A===t)return b;typeof m=="string"||typeof b=="string"?(m=cr(m),b=cr(b)):(m=kb(m),b=kb(b)),A=l(m,b)}return A}}function Y0(l){return eo(function(h){return h=_n(h,ur(et())),wt(function(m){var b=this;return l(h,function(A){return lr(A,b,m)})})})}function op(l,h){h=h===t?" ":cr(h);var m=h.length;if(m<2)return m?V0(h,l):h;var b=V0(h,Xd(l/au(h)));return ou(h)?Jo(ss(b),0,l).join(""):b.slice(0,l)}function yN(l,h,m,b){var A=h&x,I=Mh(l);function H(){for(var W=-1,$=arguments.length,de=-1,pe=b.length,_e=ne(pe+$),Oe=this&&this!==ci&&this instanceof H?I:l;++de<pe;)_e[de]=b[de];for(;$--;)_e[de++]=arguments[++W];return lr(Oe,A?m:this,_e)}return H}function Qb(l){return function(h,m,b){return b&&typeof b!="number"&&Li(h,m,b)&&(m=b=t),h=io(h),m===t?(m=h,h=0):m=io(m),b=b===t?h<m?1:-1:io(b),iN(h,m,b,l)}}function ap(l){return function(h,m){return typeof h=="string"&&typeof m=="string"||(h=Br(h),m=Br(m)),l(h,m)}}function Jb(l,h,m,b,A,I,H,W,$,de){var pe=h&_,_e=pe?H:t,Oe=pe?t:H,We=pe?I:t,tt=pe?t:I;h|=pe?T:E,h&=~(pe?E:T),h&S||(h&=~(x|M));var xt=[l,h,A,We,_e,tt,Oe,W,$,de],nt=m.apply(t,xt);return ny(l)&&hT(nt,xt),nt.placeholder=b,fT(nt,l,h)}function Z0(l){var h=Jn[l];return function(m,b){if(m=Br(m),b=b==null?0:vi(gt(b),292),b&&fb(m)){var A=(Kt(m)+"e").split("e"),I=h(A[0]+"e"+(+A[1]+b));return A=(Kt(I)+"e").split("e"),+(A[0]+"e"+(+A[1]-b))}return h(m)}}var xN=cu&&1/kd(new cu([,-0]))[1]==K?function(l){return new cu(l)}:vy;function eT(l){return function(h){var m=yi(h);return m==ye?T0(h):m==st?kF(h):CF(h,l(h))}}function Js(l,h,m,b,A,I,H,W){var $=h&M;if(!$&&typeof l!="function")throw new Or(o);var de=b?b.length:0;if(de||(h&=~(T|E),b=A=t),H=H===t?H:ei(gt(H),0),W=W===t?W:gt(W),de-=A?A.length:0,h&E){var pe=b,_e=A;b=A=t}var Oe=$?t:Q0(l),We=[l,h,m,b,A,pe,_e,I,H,W];if(Oe&&ON(We,Oe),l=We[0],h=We[1],m=We[2],b=We[3],A=We[4],W=We[9]=We[9]===t?$?0:l.length:ei(We[9]-de,0),!W&&h&(_|w)&&(h&=~(_|w)),!h||h==x)var tt=gN(l,h,m);else h==_||h==w?tt=vN(l,h,W):(h==T||h==(x|T))&&!A.length?tt=yN(l,h,m,b):tt=rp.apply(t,We);var xt=Oe?Ob:hT;return fT(xt(tt,We),l,h)}function tT(l,h,m,b){return l===t||as(l,uu[m])&&!Jt.call(b,m)?h:l}function nT(l,h,m,b,A,I){return bn(l)&&bn(h)&&(I.set(h,l),ep(l,h,t,nT,I),I.delete(h)),l}function _N(l){return Eh(l)?t:l}function iT(l,h,m,b,A,I){var H=m&v,W=l.length,$=h.length;if(W!=$&&!(H&&$>W))return!1;var de=I.get(l),pe=I.get(h);if(de&&pe)return de==h&&pe==l;var _e=-1,Oe=!0,We=m&y?new sl:t;for(I.set(l,h),I.set(h,l);++_e<W;){var tt=l[_e],xt=h[_e];if(b)var nt=H?b(xt,tt,_e,h,l,I):b(tt,xt,_e,l,h,I);if(nt!==t){if(nt)continue;Oe=!1;break}if(We){if(!x0(h,function(Tt,Ot){if(!fh(We,Ot)&&(tt===Tt||A(tt,Tt,m,b,I)))return We.push(Ot)})){Oe=!1;break}}else if(!(tt===xt||A(tt,xt,m,b,I))){Oe=!1;break}}return I.delete(l),I.delete(h),Oe}function wN(l,h,m,b,A,I,H){switch(m){case be:if(l.byteLength!=h.byteLength||l.byteOffset!=h.byteOffset)return!1;l=l.buffer,h=h.buffer;case Ce:return!(l.byteLength!=h.byteLength||!I(new Hd(l),new Hd(h)));case Xe:case Ze:case Ne:return as(+l,+h);case Qe:return l.name==h.name&&l.message==h.message;case _t:case k:return l==h+"";case ye:var W=T0;case st:var $=b&v;if(W||(W=kd),l.size!=h.size&&!$)return!1;var de=H.get(l);if(de)return de==h;b|=y,H.set(l,h);var pe=iT(W(l),W(h),b,A,I,H);return H.delete(l),pe;case D:if(vh)return vh.call(l)==vh.call(h)}return!1}function SN(l,h,m,b,A,I){var H=m&v,W=K0(l),$=W.length,de=K0(h),pe=de.length;if($!=pe&&!H)return!1;for(var _e=$;_e--;){var Oe=W[_e];if(!(H?Oe in h:Jt.call(h,Oe)))return!1}var We=I.get(l),tt=I.get(h);if(We&&tt)return We==h&&tt==l;var xt=!0;I.set(l,h),I.set(h,l);for(var nt=H;++_e<$;){Oe=W[_e];var Tt=l[Oe],Ot=h[Oe];if(b)var fr=H?b(Ot,Tt,Oe,h,l,I):b(Tt,Ot,Oe,l,h,I);if(!(fr===t?Tt===Ot||A(Tt,Ot,m,b,I):fr)){xt=!1;break}nt||(nt=Oe=="constructor")}if(xt&&!nt){var Di=l.constructor,dr=h.constructor;Di!=dr&&"constructor"in l&&"constructor"in h&&!(typeof Di=="function"&&Di instanceof Di&&typeof dr=="function"&&dr instanceof dr)&&(xt=!1)}return I.delete(l),I.delete(h),xt}function eo(l){return ry(uT(l,t,yT),l+"")}function K0(l){return Mb(l,ri,ey)}function $0(l){return Mb(l,Xi,rT)}var Q0=Yd?function(l){return Yd.get(l)}:vy;function lp(l){for(var h=l.name+"",m=hu[h],b=Jt.call(hu,h)?m.length:0;b--;){var A=m[b],I=A.func;if(I==null||I==l)return A.name}return h}function mu(l){var h=Jt.call(L,"placeholder")?L:l;return h.placeholder}function et(){var l=L.iteratee||my;return l=l===my?Eb:l,arguments.length?l(arguments[0],arguments[1]):l}function up(l,h){var m=l.__data__;return PN(h)?m[typeof h=="string"?"string":"hash"]:m.map}function J0(l){for(var h=ri(l),m=h.length;m--;){var b=h[m],A=l[b];h[m]=[b,A,aT(A)]}return h}function ll(l,h){var m=IF(l,h);return Tb(m)?m:t}function MN(l){var h=Jt.call(l,il),m=l[il];try{l[il]=t;var b=!0}catch{}var A=Ud.call(l);return b&&(h?l[il]=m:delete l[il]),A}var ey=A0?function(l){return l==null?[]:(l=on(l),Xo(A0(l),function(h){return cb.call(l,h)}))}:yy,rT=A0?function(l){for(var h=[];l;)qo(h,ey(l)),l=Gd(l);return h}:yy,yi=Pi;(C0&&yi(new C0(new ArrayBuffer(1)))!=be||ph&&yi(new ph)!=ye||R0&&yi(R0.resolve())!=$e||cu&&yi(new cu)!=st||mh&&yi(new mh)!=he)&&(yi=function(l){var h=Pi(l),m=h==qe?l.constructor:t,b=m?ul(m):"";if(b)switch(b){case sk:return be;case ok:return ye;case ak:return $e;case lk:return st;case uk:return he}return h});function bN(l,h,m){for(var b=-1,A=m.length;++b<A;){var I=m[b],H=I.size;switch(I.type){case"drop":l+=H;break;case"dropRight":h-=H;break;case"take":h=vi(h,l+H);break;case"takeRight":l=ei(l,h-H);break}}return{start:l,end:h}}function TN(l){var h=l.match(re);return h?h[1].split(ge):[]}function sT(l,h,m){h=Qo(h,l);for(var b=-1,A=h.length,I=!1;++b<A;){var H=Rs(h[b]);if(!(I=l!=null&&m(l,H)))break;l=l[H]}return I||++b!=A?I:(A=l==null?0:l.length,!!A&&gp(A)&&to(H,A)&&(ft(l)||cl(l)))}function EN(l){var h=l.length,m=new l.constructor(h);return h&&typeof l[0]=="string"&&Jt.call(l,"index")&&(m.index=l.index,m.input=l.input),m}function oT(l){return typeof l.constructor=="function"&&!bh(l)?fu(Gd(l)):{}}function AN(l,h,m){var b=l.constructor;switch(h){case Ce:return q0(l);case Xe:case Ze:return new b(+l);case be:return cN(l,m);case z:case xe:case He:case Ee:case j:case Ae:case Te:case Je:case Ie:return Hb(l,m);case ye:return new b;case Ne:case k:return new b(l);case _t:return hN(l);case st:return new b;case D:return fN(l)}}function CN(l,h){var m=h.length;if(!m)return l;var b=m-1;return h[b]=(m>1?"& ":"")+h[b],h=h.join(m>2?", ":" "),l.replace(le,`{
/* [wrapped with `+h+`] */
`)}function RN(l){return ft(l)||cl(l)||!!(hb&&l&&l[hb])}function to(l,h){var m=typeof l;return h=h==null?B:h,!!h&&(m=="number"||m!="symbol"&&Go.test(l))&&l>-1&&l%1==0&&l<h}function Li(l,h,m){if(!bn(m))return!1;var b=typeof h;return(b=="number"?ji(m)&&to(h,m.length):b=="string"&&h in m)?as(m[h],l):!1}function ty(l,h){if(ft(l))return!1;var m=typeof l;return m=="number"||m=="symbol"||m=="boolean"||l==null||hr(l)?!0:Dd.test(l)||!uh.test(l)||h!=null&&l in on(h)}function PN(l){var h=typeof l;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?l!=="__proto__":l===null}function ny(l){var h=lp(l),m=L[h];if(typeof m!="function"||!(h in Ct.prototype))return!1;if(l===m)return!0;var b=Q0(m);return!!b&&l===b[0]}function LN(l){return!!ab&&ab in l}var DN=zd?no:xy;function bh(l){var h=l&&l.constructor,m=typeof h=="function"&&h.prototype||uu;return l===m}function aT(l){return l===l&&!bn(l)}function lT(l,h){return function(m){return m==null?!1:m[l]===h&&(h!==t||l in on(m))}}function IN(l){var h=pp(l,function(b){return m.size===c&&m.clear(),b}),m=h.cache;return h}function ON(l,h){var m=l[1],b=h[1],A=m|b,I=A<(x|M|R),H=b==R&&m==_||b==R&&m==P&&l[7].length<=h[8]||b==(R|P)&&h[7].length<=h[8]&&m==_;if(!(I||H))return l;b&x&&(l[2]=h[2],A|=m&x?0:S);var W=h[3];if(W){var $=l[3];l[3]=$?Wb($,W,h[4]):W,l[4]=$?Yo(l[3],f):h[4]}return W=h[5],W&&($=l[5],l[5]=$?jb($,W,h[6]):W,l[6]=$?Yo(l[5],f):h[6]),W=h[7],W&&(l[7]=W),b&R&&(l[8]=l[8]==null?h[8]:vi(l[8],h[8])),l[9]==null&&(l[9]=h[9]),l[0]=h[0],l[1]=A,l}function FN(l){var h=[];if(l!=null)for(var m in on(l))h.push(m);return h}function kN(l){return Ud.call(l)}function uT(l,h,m){return h=ei(h===t?l.length-1:h,0),function(){for(var b=arguments,A=-1,I=ei(b.length-h,0),H=ne(I);++A<I;)H[A]=b[h+A];A=-1;for(var W=ne(h+1);++A<h;)W[A]=b[A];return W[h]=m(H),lr(l,this,W)}}function cT(l,h){return h.length<2?l:al(l,Nr(h,0,-1))}function NN(l,h){for(var m=l.length,b=vi(h.length,m),A=Wi(l);b--;){var I=h[b];l[b]=to(I,m)?A[I]:t}return l}function iy(l,h){if(!(h==="constructor"&&typeof l[h]=="function")&&h!="__proto__")return l[h]}var hT=dT(Ob),Th=QF||function(l,h){return ci.setTimeout(l,h)},ry=dT(oN);function fT(l,h,m){var b=h+"";return ry(l,CN(b,zN(TN(b),m)))}function dT(l){var h=0,m=0;return function(){var b=nk(),A=Q-(b-m);if(m=b,A>0){if(++h>=N)return arguments[0]}else h=0;return l.apply(t,arguments)}}function cp(l,h){var m=-1,b=l.length,A=b-1;for(h=h===t?b:h;++m<h;){var I=U0(m,A),H=l[I];l[I]=l[m],l[m]=H}return l.length=h,l}var pT=IN(function(l){var h=[];return l.charCodeAt(0)===46&&h.push(""),l.replace(l0,function(m,b,A,I){h.push(A?I.replace(yt,"$1"):b||m)}),h});function Rs(l){if(typeof l=="string"||hr(l))return l;var h=l+"";return h=="0"&&1/l==-K?"-0":h}function ul(l){if(l!=null){try{return Bd.call(l)}catch{}try{return l+""}catch{}}return""}function zN(l,h){return Ir(ze,function(m){var b="_."+m[0];h&m[1]&&!Od(l,b)&&l.push(b)}),l.sort()}function mT(l){if(l instanceof Ct)return l.clone();var h=new Fr(l.__wrapped__,l.__chain__);return h.__actions__=Wi(l.__actions__),h.__index__=l.__index__,h.__values__=l.__values__,h}function BN(l,h,m){(m?Li(l,h,m):h===t)?h=1:h=ei(gt(h),0);var b=l==null?0:l.length;if(!b||h<1)return[];for(var A=0,I=0,H=ne(Xd(b/h));A<b;)H[I++]=Nr(l,A,A+=h);return H}function UN(l){for(var h=-1,m=l==null?0:l.length,b=0,A=[];++h<m;){var I=l[h];I&&(A[b++]=I)}return A}function VN(){var l=arguments.length;if(!l)return[];for(var h=ne(l-1),m=arguments[0],b=l;b--;)h[b-1]=arguments[b];return qo(ft(m)?Wi(m):[m],hi(h,1))}var HN=wt(function(l,h){return Bn(l)?xh(l,hi(h,1,Bn,!0)):[]}),GN=wt(function(l,h){var m=zr(h);return Bn(m)&&(m=t),Bn(l)?xh(l,hi(h,1,Bn,!0),et(m,2)):[]}),WN=wt(function(l,h){var m=zr(h);return Bn(m)&&(m=t),Bn(l)?xh(l,hi(h,1,Bn,!0),t,m):[]});function jN(l,h,m){var b=l==null?0:l.length;return b?(h=m||h===t?1:gt(h),Nr(l,h<0?0:h,b)):[]}function XN(l,h,m){var b=l==null?0:l.length;return b?(h=m||h===t?1:gt(h),h=b-h,Nr(l,0,h<0?0:h)):[]}function qN(l,h){return l&&l.length?np(l,et(h,3),!0,!0):[]}function YN(l,h){return l&&l.length?np(l,et(h,3),!0):[]}function ZN(l,h,m,b){var A=l==null?0:l.length;return A?(m&&typeof m!="number"&&Li(l,h,m)&&(m=0,b=A),Vk(l,h,m,b)):[]}function gT(l,h,m){var b=l==null?0:l.length;if(!b)return-1;var A=m==null?0:gt(m);return A<0&&(A=ei(b+A,0)),Fd(l,et(h,3),A)}function vT(l,h,m){var b=l==null?0:l.length;if(!b)return-1;var A=b-1;return m!==t&&(A=gt(m),A=m<0?ei(b+A,0):vi(A,b-1)),Fd(l,et(h,3),A,!0)}function yT(l){var h=l==null?0:l.length;return h?hi(l,1):[]}function KN(l){var h=l==null?0:l.length;return h?hi(l,K):[]}function $N(l,h){var m=l==null?0:l.length;return m?(h=h===t?1:gt(h),hi(l,h)):[]}function QN(l){for(var h=-1,m=l==null?0:l.length,b={};++h<m;){var A=l[h];b[A[0]]=A[1]}return b}function xT(l){return l&&l.length?l[0]:t}function JN(l,h,m){var b=l==null?0:l.length;if(!b)return-1;var A=m==null?0:gt(m);return A<0&&(A=ei(b+A,0)),su(l,h,A)}function ez(l){var h=l==null?0:l.length;return h?Nr(l,0,-1):[]}var tz=wt(function(l){var h=_n(l,j0);return h.length&&h[0]===l[0]?F0(h):[]}),nz=wt(function(l){var h=zr(l),m=_n(l,j0);return h===zr(m)?h=t:m.pop(),m.length&&m[0]===l[0]?F0(m,et(h,2)):[]}),iz=wt(function(l){var h=zr(l),m=_n(l,j0);return h=typeof h=="function"?h:t,h&&m.pop(),m.length&&m[0]===l[0]?F0(m,t,h):[]});function rz(l,h){return l==null?"":ek.call(l,h)}function zr(l){var h=l==null?0:l.length;return h?l[h-1]:t}function sz(l,h,m){var b=l==null?0:l.length;if(!b)return-1;var A=b;return m!==t&&(A=gt(m),A=A<0?ei(b+A,0):vi(A,b-1)),h===h?zF(l,h,A):Fd(l,JM,A,!0)}function oz(l,h){return l&&l.length?Pb(l,gt(h)):t}var az=wt(_T);function _T(l,h){return l&&l.length&&h&&h.length?B0(l,h):l}function lz(l,h,m){return l&&l.length&&h&&h.length?B0(l,h,et(m,2)):l}function uz(l,h,m){return l&&l.length&&h&&h.length?B0(l,h,t,m):l}var cz=eo(function(l,h){var m=l==null?0:l.length,b=L0(l,h);return Ib(l,_n(h,function(A){return to(A,m)?+A:A}).sort(Gb)),b});function hz(l,h){var m=[];if(!(l&&l.length))return m;var b=-1,A=[],I=l.length;for(h=et(h,3);++b<I;){var H=l[b];h(H,b,l)&&(m.push(H),A.push(b))}return Ib(l,A),m}function sy(l){return l==null?l:rk.call(l)}function fz(l,h,m){var b=l==null?0:l.length;return b?(m&&typeof m!="number"&&Li(l,h,m)?(h=0,m=b):(h=h==null?0:gt(h),m=m===t?b:gt(m)),Nr(l,h,m)):[]}function dz(l,h){return tp(l,h)}function pz(l,h,m){return H0(l,h,et(m,2))}function mz(l,h){var m=l==null?0:l.length;if(m){var b=tp(l,h);if(b<m&&as(l[b],h))return b}return-1}function gz(l,h){return tp(l,h,!0)}function vz(l,h,m){return H0(l,h,et(m,2),!0)}function yz(l,h){var m=l==null?0:l.length;if(m){var b=tp(l,h,!0)-1;if(as(l[b],h))return b}return-1}function xz(l){return l&&l.length?Fb(l):[]}function _z(l,h){return l&&l.length?Fb(l,et(h,2)):[]}function wz(l){var h=l==null?0:l.length;return h?Nr(l,1,h):[]}function Sz(l,h,m){return l&&l.length?(h=m||h===t?1:gt(h),Nr(l,0,h<0?0:h)):[]}function Mz(l,h,m){var b=l==null?0:l.length;return b?(h=m||h===t?1:gt(h),h=b-h,Nr(l,h<0?0:h,b)):[]}function bz(l,h){return l&&l.length?np(l,et(h,3),!1,!0):[]}function Tz(l,h){return l&&l.length?np(l,et(h,3)):[]}var Ez=wt(function(l){return $o(hi(l,1,Bn,!0))}),Az=wt(function(l){var h=zr(l);return Bn(h)&&(h=t),$o(hi(l,1,Bn,!0),et(h,2))}),Cz=wt(function(l){var h=zr(l);return h=typeof h=="function"?h:t,$o(hi(l,1,Bn,!0),t,h)});function Rz(l){return l&&l.length?$o(l):[]}function Pz(l,h){return l&&l.length?$o(l,et(h,2)):[]}function Lz(l,h){return h=typeof h=="function"?h:t,l&&l.length?$o(l,t,h):[]}function oy(l){if(!(l&&l.length))return[];var h=0;return l=Xo(l,function(m){if(Bn(m))return h=ei(m.length,h),!0}),M0(h,function(m){return _n(l,_0(m))})}function wT(l,h){if(!(l&&l.length))return[];var m=oy(l);return h==null?m:_n(m,function(b){return lr(h,t,b)})}var Dz=wt(function(l,h){return Bn(l)?xh(l,h):[]}),Iz=wt(function(l){return W0(Xo(l,Bn))}),Oz=wt(function(l){var h=zr(l);return Bn(h)&&(h=t),W0(Xo(l,Bn),et(h,2))}),Fz=wt(function(l){var h=zr(l);return h=typeof h=="function"?h:t,W0(Xo(l,Bn),t,h)}),kz=wt(oy);function Nz(l,h){return Bb(l||[],h||[],yh)}function zz(l,h){return Bb(l||[],h||[],Sh)}var Bz=wt(function(l){var h=l.length,m=h>1?l[h-1]:t;return m=typeof m=="function"?(l.pop(),m):t,wT(l,m)});function ST(l){var h=L(l);return h.__chain__=!0,h}function Uz(l,h){return h(l),l}function hp(l,h){return h(l)}var Vz=eo(function(l){var h=l.length,m=h?l[0]:0,b=this.__wrapped__,A=function(I){return L0(I,l)};return h>1||this.__actions__.length||!(b instanceof Ct)||!to(m)?this.thru(A):(b=b.slice(m,+m+(h?1:0)),b.__actions__.push({func:hp,args:[A],thisArg:t}),new Fr(b,this.__chain__).thru(function(I){return h&&!I.length&&I.push(t),I}))});function Hz(){return ST(this)}function Gz(){return new Fr(this.value(),this.__chain__)}function Wz(){this.__values__===t&&(this.__values__=kT(this.value()));var l=this.__index__>=this.__values__.length,h=l?t:this.__values__[this.__index__++];return{done:l,value:h}}function jz(){return this}function Xz(l){for(var h,m=this;m instanceof Kd;){var b=mT(m);b.__index__=0,b.__values__=t,h?A.__wrapped__=b:h=b;var A=b;m=m.__wrapped__}return A.__wrapped__=l,h}function qz(){var l=this.__wrapped__;if(l instanceof Ct){var h=l;return this.__actions__.length&&(h=new Ct(this)),h=h.reverse(),h.__actions__.push({func:hp,args:[sy],thisArg:t}),new Fr(h,this.__chain__)}return this.thru(sy)}function Yz(){return zb(this.__wrapped__,this.__actions__)}var Zz=ip(function(l,h,m){Jt.call(l,m)?++l[m]:Qs(l,m,1)});function Kz(l,h,m){var b=ft(l)?$M:Uk;return m&&Li(l,h,m)&&(h=t),b(l,et(h,3))}function $z(l,h){var m=ft(l)?Xo:wb;return m(l,et(h,3))}var Qz=Zb(gT),Jz=Zb(vT);function eB(l,h){return hi(fp(l,h),1)}function tB(l,h){return hi(fp(l,h),K)}function nB(l,h,m){return m=m===t?1:gt(m),hi(fp(l,h),m)}function MT(l,h){var m=ft(l)?Ir:Ko;return m(l,et(h,3))}function bT(l,h){var m=ft(l)?wF:_b;return m(l,et(h,3))}var iB=ip(function(l,h,m){Jt.call(l,m)?l[m].push(h):Qs(l,m,[h])});function rB(l,h,m,b){l=ji(l)?l:vu(l),m=m&&!b?gt(m):0;var A=l.length;return m<0&&(m=ei(A+m,0)),vp(l)?m<=A&&l.indexOf(h,m)>-1:!!A&&su(l,h,m)>-1}var sB=wt(function(l,h,m){var b=-1,A=typeof h=="function",I=ji(l)?ne(l.length):[];return Ko(l,function(H){I[++b]=A?lr(h,H,m):_h(H,h,m)}),I}),oB=ip(function(l,h,m){Qs(l,m,h)});function fp(l,h){var m=ft(l)?_n:Ab;return m(l,et(h,3))}function aB(l,h,m,b){return l==null?[]:(ft(h)||(h=h==null?[]:[h]),m=b?t:m,ft(m)||(m=m==null?[]:[m]),Lb(l,h,m))}var lB=ip(function(l,h,m){l[m?0:1].push(h)},function(){return[[],[]]});function uB(l,h,m){var b=ft(l)?y0:tb,A=arguments.length<3;return b(l,et(h,4),m,A,Ko)}function cB(l,h,m){var b=ft(l)?SF:tb,A=arguments.length<3;return b(l,et(h,4),m,A,_b)}function hB(l,h){var m=ft(l)?Xo:wb;return m(l,mp(et(h,3)))}function fB(l){var h=ft(l)?gb:rN;return h(l)}function dB(l,h,m){(m?Li(l,h,m):h===t)?h=1:h=gt(h);var b=ft(l)?Fk:sN;return b(l,h)}function pB(l){var h=ft(l)?kk:aN;return h(l)}function mB(l){if(l==null)return 0;if(ji(l))return vp(l)?au(l):l.length;var h=yi(l);return h==ye||h==st?l.size:N0(l).length}function gB(l,h,m){var b=ft(l)?x0:lN;return m&&Li(l,h,m)&&(h=t),b(l,et(h,3))}var vB=wt(function(l,h){if(l==null)return[];var m=h.length;return m>1&&Li(l,h[0],h[1])?h=[]:m>2&&Li(h[0],h[1],h[2])&&(h=[h[0]]),Lb(l,hi(h,1),[])}),dp=$F||function(){return ci.Date.now()};function yB(l,h){if(typeof h!="function")throw new Or(o);return l=gt(l),function(){if(--l<1)return h.apply(this,arguments)}}function TT(l,h,m){return h=m?t:h,h=l&&h==null?l.length:h,Js(l,R,t,t,t,t,h)}function ET(l,h){var m;if(typeof h!="function")throw new Or(o);return l=gt(l),function(){return--l>0&&(m=h.apply(this,arguments)),l<=1&&(h=t),m}}var ay=wt(function(l,h,m){var b=x;if(m.length){var A=Yo(m,mu(ay));b|=T}return Js(l,b,h,m,A)}),AT=wt(function(l,h,m){var b=x|M;if(m.length){var A=Yo(m,mu(AT));b|=T}return Js(h,b,l,m,A)});function CT(l,h,m){h=m?t:h;var b=Js(l,_,t,t,t,t,t,h);return b.placeholder=CT.placeholder,b}function RT(l,h,m){h=m?t:h;var b=Js(l,w,t,t,t,t,t,h);return b.placeholder=RT.placeholder,b}function PT(l,h,m){var b,A,I,H,W,$,de=0,pe=!1,_e=!1,Oe=!0;if(typeof l!="function")throw new Or(o);h=Br(h)||0,bn(m)&&(pe=!!m.leading,_e="maxWait"in m,I=_e?ei(Br(m.maxWait)||0,h):I,Oe="trailing"in m?!!m.trailing:Oe);function We(Un){var ls=b,ro=A;return b=A=t,de=Un,H=l.apply(ro,ls),H}function tt(Un){return de=Un,W=Th(Tt,h),pe?We(Un):H}function xt(Un){var ls=Un-$,ro=Un-de,ZT=h-ls;return _e?vi(ZT,I-ro):ZT}function nt(Un){var ls=Un-$,ro=Un-de;return $===t||ls>=h||ls<0||_e&&ro>=I}function Tt(){var Un=dp();if(nt(Un))return Ot(Un);W=Th(Tt,xt(Un))}function Ot(Un){return W=t,Oe&&b?We(Un):(b=A=t,H)}function fr(){W!==t&&Ub(W),de=0,b=$=A=W=t}function Di(){return W===t?H:Ot(dp())}function dr(){var Un=dp(),ls=nt(Un);if(b=arguments,A=this,$=Un,ls){if(W===t)return tt($);if(_e)return Ub(W),W=Th(Tt,h),We($)}return W===t&&(W=Th(Tt,h)),H}return dr.cancel=fr,dr.flush=Di,dr}var xB=wt(function(l,h){return xb(l,1,h)}),_B=wt(function(l,h,m){return xb(l,Br(h)||0,m)});function wB(l){return Js(l,V)}function pp(l,h){if(typeof l!="function"||h!=null&&typeof h!="function")throw new Or(o);var m=function(){var b=arguments,A=h?h.apply(this,b):b[0],I=m.cache;if(I.has(A))return I.get(A);var H=l.apply(this,b);return m.cache=I.set(A,H)||I,H};return m.cache=new(pp.Cache||$s),m}pp.Cache=$s;function mp(l){if(typeof l!="function")throw new Or(o);return function(){var h=arguments;switch(h.length){case 0:return!l.call(this);case 1:return!l.call(this,h[0]);case 2:return!l.call(this,h[0],h[1]);case 3:return!l.call(this,h[0],h[1],h[2])}return!l.apply(this,h)}}function SB(l){return ET(2,l)}var MB=uN(function(l,h){h=h.length==1&&ft(h[0])?_n(h[0],ur(et())):_n(hi(h,1),ur(et()));var m=h.length;return wt(function(b){for(var A=-1,I=vi(b.length,m);++A<I;)b[A]=h[A].call(this,b[A]);return lr(l,this,b)})}),ly=wt(function(l,h){var m=Yo(h,mu(ly));return Js(l,T,t,h,m)}),LT=wt(function(l,h){var m=Yo(h,mu(LT));return Js(l,E,t,h,m)}),bB=eo(function(l,h){return Js(l,P,t,t,t,h)});function TB(l,h){if(typeof l!="function")throw new Or(o);return h=h===t?h:gt(h),wt(l,h)}function EB(l,h){if(typeof l!="function")throw new Or(o);return h=h==null?0:ei(gt(h),0),wt(function(m){var b=m[h],A=Jo(m,0,h);return b&&qo(A,b),lr(l,this,A)})}function AB(l,h,m){var b=!0,A=!0;if(typeof l!="function")throw new Or(o);return bn(m)&&(b="leading"in m?!!m.leading:b,A="trailing"in m?!!m.trailing:A),PT(l,h,{leading:b,maxWait:h,trailing:A})}function CB(l){return TT(l,1)}function RB(l,h){return ly(X0(h),l)}function PB(){if(!arguments.length)return[];var l=arguments[0];return ft(l)?l:[l]}function LB(l){return kr(l,g)}function DB(l,h){return h=typeof h=="function"?h:t,kr(l,g,h)}function IB(l){return kr(l,d|g)}function OB(l,h){return h=typeof h=="function"?h:t,kr(l,d|g,h)}function FB(l,h){return h==null||yb(l,h,ri(h))}function as(l,h){return l===h||l!==l&&h!==h}var kB=ap(O0),NB=ap(function(l,h){return l>=h}),cl=bb(function(){return arguments}())?bb:function(l){return In(l)&&Jt.call(l,"callee")&&!cb.call(l,"callee")},ft=ne.isArray,zB=jM?ur(jM):Xk;function ji(l){return l!=null&&gp(l.length)&&!no(l)}function Bn(l){return In(l)&&ji(l)}function BB(l){return l===!0||l===!1||In(l)&&Pi(l)==Xe}var ea=JF||xy,UB=XM?ur(XM):qk;function VB(l){return In(l)&&l.nodeType===1&&!Eh(l)}function HB(l){if(l==null)return!0;if(ji(l)&&(ft(l)||typeof l=="string"||typeof l.splice=="function"||ea(l)||gu(l)||cl(l)))return!l.length;var h=yi(l);if(h==ye||h==st)return!l.size;if(bh(l))return!N0(l).length;for(var m in l)if(Jt.call(l,m))return!1;return!0}function GB(l,h){return wh(l,h)}function WB(l,h,m){m=typeof m=="function"?m:t;var b=m?m(l,h):t;return b===t?wh(l,h,t,m):!!b}function uy(l){if(!In(l))return!1;var h=Pi(l);return h==Qe||h==Se||typeof l.message=="string"&&typeof l.name=="string"&&!Eh(l)}function jB(l){return typeof l=="number"&&fb(l)}function no(l){if(!bn(l))return!1;var h=Pi(l);return h==ue||h==fe||h==rt||h==Ue}function DT(l){return typeof l=="number"&&l==gt(l)}function gp(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=B}function bn(l){var h=typeof l;return l!=null&&(h=="object"||h=="function")}function In(l){return l!=null&&typeof l=="object"}var IT=qM?ur(qM):Zk;function XB(l,h){return l===h||k0(l,h,J0(h))}function qB(l,h,m){return m=typeof m=="function"?m:t,k0(l,h,J0(h),m)}function YB(l){return OT(l)&&l!=+l}function ZB(l){if(DN(l))throw new ut(s);return Tb(l)}function KB(l){return l===null}function $B(l){return l==null}function OT(l){return typeof l=="number"||In(l)&&Pi(l)==Ne}function Eh(l){if(!In(l)||Pi(l)!=qe)return!1;var h=Gd(l);if(h===null)return!0;var m=Jt.call(h,"constructor")&&h.constructor;return typeof m=="function"&&m instanceof m&&Bd.call(m)==qF}var cy=YM?ur(YM):Kk;function QB(l){return DT(l)&&l>=-B&&l<=B}var FT=ZM?ur(ZM):$k;function vp(l){return typeof l=="string"||!ft(l)&&In(l)&&Pi(l)==k}function hr(l){return typeof l=="symbol"||In(l)&&Pi(l)==D}var gu=KM?ur(KM):Qk;function JB(l){return l===t}function eU(l){return In(l)&&yi(l)==he}function tU(l){return In(l)&&Pi(l)==me}var nU=ap(z0),iU=ap(function(l,h){return l<=h});function kT(l){if(!l)return[];if(ji(l))return vp(l)?ss(l):Wi(l);if(dh&&l[dh])return FF(l[dh]());var h=yi(l),m=h==ye?T0:h==st?kd:vu;return m(l)}function io(l){if(!l)return l===0?l:0;if(l=Br(l),l===K||l===-K){var h=l<0?-1:1;return h*Z}return l===l?l:0}function gt(l){var h=io(l),m=h%1;return h===h?m?h-m:h:0}function NT(l){return l?ol(gt(l),0,se):0}function Br(l){if(typeof l=="number")return l;if(hr(l))return ee;if(bn(l)){var h=typeof l.valueOf=="function"?l.valueOf():l;l=bn(h)?h+"":h}if(typeof l!="string")return l===0?l:+l;l=nb(l);var m=zt.test(l);return m||Zs.test(l)?yF(l.slice(2),m?2:8):It.test(l)?ee:+l}function zT(l){return Cs(l,Xi(l))}function rU(l){return l?ol(gt(l),-B,B):l===0?l:0}function Kt(l){return l==null?"":cr(l)}var sU=du(function(l,h){if(bh(h)||ji(h)){Cs(h,ri(h),l);return}for(var m in h)Jt.call(h,m)&&yh(l,m,h[m])}),BT=du(function(l,h){Cs(h,Xi(h),l)}),yp=du(function(l,h,m,b){Cs(h,Xi(h),l,b)}),oU=du(function(l,h,m,b){Cs(h,ri(h),l,b)}),aU=eo(L0);function lU(l,h){var m=fu(l);return h==null?m:vb(m,h)}var uU=wt(function(l,h){l=on(l);var m=-1,b=h.length,A=b>2?h[2]:t;for(A&&Li(h[0],h[1],A)&&(b=1);++m<b;)for(var I=h[m],H=Xi(I),W=-1,$=H.length;++W<$;){var de=H[W],pe=l[de];(pe===t||as(pe,uu[de])&&!Jt.call(l,de))&&(l[de]=I[de])}return l}),cU=wt(function(l){return l.push(t,nT),lr(UT,t,l)});function hU(l,h){return QM(l,et(h,3),As)}function fU(l,h){return QM(l,et(h,3),I0)}function dU(l,h){return l==null?l:D0(l,et(h,3),Xi)}function pU(l,h){return l==null?l:Sb(l,et(h,3),Xi)}function mU(l,h){return l&&As(l,et(h,3))}function gU(l,h){return l&&I0(l,et(h,3))}function vU(l){return l==null?[]:Jd(l,ri(l))}function yU(l){return l==null?[]:Jd(l,Xi(l))}function hy(l,h,m){var b=l==null?t:al(l,h);return b===t?m:b}function xU(l,h){return l!=null&&sT(l,h,Hk)}function fy(l,h){return l!=null&&sT(l,h,Gk)}var _U=$b(function(l,h,m){h!=null&&typeof h.toString!="function"&&(h=Ud.call(h)),l[h]=m},py(qi)),wU=$b(function(l,h,m){h!=null&&typeof h.toString!="function"&&(h=Ud.call(h)),Jt.call(l,h)?l[h].push(m):l[h]=[m]},et),SU=wt(_h);function ri(l){return ji(l)?mb(l):N0(l)}function Xi(l){return ji(l)?mb(l,!0):Jk(l)}function MU(l,h){var m={};return h=et(h,3),As(l,function(b,A,I){Qs(m,h(b,A,I),b)}),m}function bU(l,h){var m={};return h=et(h,3),As(l,function(b,A,I){Qs(m,A,h(b,A,I))}),m}var TU=du(function(l,h,m){ep(l,h,m)}),UT=du(function(l,h,m,b){ep(l,h,m,b)}),EU=eo(function(l,h){var m={};if(l==null)return m;var b=!1;h=_n(h,function(I){return I=Qo(I,l),b||(b=I.length>1),I}),Cs(l,$0(l),m),b&&(m=kr(m,d|p|g,_N));for(var A=h.length;A--;)G0(m,h[A]);return m});function AU(l,h){return VT(l,mp(et(h)))}var CU=eo(function(l,h){return l==null?{}:tN(l,h)});function VT(l,h){if(l==null)return{};var m=_n($0(l),function(b){return[b]});return h=et(h),Db(l,m,function(b,A){return h(b,A[0])})}function RU(l,h,m){h=Qo(h,l);var b=-1,A=h.length;for(A||(A=1,l=t);++b<A;){var I=l==null?t:l[Rs(h[b])];I===t&&(b=A,I=m),l=no(I)?I.call(l):I}return l}function PU(l,h,m){return l==null?l:Sh(l,h,m)}function LU(l,h,m,b){return b=typeof b=="function"?b:t,l==null?l:Sh(l,h,m,b)}var HT=eT(ri),GT=eT(Xi);function DU(l,h,m){var b=ft(l),A=b||ea(l)||gu(l);if(h=et(h,4),m==null){var I=l&&l.constructor;A?m=b?new I:[]:bn(l)?m=no(I)?fu(Gd(l)):{}:m={}}return(A?Ir:As)(l,function(H,W,$){return h(m,H,W,$)}),m}function IU(l,h){return l==null?!0:G0(l,h)}function OU(l,h,m){return l==null?l:Nb(l,h,X0(m))}function FU(l,h,m,b){return b=typeof b=="function"?b:t,l==null?l:Nb(l,h,X0(m),b)}function vu(l){return l==null?[]:b0(l,ri(l))}function kU(l){return l==null?[]:b0(l,Xi(l))}function NU(l,h,m){return m===t&&(m=h,h=t),m!==t&&(m=Br(m),m=m===m?m:0),h!==t&&(h=Br(h),h=h===h?h:0),ol(Br(l),h,m)}function zU(l,h,m){return h=io(h),m===t?(m=h,h=0):m=io(m),l=Br(l),Wk(l,h,m)}function BU(l,h,m){if(m&&typeof m!="boolean"&&Li(l,h,m)&&(h=m=t),m===t&&(typeof h=="boolean"?(m=h,h=t):typeof l=="boolean"&&(m=l,l=t)),l===t&&h===t?(l=0,h=1):(l=io(l),h===t?(h=l,l=0):h=io(h)),l>h){var b=l;l=h,h=b}if(m||l%1||h%1){var A=db();return vi(l+A*(h-l+vF("1e-"+((A+"").length-1))),h)}return U0(l,h)}var UU=pu(function(l,h,m){return h=h.toLowerCase(),l+(m?WT(h):h)});function WT(l){return dy(Kt(l).toLowerCase())}function jT(l){return l=Kt(l),l&&l.replace(Wo,PF).replace(aF,"")}function VU(l,h,m){l=Kt(l),h=cr(h);var b=l.length;m=m===t?b:ol(gt(m),0,b);var A=m;return m-=h.length,m>=0&&l.slice(m,A)==h}function HU(l){return l=Kt(l),l&&Pr.test(l)?l.replace(bt,LF):l}function GU(l){return l=Kt(l),l&&u0.test(l)?l.replace(ch,"\\$&"):l}var WU=pu(function(l,h,m){return l+(m?"-":"")+h.toLowerCase()}),jU=pu(function(l,h,m){return l+(m?" ":"")+h.toLowerCase()}),XU=Yb("toLowerCase");function qU(l,h,m){l=Kt(l),h=gt(h);var b=h?au(l):0;if(!h||b>=h)return l;var A=(h-b)/2;return op(qd(A),m)+l+op(Xd(A),m)}function YU(l,h,m){l=Kt(l),h=gt(h);var b=h?au(l):0;return h&&b<h?l+op(h-b,m):l}function ZU(l,h,m){l=Kt(l),h=gt(h);var b=h?au(l):0;return h&&b<h?op(h-b,m)+l:l}function KU(l,h,m){return m||h==null?h=0:h&&(h=+h),ik(Kt(l).replace(U,""),h||0)}function $U(l,h,m){return(m?Li(l,h,m):h===t)?h=1:h=gt(h),V0(Kt(l),h)}function QU(){var l=arguments,h=Kt(l[0]);return l.length<3?h:h.replace(l[1],l[2])}var JU=pu(function(l,h,m){return l+(m?"_":"")+h.toLowerCase()});function e4(l,h,m){return m&&typeof m!="number"&&Li(l,h,m)&&(h=m=t),m=m===t?se:m>>>0,m?(l=Kt(l),l&&(typeof h=="string"||h!=null&&!cy(h))&&(h=cr(h),!h&&ou(l))?Jo(ss(l),0,m):l.split(h,m)):[]}var t4=pu(function(l,h,m){return l+(m?" ":"")+dy(h)});function n4(l,h,m){return l=Kt(l),m=m==null?0:ol(gt(m),0,l.length),h=cr(h),l.slice(m,m+h.length)==h}function i4(l,h,m){var b=L.templateSettings;m&&Li(l,h,m)&&(h=t),l=Kt(l),h=yp({},h,b,tT);var A=yp({},h.imports,b.imports,tT),I=ri(A),H=b0(A,I),W,$,de=0,pe=h.interpolate||Ri,_e="__p += '",Oe=E0((h.escape||Ri).source+"|"+pe.source+"|"+(pe===Ld?mt:Ri).source+"|"+(h.evaluate||Ri).source+"|$","g"),We="//# sourceURL="+(Jt.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++fF+"]")+`
`;l.replace(Oe,function(nt,Tt,Ot,fr,Di,dr){return Ot||(Ot=fr),_e+=l.slice(de,dr).replace(Ht,DF),Tt&&(W=!0,_e+=`' +
__e(`+Tt+`) +
'`),Di&&($=!0,_e+=`';
`+Di+`;
__p += '`),Ot&&(_e+=`' +
((__t = (`+Ot+`)) == null ? '' : __t) +
'`),de=dr+nt.length,nt}),_e+=`';
`;var tt=Jt.call(h,"variable")&&h.variable;if(!tt)_e=`with (obj) {
`+_e+`
}
`;else if(ht.test(tt))throw new ut(a);_e=($?_e.replace(Ye,""):_e).replace(Re,"$1").replace(lt,"$1;"),_e="function("+(tt||"obj")+`) {
`+(tt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(W?", __e = _.escape":"")+($?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+_e+`return __p
}`;var xt=qT(function(){return jt(I,We+"return "+_e).apply(t,H)});if(xt.source=_e,uy(xt))throw xt;return xt}function r4(l){return Kt(l).toLowerCase()}function s4(l){return Kt(l).toUpperCase()}function o4(l,h,m){if(l=Kt(l),l&&(m||h===t))return nb(l);if(!l||!(h=cr(h)))return l;var b=ss(l),A=ss(h),I=ib(b,A),H=rb(b,A)+1;return Jo(b,I,H).join("")}function a4(l,h,m){if(l=Kt(l),l&&(m||h===t))return l.slice(0,ob(l)+1);if(!l||!(h=cr(h)))return l;var b=ss(l),A=rb(b,ss(h))+1;return Jo(b,0,A).join("")}function l4(l,h,m){if(l=Kt(l),l&&(m||h===t))return l.replace(U,"");if(!l||!(h=cr(h)))return l;var b=ss(l),A=ib(b,ss(h));return Jo(b,A).join("")}function u4(l,h){var m=F,b=C;if(bn(h)){var A="separator"in h?h.separator:A;m="length"in h?gt(h.length):m,b="omission"in h?cr(h.omission):b}l=Kt(l);var I=l.length;if(ou(l)){var H=ss(l);I=H.length}if(m>=I)return l;var W=m-au(b);if(W<1)return b;var $=H?Jo(H,0,W).join(""):l.slice(0,W);if(A===t)return $+b;if(H&&(W+=$.length-W),cy(A)){if(l.slice(W).search(A)){var de,pe=$;for(A.global||(A=E0(A.source,Kt(Vt.exec(A))+"g")),A.lastIndex=0;de=A.exec(pe);)var _e=de.index;$=$.slice(0,_e===t?W:_e)}}else if(l.indexOf(cr(A),W)!=W){var Oe=$.lastIndexOf(A);Oe>-1&&($=$.slice(0,Oe))}return $+b}function c4(l){return l=Kt(l),l&&Rr.test(l)?l.replace(nn,BF):l}var h4=pu(function(l,h,m){return l+(m?" ":"")+h.toUpperCase()}),dy=Yb("toUpperCase");function XT(l,h,m){return l=Kt(l),h=m?t:h,h===t?OF(l)?HF(l):TF(l):l.match(h)||[]}var qT=wt(function(l,h){try{return lr(l,t,h)}catch(m){return uy(m)?m:new ut(m)}}),f4=eo(function(l,h){return Ir(h,function(m){m=Rs(m),Qs(l,m,ay(l[m],l))}),l});function d4(l){var h=l==null?0:l.length,m=et();return l=h?_n(l,function(b){if(typeof b[1]!="function")throw new Or(o);return[m(b[0]),b[1]]}):[],wt(function(b){for(var A=-1;++A<h;){var I=l[A];if(lr(I[0],this,b))return lr(I[1],this,b)}})}function p4(l){return Bk(kr(l,d))}function py(l){return function(){return l}}function m4(l,h){return l==null||l!==l?h:l}var g4=Kb(),v4=Kb(!0);function qi(l){return l}function my(l){return Eb(typeof l=="function"?l:kr(l,d))}function y4(l){return Cb(kr(l,d))}function x4(l,h){return Rb(l,kr(h,d))}var _4=wt(function(l,h){return function(m){return _h(m,l,h)}}),w4=wt(function(l,h){return function(m){return _h(l,m,h)}});function gy(l,h,m){var b=ri(h),A=Jd(h,b);m==null&&!(bn(h)&&(A.length||!b.length))&&(m=h,h=l,l=this,A=Jd(h,ri(h)));var I=!(bn(m)&&"chain"in m)||!!m.chain,H=no(l);return Ir(A,function(W){var $=h[W];l[W]=$,H&&(l.prototype[W]=function(){var de=this.__chain__;if(I||de){var pe=l(this.__wrapped__),_e=pe.__actions__=Wi(this.__actions__);return _e.push({func:$,args:arguments,thisArg:l}),pe.__chain__=de,pe}return $.apply(l,qo([this.value()],arguments))})}),l}function S4(){return ci._===this&&(ci._=YF),this}function vy(){}function M4(l){return l=gt(l),wt(function(h){return Pb(h,l)})}var b4=Y0(_n),T4=Y0($M),E4=Y0(x0);function YT(l){return ty(l)?_0(Rs(l)):nN(l)}function A4(l){return function(h){return l==null?t:al(l,h)}}var C4=Qb(),R4=Qb(!0);function yy(){return[]}function xy(){return!1}function P4(){return{}}function L4(){return""}function D4(){return!0}function I4(l,h){if(l=gt(l),l<1||l>B)return[];var m=se,b=vi(l,se);h=et(h),l-=se;for(var A=M0(b,h);++m<l;)h(m);return A}function O4(l){return ft(l)?_n(l,Rs):hr(l)?[l]:Wi(pT(Kt(l)))}function F4(l){var h=++XF;return Kt(l)+h}var k4=sp(function(l,h){return l+h},0),N4=Z0("ceil"),z4=sp(function(l,h){return l/h},1),B4=Z0("floor");function U4(l){return l&&l.length?Qd(l,qi,O0):t}function V4(l,h){return l&&l.length?Qd(l,et(h,2),O0):t}function H4(l){return eb(l,qi)}function G4(l,h){return eb(l,et(h,2))}function W4(l){return l&&l.length?Qd(l,qi,z0):t}function j4(l,h){return l&&l.length?Qd(l,et(h,2),z0):t}var X4=sp(function(l,h){return l*h},1),q4=Z0("round"),Y4=sp(function(l,h){return l-h},0);function Z4(l){return l&&l.length?S0(l,qi):0}function K4(l,h){return l&&l.length?S0(l,et(h,2)):0}return L.after=yB,L.ary=TT,L.assign=sU,L.assignIn=BT,L.assignInWith=yp,L.assignWith=oU,L.at=aU,L.before=ET,L.bind=ay,L.bindAll=f4,L.bindKey=AT,L.castArray=PB,L.chain=ST,L.chunk=BN,L.compact=UN,L.concat=VN,L.cond=d4,L.conforms=p4,L.constant=py,L.countBy=Zz,L.create=lU,L.curry=CT,L.curryRight=RT,L.debounce=PT,L.defaults=uU,L.defaultsDeep=cU,L.defer=xB,L.delay=_B,L.difference=HN,L.differenceBy=GN,L.differenceWith=WN,L.drop=jN,L.dropRight=XN,L.dropRightWhile=qN,L.dropWhile=YN,L.fill=ZN,L.filter=$z,L.flatMap=eB,L.flatMapDeep=tB,L.flatMapDepth=nB,L.flatten=yT,L.flattenDeep=KN,L.flattenDepth=$N,L.flip=wB,L.flow=g4,L.flowRight=v4,L.fromPairs=QN,L.functions=vU,L.functionsIn=yU,L.groupBy=iB,L.initial=ez,L.intersection=tz,L.intersectionBy=nz,L.intersectionWith=iz,L.invert=_U,L.invertBy=wU,L.invokeMap=sB,L.iteratee=my,L.keyBy=oB,L.keys=ri,L.keysIn=Xi,L.map=fp,L.mapKeys=MU,L.mapValues=bU,L.matches=y4,L.matchesProperty=x4,L.memoize=pp,L.merge=TU,L.mergeWith=UT,L.method=_4,L.methodOf=w4,L.mixin=gy,L.negate=mp,L.nthArg=M4,L.omit=EU,L.omitBy=AU,L.once=SB,L.orderBy=aB,L.over=b4,L.overArgs=MB,L.overEvery=T4,L.overSome=E4,L.partial=ly,L.partialRight=LT,L.partition=lB,L.pick=CU,L.pickBy=VT,L.property=YT,L.propertyOf=A4,L.pull=az,L.pullAll=_T,L.pullAllBy=lz,L.pullAllWith=uz,L.pullAt=cz,L.range=C4,L.rangeRight=R4,L.rearg=bB,L.reject=hB,L.remove=hz,L.rest=TB,L.reverse=sy,L.sampleSize=dB,L.set=PU,L.setWith=LU,L.shuffle=pB,L.slice=fz,L.sortBy=vB,L.sortedUniq=xz,L.sortedUniqBy=_z,L.split=e4,L.spread=EB,L.tail=wz,L.take=Sz,L.takeRight=Mz,L.takeRightWhile=bz,L.takeWhile=Tz,L.tap=Uz,L.throttle=AB,L.thru=hp,L.toArray=kT,L.toPairs=HT,L.toPairsIn=GT,L.toPath=O4,L.toPlainObject=zT,L.transform=DU,L.unary=CB,L.union=Ez,L.unionBy=Az,L.unionWith=Cz,L.uniq=Rz,L.uniqBy=Pz,L.uniqWith=Lz,L.unset=IU,L.unzip=oy,L.unzipWith=wT,L.update=OU,L.updateWith=FU,L.values=vu,L.valuesIn=kU,L.without=Dz,L.words=XT,L.wrap=RB,L.xor=Iz,L.xorBy=Oz,L.xorWith=Fz,L.zip=kz,L.zipObject=Nz,L.zipObjectDeep=zz,L.zipWith=Bz,L.entries=HT,L.entriesIn=GT,L.extend=BT,L.extendWith=yp,gy(L,L),L.add=k4,L.attempt=qT,L.camelCase=UU,L.capitalize=WT,L.ceil=N4,L.clamp=NU,L.clone=LB,L.cloneDeep=IB,L.cloneDeepWith=OB,L.cloneWith=DB,L.conformsTo=FB,L.deburr=jT,L.defaultTo=m4,L.divide=z4,L.endsWith=VU,L.eq=as,L.escape=HU,L.escapeRegExp=GU,L.every=Kz,L.find=Qz,L.findIndex=gT,L.findKey=hU,L.findLast=Jz,L.findLastIndex=vT,L.findLastKey=fU,L.floor=B4,L.forEach=MT,L.forEachRight=bT,L.forIn=dU,L.forInRight=pU,L.forOwn=mU,L.forOwnRight=gU,L.get=hy,L.gt=kB,L.gte=NB,L.has=xU,L.hasIn=fy,L.head=xT,L.identity=qi,L.includes=rB,L.indexOf=JN,L.inRange=zU,L.invoke=SU,L.isArguments=cl,L.isArray=ft,L.isArrayBuffer=zB,L.isArrayLike=ji,L.isArrayLikeObject=Bn,L.isBoolean=BB,L.isBuffer=ea,L.isDate=UB,L.isElement=VB,L.isEmpty=HB,L.isEqual=GB,L.isEqualWith=WB,L.isError=uy,L.isFinite=jB,L.isFunction=no,L.isInteger=DT,L.isLength=gp,L.isMap=IT,L.isMatch=XB,L.isMatchWith=qB,L.isNaN=YB,L.isNative=ZB,L.isNil=$B,L.isNull=KB,L.isNumber=OT,L.isObject=bn,L.isObjectLike=In,L.isPlainObject=Eh,L.isRegExp=cy,L.isSafeInteger=QB,L.isSet=FT,L.isString=vp,L.isSymbol=hr,L.isTypedArray=gu,L.isUndefined=JB,L.isWeakMap=eU,L.isWeakSet=tU,L.join=rz,L.kebabCase=WU,L.last=zr,L.lastIndexOf=sz,L.lowerCase=jU,L.lowerFirst=XU,L.lt=nU,L.lte=iU,L.max=U4,L.maxBy=V4,L.mean=H4,L.meanBy=G4,L.min=W4,L.minBy=j4,L.stubArray=yy,L.stubFalse=xy,L.stubObject=P4,L.stubString=L4,L.stubTrue=D4,L.multiply=X4,L.nth=oz,L.noConflict=S4,L.noop=vy,L.now=dp,L.pad=qU,L.padEnd=YU,L.padStart=ZU,L.parseInt=KU,L.random=BU,L.reduce=uB,L.reduceRight=cB,L.repeat=$U,L.replace=QU,L.result=RU,L.round=q4,L.runInContext=q,L.sample=fB,L.size=mB,L.snakeCase=JU,L.some=gB,L.sortedIndex=dz,L.sortedIndexBy=pz,L.sortedIndexOf=mz,L.sortedLastIndex=gz,L.sortedLastIndexBy=vz,L.sortedLastIndexOf=yz,L.startCase=t4,L.startsWith=n4,L.subtract=Y4,L.sum=Z4,L.sumBy=K4,L.template=i4,L.times=I4,L.toFinite=io,L.toInteger=gt,L.toLength=NT,L.toLower=r4,L.toNumber=Br,L.toSafeInteger=rU,L.toString=Kt,L.toUpper=s4,L.trim=o4,L.trimEnd=a4,L.trimStart=l4,L.truncate=u4,L.unescape=c4,L.uniqueId=F4,L.upperCase=h4,L.upperFirst=dy,L.each=MT,L.eachRight=bT,L.first=xT,gy(L,function(){var l={};return As(L,function(h,m){Jt.call(L.prototype,m)||(l[m]=h)}),l}(),{chain:!1}),L.VERSION=i,Ir(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){L[l].placeholder=L}),Ir(["drop","take"],function(l,h){Ct.prototype[l]=function(m){m=m===t?1:ei(gt(m),0);var b=this.__filtered__&&!h?new Ct(this):this.clone();return b.__filtered__?b.__takeCount__=vi(m,b.__takeCount__):b.__views__.push({size:vi(m,se),type:l+(b.__dir__<0?"Right":"")}),b},Ct.prototype[l+"Right"]=function(m){return this.reverse()[l](m).reverse()}}),Ir(["filter","map","takeWhile"],function(l,h){var m=h+1,b=m==G||m==X;Ct.prototype[l]=function(A){var I=this.clone();return I.__iteratees__.push({iteratee:et(A,3),type:m}),I.__filtered__=I.__filtered__||b,I}}),Ir(["head","last"],function(l,h){var m="take"+(h?"Right":"");Ct.prototype[l]=function(){return this[m](1).value()[0]}}),Ir(["initial","tail"],function(l,h){var m="drop"+(h?"":"Right");Ct.prototype[l]=function(){return this.__filtered__?new Ct(this):this[m](1)}}),Ct.prototype.compact=function(){return this.filter(qi)},Ct.prototype.find=function(l){return this.filter(l).head()},Ct.prototype.findLast=function(l){return this.reverse().find(l)},Ct.prototype.invokeMap=wt(function(l,h){return typeof l=="function"?new Ct(this):this.map(function(m){return _h(m,l,h)})}),Ct.prototype.reject=function(l){return this.filter(mp(et(l)))},Ct.prototype.slice=function(l,h){l=gt(l);var m=this;return m.__filtered__&&(l>0||h<0)?new Ct(m):(l<0?m=m.takeRight(-l):l&&(m=m.drop(l)),h!==t&&(h=gt(h),m=h<0?m.dropRight(-h):m.take(h-l)),m)},Ct.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},Ct.prototype.toArray=function(){return this.take(se)},As(Ct.prototype,function(l,h){var m=/^(?:filter|find|map|reject)|While$/.test(h),b=/^(?:head|last)$/.test(h),A=L[b?"take"+(h=="last"?"Right":""):h],I=b||/^find/.test(h);!A||(L.prototype[h]=function(){var H=this.__wrapped__,W=b?[1]:arguments,$=H instanceof Ct,de=W[0],pe=$||ft(H),_e=function(Tt){var Ot=A.apply(L,qo([Tt],W));return b&&Oe?Ot[0]:Ot};pe&&m&&typeof de=="function"&&de.length!=1&&($=pe=!1);var Oe=this.__chain__,We=!!this.__actions__.length,tt=I&&!Oe,xt=$&&!We;if(!I&&pe){H=xt?H:new Ct(this);var nt=l.apply(H,W);return nt.__actions__.push({func:hp,args:[_e],thisArg:t}),new Fr(nt,Oe)}return tt&&xt?l.apply(this,W):(nt=this.thru(_e),tt?b?nt.value()[0]:nt.value():nt)})}),Ir(["pop","push","shift","sort","splice","unshift"],function(l){var h=Nd[l],m=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",b=/^(?:pop|shift)$/.test(l);L.prototype[l]=function(){var A=arguments;if(b&&!this.__chain__){var I=this.value();return h.apply(ft(I)?I:[],A)}return this[m](function(H){return h.apply(ft(H)?H:[],A)})}}),As(Ct.prototype,function(l,h){var m=L[h];if(m){var b=m.name+"";Jt.call(hu,b)||(hu[b]=[]),hu[b].push({name:h,func:m})}}),hu[rp(t,M).name]=[{name:"wrapper",func:t}],Ct.prototype.clone=ck,Ct.prototype.reverse=hk,Ct.prototype.value=fk,L.prototype.at=Vz,L.prototype.chain=Hz,L.prototype.commit=Gz,L.prototype.next=Wz,L.prototype.plant=Xz,L.prototype.reverse=qz,L.prototype.toJSON=L.prototype.valueOf=L.prototype.value=Yz,L.prototype.first=L.prototype.head,dh&&(L.prototype[dh]=jz),L},lu=GF();nl?((nl.exports=lu)._=lu,m0._=lu):ci._=lu}).call(Vu)})(G_,G_.exports);const Ts=(n,e,t)=>{if(!n.has(e)){const i=t();return n.set(e,i),i}return n.get(e)},yH=(n,e)=>{if(!n)throw new Error(e)},xH=n=>{throw new Error("unexpected value: "+n)},W_=(n,e,t=new WeakSet)=>{if(Array.isArray(n)){if(t.has(n))return;t.add(n);for(let i=0;i<n.length;++i){const r=n[i];e(i,r,n),W_(r,e,t)}}else if(n&&typeof n=="object"){if(t.has(n))return;t.add(n);for(const[i,r]of Object.entries(n))e(i,r,n),W_(r,e,t)}},MP=(n,e)=>{const t=n.indexOf(e);return t===-1?!1:(n.splice(t,1),!0)},j_=(n,e)=>Math.random()*(e-n)+n,q1=(n,e,t)=>{let i,r=!1,s,o,a=t==="trailingPromise"?new Promise(u=>o=u):void 0;return function(...u){if(s=u,r)return a!=null?a:i;r=!0,(t==="leading"||t==="both")&&(i=n.apply(this,s));const c=()=>{(t==="trailing"||t==="both"||t==="trailingPromise")&&(i=n.apply(this,s),o==null||o(i),a=t==="trailingPromise"?new Promise(f=>o=f):void 0),r=!1};return e>0?setTimeout(c,e):queueMicrotask(c),a!=null?a:i}},_H=(n,e)=>{if(e===0){let i=!0;return queueMicrotask(()=>i&&n()),()=>i=!1}const t=setTimeout(n,e);return()=>clearTimeout(t)},No=(n,e,t)=>{let i,r,s,o,a=t==="trailingPromise"?new Promise(u=>o=u):void 0;return function(...u){return s=u,i?i():(t==="leading"||t==="both")&&(r=n.apply(this,s)),i=_H(()=>{(t==="trailing"||t==="both"||t==="trailingPromise")&&(r=n.apply(this,s),o==null||o(r),a=t==="trailingPromise"?new Promise(c=>o=c):void 0),i=void 0},e),a!=null?a:r}},wH=n=>n,Xa=(n,e)=>{let t,i=!1,r=e==null?void 0:e();return(...s)=>{if(e){const o=e();r!==o&&(i=!1),r=o}return i?t:(i=!0,t=n(...s))}},Yl=(n,e)=>{for(const t of e)for(const i of Object.getOwnPropertyNames(t.prototype))!(i in n.prototype)&&Object.defineProperty(n.prototype,i,Object.getOwnPropertyDescriptor(t.prototype,i)||Object.create(null))},Zl=n=>n;class Y1{constructor(e=void 0){this._cb=e,this.done=void 0,this._value=void 0,this._callbacks=void 0,this._watched=void 0}then(e){var t;return this.done?(e(this._value),new ui):(((t=this._callbacks)!==null&&t!==void 0?t:this._callbacks=new Set).add(e),new ui(()=>this._callbacks.delete(e)))}watch(e){var t;return this.done?e._resolve(this._value):(((t=this._watched)!==null&&t!==void 0?t:this._watched=new Set).add(e),e.then(()=>this._watched.delete(e)),e)}_resolve(e){var t;if(this.done)return this;if(this.done=!0,this._value=e,(t=this._cb)===null||t===void 0||t.call(this,e),this._callbacks)for(const i of this._callbacks)i(e);if(this._watched)for(const i of this._watched)i._resolve(e);return this}}class _g extends Y1{constructor(e){super(e)}resolve(e){return this._resolve(e)}}class ui extends Y1{constructor(e){super(e)}cancel(e){return this._resolve(e)}}class bP extends Y1{constructor(e){super(e)}dispose(e){return this._resolve(e)}}new ui().cancel();class SH{constructor(){this.cbsMap=new Map}on(e,t){var i;if(Array.isArray(e)){const s=new ui;for(const o of e)s.watch(this.on(o,t));return s}!((i=this.states)===null||i===void 0)&&i.has(e)&&t(this.states.get(e));const r=Ts(this.cbsMap,e,()=>new Set);return r.add(t),new ui(()=>r.delete(t))}once(e,t){const i=new ui;return i.watch(this.on(e,r=>{i.cancel(),t(r)})),i}emit(e,t){if(this.cbsMap.has(e))for(const i of this.cbsMap.get(e))i(t)}hasState(e){var t;return!!(!((t=this.states)===null||t===void 0)&&t.has(e))}setState(e,t){var i;(i=this.states)!==null&&i!==void 0||(this.states=new Map),!(this.states.has(e)&&this.states.get(e)===t)&&(this.states.set(e,t),this.emit(e,t))}getState(e){var t;return(t=this.states)===null||t===void 0?void 0:t.get(e)}deleteState(e){var t;(t=this.states)===null||t===void 0||t.delete(e)}clear(){var e;this.cbsMap.clear(),(e=this.states)===null||e===void 0||e.clear()}}class MH{constructor(){this.cbs=new Set}on(e){return"state"in this&&e(this.state),this.cbs.add(e),new ui(()=>this.cbs.delete(e))}once(e){const t=new ui;return t.watch(this.on(i=>{t.cancel(),e(i)})),t}emit(e){for(const t of this.cbs)t(e)}setState(e){"state"in this&&this.state===e||(this.state=e,this.emit(e))}getState(){return this.state}}var zo=()=>{const n=new MH;return[s=>n.emit(s),(s,o)=>o?n.once(s):n.on(s),s=>n.setState(s),()=>n.getState()]};const bH=new WeakSet,Ge=n=>{const[,e,t,i]=zo();t(n);const r=s=>{if(s){const o=new ui;return o.watch(e(a=>s(a,o))),o}return i()};return bH.add(r),[t,r]},TP=(n,e)=>t=>{const i=e();i&&n([...i,t])},EP=(n,e)=>t=>{const i=e();i&&n(i.filter(r=>r!==t))},TH=(n,e)=>{const t=e();return t&&typeof t=="object"&&(W_(t,(i,r)=>Object.freeze(r)),Object.freeze(t)),()=>n(t)},Po=[],cA=n=>{var e,t,i;const r=Po[Po.length-1];return(e=(t=r.fiber)[i=r.count++])!==null&&e!==void 0?e:t[i]=n()},hA=n=>{var e,t;const i=Po[Po.length-1],r=i.count++;return(e=(t=i.fiber)[r])!==null&&e!==void 0||(t[r]=n),[()=>i.fiber[r],s=>i.fiber[r]=s]},fA=(n,e,t,i,r)=>{Po.push({count:0,fiber:e});const s=t.map(u=>typeof u=="function"?u():u),o=!i||s.some((u,c)=>u!==i[c]);o&&(n==null||n());const a=o?r():void 0;return Po.pop(),[a,s,o]},Qt=(n,e)=>{if(Po.length){const t=cA(()=>new ui(()=>u==null?void 0:u()));if(t.done)return t;const i=cA(()=>[]),[r,s]=hA(void 0),[o,a]=hA(void 0),u=r(),c=o(),[f,d,p]=fA(u,i,e,c,n);return p&&s(typeof f=="function"?f:void 0),a(d),t}else{const t=new ui(()=>queueMicrotask(()=>r==null?void 0:r())),i=[];let r,s;const o=No(()=>{const[a,u,c]=fA(r,i,e,s,n);c&&(r=typeof a=="function"?a:void 0),s=u},0,"trailing");o();for(const a of e)typeof a=="function"&&t.watch(a(o));return t}},EH=n=>{var e,t,i;const r=Po[Po.length-1];return(e=(t=r.fiber)[i=r.count++])!==null&&e!==void 0?e:t[i]={current:typeof n=="function"?n():n}};class X_{constructor(e){[this.set,this.get]=Ge(e)}}/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Z1="139",_u={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},wu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},AH=0,dA=1,CH=2,AP=1,RH=2,rf=3,Mc=0,wr=1,Lo=2,CP=1,Yt=0,bo=1,wg=2,pA=3,mA=4,q_=5,Os=100,PH=101,LH=102,gA=103,vA=104,Y_=200,DH=201,IH=202,OH=203,Sg=204,Mg=205,RP=206,FH=207,PP=208,kH=209,NH=210,zH=0,BH=1,UH=2,Z_=3,VH=4,HH=5,GH=6,WH=7,pv=0,jH=1,XH=2,Bs=0,LP=1,qH=2,YH=3,ZH=4,KH=5,DP=300,bc=301,Tc=302,Ec=303,K_=304,mv=306,Do=1e3,bi=1001,bg=1002,Ft=1003,$_=1004,Q_=1005,An=1006,IP=1007,Kl=1008,Hl=1009,$H=1010,QH=1011,Gl=1012,JH=1013,Hm=1014,xs=1015,_s=1016,e6=1017,t6=1018,fc=1020,n6=1021,i6=1022,qr=1023,r6=1024,s6=1025,Nl=1026,Ac=1027,o6=1028,a6=1029,l6=1030,u6=1031,c6=1033,Xy=33776,qy=33777,Yy=33778,Zy=33779,yA=35840,xA=35841,_A=35842,wA=35843,h6=36196,SA=37492,MA=37496,bA=37808,TA=37809,EA=37810,AA=37811,CA=37812,RA=37813,PA=37814,LA=37815,DA=37816,IA=37817,OA=37818,FA=37819,kA=37820,NA=37821,zA=36492,J_=2200,ew=2201,f6=2202,Uf=2300,Cc=2301,Ky=2302,tc=2400,nc=2401,Tg=2402,K1=2500,OP=2501,d6=0,p6=1,FP=2,sr=3e3,Mt=3001,m6=3200,gv=3201,qa=0,kP=1,mo="srgb",Il="srgb-linear",$y=7680,g6=519,Vf=35044,Eg=35048,BA="300 es",tw=1035;class Ya{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const fi=[];for(let n=0;n<256;n++)fi[n]=(n<16?"0":"")+n.toString(16);let UA=1234567;const pf=Math.PI/180,Hf=180/Math.PI;function $r(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(fi[n&255]+fi[n>>8&255]+fi[n>>16&255]+fi[n>>24&255]+"-"+fi[e&255]+fi[e>>8&255]+"-"+fi[e>>16&15|64]+fi[e>>24&255]+"-"+fi[t&63|128]+fi[t>>8&255]+"-"+fi[t>>16&255]+fi[t>>24&255]+fi[i&255]+fi[i>>8&255]+fi[i>>16&255]+fi[i>>24&255]).toLowerCase()}function Yn(n,e,t){return Math.max(e,Math.min(t,n))}function $1(n,e){return(n%e+e)%e}function v6(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function y6(n,e,t){return n!==e?(t-n)/(e-n):0}function mf(n,e,t){return(1-t)*n+t*e}function x6(n,e,t,i){return mf(n,e,1-Math.exp(-t*i))}function _6(n,e=1){return e-Math.abs($1(n,e*2)-e)}function w6(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function S6(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function M6(n,e){return n+Math.floor(Math.random()*(e-n+1))}function b6(n,e){return n+Math.random()*(e-n)}function T6(n){return n*(.5-Math.random())}function E6(n){n!==void 0&&(UA=n);let e=UA+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function A6(n){return n*pf}function C6(n){return n*Hf}function nw(n){return(n&n-1)===0&&n!==0}function NP(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Ag(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function R6(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),u=o(t/2),c=s((e+i)/2),f=o((e+i)/2),d=s((e-i)/2),p=o((e-i)/2),g=s((i-e)/2),v=o((i-e)/2);switch(r){case"XYX":n.set(a*f,u*d,u*p,a*c);break;case"YZY":n.set(u*p,a*f,u*d,a*c);break;case"ZXZ":n.set(u*d,u*p,a*f,a*c);break;case"XZX":n.set(a*f,u*v,u*g,a*c);break;case"YXY":n.set(u*g,a*f,u*v,a*c);break;case"ZYZ":n.set(u*v,u*g,a*f,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function P6(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function L6(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var Qi=Object.freeze({__proto__:null,DEG2RAD:pf,RAD2DEG:Hf,generateUUID:$r,clamp:Yn,euclideanModulo:$1,mapLinear:v6,inverseLerp:y6,lerp:mf,damp:x6,pingpong:_6,smoothstep:w6,smootherstep:S6,randInt:M6,randFloat:b6,randFloatSpread:T6,seededRandom:E6,degToRad:A6,radToDeg:C6,isPowerOfTwo:nw,ceilPowerOfTwo:NP,floorPowerOfTwo:Ag,setQuaternionFromProperEuler:R6,normalize:L6,denormalize:P6});class ie{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}ie.prototype.isVector2=!0;class Pn{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,u,c){const f=this.elements;return f[0]=e,f[1]=r,f[2]=a,f[3]=t,f[4]=s,f[5]=u,f[6]=i,f[7]=o,f[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],u=i[6],c=i[1],f=i[4],d=i[7],p=i[2],g=i[5],v=i[8],y=r[0],x=r[3],M=r[6],S=r[1],_=r[4],w=r[7],T=r[2],E=r[5],R=r[8];return s[0]=o*y+a*S+u*T,s[3]=o*x+a*_+u*E,s[6]=o*M+a*w+u*R,s[1]=c*y+f*S+d*T,s[4]=c*x+f*_+d*E,s[7]=c*M+f*w+d*R,s[2]=p*y+g*S+v*T,s[5]=p*x+g*_+v*E,s[8]=p*M+g*w+v*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],f=e[8];return t*o*f-t*a*c-i*s*f+i*a*u+r*s*c-r*o*u}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],f=e[8],d=f*o-a*c,p=a*u-f*s,g=c*s-o*u,v=t*d+i*p+r*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/v;return e[0]=d*y,e[1]=(r*c-f*i)*y,e[2]=(a*i-r*o)*y,e[3]=p*y,e[4]=(f*t-r*u)*y,e[5]=(r*s-a*t)*y,e[6]=g*y,e[7]=(i*u-c*t)*y,e[8]=(o*t-i*s)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const u=Math.cos(s),c=Math.sin(s);return this.set(i*u,i*c,-i*(u*o+c*a)+o+e,-r*c,r*u,-r*(-c*o+u*a)+a+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],u=r[1],c=r[4],f=r[7];return r[0]=t*s+i*u,r[3]=t*o+i*c,r[6]=t*a+i*f,r[1]=-i*s+t*u,r[4]=-i*o+t*c,r[7]=-i*a+t*f,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}Pn.prototype.isMatrix3=!0;function zP(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}function Gf(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function zl(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Gm(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const Qy={[mo]:{[Il]:zl},[Il]:{[mo]:Gm}},us={legacyMode:!0,get workingColorSpace(){return Il},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(Qy[e]&&Qy[e][t]!==void 0){const i=Qy[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},BP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ti={r:0,g:0,b:0},cs={h:0,s:0,l:0},Up={h:0,s:0,l:0};function Jy(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function Vp(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class ve{constructor(e,t,i){return t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=mo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,us.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Il){return this.r=e,this.g=t,this.b=i,us.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Il){if(e=$1(e,1),t=Yn(t,0,1),i=Yn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=Jy(o,s,e+1/3),this.g=Jy(o,s,e),this.b=Jy(o,s,e-1/3)}return us.toWorkingColorSpace(this,r),this}setStyle(e,t=mo){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,us.toWorkingColorSpace(this,t),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,us.toWorkingColorSpace(this,t),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const u=parseFloat(s[1])/360,c=parseInt(s[2],10)/100,f=parseInt(s[3],10)/100;return i(s[4]),this.setHSL(u,c,f,t)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,us.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,us.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=mo){const i=BP[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=zl(e.r),this.g=zl(e.g),this.b=zl(e.b),this}copyLinearToSRGB(e){return this.r=Gm(e.r),this.g=Gm(e.g),this.b=Gm(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=mo){return us.fromWorkingColorSpace(Vp(this,ti),e),Yn(ti.r*255,0,255)<<16^Yn(ti.g*255,0,255)<<8^Yn(ti.b*255,0,255)<<0}getHexString(e=mo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Il){us.fromWorkingColorSpace(Vp(this,ti),t);const i=ti.r,r=ti.g,s=ti.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let u,c;const f=(a+o)/2;if(a===o)u=0,c=0;else{const d=o-a;switch(c=f<=.5?d/(o+a):d/(2-o-a),o){case i:u=(r-s)/d+(r<s?6:0);break;case r:u=(s-i)/d+2;break;case s:u=(i-r)/d+4;break}u/=6}return e.h=u,e.s=c,e.l=f,e}getRGB(e,t=Il){return us.fromWorkingColorSpace(Vp(this,ti),t),e.r=ti.r,e.g=ti.g,e.b=ti.b,e}getStyle(e=mo){return us.fromWorkingColorSpace(Vp(this,ti),e),e!==mo?`color(${e} ${ti.r} ${ti.g} ${ti.b})`:`rgb(${ti.r*255|0},${ti.g*255|0},${ti.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(cs),cs.h+=e,cs.s+=t,cs.l+=i,this.setHSL(cs.h,cs.s,cs.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(cs),e.getHSL(Up);const i=mf(cs.h,Up.h,t),r=mf(cs.s,Up.s,t),s=mf(cs.l,Up.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}ve.NAMES=BP;ve.prototype.isColor=!0;ve.prototype.r=1;ve.prototype.g=1;ve.prototype.b=1;let Su;class $l{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Su===void 0&&(Su=Gf("canvas")),Su.width=e.width,Su.height=e.height;const i=Su.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Su}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const t=Gf("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=zl(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(zl(t[i]/255)*255):t[i]=zl(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class UP{constructor(e=null){this.uuid=$r(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(ex(r[o].image)):s.push(ex(r[o]))}else s=ex(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function ex(n){return typeof HTMLImageElement!="undefined"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&n instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&n instanceof ImageBitmap?$l.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}UP.prototype.isSource=!0;let D6=0;class zn extends Ya{constructor(e=zn.DEFAULT_IMAGE,t=zn.DEFAULT_MAPPING,i=bi,r=bi,s=An,o=Kl,a=qr,u=Hl,c=1,f=sr){super(),Object.defineProperty(this,"id",{value:D6++}),this.uuid=$r(),this.name="",this.source=new UP(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=u,this.offset=new ie(0,0),this.repeat=new ie(1,1),this.center=new ie(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Pn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==DP)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Do:e.x=e.x-Math.floor(e.x);break;case bi:e.x=e.x<0?0:1;break;case bg:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Do:e.y=e.y-Math.floor(e.y);break;case bi:e.y=e.y<0?0:1;break;case bg:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}zn.DEFAULT_IMAGE=null;zn.DEFAULT_MAPPING=DP;zn.prototype.isTexture=!0;class Wt{constructor(e=0,t=0,i=0,r=1){this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const u=e.elements,c=u[0],f=u[4],d=u[8],p=u[1],g=u[5],v=u[9],y=u[2],x=u[6],M=u[10];if(Math.abs(f-p)<.01&&Math.abs(d-y)<.01&&Math.abs(v-x)<.01){if(Math.abs(f+p)<.1&&Math.abs(d+y)<.1&&Math.abs(v+x)<.1&&Math.abs(c+g+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(c+1)/2,w=(g+1)/2,T=(M+1)/2,E=(f+p)/4,R=(d+y)/4,P=(v+x)/4;return _>w&&_>T?_<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(_),r=E/i,s=R/i):w>T?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=E/r,s=P/r):T<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(T),i=R/s,r=P/s),this.set(i,r,s,t),this}let S=Math.sqrt((x-v)*(x-v)+(d-y)*(d-y)+(p-f)*(p-f));return Math.abs(S)<.001&&(S=1),this.x=(x-v)/S,this.y=(d-y)/S,this.z=(p-f)/S,this.w=Math.acos((c+g+M-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Wt.prototype.isVector4=!0;class Gt extends Ya{constructor(e,t,i={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new Wt(0,0,e,t),this.scissorTest=!1,this.viewport=new Wt(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new zn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:An,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0,this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}Gt.prototype.isWebGLRenderTarget=!0;class vv extends zn{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ft,this.minFilter=Ft,this.wrapR=bi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}vv.prototype.isDataArrayTexture=!0;class I6 extends Gt{constructor(e,t,i){super(e,t),this.depth=i,this.texture=new vv(null,e,t,i),this.texture.isRenderTargetTexture=!0}}I6.prototype.isWebGLArrayRenderTarget=!0;class Q1 extends zn{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ft,this.minFilter=Ft,this.wrapR=bi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Q1.prototype.isData3DTexture=!0;class O6 extends Gt{constructor(e,t,i){super(e,t),this.depth=i,this.texture=new Q1(null,e,t,i),this.texture.isRenderTargetTexture=!0}}O6.prototype.isWebGL3DRenderTarget=!0;class F6 extends Gt{constructor(e,t,i,r={}){super(e,t,r);const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone();return this}}F6.prototype.isWebGLMultipleRenderTargets=!0;class Mn{constructor(e=0,t=0,i=0,r=1){this._x=e,this._y=t,this._z=i,this._w=r}static slerp(e,t,i,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(e,t,r)}static slerpFlat(e,t,i,r,s,o,a){let u=i[r+0],c=i[r+1],f=i[r+2],d=i[r+3];const p=s[o+0],g=s[o+1],v=s[o+2],y=s[o+3];if(a===0){e[t+0]=u,e[t+1]=c,e[t+2]=f,e[t+3]=d;return}if(a===1){e[t+0]=p,e[t+1]=g,e[t+2]=v,e[t+3]=y;return}if(d!==y||u!==p||c!==g||f!==v){let x=1-a;const M=u*p+c*g+f*v+d*y,S=M>=0?1:-1,_=1-M*M;if(_>Number.EPSILON){const T=Math.sqrt(_),E=Math.atan2(T,M*S);x=Math.sin(x*E)/T,a=Math.sin(a*E)/T}const w=a*S;if(u=u*x+p*w,c=c*x+g*w,f=f*x+v*w,d=d*x+y*w,x===1-a){const T=1/Math.sqrt(u*u+c*c+f*f+d*d);u*=T,c*=T,f*=T,d*=T}}e[t]=u,e[t+1]=c,e[t+2]=f,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],u=i[r+1],c=i[r+2],f=i[r+3],d=s[o],p=s[o+1],g=s[o+2],v=s[o+3];return e[t]=a*v+f*d+u*g-c*p,e[t+1]=u*v+f*p+c*d-a*g,e[t+2]=c*v+f*g+a*p-u*d,e[t+3]=f*v-a*d-u*p-c*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,u=Math.sin,c=a(i/2),f=a(r/2),d=a(s/2),p=u(i/2),g=u(r/2),v=u(s/2);switch(o){case"XYZ":this._x=p*f*d+c*g*v,this._y=c*g*d-p*f*v,this._z=c*f*v+p*g*d,this._w=c*f*d-p*g*v;break;case"YXZ":this._x=p*f*d+c*g*v,this._y=c*g*d-p*f*v,this._z=c*f*v-p*g*d,this._w=c*f*d+p*g*v;break;case"ZXY":this._x=p*f*d-c*g*v,this._y=c*g*d+p*f*v,this._z=c*f*v+p*g*d,this._w=c*f*d-p*g*v;break;case"ZYX":this._x=p*f*d-c*g*v,this._y=c*g*d+p*f*v,this._z=c*f*v-p*g*d,this._w=c*f*d+p*g*v;break;case"YZX":this._x=p*f*d+c*g*v,this._y=c*g*d+p*f*v,this._z=c*f*v-p*g*d,this._w=c*f*d-p*g*v;break;case"XZY":this._x=p*f*d-c*g*v,this._y=c*g*d-p*f*v,this._z=c*f*v+p*g*d,this._w=c*f*d+p*g*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],u=t[9],c=t[2],f=t[6],d=t[10],p=i+a+d;if(p>0){const g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(f-u)*g,this._y=(s-c)*g,this._z=(o-r)*g}else if(i>a&&i>d){const g=2*Math.sqrt(1+i-a-d);this._w=(f-u)/g,this._x=.25*g,this._y=(r+o)/g,this._z=(s+c)/g}else if(a>d){const g=2*Math.sqrt(1+a-i-d);this._w=(s-c)/g,this._x=(r+o)/g,this._y=.25*g,this._z=(u+f)/g}else{const g=2*Math.sqrt(1+d-i-a);this._w=(o-r)/g,this._x=(s+c)/g,this._y=(u+f)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Yn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,u=t._y,c=t._z,f=t._w;return this._x=i*f+o*a+r*c-s*u,this._y=r*f+o*u+s*a-i*c,this._z=s*f+o*c+i*u-r*a,this._w=o*f-i*a-r*u-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const u=1-a*a;if(u<=Number.EPSILON){const g=1-t;return this._w=g*o+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(u),f=Math.atan2(c,a),d=Math.sin((1-t)*f)/c,p=Math.sin(t*f)/c;return this._w=o*d+this._w*p,this._x=i*d+this._x*p,this._y=r*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Mn.prototype.isQuaternion=!0;class O{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(VA.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(VA.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,u=e.w,c=u*t+o*r-a*i,f=u*i+a*t-s*r,d=u*r+s*i-o*t,p=-s*t-o*i-a*r;return this.x=c*u+p*-s+f*-a-d*-o,this.y=f*u+p*-o+d*-s-c*-a,this.z=d*u+p*-a+c*-o-f*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,u=t.z;return this.x=r*u-s*a,this.y=s*o-i*u,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return tx.copy(this).projectOnVector(e),this.sub(tx)}reflect(e){return this.sub(tx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Yn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}O.prototype.isVector3=!0;const tx=new O,VA=new Mn;class Gi{constructor(e=new O(1/0,1/0,1/0),t=new O(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let u=0,c=e.length;u<c;u+=3){const f=e[u],d=e[u+1],p=e[u+2];f<t&&(t=f),d<i&&(i=d),p<r&&(r=p),f>s&&(s=f),d>o&&(o=d),p>a&&(a=p)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let u=0,c=e.count;u<c;u++){const f=e.getX(u),d=e.getY(u),p=e.getZ(u);f<t&&(t=f),d<i&&(i=d),p<r&&(r=p),f>s&&(s=f),d>o&&(o=d),p>a&&(a=p)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=hl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)hl.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(hl)}else i.boundingBox===null&&i.computeBoundingBox(),nx.copy(i.boundingBox),nx.applyMatrix4(e.matrixWorld),this.union(nx);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,hl),hl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(kh),Hp.subVectors(this.max,kh),Mu.subVectors(e.a,kh),bu.subVectors(e.b,kh),Tu.subVectors(e.c,kh),ta.subVectors(bu,Mu),na.subVectors(Tu,bu),fl.subVectors(Mu,Tu);let t=[0,-ta.z,ta.y,0,-na.z,na.y,0,-fl.z,fl.y,ta.z,0,-ta.x,na.z,0,-na.x,fl.z,0,-fl.x,-ta.y,ta.x,0,-na.y,na.x,0,-fl.y,fl.x,0];return!ix(t,Mu,bu,Tu,Hp)||(t=[1,0,0,0,1,0,0,0,1],!ix(t,Mu,bu,Tu,Hp))?!1:(Gp.crossVectors(ta,na),t=[Gp.x,Gp.y,Gp.z],ix(t,Mu,bu,Tu,Hp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return hl.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(hl).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(so[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),so[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),so[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),so[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),so[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),so[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),so[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),so[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(so),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Gi.prototype.isBox3=!0;const so=[new O,new O,new O,new O,new O,new O,new O,new O],hl=new O,nx=new Gi,Mu=new O,bu=new O,Tu=new O,ta=new O,na=new O,fl=new O,kh=new O,Hp=new O,Gp=new O,dl=new O;function ix(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){dl.fromArray(n,s);const a=r.x*Math.abs(dl.x)+r.y*Math.abs(dl.y)+r.z*Math.abs(dl.z),u=e.dot(dl),c=t.dot(dl),f=i.dot(dl);if(Math.max(-Math.max(u,c,f),Math.min(u,c,f))>a)return!1}return!0}const k6=new Gi,HA=new O,Wp=new O,rx=new O;class Ql{constructor(e=new O,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):k6.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){rx.subVectors(e,this.center);const t=rx.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.add(rx.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return this.center.equals(e.center)===!0?Wp.set(0,0,1).multiplyScalar(e.radius):Wp.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(HA.copy(e.center).add(Wp)),this.expandByPoint(HA.copy(e.center).sub(Wp)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const oo=new O,sx=new O,jp=new O,ia=new O,ox=new O,Xp=new O,ax=new O;class Bo{constructor(e=new O,t=new O(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,oo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=oo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(oo.copy(this.direction).multiplyScalar(t).add(this.origin),oo.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){sx.copy(e).add(t).multiplyScalar(.5),jp.copy(t).sub(e).normalize(),ia.copy(this.origin).sub(sx);const s=e.distanceTo(t)*.5,o=-this.direction.dot(jp),a=ia.dot(this.direction),u=-ia.dot(jp),c=ia.lengthSq(),f=Math.abs(1-o*o);let d,p,g,v;if(f>0)if(d=o*u-a,p=o*a-u,v=s*f,d>=0)if(p>=-v)if(p<=v){const y=1/f;d*=y,p*=y,g=d*(d+o*p+2*a)+p*(o*d+p+2*u)+c}else p=s,d=Math.max(0,-(o*p+a)),g=-d*d+p*(p+2*u)+c;else p=-s,d=Math.max(0,-(o*p+a)),g=-d*d+p*(p+2*u)+c;else p<=-v?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-u),s),g=-d*d+p*(p+2*u)+c):p<=v?(d=0,p=Math.min(Math.max(-s,-u),s),g=p*(p+2*u)+c):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-u),s),g=-d*d+p*(p+2*u)+c);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),g=-d*d+p*(p+2*u)+c;return i&&i.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(jp).multiplyScalar(p).add(sx),g}intersectSphere(e,t){oo.subVectors(e.center,this.origin);const i=oo.dot(this.direction),r=oo.dot(oo)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,u=i+o;return a<0&&u<0?null:a<0?this.at(u,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,u;const c=1/this.direction.x,f=1/this.direction.y,d=1/this.direction.z,p=this.origin;return c>=0?(i=(e.min.x-p.x)*c,r=(e.max.x-p.x)*c):(i=(e.max.x-p.x)*c,r=(e.min.x-p.x)*c),f>=0?(s=(e.min.y-p.y)*f,o=(e.max.y-p.y)*f):(s=(e.max.y-p.y)*f,o=(e.min.y-p.y)*f),i>o||s>r||((s>i||i!==i)&&(i=s),(o<r||r!==r)&&(r=o),d>=0?(a=(e.min.z-p.z)*d,u=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,u=(e.min.z-p.z)*d),i>u||a>r)||((a>i||i!==i)&&(i=a),(u<r||r!==r)&&(r=u),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,oo)!==null}intersectTriangle(e,t,i,r,s){ox.subVectors(t,e),Xp.subVectors(i,e),ax.crossVectors(ox,Xp);let o=this.direction.dot(ax),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;ia.subVectors(this.origin,e);const u=a*this.direction.dot(Xp.crossVectors(ia,Xp));if(u<0)return null;const c=a*this.direction.dot(ox.cross(ia));if(c<0||u+c>o)return null;const f=-a*ia.dot(ax);return f<0?null:this.at(f/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Me{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,u,c,f,d,p,g,v,y,x){const M=this.elements;return M[0]=e,M[4]=t,M[8]=i,M[12]=r,M[1]=s,M[5]=o,M[9]=a,M[13]=u,M[2]=c,M[6]=f,M[10]=d,M[14]=p,M[3]=g,M[7]=v,M[11]=y,M[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Me().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Eu.setFromMatrixColumn(e,0).length(),s=1/Eu.setFromMatrixColumn(e,1).length(),o=1/Eu.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),u=Math.cos(r),c=Math.sin(r),f=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*f,g=o*d,v=a*f,y=a*d;t[0]=u*f,t[4]=-u*d,t[8]=c,t[1]=g+v*c,t[5]=p-y*c,t[9]=-a*u,t[2]=y-p*c,t[6]=v+g*c,t[10]=o*u}else if(e.order==="YXZ"){const p=u*f,g=u*d,v=c*f,y=c*d;t[0]=p+y*a,t[4]=v*a-g,t[8]=o*c,t[1]=o*d,t[5]=o*f,t[9]=-a,t[2]=g*a-v,t[6]=y+p*a,t[10]=o*u}else if(e.order==="ZXY"){const p=u*f,g=u*d,v=c*f,y=c*d;t[0]=p-y*a,t[4]=-o*d,t[8]=v+g*a,t[1]=g+v*a,t[5]=o*f,t[9]=y-p*a,t[2]=-o*c,t[6]=a,t[10]=o*u}else if(e.order==="ZYX"){const p=o*f,g=o*d,v=a*f,y=a*d;t[0]=u*f,t[4]=v*c-g,t[8]=p*c+y,t[1]=u*d,t[5]=y*c+p,t[9]=g*c-v,t[2]=-c,t[6]=a*u,t[10]=o*u}else if(e.order==="YZX"){const p=o*u,g=o*c,v=a*u,y=a*c;t[0]=u*f,t[4]=y-p*d,t[8]=v*d+g,t[1]=d,t[5]=o*f,t[9]=-a*f,t[2]=-c*f,t[6]=g*d+v,t[10]=p-y*d}else if(e.order==="XZY"){const p=o*u,g=o*c,v=a*u,y=a*c;t[0]=u*f,t[4]=-d,t[8]=c*f,t[1]=p*d+y,t[5]=o*f,t[9]=g*d-v,t[2]=v*d-g,t[6]=a*f,t[10]=y*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(N6,e,z6)}lookAt(e,t,i){const r=this.elements;return pr.subVectors(e,t),pr.lengthSq()===0&&(pr.z=1),pr.normalize(),ra.crossVectors(i,pr),ra.lengthSq()===0&&(Math.abs(i.z)===1?pr.x+=1e-4:pr.z+=1e-4,pr.normalize(),ra.crossVectors(i,pr)),ra.normalize(),qp.crossVectors(pr,ra),r[0]=ra.x,r[4]=qp.x,r[8]=pr.x,r[1]=ra.y,r[5]=qp.y,r[9]=pr.y,r[2]=ra.z,r[6]=qp.z,r[10]=pr.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],u=i[8],c=i[12],f=i[1],d=i[5],p=i[9],g=i[13],v=i[2],y=i[6],x=i[10],M=i[14],S=i[3],_=i[7],w=i[11],T=i[15],E=r[0],R=r[4],P=r[8],V=r[12],F=r[1],C=r[5],N=r[9],Q=r[13],G=r[2],Y=r[6],X=r[10],K=r[14],B=r[3],Z=r[7],ee=r[11],se=r[15];return s[0]=o*E+a*F+u*G+c*B,s[4]=o*R+a*C+u*Y+c*Z,s[8]=o*P+a*N+u*X+c*ee,s[12]=o*V+a*Q+u*K+c*se,s[1]=f*E+d*F+p*G+g*B,s[5]=f*R+d*C+p*Y+g*Z,s[9]=f*P+d*N+p*X+g*ee,s[13]=f*V+d*Q+p*K+g*se,s[2]=v*E+y*F+x*G+M*B,s[6]=v*R+y*C+x*Y+M*Z,s[10]=v*P+y*N+x*X+M*ee,s[14]=v*V+y*Q+x*K+M*se,s[3]=S*E+_*F+w*G+T*B,s[7]=S*R+_*C+w*Y+T*Z,s[11]=S*P+_*N+w*X+T*ee,s[15]=S*V+_*Q+w*K+T*se,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],u=e[9],c=e[13],f=e[2],d=e[6],p=e[10],g=e[14],v=e[3],y=e[7],x=e[11],M=e[15];return v*(+s*u*d-r*c*d-s*a*p+i*c*p+r*a*g-i*u*g)+y*(+t*u*g-t*c*p+s*o*p-r*o*g+r*c*f-s*u*f)+x*(+t*c*d-t*a*g-s*o*d+i*o*g+s*a*f-i*c*f)+M*(-r*a*f-t*u*d+t*a*p+r*o*d-i*o*p+i*u*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],u=e[6],c=e[7],f=e[8],d=e[9],p=e[10],g=e[11],v=e[12],y=e[13],x=e[14],M=e[15],S=d*x*c-y*p*c+y*u*g-a*x*g-d*u*M+a*p*M,_=v*p*c-f*x*c-v*u*g+o*x*g+f*u*M-o*p*M,w=f*y*c-v*d*c+v*a*g-o*y*g-f*a*M+o*d*M,T=v*d*u-f*y*u-v*a*p+o*y*p+f*a*x-o*d*x,E=t*S+i*_+r*w+s*T;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/E;return e[0]=S*R,e[1]=(y*p*s-d*x*s-y*r*g+i*x*g+d*r*M-i*p*M)*R,e[2]=(a*x*s-y*u*s+y*r*c-i*x*c-a*r*M+i*u*M)*R,e[3]=(d*u*s-a*p*s-d*r*c+i*p*c+a*r*g-i*u*g)*R,e[4]=_*R,e[5]=(f*x*s-v*p*s+v*r*g-t*x*g-f*r*M+t*p*M)*R,e[6]=(v*u*s-o*x*s-v*r*c+t*x*c+o*r*M-t*u*M)*R,e[7]=(o*p*s-f*u*s+f*r*c-t*p*c-o*r*g+t*u*g)*R,e[8]=w*R,e[9]=(v*d*s-f*y*s-v*i*g+t*y*g+f*i*M-t*d*M)*R,e[10]=(o*y*s-v*a*s+v*i*c-t*y*c-o*i*M+t*a*M)*R,e[11]=(f*a*s-o*d*s-f*i*c+t*d*c+o*i*g-t*a*g)*R,e[12]=T*R,e[13]=(f*y*r-v*d*r+v*i*p-t*y*p-f*i*x+t*d*x)*R,e[14]=(v*a*r-o*y*r-v*i*u+t*y*u+o*i*x-t*a*x)*R,e[15]=(o*d*r-f*a*r+f*i*u-t*d*u-o*i*p+t*a*p)*R,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,u=e.z,c=s*o,f=s*a;return this.set(c*o+i,c*a-r*u,c*u+r*a,0,c*a+r*u,f*a+i,f*u-r*o,0,c*u-r*a,f*u+r*o,s*u*u+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,u=t._w,c=s+s,f=o+o,d=a+a,p=s*c,g=s*f,v=s*d,y=o*f,x=o*d,M=a*d,S=u*c,_=u*f,w=u*d,T=i.x,E=i.y,R=i.z;return r[0]=(1-(y+M))*T,r[1]=(g+w)*T,r[2]=(v-_)*T,r[3]=0,r[4]=(g-w)*E,r[5]=(1-(p+M))*E,r[6]=(x+S)*E,r[7]=0,r[8]=(v+_)*R,r[9]=(x-S)*R,r[10]=(1-(p+y))*R,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Eu.set(r[0],r[1],r[2]).length();const o=Eu.set(r[4],r[5],r[6]).length(),a=Eu.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],hs.copy(this);const c=1/s,f=1/o,d=1/a;return hs.elements[0]*=c,hs.elements[1]*=c,hs.elements[2]*=c,hs.elements[4]*=f,hs.elements[5]*=f,hs.elements[6]*=f,hs.elements[8]*=d,hs.elements[9]*=d,hs.elements[10]*=d,t.setFromRotationMatrix(hs),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,u=2*s/(t-e),c=2*s/(i-r),f=(t+e)/(t-e),d=(i+r)/(i-r),p=-(o+s)/(o-s),g=-2*o*s/(o-s);return a[0]=u,a[4]=0,a[8]=f,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=g,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,u=1/(t-e),c=1/(i-r),f=1/(o-s),d=(t+e)*u,p=(i+r)*c,g=(o+s)*f;return a[0]=2*u,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*f,a[14]=-g,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}Me.prototype.isMatrix4=!0;const Eu=new O,hs=new Me,N6=new O(0,0,0),z6=new O(1,1,1),ra=new O,qp=new O,pr=new O,GA=new Me,WA=new Mn;class yr{constructor(e=0,t=0,i=0,r=yr.DefaultOrder){this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],u=r[1],c=r[5],f=r[9],d=r[2],p=r[6],g=r[10];switch(t){case"XYZ":this._y=Math.asin(Yn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-f,g),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Yn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(a,g),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Yn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,g),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-Yn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,g),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Yn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-f,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,g));break;case"XZY":this._z=Math.asin(-Yn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-f,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return GA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(GA,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return WA.setFromEuler(this),this.setFromQuaternion(WA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}yr.prototype.isEuler=!0;yr.DefaultOrder="XYZ";yr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class J1{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let B6=0;const jA=new O,Au=new Mn,ao=new Me,Yp=new O,Nh=new O,U6=new O,V6=new Mn,XA=new O(1,0,0),qA=new O(0,1,0),YA=new O(0,0,1),H6={type:"added"},ZA={type:"removed"};class Lt extends Ya{constructor(){super(),Object.defineProperty(this,"id",{value:B6++}),this.uuid=$r(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Lt.DefaultUp.clone();const e=new O,t=new yr,i=new Mn,r=new O(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Me},normalMatrix:{value:new Pn}}),this.matrix=new Me,this.matrixWorld=new Me,this.matrixAutoUpdate=Lt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new J1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Au.setFromAxisAngle(e,t),this.quaternion.multiply(Au),this}rotateOnWorldAxis(e,t){return Au.setFromAxisAngle(e,t),this.quaternion.premultiply(Au),this}rotateX(e){return this.rotateOnAxis(XA,e)}rotateY(e){return this.rotateOnAxis(qA,e)}rotateZ(e){return this.rotateOnAxis(YA,e)}translateOnAxis(e,t){return jA.copy(e).applyQuaternion(this.quaternion),this.position.add(jA.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(XA,e)}translateY(e){return this.translateOnAxis(qA,e)}translateZ(e){return this.translateOnAxis(YA,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(ao.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Yp.copy(e):Yp.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Nh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ao.lookAt(Nh,Yp,this.up):ao.lookAt(Yp,Nh,this.up),this.quaternion.setFromRotationMatrix(ao),r&&(ao.extractRotation(r.matrixWorld),Au.setFromRotationMatrix(ao),this.quaternion.premultiply(Au.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(H6)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(ZA)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(ZA)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ao.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ao.multiply(e.parent.matrixWorld)),e.applyMatrix4(ao),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Nh,e,U6),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Nh,V6,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,u){return a[u.uuid]===void 0&&(a[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const u=a.shapes;if(Array.isArray(u))for(let c=0,f=u.length;c<f;c++){const d=u[c];s(e.shapes,d)}else s(e.shapes,u)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let u=0,c=this.material.length;u<c;u++)a.push(s(e.materials,this.material[u]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const u=this.animations[a];r.animations.push(s(e.animations,u))}}if(t){const a=o(e.geometries),u=o(e.materials),c=o(e.textures),f=o(e.images),d=o(e.shapes),p=o(e.skeletons),g=o(e.animations),v=o(e.nodes);a.length>0&&(i.geometries=a),u.length>0&&(i.materials=u),c.length>0&&(i.textures=c),f.length>0&&(i.images=f),d.length>0&&(i.shapes=d),p.length>0&&(i.skeletons=p),g.length>0&&(i.animations=g),v.length>0&&(i.nodes=v)}return i.object=r,i;function o(a){const u=[];for(const c in a){const f=a[c];delete f.metadata,u.push(f)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Lt.DefaultUp=new O(0,1,0);Lt.DefaultMatrixAutoUpdate=!0;Lt.prototype.isObject3D=!0;const fs=new O,lo=new O,lx=new O,uo=new O,Cu=new O,Ru=new O,KA=new O,ux=new O,cx=new O,hx=new O;class Kn{constructor(e=new O,t=new O,i=new O){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),fs.subVectors(e,t),r.cross(fs);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){fs.subVectors(r,t),lo.subVectors(i,t),lx.subVectors(e,t);const o=fs.dot(fs),a=fs.dot(lo),u=fs.dot(lx),c=lo.dot(lo),f=lo.dot(lx),d=o*c-a*a;if(d===0)return s.set(-2,-1,-1);const p=1/d,g=(c*u-a*f)*p,v=(o*f-a*u)*p;return s.set(1-g-v,v,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,uo),uo.x>=0&&uo.y>=0&&uo.x+uo.y<=1}static getUV(e,t,i,r,s,o,a,u){return this.getBarycoord(e,t,i,r,uo),u.set(0,0),u.addScaledVector(s,uo.x),u.addScaledVector(o,uo.y),u.addScaledVector(a,uo.z),u}static isFrontFacing(e,t,i,r){return fs.subVectors(i,t),lo.subVectors(e,t),fs.cross(lo).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return fs.subVectors(this.c,this.b),lo.subVectors(this.a,this.b),fs.cross(lo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Kn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Kn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return Kn.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Kn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Kn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Cu.subVectors(r,i),Ru.subVectors(s,i),ux.subVectors(e,i);const u=Cu.dot(ux),c=Ru.dot(ux);if(u<=0&&c<=0)return t.copy(i);cx.subVectors(e,r);const f=Cu.dot(cx),d=Ru.dot(cx);if(f>=0&&d<=f)return t.copy(r);const p=u*d-f*c;if(p<=0&&u>=0&&f<=0)return o=u/(u-f),t.copy(i).addScaledVector(Cu,o);hx.subVectors(e,s);const g=Cu.dot(hx),v=Ru.dot(hx);if(v>=0&&g<=v)return t.copy(s);const y=g*c-u*v;if(y<=0&&c>=0&&v<=0)return a=c/(c-v),t.copy(i).addScaledVector(Ru,a);const x=f*v-g*d;if(x<=0&&d-f>=0&&g-v>=0)return KA.subVectors(s,r),a=(d-f)/(d-f+(g-v)),t.copy(r).addScaledVector(KA,a);const M=1/(x+y+p);return o=y*M,a=p*M,t.copy(i).addScaledVector(Cu,o).addScaledVector(Ru,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let G6=0;class Nn extends Ya{constructor(){super(),Object.defineProperty(this,"id",{value:G6++}),this.uuid=$r(),this.name="",this.type="Material",this.fog=!0,this.blending=bo,this.side=Mc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Sg,this.blendDst=Mg,this.blendEquation=Os,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Z_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=g6,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=$y,this.stencilZFail=$y,this.stencilZPass=$y,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===CP;continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==bo&&(i.blending=this.blending),this.side!==Mc&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const u=s[a];delete u.metadata,o.push(u)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}Nn.prototype.isMaterial=!0;Nn.fromType=function(){return null};class pi extends Nn{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new ve(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=pv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}pi.prototype.isMeshBasicMaterial=!0;const qn=new O,Zp=new ie;class hn{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i===!0,this.usage=Vf,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new ve),t[i++]=o.r,t[i++]=o.g,t[i++]=o.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new ie),t[i++]=o.x,t[i++]=o.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new O),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Wt),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z,t[i++]=o.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Zp.fromBufferAttribute(this,t),Zp.applyMatrix3(e),this.setXY(t,Zp.x,Zp.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)qn.fromBufferAttribute(this,t),qn.applyMatrix3(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)qn.fromBufferAttribute(this,t),qn.applyMatrix4(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)qn.fromBufferAttribute(this,t),qn.applyNormalMatrix(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)qn.fromBufferAttribute(this,t),qn.transformDirection(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Vf&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}hn.prototype.isBufferAttribute=!0;class eS extends hn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class VP extends hn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class W6 extends hn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}W6.prototype.isFloat16BufferAttribute=!0;class it extends hn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let j6=0;const Ur=new Me,fx=new Lt,Pu=new O,mr=new Gi,zh=new Gi,si=new O;class ct extends Ya{constructor(){super(),Object.defineProperty(this,"id",{value:j6++}),this.uuid=$r(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(zP(e)?VP:eS)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Pn().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ur.makeRotationFromQuaternion(e),this.applyMatrix4(Ur),this}rotateX(e){return Ur.makeRotationX(e),this.applyMatrix4(Ur),this}rotateY(e){return Ur.makeRotationY(e),this.applyMatrix4(Ur),this}rotateZ(e){return Ur.makeRotationZ(e),this.applyMatrix4(Ur),this}translate(e,t,i){return Ur.makeTranslation(e,t,i),this.applyMatrix4(Ur),this}scale(e,t,i){return Ur.makeScale(e,t,i),this.applyMatrix4(Ur),this}lookAt(e){return fx.lookAt(e),fx.updateMatrix(),this.applyMatrix4(fx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Pu).negate(),this.translate(Pu.x,Pu.y,Pu.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new it(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Gi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new O(-1/0,-1/0,-1/0),new O(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];mr.setFromBufferAttribute(s),this.morphTargetsRelative?(si.addVectors(this.boundingBox.min,mr.min),this.boundingBox.expandByPoint(si),si.addVectors(this.boundingBox.max,mr.max),this.boundingBox.expandByPoint(si)):(this.boundingBox.expandByPoint(mr.min),this.boundingBox.expandByPoint(mr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ql);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new O,1/0);return}if(e){const i=this.boundingSphere.center;if(mr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];zh.setFromBufferAttribute(a),this.morphTargetsRelative?(si.addVectors(mr.min,zh.min),mr.expandByPoint(si),si.addVectors(mr.max,zh.max),mr.expandByPoint(si)):(mr.expandByPoint(zh.min),mr.expandByPoint(zh.max))}mr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)si.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(si));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],u=this.morphTargetsRelative;for(let c=0,f=a.count;c<f;c++)si.fromBufferAttribute(a,c),u&&(Pu.fromBufferAttribute(e,c),si.add(Pu)),r=Math.max(r,i.distanceToSquared(si))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new hn(new Float32Array(4*a),4));const u=this.getAttribute("tangent").array,c=[],f=[];for(let F=0;F<a;F++)c[F]=new O,f[F]=new O;const d=new O,p=new O,g=new O,v=new ie,y=new ie,x=new ie,M=new O,S=new O;function _(F,C,N){d.fromArray(r,F*3),p.fromArray(r,C*3),g.fromArray(r,N*3),v.fromArray(o,F*2),y.fromArray(o,C*2),x.fromArray(o,N*2),p.sub(d),g.sub(d),y.sub(v),x.sub(v);const Q=1/(y.x*x.y-x.x*y.y);!isFinite(Q)||(M.copy(p).multiplyScalar(x.y).addScaledVector(g,-y.y).multiplyScalar(Q),S.copy(g).multiplyScalar(y.x).addScaledVector(p,-x.x).multiplyScalar(Q),c[F].add(M),c[C].add(M),c[N].add(M),f[F].add(S),f[C].add(S),f[N].add(S))}let w=this.groups;w.length===0&&(w=[{start:0,count:i.length}]);for(let F=0,C=w.length;F<C;++F){const N=w[F],Q=N.start,G=N.count;for(let Y=Q,X=Q+G;Y<X;Y+=3)_(i[Y+0],i[Y+1],i[Y+2])}const T=new O,E=new O,R=new O,P=new O;function V(F){R.fromArray(s,F*3),P.copy(R);const C=c[F];T.copy(C),T.sub(R.multiplyScalar(R.dot(C))).normalize(),E.crossVectors(P,C);const Q=E.dot(f[F])<0?-1:1;u[F*4]=T.x,u[F*4+1]=T.y,u[F*4+2]=T.z,u[F*4+3]=Q}for(let F=0,C=w.length;F<C;++F){const N=w[F],Q=N.start,G=N.count;for(let Y=Q,X=Q+G;Y<X;Y+=3)V(i[Y+0]),V(i[Y+1]),V(i[Y+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new hn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,g=i.count;p<g;p++)i.setXYZ(p,0,0,0);const r=new O,s=new O,o=new O,a=new O,u=new O,c=new O,f=new O,d=new O;if(e)for(let p=0,g=e.count;p<g;p+=3){const v=e.getX(p+0),y=e.getX(p+1),x=e.getX(p+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,y),o.fromBufferAttribute(t,x),f.subVectors(o,s),d.subVectors(r,s),f.cross(d),a.fromBufferAttribute(i,v),u.fromBufferAttribute(i,y),c.fromBufferAttribute(i,x),a.add(f),u.add(f),c.add(f),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(y,u.x,u.y,u.z),i.setXYZ(x,c.x,c.y,c.z)}else for(let p=0,g=t.count;p<g;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),f.subVectors(o,s),d.subVectors(r,s),f.cross(d),i.setXYZ(p+0,f.x,f.y,f.z),i.setXYZ(p+1,f.x,f.y,f.z),i.setXYZ(p+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(e.attributes[r]===void 0)continue;const o=i[r].array,a=e.attributes[r],u=a.array,c=a.itemSize*t,f=Math.min(u.length,o.length-c);for(let d=0,p=c;d<f;d++,p++)o[p]=u[d]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)si.fromBufferAttribute(e,t),si.normalize(),e.setXYZ(t,si.x,si.y,si.z)}toNonIndexed(){function e(a,u){const c=a.array,f=a.itemSize,d=a.normalized,p=new c.constructor(u.length*f);let g=0,v=0;for(let y=0,x=u.length;y<x;y++){a.isInterleavedBufferAttribute?g=u[y]*a.data.stride+a.offset:g=u[y]*f;for(let M=0;M<f;M++)p[v++]=c[g++]}return new hn(p,f,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ct,i=this.index.array,r=this.attributes;for(const a in r){const u=r[a],c=e(u,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const u=[],c=s[a];for(let f=0,d=c.length;f<d;f++){const p=c[f],g=e(p,i);u.push(g)}t.morphAttributes[a]=u}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,u=o.length;a<u;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const c in u)u[c]!==void 0&&(e[c]=u[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const u in i){const c=i[u];e.data.attributes[u]=c.toJSON(e.data)}const r={};let s=!1;for(const u in this.morphAttributes){const c=this.morphAttributes[u],f=[];for(let d=0,p=c.length;d<p;d++){const g=c[d];f.push(g.toJSON(e.data))}f.length>0&&(r[u]=f,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const f=r[c];this.setAttribute(c,f.clone(t))}const s=e.morphAttributes;for(const c in s){const f=[],d=s[c];for(let p=0,g=d.length;p<g;p++)f.push(d[p].clone(t));this.morphAttributes[c]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,f=o.length;c<f;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}ct.prototype.isBufferGeometry=!0;const $A=new Me,Lu=new Bo,dx=new Ql,sa=new O,oa=new O,aa=new O,px=new O,mx=new O,gx=new O,Kp=new O,$p=new O,Qp=new O,Jp=new ie,em=new ie,tm=new ie,vx=new O,nm=new O;class un extends Lt{constructor(e=new ct,t=new pi){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),dx.copy(i.boundingSphere),dx.applyMatrix4(s),e.ray.intersectsSphere(dx)===!1)||($A.copy(s).invert(),Lu.copy(e.ray).applyMatrix4($A),i.boundingBox!==null&&Lu.intersectsBox(i.boundingBox)===!1))return;let o;if(i.isBufferGeometry){const a=i.index,u=i.attributes.position,c=i.morphAttributes.position,f=i.morphTargetsRelative,d=i.attributes.uv,p=i.attributes.uv2,g=i.groups,v=i.drawRange;if(a!==null)if(Array.isArray(r))for(let y=0,x=g.length;y<x;y++){const M=g[y],S=r[M.materialIndex],_=Math.max(M.start,v.start),w=Math.min(a.count,Math.min(M.start+M.count,v.start+v.count));for(let T=_,E=w;T<E;T+=3){const R=a.getX(T),P=a.getX(T+1),V=a.getX(T+2);o=im(this,S,e,Lu,u,c,f,d,p,R,P,V),o&&(o.faceIndex=Math.floor(T/3),o.face.materialIndex=M.materialIndex,t.push(o))}}else{const y=Math.max(0,v.start),x=Math.min(a.count,v.start+v.count);for(let M=y,S=x;M<S;M+=3){const _=a.getX(M),w=a.getX(M+1),T=a.getX(M+2);o=im(this,r,e,Lu,u,c,f,d,p,_,w,T),o&&(o.faceIndex=Math.floor(M/3),t.push(o))}}else if(u!==void 0)if(Array.isArray(r))for(let y=0,x=g.length;y<x;y++){const M=g[y],S=r[M.materialIndex],_=Math.max(M.start,v.start),w=Math.min(u.count,Math.min(M.start+M.count,v.start+v.count));for(let T=_,E=w;T<E;T+=3){const R=T,P=T+1,V=T+2;o=im(this,S,e,Lu,u,c,f,d,p,R,P,V),o&&(o.faceIndex=Math.floor(T/3),o.face.materialIndex=M.materialIndex,t.push(o))}}else{const y=Math.max(0,v.start),x=Math.min(u.count,v.start+v.count);for(let M=y,S=x;M<S;M+=3){const _=M,w=M+1,T=M+2;o=im(this,r,e,Lu,u,c,f,d,p,_,w,T),o&&(o.faceIndex=Math.floor(M/3),t.push(o))}}}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}un.prototype.isMesh=!0;function X6(n,e,t,i,r,s,o,a){let u;if(e.side===wr?u=i.intersectTriangle(o,s,r,!0,a):u=i.intersectTriangle(r,s,o,e.side!==Lo,a),u===null)return null;nm.copy(a),nm.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(nm);return c<t.near||c>t.far?null:{distance:c,point:nm.clone(),object:n}}function im(n,e,t,i,r,s,o,a,u,c,f,d){sa.fromBufferAttribute(r,c),oa.fromBufferAttribute(r,f),aa.fromBufferAttribute(r,d);const p=n.morphTargetInfluences;if(s&&p){Kp.set(0,0,0),$p.set(0,0,0),Qp.set(0,0,0);for(let v=0,y=s.length;v<y;v++){const x=p[v],M=s[v];x!==0&&(px.fromBufferAttribute(M,c),mx.fromBufferAttribute(M,f),gx.fromBufferAttribute(M,d),o?(Kp.addScaledVector(px,x),$p.addScaledVector(mx,x),Qp.addScaledVector(gx,x)):(Kp.addScaledVector(px.sub(sa),x),$p.addScaledVector(mx.sub(oa),x),Qp.addScaledVector(gx.sub(aa),x)))}sa.add(Kp),oa.add($p),aa.add(Qp)}n.isSkinnedMesh&&(n.boneTransform(c,sa),n.boneTransform(f,oa),n.boneTransform(d,aa));const g=X6(n,e,t,i,sa,oa,aa,vx);if(g){a&&(Jp.fromBufferAttribute(a,c),em.fromBufferAttribute(a,f),tm.fromBufferAttribute(a,d),g.uv=Kn.getUV(vx,sa,oa,aa,Jp,em,tm,new ie)),u&&(Jp.fromBufferAttribute(u,c),em.fromBufferAttribute(u,f),tm.fromBufferAttribute(u,d),g.uv2=Kn.getUV(vx,sa,oa,aa,Jp,em,tm,new ie));const v={a:c,b:f,c:d,normal:new O,materialIndex:0};Kn.getNormal(sa,oa,aa,v.normal),g.face=v}return g}class Jl extends ct{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const u=[],c=[],f=[],d=[];let p=0,g=0;v("z","y","x",-1,-1,i,t,e,o,s,0),v("z","y","x",1,-1,i,t,-e,o,s,1),v("x","z","y",1,1,e,i,t,r,o,2),v("x","z","y",1,-1,e,i,-t,r,o,3),v("x","y","z",1,-1,e,t,i,r,s,4),v("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(u),this.setAttribute("position",new it(c,3)),this.setAttribute("normal",new it(f,3)),this.setAttribute("uv",new it(d,2));function v(y,x,M,S,_,w,T,E,R,P,V){const F=w/R,C=T/P,N=w/2,Q=T/2,G=E/2,Y=R+1,X=P+1;let K=0,B=0;const Z=new O;for(let ee=0;ee<X;ee++){const se=ee*C-Q;for(let ae=0;ae<Y;ae++){const Le=ae*F-N;Z[y]=Le*S,Z[x]=se*_,Z[M]=G,c.push(Z.x,Z.y,Z.z),Z[y]=0,Z[x]=0,Z[M]=E>0?1:-1,f.push(Z.x,Z.y,Z.z),d.push(ae/R),d.push(1-ee/P),K+=1}}for(let ee=0;ee<P;ee++)for(let se=0;se<R;se++){const ae=p+se+Y*ee,Le=p+se+Y*(ee+1),ze=p+(se+1)+Y*(ee+1),Pe=p+(se+1)+Y*ee;u.push(ae,Le,Pe),u.push(Le,ze,Pe),B+=6}a.addGroup(g,B,V),g+=B,p+=K}}static fromJSON(e){return new Jl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Rc(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function wi(n){const e={};for(let t=0;t<n.length;t++){const i=Rc(n[t]);for(const r in i)e[r]=i[r]}return e}const di={clone:Rc,merge:wi};var q6=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Y6=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Nt extends Nn{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=q6,this.fragmentShader=Y6,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Rc(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}Nt.prototype.isShaderMaterial=!0;class yv extends Lt{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Me,this.projectionMatrix=new Me,this.projectionMatrixInverse=new Me}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}yv.prototype.isCamera=!0;class jn extends yv{constructor(e=50,t=1,i=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Hf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(pf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Hf*2*Math.atan(Math.tan(pf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(pf*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const u=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/u,t-=o.offsetY*i/c,r*=o.width/u,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}jn.prototype.isPerspectiveCamera=!0;const Du=90,Iu=1;class tS extends Lt{constructor(e,t,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;const r=new jn(Du,Iu,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new O(1,0,0)),this.add(r);const s=new jn(Du,Iu,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new O(-1,0,0)),this.add(s);const o=new jn(Du,Iu,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new O(0,1,0)),this.add(o);const a=new jn(Du,Iu,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new O(0,-1,0)),this.add(a);const u=new jn(Du,Iu,e,t);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new O(0,0,1)),this.add(u);const c=new jn(Du,Iu,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new O(0,0,-1)),this.add(c)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,u,c]=this.children,f=e.getRenderTarget(),d=e.outputEncoding,p=e.toneMapping,g=e.xr.enabled;e.outputEncoding=sr,e.toneMapping=Bs,e.xr.enabled=!1;const v=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,u),i.texture.generateMipmaps=v,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(f),e.outputEncoding=d,e.toneMapping=p,e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class xv extends zn{constructor(e,t,i,r,s,o,a,u,c,f){e=e!==void 0?e:[],t=t!==void 0?t:bc,super(e,t,i,r,s,o,a,u,c,f),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}xv.prototype.isCubeTexture=!0;class HP extends Gt{constructor(e,t={}){super(e,e,t);const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new xv(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:An}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Jl(5,5,5),s=new Nt({name:"CubemapFromEquirect",uniforms:Rc(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:wr,blending:Yt});s.uniforms.tEquirect.value=t;const o=new un(r,s),a=t.minFilter;return t.minFilter===Kl&&(t.minFilter=An),new tS(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}HP.prototype.isWebGLCubeRenderTarget=!0;const yx=new O,Z6=new O,K6=new Pn;class vo{constructor(e=new O(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=yx.subVectors(i,t).cross(Z6.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(yx),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||K6.getNormalMatrix(e),r=this.coplanarPoint(yx).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}vo.prototype.isPlane=!0;const Ou=new Ql,rm=new O;class hd{constructor(e=new vo,t=new vo,i=new vo,r=new vo,s=new vo,o=new vo){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],u=i[4],c=i[5],f=i[6],d=i[7],p=i[8],g=i[9],v=i[10],y=i[11],x=i[12],M=i[13],S=i[14],_=i[15];return t[0].setComponents(a-r,d-u,y-p,_-x).normalize(),t[1].setComponents(a+r,d+u,y+p,_+x).normalize(),t[2].setComponents(a+s,d+c,y+g,_+M).normalize(),t[3].setComponents(a-s,d-c,y-g,_-M).normalize(),t[4].setComponents(a-o,d-f,y-v,_-S).normalize(),t[5].setComponents(a+o,d+f,y+v,_+S).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Ou.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ou)}intersectsSprite(e){return Ou.center.set(0,0,0),Ou.radius=.7071067811865476,Ou.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ou)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(rm.x=r.normal.x>0?e.max.x:e.min.x,rm.y=r.normal.y>0?e.max.y:e.min.y,rm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(rm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function GP(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function $6(n,e){const t=e.isWebGL2,i=new WeakMap;function r(c,f){const d=c.array,p=c.usage,g=n.createBuffer();n.bindBuffer(f,g),n.bufferData(f,d,p),c.onUploadCallback();let v;if(d instanceof Float32Array)v=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)v=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=5123;else if(d instanceof Int16Array)v=5122;else if(d instanceof Uint32Array)v=5125;else if(d instanceof Int32Array)v=5124;else if(d instanceof Int8Array)v=5120;else if(d instanceof Uint8Array)v=5121;else if(d instanceof Uint8ClampedArray)v=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:g,type:v,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}function s(c,f,d){const p=f.array,g=f.updateRange;n.bindBuffer(d,c),g.count===-1?n.bufferSubData(d,0,p):(t?n.bufferSubData(d,g.offset*p.BYTES_PER_ELEMENT,p,g.offset,g.count):n.bufferSubData(d,g.offset*p.BYTES_PER_ELEMENT,p.subarray(g.offset,g.offset+g.count)),g.count=-1)}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const f=i.get(c);f&&(n.deleteBuffer(f.buffer),i.delete(c))}function u(c,f){if(c.isGLBufferAttribute){const p=i.get(c);(!p||p.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);d===void 0?i.set(c,r(c,f)):d.version<c.version&&(s(d.buffer,c,f),d.version=c.version)}return{get:o,remove:a,update:u}}class fd extends ct{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),u=Math.floor(r),c=a+1,f=u+1,d=e/a,p=t/u,g=[],v=[],y=[],x=[];for(let M=0;M<f;M++){const S=M*p-o;for(let _=0;_<c;_++){const w=_*d-s;v.push(w,-S,0),y.push(0,0,1),x.push(_/a),x.push(1-M/u)}}for(let M=0;M<u;M++)for(let S=0;S<a;S++){const _=S+c*M,w=S+c*(M+1),T=S+1+c*(M+1),E=S+1+c*M;g.push(_,w,E),g.push(w,T,E)}this.setIndex(g),this.setAttribute("position",new it(v,3)),this.setAttribute("normal",new it(y,3)),this.setAttribute("uv",new it(x,2))}static fromJSON(e){return new fd(e.width,e.height,e.widthSegments,e.heightSegments)}}var Q6=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,J6=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,eG=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,tG=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,nG=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,iG=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,rG="vec3 transformed = vec3( position );",sG=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,oG=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,aG=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,lG=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,uG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,cG=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,hG=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,fG=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,dG=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,pG=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,mG=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,gG=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,vG=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,yG=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,xG=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,_G=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,wG=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,SG=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,MG="gl_FragColor = linearToOutputTexel( gl_FragColor );",bG=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,TG=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,EG=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,AG=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,CG=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,RG=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,PG=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,LG=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,DG=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,IG=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,OG=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,FG=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,kG=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,NG=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,zG=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,BG=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,UG=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,VG=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,HG=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,GG=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,WG=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,jG=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,XG=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,qG=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,YG=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,ZG=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,KG=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,$G=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,QG=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,JG=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,eW=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,tW=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,nW=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,iW=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,rW=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,sW=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,oW=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,aW=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,lW=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,uW=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,cW=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,hW=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,fW=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,dW=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,pW=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,mW=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,gW=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,vW=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,yW=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,xW=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,_W=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,wW=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,SW=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,MW=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,bW=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,TW=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,EW=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,AW=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,CW=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,RW=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,PW=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,LW=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,DW=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,IW=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,OW=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,FW=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,kW=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,NW=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,zW=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,BW=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,UW=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,VW=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,HW=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,GW=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,WW=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,jW=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,XW=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const qW=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,YW=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,ZW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,KW=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,$W=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,QW=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,JW=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,e8=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,t8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,n8=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,i8=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,r8=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,s8=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,o8=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,a8=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,l8=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,u8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,c8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,h8=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,f8=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,d8=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,p8=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,m8=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,g8=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,v8=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,y8=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,x8=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,_8=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,w8=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,S8=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,M8=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,b8=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Et={alphamap_fragment:Q6,alphamap_pars_fragment:J6,alphatest_fragment:eG,alphatest_pars_fragment:tG,aomap_fragment:nG,aomap_pars_fragment:iG,begin_vertex:rG,beginnormal_vertex:sG,bsdfs:oG,bumpmap_pars_fragment:aG,clipping_planes_fragment:lG,clipping_planes_pars_fragment:uG,clipping_planes_pars_vertex:cG,clipping_planes_vertex:hG,color_fragment:fG,color_pars_fragment:dG,color_pars_vertex:pG,color_vertex:mG,common:gG,cube_uv_reflection_fragment:vG,defaultnormal_vertex:yG,displacementmap_pars_vertex:xG,displacementmap_vertex:_G,emissivemap_fragment:wG,emissivemap_pars_fragment:SG,encodings_fragment:MG,encodings_pars_fragment:bG,envmap_fragment:TG,envmap_common_pars_fragment:EG,envmap_pars_fragment:AG,envmap_pars_vertex:CG,envmap_physical_pars_fragment:BG,envmap_vertex:RG,fog_vertex:PG,fog_pars_vertex:LG,fog_fragment:DG,fog_pars_fragment:IG,gradientmap_pars_fragment:OG,lightmap_fragment:FG,lightmap_pars_fragment:kG,lights_lambert_vertex:NG,lights_pars_begin:zG,lights_toon_fragment:UG,lights_toon_pars_fragment:VG,lights_phong_fragment:HG,lights_phong_pars_fragment:GG,lights_physical_fragment:WG,lights_physical_pars_fragment:jG,lights_fragment_begin:XG,lights_fragment_maps:qG,lights_fragment_end:YG,logdepthbuf_fragment:ZG,logdepthbuf_pars_fragment:KG,logdepthbuf_pars_vertex:$G,logdepthbuf_vertex:QG,map_fragment:JG,map_pars_fragment:eW,map_particle_fragment:tW,map_particle_pars_fragment:nW,metalnessmap_fragment:iW,metalnessmap_pars_fragment:rW,morphcolor_vertex:sW,morphnormal_vertex:oW,morphtarget_pars_vertex:aW,morphtarget_vertex:lW,normal_fragment_begin:uW,normal_fragment_maps:cW,normal_pars_fragment:hW,normal_pars_vertex:fW,normal_vertex:dW,normalmap_pars_fragment:pW,clearcoat_normal_fragment_begin:mW,clearcoat_normal_fragment_maps:gW,clearcoat_pars_fragment:vW,output_fragment:yW,packing:xW,premultiplied_alpha_fragment:_W,project_vertex:wW,dithering_fragment:SW,dithering_pars_fragment:MW,roughnessmap_fragment:bW,roughnessmap_pars_fragment:TW,shadowmap_pars_fragment:EW,shadowmap_pars_vertex:AW,shadowmap_vertex:CW,shadowmask_pars_fragment:RW,skinbase_vertex:PW,skinning_pars_vertex:LW,skinning_vertex:DW,skinnormal_vertex:IW,specularmap_fragment:OW,specularmap_pars_fragment:FW,tonemapping_fragment:kW,tonemapping_pars_fragment:NW,transmission_fragment:zW,transmission_pars_fragment:BW,uv_pars_fragment:UW,uv_pars_vertex:VW,uv_vertex:HW,uv2_pars_fragment:GW,uv2_pars_vertex:WW,uv2_vertex:jW,worldpos_vertex:XW,background_vert:qW,background_frag:YW,cube_vert:ZW,cube_frag:KW,depth_vert:$W,depth_frag:QW,distanceRGBA_vert:JW,distanceRGBA_frag:e8,equirect_vert:t8,equirect_frag:n8,linedashed_vert:i8,linedashed_frag:r8,meshbasic_vert:s8,meshbasic_frag:o8,meshlambert_vert:a8,meshlambert_frag:l8,meshmatcap_vert:u8,meshmatcap_frag:c8,meshnormal_vert:h8,meshnormal_frag:f8,meshphong_vert:d8,meshphong_frag:p8,meshphysical_vert:m8,meshphysical_frag:g8,meshtoon_vert:v8,meshtoon_frag:y8,points_vert:x8,points_frag:_8,shadow_vert:w8,shadow_frag:S8,sprite_vert:M8,sprite_frag:b8},Fe={common:{diffuse:{value:new ve(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Pn},uv2Transform:{value:new Pn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ie(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ve(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ve(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Pn}},sprite:{diffuse:{value:new ve(16777215)},opacity:{value:1},center:{value:new ie(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Pn}}},Ds={basic:{uniforms:wi([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.fog]),vertexShader:Et.meshbasic_vert,fragmentShader:Et.meshbasic_frag},lambert:{uniforms:wi([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.fog,Fe.lights,{emissive:{value:new ve(0)}}]),vertexShader:Et.meshlambert_vert,fragmentShader:Et.meshlambert_frag},phong:{uniforms:wi([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.fog,Fe.lights,{emissive:{value:new ve(0)},specular:{value:new ve(1118481)},shininess:{value:30}}]),vertexShader:Et.meshphong_vert,fragmentShader:Et.meshphong_frag},standard:{uniforms:wi([Fe.common,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.roughnessmap,Fe.metalnessmap,Fe.fog,Fe.lights,{emissive:{value:new ve(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag},toon:{uniforms:wi([Fe.common,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.gradientmap,Fe.fog,Fe.lights,{emissive:{value:new ve(0)}}]),vertexShader:Et.meshtoon_vert,fragmentShader:Et.meshtoon_frag},matcap:{uniforms:wi([Fe.common,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.fog,{matcap:{value:null}}]),vertexShader:Et.meshmatcap_vert,fragmentShader:Et.meshmatcap_frag},points:{uniforms:wi([Fe.points,Fe.fog]),vertexShader:Et.points_vert,fragmentShader:Et.points_frag},dashed:{uniforms:wi([Fe.common,Fe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Et.linedashed_vert,fragmentShader:Et.linedashed_frag},depth:{uniforms:wi([Fe.common,Fe.displacementmap]),vertexShader:Et.depth_vert,fragmentShader:Et.depth_frag},normal:{uniforms:wi([Fe.common,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,{opacity:{value:1}}]),vertexShader:Et.meshnormal_vert,fragmentShader:Et.meshnormal_frag},sprite:{uniforms:wi([Fe.sprite,Fe.fog]),vertexShader:Et.sprite_vert,fragmentShader:Et.sprite_frag},background:{uniforms:{uvTransform:{value:new Pn},t2D:{value:null}},vertexShader:Et.background_vert,fragmentShader:Et.background_frag},cube:{uniforms:wi([Fe.envmap,{opacity:{value:1}}]),vertexShader:Et.cube_vert,fragmentShader:Et.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Et.equirect_vert,fragmentShader:Et.equirect_frag},distanceRGBA:{uniforms:wi([Fe.common,Fe.displacementmap,{referencePosition:{value:new O},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Et.distanceRGBA_vert,fragmentShader:Et.distanceRGBA_frag},shadow:{uniforms:wi([Fe.lights,Fe.fog,{color:{value:new ve(0)},opacity:{value:1}}]),vertexShader:Et.shadow_vert,fragmentShader:Et.shadow_frag}};Ds.physical={uniforms:wi([Ds.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ie(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new ve(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ie},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ve(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new ve(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag};function T8(n,e,t,i,r,s){const o=new ve(0);let a=r===!0?0:1,u,c,f=null,d=0,p=null;function g(y,x){let M=!1,S=x.isScene===!0?x.background:null;S&&S.isTexture&&(S=e.get(S));const _=n.xr,w=_.getSession&&_.getSession();w&&w.environmentBlendMode==="additive"&&(S=null),S===null?v(o,a):S&&S.isColor&&(v(S,1),M=!0),(n.autoClear||M)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===mv)?(c===void 0&&(c=new un(new Jl(1,1,1),new Nt({name:"BackgroundCubeMaterial",uniforms:Rc(Ds.cube.uniforms),vertexShader:Ds.cube.vertexShader,fragmentShader:Ds.cube.fragmentShader,side:wr,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(T,E,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=S,c.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,(f!==S||d!==S.version||p!==n.toneMapping)&&(c.material.needsUpdate=!0,f=S,d=S.version,p=n.toneMapping),y.unshift(c,c.geometry,c.material,0,0,null)):S&&S.isTexture&&(u===void 0&&(u=new un(new fd(2,2),new Nt({name:"BackgroundMaterial",uniforms:Rc(Ds.background.uniforms),vertexShader:Ds.background.vertexShader,fragmentShader:Ds.background.fragmentShader,side:Mc,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=S,S.matrixAutoUpdate===!0&&S.updateMatrix(),u.material.uniforms.uvTransform.value.copy(S.matrix),(f!==S||d!==S.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,f=S,d=S.version,p=n.toneMapping),y.unshift(u,u.geometry,u.material,0,0,null))}function v(y,x){t.buffers.color.setClear(y.r,y.g,y.b,x,s)}return{getClearColor:function(){return o},setClearColor:function(y,x=1){o.set(y),a=x,v(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(y){a=y,v(o,a)},render:g}}function E8(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},u=x(null);let c=u,f=!1;function d(G,Y,X,K,B){let Z=!1;if(o){const ee=y(K,X,Y);c!==ee&&(c=ee,g(c.object)),Z=M(K,B),Z&&S(K,B)}else{const ee=Y.wireframe===!0;(c.geometry!==K.id||c.program!==X.id||c.wireframe!==ee)&&(c.geometry=K.id,c.program=X.id,c.wireframe=ee,Z=!0)}G.isInstancedMesh===!0&&(Z=!0),B!==null&&t.update(B,34963),(Z||f)&&(f=!1,P(G,Y,X,K),B!==null&&n.bindBuffer(34963,t.get(B).buffer))}function p(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function g(G){return i.isWebGL2?n.bindVertexArray(G):s.bindVertexArrayOES(G)}function v(G){return i.isWebGL2?n.deleteVertexArray(G):s.deleteVertexArrayOES(G)}function y(G,Y,X){const K=X.wireframe===!0;let B=a[G.id];B===void 0&&(B={},a[G.id]=B);let Z=B[Y.id];Z===void 0&&(Z={},B[Y.id]=Z);let ee=Z[K];return ee===void 0&&(ee=x(p()),Z[K]=ee),ee}function x(G){const Y=[],X=[],K=[];for(let B=0;B<r;B++)Y[B]=0,X[B]=0,K[B]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:X,attributeDivisors:K,object:G,attributes:{},index:null}}function M(G,Y){const X=c.attributes,K=G.attributes;let B=0;for(const Z in K){const ee=X[Z],se=K[Z];if(ee===void 0||ee.attribute!==se||ee.data!==se.data)return!0;B++}return c.attributesNum!==B||c.index!==Y}function S(G,Y){const X={},K=G.attributes;let B=0;for(const Z in K){const ee=K[Z],se={};se.attribute=ee,ee.data&&(se.data=ee.data),X[Z]=se,B++}c.attributes=X,c.attributesNum=B,c.index=Y}function _(){const G=c.newAttributes;for(let Y=0,X=G.length;Y<X;Y++)G[Y]=0}function w(G){T(G,0)}function T(G,Y){const X=c.newAttributes,K=c.enabledAttributes,B=c.attributeDivisors;X[G]=1,K[G]===0&&(n.enableVertexAttribArray(G),K[G]=1),B[G]!==Y&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](G,Y),B[G]=Y)}function E(){const G=c.newAttributes,Y=c.enabledAttributes;for(let X=0,K=Y.length;X<K;X++)Y[X]!==G[X]&&(n.disableVertexAttribArray(X),Y[X]=0)}function R(G,Y,X,K,B,Z){i.isWebGL2===!0&&(X===5124||X===5125)?n.vertexAttribIPointer(G,Y,X,B,Z):n.vertexAttribPointer(G,Y,X,K,B,Z)}function P(G,Y,X,K){if(i.isWebGL2===!1&&(G.isInstancedMesh||K.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();const B=K.attributes,Z=X.getAttributes(),ee=Y.defaultAttributeValues;for(const se in Z){const ae=Z[se];if(ae.location>=0){let Le=B[se];if(Le===void 0&&(se==="instanceMatrix"&&G.instanceMatrix&&(Le=G.instanceMatrix),se==="instanceColor"&&G.instanceColor&&(Le=G.instanceColor)),Le!==void 0){const ze=Le.normalized,Pe=Le.itemSize,oe=t.get(Le);if(oe===void 0)continue;const rt=oe.buffer,Xe=oe.type,Ze=oe.bytesPerElement;if(Le.isInterleavedBufferAttribute){const Se=Le.data,Qe=Se.stride,ue=Le.offset;if(Se.isInstancedInterleavedBuffer){for(let fe=0;fe<ae.locationSize;fe++)T(ae.location+fe,Se.meshPerAttribute);G.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=Se.meshPerAttribute*Se.count)}else for(let fe=0;fe<ae.locationSize;fe++)w(ae.location+fe);n.bindBuffer(34962,rt);for(let fe=0;fe<ae.locationSize;fe++)R(ae.location+fe,Pe/ae.locationSize,Xe,ze,Qe*Ze,(ue+Pe/ae.locationSize*fe)*Ze)}else{if(Le.isInstancedBufferAttribute){for(let Se=0;Se<ae.locationSize;Se++)T(ae.location+Se,Le.meshPerAttribute);G.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=Le.meshPerAttribute*Le.count)}else for(let Se=0;Se<ae.locationSize;Se++)w(ae.location+Se);n.bindBuffer(34962,rt);for(let Se=0;Se<ae.locationSize;Se++)R(ae.location+Se,Pe/ae.locationSize,Xe,ze,Pe*Ze,Pe/ae.locationSize*Se*Ze)}}else if(ee!==void 0){const ze=ee[se];if(ze!==void 0)switch(ze.length){case 2:n.vertexAttrib2fv(ae.location,ze);break;case 3:n.vertexAttrib3fv(ae.location,ze);break;case 4:n.vertexAttrib4fv(ae.location,ze);break;default:n.vertexAttrib1fv(ae.location,ze)}}}}E()}function V(){N();for(const G in a){const Y=a[G];for(const X in Y){const K=Y[X];for(const B in K)v(K[B].object),delete K[B];delete Y[X]}delete a[G]}}function F(G){if(a[G.id]===void 0)return;const Y=a[G.id];for(const X in Y){const K=Y[X];for(const B in K)v(K[B].object),delete K[B];delete Y[X]}delete a[G.id]}function C(G){for(const Y in a){const X=a[Y];if(X[G.id]===void 0)continue;const K=X[G.id];for(const B in K)v(K[B].object),delete K[B];delete X[G.id]}}function N(){Q(),f=!0,c!==u&&(c=u,g(c.object))}function Q(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:d,reset:N,resetDefaultState:Q,dispose:V,releaseStatesOfGeometry:F,releaseStatesOfProgram:C,initAttributes:_,enableAttribute:w,disableUnusedAttributes:E}}function A8(n,e,t,i){const r=i.isWebGL2;let s;function o(c){s=c}function a(c,f){n.drawArrays(s,c,f),t.update(f,s,1)}function u(c,f,d){if(d===0)return;let p,g;if(r)p=n,g="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[g](s,c,f,d),t.update(f,s,d)}this.setMode=o,this.render=a,this.renderInstances=u}function C8(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(R){if(R==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext!="undefined"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&n instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const u=s(a);u!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",u,"instead."),a=u);const c=o||e.has("WEBGL_draw_buffers"),f=t.logarithmicDepthBuffer===!0,d=n.getParameter(34930),p=n.getParameter(35660),g=n.getParameter(3379),v=n.getParameter(34076),y=n.getParameter(34921),x=n.getParameter(36347),M=n.getParameter(36348),S=n.getParameter(36349),_=p>0,w=o||e.has("OES_texture_float"),T=_&&w,E=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:f,maxTextures:d,maxVertexTextures:p,maxTextureSize:g,maxCubemapSize:v,maxAttributes:y,maxVertexUniforms:x,maxVaryings:M,maxFragmentUniforms:S,vertexTextures:_,floatFragmentTextures:w,floatVertexTextures:T,maxSamples:E}}function R8(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new vo,a=new Pn,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p,g){const v=d.length!==0||p||i!==0||r;return r=p,t=f(d,g,0),i=d.length,v},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1,c()},this.setState=function(d,p,g){const v=d.clippingPlanes,y=d.clipIntersection,x=d.clipShadows,M=n.get(d);if(!r||v===null||v.length===0||s&&!x)s?f(null):c();else{const S=s?0:i,_=S*4;let w=M.clippingState||null;u.value=w,w=f(v,p,_,g);for(let T=0;T!==_;++T)w[T]=t[T];M.clippingState=w,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=S}};function c(){u.value!==t&&(u.value=t,u.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function f(d,p,g,v){const y=d!==null?d.length:0;let x=null;if(y!==0){if(x=u.value,v!==!0||x===null){const M=g+y*4,S=p.matrixWorldInverse;a.getNormalMatrix(S),(x===null||x.length<M)&&(x=new Float32Array(M));for(let _=0,w=g;_!==y;++_,w+=4)o.copy(d[_]).applyMatrix4(S,a),o.normal.toArray(x,w),x[w+3]=o.constant}u.value=x,u.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,x}}function P8(n){let e=new WeakMap;function t(o,a){return a===Ec?o.mapping=bc:a===K_&&(o.mapping=Tc),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Ec||a===K_)if(e.has(o)){const u=e.get(o).texture;return t(u,o.mapping)}else{const u=o.image;if(u&&u.height>0){const c=new HP(u.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const u=e.get(a);u!==void 0&&(e.delete(a),u.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Za extends yv{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,u=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=f*this.view.offsetY,u=a-f*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,u,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}Za.prototype.isOrthographicCamera=!0;const ic=4,QA=[.125,.215,.35,.446,.526,.582],Al=20,xx=new Za,JA=new ve;let _x=null;const bl=(1+Math.sqrt(5))/2,Fu=1/bl,e2=[new O(1,1,1),new O(-1,1,1),new O(1,1,-1),new O(-1,1,-1),new O(0,bl,Fu),new O(0,bl,-Fu),new O(Fu,0,bl),new O(-Fu,0,bl),new O(bl,Fu,0),new O(-bl,Fu,0)];class t2{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){_x=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=r2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=i2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(_x),e.scissorTest=!1,sm(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===bc||e.mapping===Tc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),_x=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize-32,i={magFilter:An,minFilter:An,generateMipmaps:!1,type:_s,format:qr,encoding:sr,depthBuffer:!1},r=n2(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=n2(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=L8(s)),this._blurMaterial=D8(s,e,t)}return r}_compileMaterial(e){const t=new un(this._lodPlanes[0],e);this._renderer.compile(t,xx)}_sceneToCubeUV(e,t,i,r){const a=new jn(90,1,t,i),u=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],f=this._renderer,d=f.autoClear,p=f.toneMapping;f.getClearColor(JA),f.toneMapping=Bs,f.autoClear=!1;const g=new pi({name:"PMREM.Background",side:wr,depthWrite:!1,depthTest:!1}),v=new un(new Jl,g);let y=!1;const x=e.background;x?x.isColor&&(g.color.copy(x),e.background=null,y=!0):(g.color.copy(JA),y=!0);for(let M=0;M<6;M++){const S=M%3;S===0?(a.up.set(0,u[M],0),a.lookAt(c[M],0,0)):S===1?(a.up.set(0,0,u[M]),a.lookAt(0,c[M],0)):(a.up.set(0,u[M],0),a.lookAt(0,0,c[M]));const _=this._cubeSize;sm(r,S*_,M>2?_:0,_,_),f.setRenderTarget(r),y&&f.render(v,a),f.render(e,a)}v.geometry.dispose(),v.material.dispose(),f.toneMapping=p,f.autoClear=d,e.background=x}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===bc||e.mapping===Tc;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=r2()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=i2());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new un(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const u=this._cubeSize;sm(t,0,0,3*u,2*u),i.setRenderTarget(t),i.render(o,xx)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=e2[(r-1)%e2.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const u=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,d=new un(this._lodPlanes[r],c),p=c.uniforms,g=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*Al-1),y=s/v,x=isFinite(s)?1+Math.floor(f*y):Al;x>Al&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Al}`);const M=[];let S=0;for(let R=0;R<Al;++R){const P=R/y,V=Math.exp(-P*P/2);M.push(V),R===0?S+=V:R<x&&(S+=2*V)}for(let R=0;R<M.length;R++)M[R]=M[R]/S;p.envMap.value=e.texture,p.samples.value=x,p.weights.value=M,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:_}=this;p.dTheta.value=v,p.mipInt.value=_-i;const w=this._sizeLods[r],T=3*w*(r>_-ic?r-_+ic:0),E=4*(this._cubeSize-w);sm(t,T,E,3*w,2*w),u.setRenderTarget(t),u.render(d,xx)}}function L8(n){const e=[],t=[],i=[];let r=n;const s=n-ic+1+QA.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let u=1/a;o>n-ic?u=QA[o-n+ic-1]:o===0&&(u=0),i.push(u);const c=1/(a-1),f=-c/2,d=1+c/2,p=[f,f,d,f,d,d,f,f,d,d,f,d],g=6,v=6,y=3,x=2,M=1,S=new Float32Array(y*v*g),_=new Float32Array(x*v*g),w=new Float32Array(M*v*g);for(let E=0;E<g;E++){const R=E%3*2/3-1,P=E>2?0:-1,V=[R,P,0,R+2/3,P,0,R+2/3,P+1,0,R,P,0,R+2/3,P+1,0,R,P+1,0];S.set(V,y*v*E),_.set(p,x*v*E);const F=[E,E,E,E,E,E];w.set(F,M*v*E)}const T=new ct;T.setAttribute("position",new hn(S,y)),T.setAttribute("uv",new hn(_,x)),T.setAttribute("faceIndex",new hn(w,M)),e.push(T),r>ic&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function n2(n,e,t){const i=new Gt(n,e,t);return i.texture.mapping=mv,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function sm(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function D8(n,e,t){const i=new Float32Array(Al),r=new O(0,1,0);return new Nt({name:"SphericalGaussianBlur",defines:{n:Al,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:nS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Yt,depthTest:!1,depthWrite:!1})}function i2(){return new Nt({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:nS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Yt,depthTest:!1,depthWrite:!1})}function r2(){return new Nt({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:nS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Yt,depthTest:!1,depthWrite:!1})}function nS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function I8(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const u=a.mapping,c=u===Ec||u===K_,f=u===bc||u===Tc;if(c||f)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return t===null&&(t=new t2(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||f&&d&&r(d)){t===null&&(t=new t2(n));const p=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function r(a){let u=0;const c=6;for(let f=0;f<c;f++)a[f]!==void 0&&u++;return u===c}function s(a){const u=a.target;u.removeEventListener("dispose",s);const c=e.get(u);c!==void 0&&(e.delete(u),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function O8(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function F8(n,e,t,i){const r={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);p.removeEventListener("dispose",o),delete r[p.id];const g=s.get(p);g&&(e.remove(g),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(d,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function u(d){const p=d.attributes;for(const v in p)e.update(p[v],34962);const g=d.morphAttributes;for(const v in g){const y=g[v];for(let x=0,M=y.length;x<M;x++)e.update(y[x],34962)}}function c(d){const p=[],g=d.index,v=d.attributes.position;let y=0;if(g!==null){const S=g.array;y=g.version;for(let _=0,w=S.length;_<w;_+=3){const T=S[_+0],E=S[_+1],R=S[_+2];p.push(T,E,E,R,R,T)}}else{const S=v.array;y=v.version;for(let _=0,w=S.length/3-1;_<w;_+=3){const T=_+0,E=_+1,R=_+2;p.push(T,E,E,R,R,T)}}const x=new(zP(p)?VP:eS)(p,1);x.version=y;const M=s.get(d);M&&e.remove(M),s.set(d,x)}function f(d){const p=s.get(d);if(p){const g=d.index;g!==null&&p.version<g.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:u,getWireframeAttribute:f}}function k8(n,e,t,i){const r=i.isWebGL2;let s;function o(p){s=p}let a,u;function c(p){a=p.type,u=p.bytesPerElement}function f(p,g){n.drawElements(s,g,a,p*u),t.update(g,s,1)}function d(p,g,v){if(v===0)return;let y,x;if(r)y=n,x="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[x](s,g,a,p*u,v),t.update(g,s,v)}this.setMode=o,this.setIndex=c,this.render=f,this.renderInstances=d}function N8(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function z8(n,e){return n[0]-e[0]}function B8(n,e){return Math.abs(e[1])-Math.abs(n[1])}function wx(n,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(t)}function U8(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new Wt,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function u(c,f,d,p){const g=c.morphTargetInfluences;if(e.isWebGL2===!0){const v=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,y=v!==void 0?v.length:0;let x=s.get(f);if(x===void 0||x.count!==y){let Y=function(){Q.dispose(),s.delete(f),f.removeEventListener("dispose",Y)};x!==void 0&&x.texture.dispose();const _=f.morphAttributes.position!==void 0,w=f.morphAttributes.normal!==void 0,T=f.morphAttributes.color!==void 0,E=f.morphAttributes.position||[],R=f.morphAttributes.normal||[],P=f.morphAttributes.color||[];let V=0;_===!0&&(V=1),w===!0&&(V=2),T===!0&&(V=3);let F=f.attributes.position.count*V,C=1;F>e.maxTextureSize&&(C=Math.ceil(F/e.maxTextureSize),F=e.maxTextureSize);const N=new Float32Array(F*C*4*y),Q=new vv(N,F,C,y);Q.type=xs,Q.needsUpdate=!0;const G=V*4;for(let X=0;X<y;X++){const K=E[X],B=R[X],Z=P[X],ee=F*C*4*X;for(let se=0;se<K.count;se++){const ae=se*G;_===!0&&(o.fromBufferAttribute(K,se),K.normalized===!0&&wx(o,K),N[ee+ae+0]=o.x,N[ee+ae+1]=o.y,N[ee+ae+2]=o.z,N[ee+ae+3]=0),w===!0&&(o.fromBufferAttribute(B,se),B.normalized===!0&&wx(o,B),N[ee+ae+4]=o.x,N[ee+ae+5]=o.y,N[ee+ae+6]=o.z,N[ee+ae+7]=0),T===!0&&(o.fromBufferAttribute(Z,se),Z.normalized===!0&&wx(o,Z),N[ee+ae+8]=o.x,N[ee+ae+9]=o.y,N[ee+ae+10]=o.z,N[ee+ae+11]=Z.itemSize===4?o.w:1)}}x={count:y,texture:Q,size:new ie(F,C)},s.set(f,x),f.addEventListener("dispose",Y)}let M=0;for(let _=0;_<g.length;_++)M+=g[_];const S=f.morphTargetsRelative?1:1-M;p.getUniforms().setValue(n,"morphTargetBaseInfluence",S),p.getUniforms().setValue(n,"morphTargetInfluences",g),p.getUniforms().setValue(n,"morphTargetsTexture",x.texture,t),p.getUniforms().setValue(n,"morphTargetsTextureSize",x.size)}else{const v=g===void 0?0:g.length;let y=i[f.id];if(y===void 0||y.length!==v){y=[];for(let w=0;w<v;w++)y[w]=[w,0];i[f.id]=y}for(let w=0;w<v;w++){const T=y[w];T[0]=w,T[1]=g[w]}y.sort(B8);for(let w=0;w<8;w++)w<v&&y[w][1]?(a[w][0]=y[w][0],a[w][1]=y[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort(z8);const x=f.morphAttributes.position,M=f.morphAttributes.normal;let S=0;for(let w=0;w<8;w++){const T=a[w],E=T[0],R=T[1];E!==Number.MAX_SAFE_INTEGER&&R?(x&&f.getAttribute("morphTarget"+w)!==x[E]&&f.setAttribute("morphTarget"+w,x[E]),M&&f.getAttribute("morphNormal"+w)!==M[E]&&f.setAttribute("morphNormal"+w,M[E]),r[w]=R,S+=R):(x&&f.hasAttribute("morphTarget"+w)===!0&&f.deleteAttribute("morphTarget"+w),M&&f.hasAttribute("morphNormal"+w)===!0&&f.deleteAttribute("morphNormal"+w),r[w]=0)}const _=f.morphTargetsRelative?1:1-S;p.getUniforms().setValue(n,"morphTargetBaseInfluence",_),p.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:u}}function V8(n,e,t,i){let r=new WeakMap;function s(u){const c=i.render.frame,f=u.geometry,d=e.get(u,f);return r.get(d)!==c&&(e.update(d),r.set(d,c)),u.isInstancedMesh&&(u.hasEventListener("dispose",a)===!1&&u.addEventListener("dispose",a),t.update(u.instanceMatrix,34962),u.instanceColor!==null&&t.update(u.instanceColor,34962)),d}function o(){r=new WeakMap}function a(u){const c=u.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const WP=new zn,jP=new vv,XP=new Q1,qP=new xv,s2=[],o2=[],a2=new Float32Array(16),l2=new Float32Array(9),u2=new Float32Array(4);function jc(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=s2[r];if(s===void 0&&(s=new Float32Array(r),s2[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Bi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Ai(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function _v(n,e){let t=o2[e];t===void 0&&(t=new Int32Array(e),o2[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function H8(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function G8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Bi(t,e))return;n.uniform2fv(this.addr,e),Ai(t,e)}}function W8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Bi(t,e))return;n.uniform3fv(this.addr,e),Ai(t,e)}}function j8(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Bi(t,e))return;n.uniform4fv(this.addr,e),Ai(t,e)}}function X8(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Bi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ai(t,e)}else{if(Bi(t,i))return;u2.set(i),n.uniformMatrix2fv(this.addr,!1,u2),Ai(t,i)}}function q8(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Bi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ai(t,e)}else{if(Bi(t,i))return;l2.set(i),n.uniformMatrix3fv(this.addr,!1,l2),Ai(t,i)}}function Y8(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Bi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ai(t,e)}else{if(Bi(t,i))return;a2.set(i),n.uniformMatrix4fv(this.addr,!1,a2),Ai(t,i)}}function Z8(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function K8(n,e){const t=this.cache;Bi(t,e)||(n.uniform2iv(this.addr,e),Ai(t,e))}function $8(n,e){const t=this.cache;Bi(t,e)||(n.uniform3iv(this.addr,e),Ai(t,e))}function Q8(n,e){const t=this.cache;Bi(t,e)||(n.uniform4iv(this.addr,e),Ai(t,e))}function J8(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function e9(n,e){const t=this.cache;Bi(t,e)||(n.uniform2uiv(this.addr,e),Ai(t,e))}function t9(n,e){const t=this.cache;Bi(t,e)||(n.uniform3uiv(this.addr,e),Ai(t,e))}function n9(n,e){const t=this.cache;Bi(t,e)||(n.uniform4uiv(this.addr,e),Ai(t,e))}function i9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||WP,r)}function r9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||XP,r)}function s9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||qP,r)}function o9(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||jP,r)}function a9(n){switch(n){case 5126:return H8;case 35664:return G8;case 35665:return W8;case 35666:return j8;case 35674:return X8;case 35675:return q8;case 35676:return Y8;case 5124:case 35670:return Z8;case 35667:case 35671:return K8;case 35668:case 35672:return $8;case 35669:case 35673:return Q8;case 5125:return J8;case 36294:return e9;case 36295:return t9;case 36296:return n9;case 35678:case 36198:case 36298:case 36306:case 35682:return i9;case 35679:case 36299:case 36307:return r9;case 35680:case 36300:case 36308:case 36293:return s9;case 36289:case 36303:case 36311:case 36292:return o9}}function l9(n,e){n.uniform1fv(this.addr,e)}function u9(n,e){const t=jc(e,this.size,2);n.uniform2fv(this.addr,t)}function c9(n,e){const t=jc(e,this.size,3);n.uniform3fv(this.addr,t)}function h9(n,e){const t=jc(e,this.size,4);n.uniform4fv(this.addr,t)}function f9(n,e){const t=jc(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function d9(n,e){const t=jc(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function p9(n,e){const t=jc(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function m9(n,e){n.uniform1iv(this.addr,e)}function g9(n,e){n.uniform2iv(this.addr,e)}function v9(n,e){n.uniform3iv(this.addr,e)}function y9(n,e){n.uniform4iv(this.addr,e)}function x9(n,e){n.uniform1uiv(this.addr,e)}function _9(n,e){n.uniform2uiv(this.addr,e)}function w9(n,e){n.uniform3uiv(this.addr,e)}function S9(n,e){n.uniform4uiv(this.addr,e)}function M9(n,e,t){const i=e.length,r=_v(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2D(e[s]||WP,r[s])}function b9(n,e,t){const i=e.length,r=_v(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture3D(e[s]||XP,r[s])}function T9(n,e,t){const i=e.length,r=_v(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTextureCube(e[s]||qP,r[s])}function E9(n,e,t){const i=e.length,r=_v(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||jP,r[s])}function A9(n){switch(n){case 5126:return l9;case 35664:return u9;case 35665:return c9;case 35666:return h9;case 35674:return f9;case 35675:return d9;case 35676:return p9;case 5124:case 35670:return m9;case 35667:case 35671:return g9;case 35668:case 35672:return v9;case 35669:case 35673:return y9;case 5125:return x9;case 36294:return _9;case 36295:return w9;case 36296:return S9;case 35678:case 36198:case 36298:case 36306:case 35682:return M9;case 35679:case 36299:case 36307:return b9;case 35680:case 36300:case 36308:case 36293:return T9;case 36289:case 36303:case 36311:case 36292:return E9}}function C9(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=a9(e.type)}function YP(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=A9(e.type)}YP.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),Ai(e,n)};function ZP(n){this.id=n,this.seq=[],this.map={}}ZP.prototype.setValue=function(n,e,t){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const o=i[r];o.setValue(n,e[o.id],t)}};const Sx=/(\w+)(\])?(\[|\.)?/g;function c2(n,e){n.seq.push(e),n.map[e.id]=e}function R9(n,e,t){const i=n.name,r=i.length;for(Sx.lastIndex=0;;){const s=Sx.exec(i),o=Sx.lastIndex;let a=s[1];const u=s[2]==="]",c=s[3];if(u&&(a=a|0),c===void 0||c==="["&&o+2===r){c2(t,c===void 0?new C9(a,n,e):new YP(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new ZP(a),c2(t,d)),t=d}}}function Aa(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let i=0;i<t;++i){const r=n.getActiveUniform(e,i),s=n.getUniformLocation(e,r.name);R9(r,s,this)}}Aa.prototype.setValue=function(n,e,t,i){const r=this.map[e];r!==void 0&&r.setValue(n,t,i)};Aa.prototype.setOptional=function(n,e,t){const i=e[t];i!==void 0&&this.setValue(n,t,i)};Aa.upload=function(n,e,t,i){for(let r=0,s=e.length;r!==s;++r){const o=e[r],a=t[o.id];a.needsUpdate!==!1&&o.setValue(n,a.value,i)}};Aa.seqWithValue=function(n,e){const t=[];for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.id in e&&t.push(s)}return t};function h2(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let P9=0;function L9(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++)i.push(o+1+": "+t[o]);return i.join(`
`)}function D9(n){switch(n){case sr:return["Linear","( value )"];case Mt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function f2(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=parseInt(/ERROR: 0:(\d+)/.exec(r)[1]);return t.toUpperCase()+`

`+r+`

`+L9(n.getShaderSource(e),s)}function I9(n,e){const t=D9(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function O9(n,e){let t;switch(e){case LP:t="Linear";break;case qH:t="Reinhard";break;case YH:t="OptimizedCineon";break;case ZH:t="ACESFilmic";break;case KH:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function F9(n){return[n.extensionDerivatives||!!n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(sf).join(`
`)}function k9(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function N9(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function sf(n){return n!==""}function d2(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function p2(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const z9=/^[ \t]*#include +<([\w\d./]+)>/gm;function iw(n){return n.replace(z9,B9)}function B9(n,e){const t=Et[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return iw(t)}const U9=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,V9=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function m2(n){return n.replace(V9,KP).replace(U9,H9)}function H9(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),KP(n,e,t,i)}function KP(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function g2(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function G9(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===AP?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===RH?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===rf&&(e="SHADOWMAP_TYPE_VSM"),e}function W9(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case bc:case Tc:e="ENVMAP_TYPE_CUBE";break;case mv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function j9(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Tc:e="ENVMAP_MODE_REFRACTION";break}return e}function X9(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case pv:e="ENVMAP_BLENDING_MULTIPLY";break;case jH:e="ENVMAP_BLENDING_MIX";break;case XH:e="ENVMAP_BLENDING_ADD";break}return e}function q9(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e/32+1)+3,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function Y9(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const u=G9(t),c=W9(t),f=j9(t),d=X9(t),p=q9(t),g=t.isWebGL2?"":F9(t),v=k9(s),y=r.createProgram();let x,M,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=[v].filter(sf).join(`
`),x.length>0&&(x+=`
`),M=[g,v].filter(sf).join(`
`),M.length>0&&(M+=`
`)):(x=[g2(t),"#define SHADER_NAME "+t.shaderName,v,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(sf).join(`
`),M=[g,g2(t),"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+f:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Bs?"#define TONE_MAPPING":"",t.toneMapping!==Bs?Et.tonemapping_pars_fragment:"",t.toneMapping!==Bs?O9("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Et.encodings_pars_fragment,I9("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(sf).join(`
`)),o=iw(o),o=d2(o,t),o=p2(o,t),a=iw(a),a=d2(a,t),a=p2(a,t),o=m2(o),a=m2(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,x=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,M=["#define varying in",t.glslVersion===BA?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===BA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const _=S+x+o,w=S+M+a,T=h2(r,35633,_),E=h2(r,35632,w);if(r.attachShader(y,T),r.attachShader(y,E),t.index0AttributeName!==void 0?r.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y),n.debug.checkShaderErrors){const V=r.getProgramInfoLog(y).trim(),F=r.getShaderInfoLog(T).trim(),C=r.getShaderInfoLog(E).trim();let N=!0,Q=!0;if(r.getProgramParameter(y,35714)===!1){N=!1;const G=f2(r,T,"vertex"),Y=f2(r,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,35715)+`

Program Info Log: `+V+`
`+G+`
`+Y)}else V!==""?console.warn("THREE.WebGLProgram: Program Info Log:",V):(F===""||C==="")&&(Q=!1);Q&&(this.diagnostics={runnable:N,programLog:V,vertexShader:{log:F,prefix:x},fragmentShader:{log:C,prefix:M}})}r.deleteShader(T),r.deleteShader(E);let R;this.getUniforms=function(){return R===void 0&&(R=new Aa(r,y)),R};let P;return this.getAttributes=function(){return P===void 0&&(P=N9(r,y)),P},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.name=t.shaderName,this.id=P9++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=T,this.fragmentShader=E,this}let Z9=0;class K9{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const i=new $9(e);t.set(e,i)}return t.get(e)}}class $9{constructor(e){this.id=Z9++,this.code=e,this.usedTimes=0}}function Q9(n,e,t,i,r,s,o){const a=new J1,u=new K9,c=[],f=r.isWebGL2,d=r.logarithmicDepthBuffer,p=r.floatVertexTextures,g=r.maxVertexUniforms,v=r.vertexTextures;let y=r.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(C){const Q=C.skeleton.bones;if(p)return 1024;{const Y=Math.floor((g-20)/4),X=Math.min(Y,Q.length);return X<Q.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Q.length+" bones. This GPU supports "+X+"."),0):X}}function S(C,N,Q,G,Y){const X=G.fog,K=Y.geometry,B=C.isMeshStandardMaterial?G.environment:null,Z=(C.isMeshStandardMaterial?t:e).get(C.envMap||B),ee=!!Z&&Z.mapping===mv?Z.image.height:null,se=x[C.type],ae=Y.isSkinnedMesh?M(Y):0;C.precision!==null&&(y=r.getMaxPrecision(C.precision),y!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",y,"instead."));const Le=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,ze=Le!==void 0?Le.length:0;let Pe=0;K.morphAttributes.position!==void 0&&(Pe=1),K.morphAttributes.normal!==void 0&&(Pe=2),K.morphAttributes.color!==void 0&&(Pe=3);let oe,rt,Xe,Ze;if(se){const ye=Ds[se];oe=ye.vertexShader,rt=ye.fragmentShader}else oe=C.vertexShader,rt=C.fragmentShader,u.update(C),Xe=u.getVertexShaderID(C),Ze=u.getFragmentShaderID(C);const Se=n.getRenderTarget(),Qe=C.alphaTest>0,ue=C.clearcoat>0;return{isWebGL2:f,shaderID:se,shaderName:C.type,vertexShader:oe,fragmentShader:rt,defines:C.defines,customVertexShaderID:Xe,customFragmentShaderID:Ze,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:y,instancing:Y.isInstancedMesh===!0,instancingColor:Y.isInstancedMesh===!0&&Y.instanceColor!==null,supportsVertexTextures:v,outputEncoding:Se===null?n.outputEncoding:Se.isXRRenderTarget===!0?Se.texture.encoding:sr,map:!!C.map,matcap:!!C.matcap,envMap:!!Z,envMapMode:Z&&Z.mapping,envMapCubeUVHeight:ee,lightMap:!!C.lightMap,aoMap:!!C.aoMap,emissiveMap:!!C.emissiveMap,bumpMap:!!C.bumpMap,normalMap:!!C.normalMap,objectSpaceNormalMap:C.normalMapType===kP,tangentSpaceNormalMap:C.normalMapType===qa,decodeVideoTexture:!!C.map&&C.map.isVideoTexture===!0&&C.map.encoding===Mt,clearcoat:ue,clearcoatMap:ue&&!!C.clearcoatMap,clearcoatRoughnessMap:ue&&!!C.clearcoatRoughnessMap,clearcoatNormalMap:ue&&!!C.clearcoatNormalMap,displacementMap:!!C.displacementMap,roughnessMap:!!C.roughnessMap,metalnessMap:!!C.metalnessMap,specularMap:!!C.specularMap,specularIntensityMap:!!C.specularIntensityMap,specularColorMap:!!C.specularColorMap,opaque:C.transparent===!1&&C.blending===bo,alphaMap:!!C.alphaMap,alphaTest:Qe,gradientMap:!!C.gradientMap,sheen:C.sheen>0,sheenColorMap:!!C.sheenColorMap,sheenRoughnessMap:!!C.sheenRoughnessMap,transmission:C.transmission>0,transmissionMap:!!C.transmissionMap,thicknessMap:!!C.thicknessMap,combine:C.combine,vertexTangents:!!C.normalMap&&!!K.attributes.tangent,vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!K.attributes.color&&K.attributes.color.itemSize===4,vertexUvs:!!C.map||!!C.bumpMap||!!C.normalMap||!!C.specularMap||!!C.alphaMap||!!C.emissiveMap||!!C.roughnessMap||!!C.metalnessMap||!!C.clearcoatMap||!!C.clearcoatRoughnessMap||!!C.clearcoatNormalMap||!!C.displacementMap||!!C.transmissionMap||!!C.thicknessMap||!!C.specularIntensityMap||!!C.specularColorMap||!!C.sheenColorMap||!!C.sheenRoughnessMap,uvsVertexOnly:!(!!C.map||!!C.bumpMap||!!C.normalMap||!!C.specularMap||!!C.alphaMap||!!C.emissiveMap||!!C.roughnessMap||!!C.metalnessMap||!!C.clearcoatNormalMap||C.transmission>0||!!C.transmissionMap||!!C.thicknessMap||!!C.specularIntensityMap||!!C.specularColorMap||C.sheen>0||!!C.sheenColorMap||!!C.sheenRoughnessMap)&&!!C.displacementMap,fog:!!X,useFog:C.fog,fogExp2:X&&X.isFogExp2,flatShading:!!C.flatShading,sizeAttenuation:C.sizeAttenuation,logarithmicDepthBuffer:d,skinning:Y.isSkinnedMesh===!0&&ae>0,maxBones:ae,useVertexTexture:p,morphTargets:K.morphAttributes.position!==void 0,morphNormals:K.morphAttributes.normal!==void 0,morphColors:K.morphAttributes.color!==void 0,morphTargetsCount:ze,morphTextureStride:Pe,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&Q.length>0,shadowMapType:n.shadowMap.type,toneMapping:C.toneMapped?n.toneMapping:Bs,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Lo,flipSided:C.side===wr,depthPacking:C.depthPacking!==void 0?C.depthPacking:!1,index0AttributeName:C.index0AttributeName,extensionDerivatives:C.extensions&&C.extensions.derivatives,extensionFragDepth:C.extensions&&C.extensions.fragDepth,extensionDrawBuffers:C.extensions&&C.extensions.drawBuffers,extensionShaderTextureLOD:C.extensions&&C.extensions.shaderTextureLOD,rendererExtensionFragDepth:f||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||i.has("EXT_shader_texture_lod"),customProgramCacheKey:C.customProgramCacheKey()}}function _(C){const N=[];if(C.shaderID?N.push(C.shaderID):(N.push(C.customVertexShaderID),N.push(C.customFragmentShaderID)),C.defines!==void 0)for(const Q in C.defines)N.push(Q),N.push(C.defines[Q]);return C.isRawShaderMaterial===!1&&(w(N,C),T(N,C),N.push(n.outputEncoding)),N.push(C.customProgramCacheKey),N.join()}function w(C,N){C.push(N.precision),C.push(N.outputEncoding),C.push(N.envMapMode),C.push(N.envMapCubeUVHeight),C.push(N.combine),C.push(N.vertexUvs),C.push(N.fogExp2),C.push(N.sizeAttenuation),C.push(N.maxBones),C.push(N.morphTargetsCount),C.push(N.morphAttributeCount),C.push(N.numDirLights),C.push(N.numPointLights),C.push(N.numSpotLights),C.push(N.numHemiLights),C.push(N.numRectAreaLights),C.push(N.numDirLightShadows),C.push(N.numPointLightShadows),C.push(N.numSpotLightShadows),C.push(N.shadowMapType),C.push(N.toneMapping),C.push(N.numClippingPlanes),C.push(N.numClipIntersection)}function T(C,N){a.disableAll(),N.isWebGL2&&a.enable(0),N.supportsVertexTextures&&a.enable(1),N.instancing&&a.enable(2),N.instancingColor&&a.enable(3),N.map&&a.enable(4),N.matcap&&a.enable(5),N.envMap&&a.enable(6),N.lightMap&&a.enable(7),N.aoMap&&a.enable(8),N.emissiveMap&&a.enable(9),N.bumpMap&&a.enable(10),N.normalMap&&a.enable(11),N.objectSpaceNormalMap&&a.enable(12),N.tangentSpaceNormalMap&&a.enable(13),N.clearcoat&&a.enable(14),N.clearcoatMap&&a.enable(15),N.clearcoatRoughnessMap&&a.enable(16),N.clearcoatNormalMap&&a.enable(17),N.displacementMap&&a.enable(18),N.specularMap&&a.enable(19),N.roughnessMap&&a.enable(20),N.metalnessMap&&a.enable(21),N.gradientMap&&a.enable(22),N.alphaMap&&a.enable(23),N.alphaTest&&a.enable(24),N.vertexColors&&a.enable(25),N.vertexAlphas&&a.enable(26),N.vertexUvs&&a.enable(27),N.vertexTangents&&a.enable(28),N.uvsVertexOnly&&a.enable(29),N.fog&&a.enable(30),C.push(a.mask),a.disableAll(),N.useFog&&a.enable(0),N.flatShading&&a.enable(1),N.logarithmicDepthBuffer&&a.enable(2),N.skinning&&a.enable(3),N.useVertexTexture&&a.enable(4),N.morphTargets&&a.enable(5),N.morphNormals&&a.enable(6),N.morphColors&&a.enable(7),N.premultipliedAlpha&&a.enable(8),N.shadowMapEnabled&&a.enable(9),N.physicallyCorrectLights&&a.enable(10),N.doubleSided&&a.enable(11),N.flipSided&&a.enable(12),N.depthPacking&&a.enable(13),N.dithering&&a.enable(14),N.specularIntensityMap&&a.enable(15),N.specularColorMap&&a.enable(16),N.transmission&&a.enable(17),N.transmissionMap&&a.enable(18),N.thicknessMap&&a.enable(19),N.sheen&&a.enable(20),N.sheenColorMap&&a.enable(21),N.sheenRoughnessMap&&a.enable(22),N.decodeVideoTexture&&a.enable(23),N.opaque&&a.enable(24),C.push(a.mask)}function E(C){const N=x[C.type];let Q;if(N){const G=Ds[N];Q=di.clone(G.uniforms)}else Q=C.uniforms;return Q}function R(C,N){let Q;for(let G=0,Y=c.length;G<Y;G++){const X=c[G];if(X.cacheKey===N){Q=X,++Q.usedTimes;break}}return Q===void 0&&(Q=new Y9(n,N,C,s),c.push(Q)),Q}function P(C){if(--C.usedTimes===0){const N=c.indexOf(C);c[N]=c[c.length-1],c.pop(),C.destroy()}}function V(C){u.remove(C)}function F(){u.dispose()}return{getParameters:S,getProgramCacheKey:_,getUniforms:E,acquireProgram:R,releaseProgram:P,releaseShaderCache:V,programs:c,dispose:F}}function J9(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function e7(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function v2(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function y2(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(d,p,g,v,y,x){let M=n[e];return M===void 0?(M={id:d.id,object:d,geometry:p,material:g,groupOrder:v,renderOrder:d.renderOrder,z:y,group:x},n[e]=M):(M.id=d.id,M.object=d,M.geometry=p,M.material=g,M.groupOrder=v,M.renderOrder=d.renderOrder,M.z=y,M.group=x),e++,M}function a(d,p,g,v,y,x){const M=o(d,p,g,v,y,x);g.transmission>0?i.push(M):g.transparent===!0?r.push(M):t.push(M)}function u(d,p,g,v,y,x){const M=o(d,p,g,v,y,x);g.transmission>0?i.unshift(M):g.transparent===!0?r.unshift(M):t.unshift(M)}function c(d,p){t.length>1&&t.sort(d||e7),i.length>1&&i.sort(p||v2),r.length>1&&r.sort(p||v2)}function f(){for(let d=e,p=n.length;d<p;d++){const g=n[d];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:u,finish:f,sort:c}}function t7(){let n=new WeakMap;function e(i,r){let s;return n.has(i)===!1?(s=new y2,n.set(i,[s])):r>=n.get(i).length?(s=new y2,n.get(i).push(s)):s=n.get(i)[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function n7(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new O,color:new ve};break;case"SpotLight":t={position:new O,direction:new O,color:new ve,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new O,color:new ve,distance:0,decay:0};break;case"HemisphereLight":t={direction:new O,skyColor:new ve,groundColor:new ve};break;case"RectAreaLight":t={color:new ve,position:new O,halfWidth:new O,halfHeight:new O};break}return n[e.id]=t,t}}}function i7(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ie};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ie};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ie,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let r7=0;function s7(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function o7(n,e){const t=new n7,i=i7(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let f=0;f<9;f++)r.probe.push(new O);const s=new O,o=new Me,a=new Me;function u(f,d){let p=0,g=0,v=0;for(let V=0;V<9;V++)r.probe[V].set(0,0,0);let y=0,x=0,M=0,S=0,_=0,w=0,T=0,E=0;f.sort(s7);const R=d!==!0?Math.PI:1;for(let V=0,F=f.length;V<F;V++){const C=f[V],N=C.color,Q=C.intensity,G=C.distance,Y=C.shadow&&C.shadow.map?C.shadow.map.texture:null;if(C.isAmbientLight)p+=N.r*Q*R,g+=N.g*Q*R,v+=N.b*Q*R;else if(C.isLightProbe)for(let X=0;X<9;X++)r.probe[X].addScaledVector(C.sh.coefficients[X],Q);else if(C.isDirectionalLight){const X=t.get(C);if(X.color.copy(C.color).multiplyScalar(C.intensity*R),C.castShadow){const K=C.shadow,B=i.get(C);B.shadowBias=K.bias,B.shadowNormalBias=K.normalBias,B.shadowRadius=K.radius,B.shadowMapSize=K.mapSize,r.directionalShadow[y]=B,r.directionalShadowMap[y]=Y,r.directionalShadowMatrix[y]=C.shadow.matrix,w++}r.directional[y]=X,y++}else if(C.isSpotLight){const X=t.get(C);if(X.position.setFromMatrixPosition(C.matrixWorld),X.color.copy(N).multiplyScalar(Q*R),X.distance=G,X.coneCos=Math.cos(C.angle),X.penumbraCos=Math.cos(C.angle*(1-C.penumbra)),X.decay=C.decay,C.castShadow){const K=C.shadow,B=i.get(C);B.shadowBias=K.bias,B.shadowNormalBias=K.normalBias,B.shadowRadius=K.radius,B.shadowMapSize=K.mapSize,r.spotShadow[M]=B,r.spotShadowMap[M]=Y,r.spotShadowMatrix[M]=C.shadow.matrix,E++}r.spot[M]=X,M++}else if(C.isRectAreaLight){const X=t.get(C);X.color.copy(N).multiplyScalar(Q),X.halfWidth.set(C.width*.5,0,0),X.halfHeight.set(0,C.height*.5,0),r.rectArea[S]=X,S++}else if(C.isPointLight){const X=t.get(C);if(X.color.copy(C.color).multiplyScalar(C.intensity*R),X.distance=C.distance,X.decay=C.decay,C.castShadow){const K=C.shadow,B=i.get(C);B.shadowBias=K.bias,B.shadowNormalBias=K.normalBias,B.shadowRadius=K.radius,B.shadowMapSize=K.mapSize,B.shadowCameraNear=K.camera.near,B.shadowCameraFar=K.camera.far,r.pointShadow[x]=B,r.pointShadowMap[x]=Y,r.pointShadowMatrix[x]=C.shadow.matrix,T++}r.point[x]=X,x++}else if(C.isHemisphereLight){const X=t.get(C);X.skyColor.copy(C.color).multiplyScalar(Q*R),X.groundColor.copy(C.groundColor).multiplyScalar(Q*R),r.hemi[_]=X,_++}}S>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Fe.LTC_FLOAT_1,r.rectAreaLTC2=Fe.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Fe.LTC_HALF_1,r.rectAreaLTC2=Fe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=g,r.ambient[2]=v;const P=r.hash;(P.directionalLength!==y||P.pointLength!==x||P.spotLength!==M||P.rectAreaLength!==S||P.hemiLength!==_||P.numDirectionalShadows!==w||P.numPointShadows!==T||P.numSpotShadows!==E)&&(r.directional.length=y,r.spot.length=M,r.rectArea.length=S,r.point.length=x,r.hemi.length=_,r.directionalShadow.length=w,r.directionalShadowMap.length=w,r.pointShadow.length=T,r.pointShadowMap.length=T,r.spotShadow.length=E,r.spotShadowMap.length=E,r.directionalShadowMatrix.length=w,r.pointShadowMatrix.length=T,r.spotShadowMatrix.length=E,P.directionalLength=y,P.pointLength=x,P.spotLength=M,P.rectAreaLength=S,P.hemiLength=_,P.numDirectionalShadows=w,P.numPointShadows=T,P.numSpotShadows=E,r.version=r7++)}function c(f,d){let p=0,g=0,v=0,y=0,x=0;const M=d.matrixWorldInverse;for(let S=0,_=f.length;S<_;S++){const w=f[S];if(w.isDirectionalLight){const T=r.directional[p];T.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(M),p++}else if(w.isSpotLight){const T=r.spot[v];T.position.setFromMatrixPosition(w.matrixWorld),T.position.applyMatrix4(M),T.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(M),v++}else if(w.isRectAreaLight){const T=r.rectArea[y];T.position.setFromMatrixPosition(w.matrixWorld),T.position.applyMatrix4(M),a.identity(),o.copy(w.matrixWorld),o.premultiply(M),a.extractRotation(o),T.halfWidth.set(w.width*.5,0,0),T.halfHeight.set(0,w.height*.5,0),T.halfWidth.applyMatrix4(a),T.halfHeight.applyMatrix4(a),y++}else if(w.isPointLight){const T=r.point[g];T.position.setFromMatrixPosition(w.matrixWorld),T.position.applyMatrix4(M),g++}else if(w.isHemisphereLight){const T=r.hemi[x];T.direction.setFromMatrixPosition(w.matrixWorld),T.direction.transformDirection(M),T.direction.normalize(),x++}}}return{setup:u,setupView:c,state:r}}function x2(n,e){const t=new o7(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(d){i.push(d)}function a(d){r.push(d)}function u(d){t.setup(i,d)}function c(d){t.setupView(i,d)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:u,setupLightsView:c,pushLight:o,pushShadow:a}}function a7(n,e){let t=new WeakMap;function i(s,o=0){let a;return t.has(s)===!1?(a=new x2(n,e),t.set(s,[a])):o>=t.get(s).length?(a=new x2(n,e),t.get(s).push(a)):a=t.get(s)[o],a}function r(){t=new WeakMap}return{get:i,dispose:r}}class Xc extends Nn{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=m6,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}Xc.prototype.isMeshDepthMaterial=!0;class iS extends Nn{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new O,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}iS.prototype.isMeshDistanceMaterial=!0;const l7=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,u7=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function $P(n,e,t){let i=new hd;const r=new ie,s=new ie,o=new Wt,a=new Xc({depthPacking:gv}),u=new iS,c={},f=t.maxTextureSize,d={0:wr,1:Mc,2:Lo},p=new Nt({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ie},radius:{value:4}},vertexShader:l7,fragmentShader:u7}),g=p.clone();g.defines.HORIZONTAL_PASS=1;const v=new ct;v.setAttribute("position",new hn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new un(v,p),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=AP,this.render=function(w,T,E){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||w.length===0)return;const R=n.getRenderTarget(),P=n.getActiveCubeFace(),V=n.getActiveMipmapLevel(),F=n.state;F.setBlending(Yt),F.buffers.color.setClear(1,1,1,1),F.buffers.depth.setTest(!0),F.setScissorTest(!1);for(let C=0,N=w.length;C<N;C++){const Q=w[C],G=Q.shadow;if(G===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(G.autoUpdate===!1&&G.needsUpdate===!1)continue;r.copy(G.mapSize);const Y=G.getFrameExtents();if(r.multiply(Y),s.copy(G.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(s.x=Math.floor(f/Y.x),r.x=s.x*Y.x,G.mapSize.x=s.x),r.y>f&&(s.y=Math.floor(f/Y.y),r.y=s.y*Y.y,G.mapSize.y=s.y)),G.map===null&&!G.isPointLightShadow&&this.type===rf&&(G.map=new Gt(r.x,r.y),G.map.texture.name=Q.name+".shadowMap",G.mapPass=new Gt(r.x,r.y),G.camera.updateProjectionMatrix()),G.map===null){const K={minFilter:Ft,magFilter:Ft,format:qr};G.map=new Gt(r.x,r.y,K),G.map.texture.name=Q.name+".shadowMap",G.camera.updateProjectionMatrix()}n.setRenderTarget(G.map),n.clear();const X=G.getViewportCount();for(let K=0;K<X;K++){const B=G.getViewport(K);o.set(s.x*B.x,s.y*B.y,s.x*B.z,s.y*B.w),F.viewport(o),G.updateMatrices(Q,K),i=G.getFrustum(),_(T,E,G.camera,Q,this.type)}!G.isPointLightShadow&&this.type===rf&&M(G,E),G.needsUpdate=!1}x.needsUpdate=!1,n.setRenderTarget(R,P,V)};function M(w,T){const E=e.update(y);p.defines.VSM_SAMPLES!==w.blurSamples&&(p.defines.VSM_SAMPLES=w.blurSamples,g.defines.VSM_SAMPLES=w.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),p.uniforms.shadow_pass.value=w.map.texture,p.uniforms.resolution.value=w.mapSize,p.uniforms.radius.value=w.radius,n.setRenderTarget(w.mapPass),n.clear(),n.renderBufferDirect(T,null,E,p,y,null),g.uniforms.shadow_pass.value=w.mapPass.texture,g.uniforms.resolution.value=w.mapSize,g.uniforms.radius.value=w.radius,n.setRenderTarget(w.map),n.clear(),n.renderBufferDirect(T,null,E,g,y,null)}function S(w,T,E,R,P,V){let F=null;const C=E.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(C!==void 0?F=C:F=E.isPointLight===!0?u:a,n.localClippingEnabled&&T.clipShadows===!0&&T.clippingPlanes.length!==0||T.displacementMap&&T.displacementScale!==0||T.alphaMap&&T.alphaTest>0){const N=F.uuid,Q=T.uuid;let G=c[N];G===void 0&&(G={},c[N]=G);let Y=G[Q];Y===void 0&&(Y=F.clone(),G[Q]=Y),F=Y}return F.visible=T.visible,F.wireframe=T.wireframe,V===rf?F.side=T.shadowSide!==null?T.shadowSide:T.side:F.side=T.shadowSide!==null?T.shadowSide:d[T.side],F.alphaMap=T.alphaMap,F.alphaTest=T.alphaTest,F.clipShadows=T.clipShadows,F.clippingPlanes=T.clippingPlanes,F.clipIntersection=T.clipIntersection,F.displacementMap=T.displacementMap,F.displacementScale=T.displacementScale,F.displacementBias=T.displacementBias,F.wireframeLinewidth=T.wireframeLinewidth,F.linewidth=T.linewidth,E.isPointLight===!0&&F.isMeshDistanceMaterial===!0&&(F.referencePosition.setFromMatrixPosition(E.matrixWorld),F.nearDistance=R,F.farDistance=P),F}function _(w,T,E,R,P){if(w.visible===!1)return;if(w.layers.test(T.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&P===rf)&&(!w.frustumCulled||i.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,w.matrixWorld);const C=e.update(w),N=w.material;if(Array.isArray(N)){const Q=C.groups;for(let G=0,Y=Q.length;G<Y;G++){const X=Q[G],K=N[X.materialIndex];if(K&&K.visible){const B=S(w,K,R,E.near,E.far,P);n.renderBufferDirect(E,null,C,B,w,X)}}}else if(N.visible){const Q=S(w,N,R,E.near,E.far,P);n.renderBufferDirect(E,null,C,Q,w,null)}}const F=w.children;for(let C=0,N=F.length;C<N;C++)_(F[C],T,E,R,P)}}function c7(n,e,t){const i=t.isWebGL2;function r(){let j=!1;const Ae=new Wt;let Te=null;const Je=new Wt(0,0,0,0);return{setMask:function(Ie){Te!==Ie&&!j&&(n.colorMask(Ie,Ie,Ie,Ie),Te=Ie)},setLocked:function(Ie){j=Ie},setClear:function(Ie,Ye,Re,lt,nn){nn===!0&&(Ie*=lt,Ye*=lt,Re*=lt),Ae.set(Ie,Ye,Re,lt),Je.equals(Ae)===!1&&(n.clearColor(Ie,Ye,Re,lt),Je.copy(Ae))},reset:function(){j=!1,Te=null,Je.set(-1,0,0,0)}}}function s(){let j=!1,Ae=null,Te=null,Je=null;return{setTest:function(Ie){Ie?Pe(2929):oe(2929)},setMask:function(Ie){Ae!==Ie&&!j&&(n.depthMask(Ie),Ae=Ie)},setFunc:function(Ie){if(Te!==Ie){if(Ie)switch(Ie){case zH:n.depthFunc(512);break;case BH:n.depthFunc(519);break;case UH:n.depthFunc(513);break;case Z_:n.depthFunc(515);break;case VH:n.depthFunc(514);break;case HH:n.depthFunc(518);break;case GH:n.depthFunc(516);break;case WH:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);Te=Ie}},setLocked:function(Ie){j=Ie},setClear:function(Ie){Je!==Ie&&(n.clearDepth(Ie),Je=Ie)},reset:function(){j=!1,Ae=null,Te=null,Je=null}}}function o(){let j=!1,Ae=null,Te=null,Je=null,Ie=null,Ye=null,Re=null,lt=null,nn=null;return{setTest:function(bt){j||(bt?Pe(2960):oe(2960))},setMask:function(bt){Ae!==bt&&!j&&(n.stencilMask(bt),Ae=bt)},setFunc:function(bt,Rr,Pr){(Te!==bt||Je!==Rr||Ie!==Pr)&&(n.stencilFunc(bt,Rr,Pr),Te=bt,Je=Rr,Ie=Pr)},setOp:function(bt,Rr,Pr){(Ye!==bt||Re!==Rr||lt!==Pr)&&(n.stencilOp(bt,Rr,Pr),Ye=bt,Re=Rr,lt=Pr)},setLocked:function(bt){j=bt},setClear:function(bt){nn!==bt&&(n.clearStencil(bt),nn=bt)},reset:function(){j=!1,Ae=null,Te=null,Je=null,Ie=null,Ye=null,Re=null,lt=null,nn=null}}}const a=new r,u=new s,c=new o;let f={},d={},p=new WeakMap,g=[],v=null,y=!1,x=null,M=null,S=null,_=null,w=null,T=null,E=null,R=!1,P=null,V=null,F=null,C=null,N=null;const Q=n.getParameter(35661);let G=!1,Y=0;const X=n.getParameter(7938);X.indexOf("WebGL")!==-1?(Y=parseFloat(/^WebGL (\d)/.exec(X)[1]),G=Y>=1):X.indexOf("OpenGL ES")!==-1&&(Y=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),G=Y>=2);let K=null,B={};const Z=n.getParameter(3088),ee=n.getParameter(2978),se=new Wt().fromArray(Z),ae=new Wt().fromArray(ee);function Le(j,Ae,Te){const Je=new Uint8Array(4),Ie=n.createTexture();n.bindTexture(j,Ie),n.texParameteri(j,10241,9728),n.texParameteri(j,10240,9728);for(let Ye=0;Ye<Te;Ye++)n.texImage2D(Ae+Ye,0,6408,1,1,0,6408,5121,Je);return Ie}const ze={};ze[3553]=Le(3553,3553,1),ze[34067]=Le(34067,34069,6),a.setClear(0,0,0,1),u.setClear(1),c.setClear(0),Pe(2929),u.setFunc(Z_),ye(!1),Ne(dA),Pe(2884),ue(Yt);function Pe(j){f[j]!==!0&&(n.enable(j),f[j]=!0)}function oe(j){f[j]!==!1&&(n.disable(j),f[j]=!1)}function rt(j,Ae){return d[j]!==Ae?(n.bindFramebuffer(j,Ae),d[j]=Ae,i&&(j===36009&&(d[36160]=Ae),j===36160&&(d[36009]=Ae)),!0):!1}function Xe(j,Ae){let Te=g,Je=!1;if(j)if(Te=p.get(Ae),Te===void 0&&(Te=[],p.set(Ae,Te)),j.isWebGLMultipleRenderTargets){const Ie=j.texture;if(Te.length!==Ie.length||Te[0]!==36064){for(let Ye=0,Re=Ie.length;Ye<Re;Ye++)Te[Ye]=36064+Ye;Te.length=Ie.length,Je=!0}}else Te[0]!==36064&&(Te[0]=36064,Je=!0);else Te[0]!==1029&&(Te[0]=1029,Je=!0);Je&&(t.isWebGL2?n.drawBuffers(Te):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Te))}function Ze(j){return v!==j?(n.useProgram(j),v=j,!0):!1}const Se={[Os]:32774,[PH]:32778,[LH]:32779};if(i)Se[gA]=32775,Se[vA]=32776;else{const j=e.get("EXT_blend_minmax");j!==null&&(Se[gA]=j.MIN_EXT,Se[vA]=j.MAX_EXT)}const Qe={[Y_]:0,[DH]:1,[IH]:768,[Sg]:770,[NH]:776,[PP]:774,[RP]:772,[OH]:769,[Mg]:771,[kH]:775,[FH]:773};function ue(j,Ae,Te,Je,Ie,Ye,Re,lt){if(j===Yt){y===!0&&(oe(3042),y=!1);return}if(y===!1&&(Pe(3042),y=!0),j!==q_){if(j!==x||lt!==R){if((M!==Os||w!==Os)&&(n.blendEquation(32774),M=Os,w=Os),lt)switch(j){case bo:n.blendFuncSeparate(1,771,1,771);break;case wg:n.blendFunc(1,1);break;case pA:n.blendFuncSeparate(0,769,0,1);break;case mA:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}else switch(j){case bo:n.blendFuncSeparate(770,771,1,771);break;case wg:n.blendFunc(770,1);break;case pA:n.blendFuncSeparate(0,769,0,1);break;case mA:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}S=null,_=null,T=null,E=null,x=j,R=lt}return}Ie=Ie||Ae,Ye=Ye||Te,Re=Re||Je,(Ae!==M||Ie!==w)&&(n.blendEquationSeparate(Se[Ae],Se[Ie]),M=Ae,w=Ie),(Te!==S||Je!==_||Ye!==T||Re!==E)&&(n.blendFuncSeparate(Qe[Te],Qe[Je],Qe[Ye],Qe[Re]),S=Te,_=Je,T=Ye,E=Re),x=j,R=null}function fe(j,Ae){j.side===Lo?oe(2884):Pe(2884);let Te=j.side===wr;Ae&&(Te=!Te),ye(Te),j.blending===bo&&j.transparent===!1?ue(Yt):ue(j.blending,j.blendEquation,j.blendSrc,j.blendDst,j.blendEquationAlpha,j.blendSrcAlpha,j.blendDstAlpha,j.premultipliedAlpha),u.setFunc(j.depthFunc),u.setTest(j.depthTest),u.setMask(j.depthWrite),a.setMask(j.colorWrite);const Je=j.stencilWrite;c.setTest(Je),Je&&(c.setMask(j.stencilWriteMask),c.setFunc(j.stencilFunc,j.stencilRef,j.stencilFuncMask),c.setOp(j.stencilFail,j.stencilZFail,j.stencilZPass)),qe(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits),j.alphaToCoverage===!0?Pe(32926):oe(32926)}function ye(j){P!==j&&(j?n.frontFace(2304):n.frontFace(2305),P=j)}function Ne(j){j!==AH?(Pe(2884),j!==V&&(j===dA?n.cullFace(1029):j===CH?n.cullFace(1028):n.cullFace(1032))):oe(2884),V=j}function De(j){j!==F&&(G&&n.lineWidth(j),F=j)}function qe(j,Ae,Te){j?(Pe(32823),(C!==Ae||N!==Te)&&(n.polygonOffset(Ae,Te),C=Ae,N=Te)):oe(32823)}function $e(j){j?Pe(3089):oe(3089)}function Ue(j){j===void 0&&(j=33984+Q-1),K!==j&&(n.activeTexture(j),K=j)}function _t(j,Ae){K===null&&Ue();let Te=B[K];Te===void 0&&(Te={type:void 0,texture:void 0},B[K]=Te),(Te.type!==j||Te.texture!==Ae)&&(n.bindTexture(j,Ae||ze[j]),Te.type=j,Te.texture=Ae)}function st(){const j=B[K];j!==void 0&&j.type!==void 0&&(n.bindTexture(j.type,null),j.type=void 0,j.texture=void 0)}function k(){try{n.compressedTexImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function D(){try{n.texSubImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function J(){try{n.texSubImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function he(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function me(){try{n.texStorage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Ce(){try{n.texStorage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function be(){try{n.texImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function z(){try{n.texImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function xe(j){se.equals(j)===!1&&(n.scissor(j.x,j.y,j.z,j.w),se.copy(j))}function He(j){ae.equals(j)===!1&&(n.viewport(j.x,j.y,j.z,j.w),ae.copy(j))}function Ee(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},K=null,B={},d={},p=new WeakMap,g=[],v=null,y=!1,x=null,M=null,S=null,_=null,w=null,T=null,E=null,R=!1,P=null,V=null,F=null,C=null,N=null,se.set(0,0,n.canvas.width,n.canvas.height),ae.set(0,0,n.canvas.width,n.canvas.height),a.reset(),u.reset(),c.reset()}return{buffers:{color:a,depth:u,stencil:c},enable:Pe,disable:oe,bindFramebuffer:rt,drawBuffers:Xe,useProgram:Ze,setBlending:ue,setMaterial:fe,setFlipSided:ye,setCullFace:Ne,setLineWidth:De,setPolygonOffset:qe,setScissorTest:$e,activeTexture:Ue,bindTexture:_t,unbindTexture:st,compressedTexImage2D:k,texImage2D:be,texImage3D:z,texStorage2D:me,texStorage3D:Ce,texSubImage2D:D,texSubImage3D:J,compressedTexSubImage2D:he,scissor:xe,viewport:He,reset:Ee}}function h7(n,e,t,i,r,s,o){const a=r.isWebGL2,u=r.maxTextures,c=r.maxCubemapSize,f=r.maxTextureSize,d=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,g=/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let y;const x=new WeakMap;let M=!1;try{M=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(k,D){return M?new OffscreenCanvas(k,D):Gf("canvas")}function _(k,D,J,he){let me=1;if((k.width>he||k.height>he)&&(me=he/Math.max(k.width,k.height)),me<1||D===!0)if(typeof HTMLImageElement!="undefined"&&k instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&k instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&k instanceof ImageBitmap){const Ce=D?Ag:Math.floor,be=Ce(me*k.width),z=Ce(me*k.height);y===void 0&&(y=S(be,z));const xe=J?S(be,z):y;return xe.width=be,xe.height=z,xe.getContext("2d").drawImage(k,0,0,be,z),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+k.width+"x"+k.height+") to ("+be+"x"+z+")."),xe}else return"data"in k&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+k.width+"x"+k.height+")."),k;return k}function w(k){return nw(k.width)&&nw(k.height)}function T(k){return a?!1:k.wrapS!==bi||k.wrapT!==bi||k.minFilter!==Ft&&k.minFilter!==An}function E(k,D){return k.generateMipmaps&&D&&k.minFilter!==Ft&&k.minFilter!==An}function R(k){n.generateMipmap(k)}function P(k,D,J,he,me=!1){if(a===!1)return D;if(k!==null){if(n[k]!==void 0)return n[k];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+k+"'")}let Ce=D;return D===6403&&(J===5126&&(Ce=33326),J===5131&&(Ce=33325),J===5121&&(Ce=33321)),D===33319&&(J===5126&&(Ce=33328),J===5131&&(Ce=33327),J===5121&&(Ce=33323)),D===6408&&(J===5126&&(Ce=34836),J===5131&&(Ce=34842),J===5121&&(Ce=he===Mt&&me===!1?35907:32856),J===32819&&(Ce=32854),J===32820&&(Ce=32855)),(Ce===33325||Ce===33326||Ce===33327||Ce===33328||Ce===34842||Ce===34836)&&e.get("EXT_color_buffer_float"),Ce}function V(k,D,J){return E(k,J)===!0||k.isFramebufferTexture&&k.minFilter!==Ft&&k.minFilter!==An?Math.log2(Math.max(D.width,D.height))+1:k.mipmaps!==void 0&&k.mipmaps.length>0?k.mipmaps.length:k.isCompressedTexture&&Array.isArray(k.image)?D.mipmaps.length:1}function F(k){return k===Ft||k===$_||k===Q_?9728:9729}function C(k){const D=k.target;D.removeEventListener("dispose",C),Q(D),D.isVideoTexture&&v.delete(D)}function N(k){const D=k.target;D.removeEventListener("dispose",N),Y(D)}function Q(k){const D=i.get(k);if(D.__webglInit===void 0)return;const J=k.source,he=x.get(J);if(he){const me=he[D.__cacheKey];me.usedTimes--,me.usedTimes===0&&G(k),Object.keys(he).length===0&&x.delete(J)}i.remove(k)}function G(k){const D=i.get(k);n.deleteTexture(D.__webglTexture);const J=k.source,he=x.get(J);delete he[D.__cacheKey],o.memory.textures--}function Y(k){const D=k.texture,J=i.get(k),he=i.get(D);if(he.__webglTexture!==void 0&&(n.deleteTexture(he.__webglTexture),o.memory.textures--),k.depthTexture&&k.depthTexture.dispose(),k.isWebGLCubeRenderTarget)for(let me=0;me<6;me++)n.deleteFramebuffer(J.__webglFramebuffer[me]),J.__webglDepthbuffer&&n.deleteRenderbuffer(J.__webglDepthbuffer[me]);else n.deleteFramebuffer(J.__webglFramebuffer),J.__webglDepthbuffer&&n.deleteRenderbuffer(J.__webglDepthbuffer),J.__webglMultisampledFramebuffer&&n.deleteFramebuffer(J.__webglMultisampledFramebuffer),J.__webglColorRenderbuffer&&n.deleteRenderbuffer(J.__webglColorRenderbuffer),J.__webglDepthRenderbuffer&&n.deleteRenderbuffer(J.__webglDepthRenderbuffer);if(k.isWebGLMultipleRenderTargets)for(let me=0,Ce=D.length;me<Ce;me++){const be=i.get(D[me]);be.__webglTexture&&(n.deleteTexture(be.__webglTexture),o.memory.textures--),i.remove(D[me])}i.remove(D),i.remove(k)}let X=0;function K(){X=0}function B(){const k=X;return k>=u&&console.warn("THREE.WebGLTextures: Trying to use "+k+" texture units while this GPU supports only "+u),X+=1,k}function Z(k){const D=[];return D.push(k.wrapS),D.push(k.wrapT),D.push(k.magFilter),D.push(k.minFilter),D.push(k.anisotropy),D.push(k.internalFormat),D.push(k.format),D.push(k.type),D.push(k.generateMipmaps),D.push(k.premultiplyAlpha),D.push(k.flipY),D.push(k.unpackAlignment),D.push(k.encoding),D.join()}function ee(k,D){const J=i.get(k);if(k.isVideoTexture&&_t(k),k.isRenderTargetTexture===!1&&k.version>0&&J.__version!==k.version){const he=k.image;if(he===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(he.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Xe(J,k,D);return}}t.activeTexture(33984+D),t.bindTexture(3553,J.__webglTexture)}function se(k,D){const J=i.get(k);if(k.version>0&&J.__version!==k.version){Xe(J,k,D);return}t.activeTexture(33984+D),t.bindTexture(35866,J.__webglTexture)}function ae(k,D){const J=i.get(k);if(k.version>0&&J.__version!==k.version){Xe(J,k,D);return}t.activeTexture(33984+D),t.bindTexture(32879,J.__webglTexture)}function Le(k,D){const J=i.get(k);if(k.version>0&&J.__version!==k.version){Ze(J,k,D);return}t.activeTexture(33984+D),t.bindTexture(34067,J.__webglTexture)}const ze={[Do]:10497,[bi]:33071,[bg]:33648},Pe={[Ft]:9728,[$_]:9984,[Q_]:9986,[An]:9729,[IP]:9985,[Kl]:9987};function oe(k,D,J){if(J?(n.texParameteri(k,10242,ze[D.wrapS]),n.texParameteri(k,10243,ze[D.wrapT]),(k===32879||k===35866)&&n.texParameteri(k,32882,ze[D.wrapR]),n.texParameteri(k,10240,Pe[D.magFilter]),n.texParameteri(k,10241,Pe[D.minFilter])):(n.texParameteri(k,10242,33071),n.texParameteri(k,10243,33071),(k===32879||k===35866)&&n.texParameteri(k,32882,33071),(D.wrapS!==bi||D.wrapT!==bi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(k,10240,F(D.magFilter)),n.texParameteri(k,10241,F(D.minFilter)),D.minFilter!==Ft&&D.minFilter!==An&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const he=e.get("EXT_texture_filter_anisotropic");if(D.type===xs&&e.has("OES_texture_float_linear")===!1||a===!1&&D.type===_s&&e.has("OES_texture_half_float_linear")===!1)return;(D.anisotropy>1||i.get(D).__currentAnisotropy)&&(n.texParameterf(k,he.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,r.getMaxAnisotropy())),i.get(D).__currentAnisotropy=D.anisotropy)}}function rt(k,D){let J=!1;k.__webglInit===void 0&&(k.__webglInit=!0,D.addEventListener("dispose",C));const he=D.source;let me=x.get(he);me===void 0&&(me={},x.set(he,me));const Ce=Z(D);if(Ce!==k.__cacheKey){me[Ce]===void 0&&(me[Ce]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,J=!0),me[Ce].usedTimes++;const be=me[k.__cacheKey];be!==void 0&&(me[k.__cacheKey].usedTimes--,be.usedTimes===0&&G(D)),k.__cacheKey=Ce,k.__webglTexture=me[Ce].texture}return J}function Xe(k,D,J){let he=3553;D.isDataArrayTexture&&(he=35866),D.isData3DTexture&&(he=32879);const me=rt(k,D),Ce=D.source;if(t.activeTexture(33984+J),t.bindTexture(he,k.__webglTexture),Ce.version!==Ce.__currentVersion||me===!0){n.pixelStorei(37440,D.flipY),n.pixelStorei(37441,D.premultiplyAlpha),n.pixelStorei(3317,D.unpackAlignment),n.pixelStorei(37443,0);const be=T(D)&&w(D.image)===!1;let z=_(D.image,be,!1,f);z=st(D,z);const xe=w(z)||a,He=s.convert(D.format,D.encoding);let Ee=s.convert(D.type),j=P(D.internalFormat,He,Ee,D.encoding,D.isVideoTexture);oe(he,D,xe);let Ae;const Te=D.mipmaps,Je=a&&D.isVideoTexture!==!0,Ie=k.__version===void 0,Ye=V(D,z,xe);if(D.isDepthTexture)j=6402,a?D.type===xs?j=36012:D.type===Hm?j=33190:D.type===fc?j=35056:j=33189:D.type===xs&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),D.format===Nl&&j===6402&&D.type!==Gl&&D.type!==Hm&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),D.type=Gl,Ee=s.convert(D.type)),D.format===Ac&&j===6402&&(j=34041,D.type!==fc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),D.type=fc,Ee=s.convert(D.type))),Je&&Ie?t.texStorage2D(3553,1,j,z.width,z.height):t.texImage2D(3553,0,j,z.width,z.height,0,He,Ee,null);else if(D.isDataTexture)if(Te.length>0&&xe){Je&&Ie&&t.texStorage2D(3553,Ye,j,Te[0].width,Te[0].height);for(let Re=0,lt=Te.length;Re<lt;Re++)Ae=Te[Re],Je?t.texSubImage2D(3553,Re,0,0,Ae.width,Ae.height,He,Ee,Ae.data):t.texImage2D(3553,Re,j,Ae.width,Ae.height,0,He,Ee,Ae.data);D.generateMipmaps=!1}else Je?(Ie&&t.texStorage2D(3553,Ye,j,z.width,z.height),t.texSubImage2D(3553,0,0,0,z.width,z.height,He,Ee,z.data)):t.texImage2D(3553,0,j,z.width,z.height,0,He,Ee,z.data);else if(D.isCompressedTexture){Je&&Ie&&t.texStorage2D(3553,Ye,j,Te[0].width,Te[0].height);for(let Re=0,lt=Te.length;Re<lt;Re++)Ae=Te[Re],D.format!==qr?He!==null?Je?t.compressedTexSubImage2D(3553,Re,0,0,Ae.width,Ae.height,He,Ae.data):t.compressedTexImage2D(3553,Re,j,Ae.width,Ae.height,0,Ae.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Je?t.texSubImage2D(3553,Re,0,0,Ae.width,Ae.height,He,Ee,Ae.data):t.texImage2D(3553,Re,j,Ae.width,Ae.height,0,He,Ee,Ae.data)}else if(D.isDataArrayTexture)Je?(Ie&&t.texStorage3D(35866,Ye,j,z.width,z.height,z.depth),t.texSubImage3D(35866,0,0,0,0,z.width,z.height,z.depth,He,Ee,z.data)):t.texImage3D(35866,0,j,z.width,z.height,z.depth,0,He,Ee,z.data);else if(D.isData3DTexture)Je?(Ie&&t.texStorage3D(32879,Ye,j,z.width,z.height,z.depth),t.texSubImage3D(32879,0,0,0,0,z.width,z.height,z.depth,He,Ee,z.data)):t.texImage3D(32879,0,j,z.width,z.height,z.depth,0,He,Ee,z.data);else if(D.isFramebufferTexture)Je&&Ie?t.texStorage2D(3553,Ye,j,z.width,z.height):t.texImage2D(3553,0,j,z.width,z.height,0,He,Ee,null);else if(Te.length>0&&xe){Je&&Ie&&t.texStorage2D(3553,Ye,j,Te[0].width,Te[0].height);for(let Re=0,lt=Te.length;Re<lt;Re++)Ae=Te[Re],Je?t.texSubImage2D(3553,Re,0,0,He,Ee,Ae):t.texImage2D(3553,Re,j,He,Ee,Ae);D.generateMipmaps=!1}else Je?(Ie&&t.texStorage2D(3553,Ye,j,z.width,z.height),t.texSubImage2D(3553,0,0,0,He,Ee,z)):t.texImage2D(3553,0,j,He,Ee,z);E(D,xe)&&R(he),Ce.__currentVersion=Ce.version,D.onUpdate&&D.onUpdate(D)}k.__version=D.version}function Ze(k,D,J){if(D.image.length!==6)return;const he=rt(k,D),me=D.source;if(t.activeTexture(33984+J),t.bindTexture(34067,k.__webglTexture),me.version!==me.__currentVersion||he===!0){n.pixelStorei(37440,D.flipY),n.pixelStorei(37441,D.premultiplyAlpha),n.pixelStorei(3317,D.unpackAlignment),n.pixelStorei(37443,0);const Ce=D.isCompressedTexture||D.image[0].isCompressedTexture,be=D.image[0]&&D.image[0].isDataTexture,z=[];for(let Re=0;Re<6;Re++)!Ce&&!be?z[Re]=_(D.image[Re],!1,!0,c):z[Re]=be?D.image[Re].image:D.image[Re],z[Re]=st(D,z[Re]);const xe=z[0],He=w(xe)||a,Ee=s.convert(D.format,D.encoding),j=s.convert(D.type),Ae=P(D.internalFormat,Ee,j,D.encoding),Te=a&&D.isVideoTexture!==!0,Je=k.__version===void 0;let Ie=V(D,xe,He);oe(34067,D,He);let Ye;if(Ce){Te&&Je&&t.texStorage2D(34067,Ie,Ae,xe.width,xe.height);for(let Re=0;Re<6;Re++){Ye=z[Re].mipmaps;for(let lt=0;lt<Ye.length;lt++){const nn=Ye[lt];D.format!==qr?Ee!==null?Te?t.compressedTexSubImage2D(34069+Re,lt,0,0,nn.width,nn.height,Ee,nn.data):t.compressedTexImage2D(34069+Re,lt,Ae,nn.width,nn.height,0,nn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Te?t.texSubImage2D(34069+Re,lt,0,0,nn.width,nn.height,Ee,j,nn.data):t.texImage2D(34069+Re,lt,Ae,nn.width,nn.height,0,Ee,j,nn.data)}}}else{Ye=D.mipmaps,Te&&Je&&(Ye.length>0&&Ie++,t.texStorage2D(34067,Ie,Ae,z[0].width,z[0].height));for(let Re=0;Re<6;Re++)if(be){Te?t.texSubImage2D(34069+Re,0,0,0,z[Re].width,z[Re].height,Ee,j,z[Re].data):t.texImage2D(34069+Re,0,Ae,z[Re].width,z[Re].height,0,Ee,j,z[Re].data);for(let lt=0;lt<Ye.length;lt++){const bt=Ye[lt].image[Re].image;Te?t.texSubImage2D(34069+Re,lt+1,0,0,bt.width,bt.height,Ee,j,bt.data):t.texImage2D(34069+Re,lt+1,Ae,bt.width,bt.height,0,Ee,j,bt.data)}}else{Te?t.texSubImage2D(34069+Re,0,0,0,Ee,j,z[Re]):t.texImage2D(34069+Re,0,Ae,Ee,j,z[Re]);for(let lt=0;lt<Ye.length;lt++){const nn=Ye[lt];Te?t.texSubImage2D(34069+Re,lt+1,0,0,Ee,j,nn.image[Re]):t.texImage2D(34069+Re,lt+1,Ae,Ee,j,nn.image[Re])}}}E(D,He)&&R(34067),me.__currentVersion=me.version,D.onUpdate&&D.onUpdate(D)}k.__version=D.version}function Se(k,D,J,he,me){const Ce=s.convert(J.format,J.encoding),be=s.convert(J.type),z=P(J.internalFormat,Ce,be,J.encoding);i.get(D).__hasExternalTextures||(me===32879||me===35866?t.texImage3D(me,0,z,D.width,D.height,D.depth,0,Ce,be,null):t.texImage2D(me,0,z,D.width,D.height,0,Ce,be,null)),t.bindFramebuffer(36160,k),Ue(D)?p.framebufferTexture2DMultisampleEXT(36160,he,me,i.get(J).__webglTexture,0,$e(D)):n.framebufferTexture2D(36160,he,me,i.get(J).__webglTexture,0),t.bindFramebuffer(36160,null)}function Qe(k,D,J){if(n.bindRenderbuffer(36161,k),D.depthBuffer&&!D.stencilBuffer){let he=33189;if(J||Ue(D)){const me=D.depthTexture;me&&me.isDepthTexture&&(me.type===xs?he=36012:me.type===Hm&&(he=33190));const Ce=$e(D);Ue(D)?p.renderbufferStorageMultisampleEXT(36161,Ce,he,D.width,D.height):n.renderbufferStorageMultisample(36161,Ce,he,D.width,D.height)}else n.renderbufferStorage(36161,he,D.width,D.height);n.framebufferRenderbuffer(36160,36096,36161,k)}else if(D.depthBuffer&&D.stencilBuffer){const he=$e(D);J&&Ue(D)===!1?n.renderbufferStorageMultisample(36161,he,35056,D.width,D.height):Ue(D)?p.renderbufferStorageMultisampleEXT(36161,he,35056,D.width,D.height):n.renderbufferStorage(36161,34041,D.width,D.height),n.framebufferRenderbuffer(36160,33306,36161,k)}else{const he=D.isWebGLMultipleRenderTargets===!0?D.texture[0]:D.texture,me=s.convert(he.format,he.encoding),Ce=s.convert(he.type),be=P(he.internalFormat,me,Ce,he.encoding),z=$e(D);J&&Ue(D)===!1?n.renderbufferStorageMultisample(36161,z,be,D.width,D.height):Ue(D)?p.renderbufferStorageMultisampleEXT(36161,z,be,D.width,D.height):n.renderbufferStorage(36161,be,D.width,D.height)}n.bindRenderbuffer(36161,null)}function ue(k,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,k),!(D.depthTexture&&D.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(D.depthTexture).__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),ee(D.depthTexture,0);const he=i.get(D.depthTexture).__webglTexture,me=$e(D);if(D.depthTexture.format===Nl)Ue(D)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,he,0,me):n.framebufferTexture2D(36160,36096,3553,he,0);else if(D.depthTexture.format===Ac)Ue(D)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,he,0,me):n.framebufferTexture2D(36160,33306,3553,he,0);else throw new Error("Unknown depthTexture format")}function fe(k){const D=i.get(k),J=k.isWebGLCubeRenderTarget===!0;if(k.depthTexture&&!D.__autoAllocateDepthBuffer){if(J)throw new Error("target.depthTexture not supported in Cube render targets");ue(D.__webglFramebuffer,k)}else if(J){D.__webglDepthbuffer=[];for(let he=0;he<6;he++)t.bindFramebuffer(36160,D.__webglFramebuffer[he]),D.__webglDepthbuffer[he]=n.createRenderbuffer(),Qe(D.__webglDepthbuffer[he],k,!1)}else t.bindFramebuffer(36160,D.__webglFramebuffer),D.__webglDepthbuffer=n.createRenderbuffer(),Qe(D.__webglDepthbuffer,k,!1);t.bindFramebuffer(36160,null)}function ye(k,D,J){const he=i.get(k);D!==void 0&&Se(he.__webglFramebuffer,k,k.texture,36064,3553),J!==void 0&&fe(k)}function Ne(k){const D=k.texture,J=i.get(k),he=i.get(D);k.addEventListener("dispose",N),k.isWebGLMultipleRenderTargets!==!0&&(he.__webglTexture===void 0&&(he.__webglTexture=n.createTexture()),he.__version=D.version,o.memory.textures++);const me=k.isWebGLCubeRenderTarget===!0,Ce=k.isWebGLMultipleRenderTargets===!0,be=w(k)||a;if(me){J.__webglFramebuffer=[];for(let z=0;z<6;z++)J.__webglFramebuffer[z]=n.createFramebuffer()}else if(J.__webglFramebuffer=n.createFramebuffer(),Ce)if(r.drawBuffers){const z=k.texture;for(let xe=0,He=z.length;xe<He;xe++){const Ee=i.get(z[xe]);Ee.__webglTexture===void 0&&(Ee.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(a&&k.samples>0&&Ue(k)===!1){J.__webglMultisampledFramebuffer=n.createFramebuffer(),J.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,J.__webglColorRenderbuffer);const z=s.convert(D.format,D.encoding),xe=s.convert(D.type),He=P(D.internalFormat,z,xe,D.encoding),Ee=$e(k);n.renderbufferStorageMultisample(36161,Ee,He,k.width,k.height),t.bindFramebuffer(36160,J.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,J.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),k.depthBuffer&&(J.__webglDepthRenderbuffer=n.createRenderbuffer(),Qe(J.__webglDepthRenderbuffer,k,!0)),t.bindFramebuffer(36160,null)}if(me){t.bindTexture(34067,he.__webglTexture),oe(34067,D,be);for(let z=0;z<6;z++)Se(J.__webglFramebuffer[z],k,D,36064,34069+z);E(D,be)&&R(34067),t.unbindTexture()}else if(Ce){const z=k.texture;for(let xe=0,He=z.length;xe<He;xe++){const Ee=z[xe],j=i.get(Ee);t.bindTexture(3553,j.__webglTexture),oe(3553,Ee,be),Se(J.__webglFramebuffer,k,Ee,36064+xe,3553),E(Ee,be)&&R(3553)}t.unbindTexture()}else{let z=3553;(k.isWebGL3DRenderTarget||k.isWebGLArrayRenderTarget)&&(a?z=k.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(z,he.__webglTexture),oe(z,D,be),Se(J.__webglFramebuffer,k,D,36064,z),E(D,be)&&R(z),t.unbindTexture()}k.depthBuffer&&fe(k)}function De(k){const D=w(k)||a,J=k.isWebGLMultipleRenderTargets===!0?k.texture:[k.texture];for(let he=0,me=J.length;he<me;he++){const Ce=J[he];if(E(Ce,D)){const be=k.isWebGLCubeRenderTarget?34067:3553,z=i.get(Ce).__webglTexture;t.bindTexture(be,z),R(be),t.unbindTexture()}}}function qe(k){if(a&&k.samples>0&&Ue(k)===!1){const D=k.width,J=k.height;let he=16384;const me=[36064],Ce=k.stencilBuffer?33306:36096;k.depthBuffer&&me.push(Ce);const be=i.get(k),z=be.__ignoreDepthValues!==void 0?be.__ignoreDepthValues:!1;z===!1&&(k.depthBuffer&&(he|=256),k.stencilBuffer&&(he|=1024)),t.bindFramebuffer(36008,be.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,be.__webglFramebuffer),z===!0&&(n.invalidateFramebuffer(36008,[Ce]),n.invalidateFramebuffer(36009,[Ce])),n.blitFramebuffer(0,0,D,J,0,0,D,J,he,9728),g&&n.invalidateFramebuffer(36008,me),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,be.__webglMultisampledFramebuffer)}}function $e(k){return Math.min(d,k.samples)}function Ue(k){const D=i.get(k);return a&&k.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&D.__useRenderToTexture!==!1}function _t(k){const D=o.render.frame;v.get(k)!==D&&(v.set(k,D),k.update())}function st(k,D){const J=k.encoding,he=k.format,me=k.type;return k.isCompressedTexture===!0||k.isVideoTexture===!0||k.format===tw||J!==sr&&(J===Mt?a===!1?e.has("EXT_sRGB")===!0&&he===qr?(k.format=tw,k.minFilter=An,k.generateMipmaps=!1):D=$l.sRGBToLinear(D):(he!==qr||me!==Hl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",J)),D}this.allocateTextureUnit=B,this.resetTextureUnits=K,this.setTexture2D=ee,this.setTexture2DArray=se,this.setTexture3D=ae,this.setTextureCube=Le,this.rebindTextures=ye,this.setupRenderTarget=Ne,this.updateRenderTargetMipmap=De,this.updateMultisampleRenderTarget=qe,this.setupDepthRenderbuffer=fe,this.setupFrameBufferTexture=Se,this.useMultisampledRTT=Ue}function f7(n,e,t){const i=t.isWebGL2;function r(s,o=null){let a;if(s===Hl)return 5121;if(s===e6)return 32819;if(s===t6)return 32820;if(s===$H)return 5120;if(s===QH)return 5122;if(s===Gl)return 5123;if(s===JH)return 5124;if(s===Hm)return 5125;if(s===xs)return 5126;if(s===_s)return i?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===n6)return 6406;if(s===qr)return 6408;if(s===r6)return 6409;if(s===s6)return 6410;if(s===Nl)return 6402;if(s===Ac)return 34041;if(s===o6)return 6403;if(s===i6)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===tw)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===a6)return 36244;if(s===l6)return 33319;if(s===u6)return 33320;if(s===c6)return 36249;if(s===Xy||s===qy||s===Yy||s===Zy)if(o===Mt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Xy)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===qy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Yy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Zy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Xy)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===qy)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Yy)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Zy)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===yA||s===xA||s===_A||s===wA)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===yA)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===xA)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===_A)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===wA)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===h6)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===SA||s===MA)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===SA)return o===Mt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===MA)return o===Mt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===bA||s===TA||s===EA||s===AA||s===CA||s===RA||s===PA||s===LA||s===DA||s===IA||s===OA||s===FA||s===kA||s===NA)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===bA)return o===Mt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===TA)return o===Mt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===EA)return o===Mt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===AA)return o===Mt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===CA)return o===Mt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===RA)return o===Mt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===PA)return o===Mt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===LA)return o===Mt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===DA)return o===Mt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===IA)return o===Mt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===OA)return o===Mt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===FA)return o===Mt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===kA)return o===Mt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===NA)return o===Mt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===zA)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===zA)return o===Mt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===fc)return i?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:r}}class QP extends jn{constructor(e=[]){super(),this.cameras=e}}QP.prototype.isArrayCamera=!0;class cn extends Lt{constructor(){super(),this.type="Group"}}cn.prototype.isGroup=!0;const d7={type:"move"};class Mx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new cn,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new cn,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new O,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new O),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new cn,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new O,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new O),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,u=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(a!==null&&(r=t.getPose(e.targetRaySpace,i),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(d7))),c&&e.hand){o=!0;for(const y of e.hand.values()){const x=t.getJointPose(y,i);if(c.joints[y.jointName]===void 0){const S=new cn;S.matrixAutoUpdate=!1,S.visible=!1,c.joints[y.jointName]=S,c.add(S)}const M=c.joints[y.jointName];x!==null&&(M.matrix.fromArray(x.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.jointRadius=x.radius),M.visible=x!==null}const f=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],p=f.position.distanceTo(d.position),g=.02,v=.005;c.inputState.pinching&&p>g+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=g-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));return a!==null&&(a.visible=r!==null),u!==null&&(u.visible=s!==null),c!==null&&(c.visible=o!==null),this}}class wv extends zn{constructor(e,t,i,r,s,o,a,u,c,f){if(f=f!==void 0?f:Nl,f!==Nl&&f!==Ac)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&f===Nl&&(i=Gl),i===void 0&&f===Ac&&(i=fc),super(null,r,s,o,a,u,f,i,c),this.image={width:e,height:t},this.magFilter=a!==void 0?a:Ft,this.minFilter=u!==void 0?u:Ft,this.flipY=!1,this.generateMipmaps=!1}}wv.prototype.isDepthTexture=!0;class p7 extends Ya{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",u=null,c=null,f=null,d=null,p=null;const g=t.getContextAttributes();let v=null,y=null;const x=[],M=new Map,S=new jn;S.layers.enable(1),S.viewport=new Wt;const _=new jn;_.layers.enable(2),_.viewport=new Wt;const w=[S,_],T=new QP;T.layers.enable(1),T.layers.enable(2);let E=null,R=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(B){let Z=x[B];return Z===void 0&&(Z=new Mx,x[B]=Z),Z.getTargetRaySpace()},this.getControllerGrip=function(B){let Z=x[B];return Z===void 0&&(Z=new Mx,x[B]=Z),Z.getGripSpace()},this.getHand=function(B){let Z=x[B];return Z===void 0&&(Z=new Mx,x[B]=Z),Z.getHandSpace()};function P(B){const Z=M.get(B.inputSource);Z&&Z.dispatchEvent({type:B.type,data:B.inputSource})}function V(){M.forEach(function(B,Z){B.disconnect(Z)}),M.clear(),E=null,R=null,e.setRenderTarget(v),d=null,f=null,c=null,r=null,y=null,K.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(B){s=B,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(B){a=B,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return f!==null?f:d},this.getBinding=function(){return c},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(B){if(r=B,r!==null){if(v=e.getRenderTarget(),r.addEventListener("select",P),r.addEventListener("selectstart",P),r.addEventListener("selectend",P),r.addEventListener("squeeze",P),r.addEventListener("squeezestart",P),r.addEventListener("squeezeend",P),r.addEventListener("end",V),r.addEventListener("inputsourceschange",F),g.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Z={antialias:r.renderState.layers===void 0?g.antialias:!0,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};d=new XRWebGLLayer(r,t,Z),r.updateRenderState({baseLayer:d}),y=new Gt(d.framebufferWidth,d.framebufferHeight,{format:qr,type:Hl,encoding:e.outputEncoding})}else{let Z=null,ee=null,se=null;g.depth&&(se=g.stencil?35056:33190,Z=g.stencil?Ac:Nl,ee=g.stencil?fc:Gl);const ae={colorFormat:e.outputEncoding===Mt?35907:32856,depthFormat:se,scaleFactor:s};c=new XRWebGLBinding(r,t),f=c.createProjectionLayer(ae),r.updateRenderState({layers:[f]}),y=new Gt(f.textureWidth,f.textureHeight,{format:qr,type:Hl,depthTexture:new wv(f.textureWidth,f.textureHeight,ee,void 0,void 0,void 0,void 0,void 0,void 0,Z),stencilBuffer:g.stencil,encoding:e.outputEncoding,samples:g.antialias?4:0});const Le=e.properties.get(y);Le.__ignoreDepthValues=f.ignoreDepthValues}y.isXRRenderTarget=!0,this.setFoveation(1),o=await r.requestReferenceSpace(a),K.setContext(r),K.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function F(B){const Z=r.inputSources;for(let ee=0;ee<x.length;ee++)M.set(Z[ee],x[ee]);for(let ee=0;ee<B.removed.length;ee++){const se=B.removed[ee],ae=M.get(se);ae&&(ae.dispatchEvent({type:"disconnected",data:se}),M.delete(se))}for(let ee=0;ee<B.added.length;ee++){const se=B.added[ee],ae=M.get(se);ae&&ae.dispatchEvent({type:"connected",data:se})}}const C=new O,N=new O;function Q(B,Z,ee){C.setFromMatrixPosition(Z.matrixWorld),N.setFromMatrixPosition(ee.matrixWorld);const se=C.distanceTo(N),ae=Z.projectionMatrix.elements,Le=ee.projectionMatrix.elements,ze=ae[14]/(ae[10]-1),Pe=ae[14]/(ae[10]+1),oe=(ae[9]+1)/ae[5],rt=(ae[9]-1)/ae[5],Xe=(ae[8]-1)/ae[0],Ze=(Le[8]+1)/Le[0],Se=ze*Xe,Qe=ze*Ze,ue=se/(-Xe+Ze),fe=ue*-Xe;Z.matrixWorld.decompose(B.position,B.quaternion,B.scale),B.translateX(fe),B.translateZ(ue),B.matrixWorld.compose(B.position,B.quaternion,B.scale),B.matrixWorldInverse.copy(B.matrixWorld).invert();const ye=ze+ue,Ne=Pe+ue,De=Se-fe,qe=Qe+(se-fe),$e=oe*Pe/Ne*ye,Ue=rt*Pe/Ne*ye;B.projectionMatrix.makePerspective(De,qe,$e,Ue,ye,Ne)}function G(B,Z){Z===null?B.matrixWorld.copy(B.matrix):B.matrixWorld.multiplyMatrices(Z.matrixWorld,B.matrix),B.matrixWorldInverse.copy(B.matrixWorld).invert()}this.updateCamera=function(B){if(r===null)return;T.near=_.near=S.near=B.near,T.far=_.far=S.far=B.far,(E!==T.near||R!==T.far)&&(r.updateRenderState({depthNear:T.near,depthFar:T.far}),E=T.near,R=T.far);const Z=B.parent,ee=T.cameras;G(T,Z);for(let ae=0;ae<ee.length;ae++)G(ee[ae],Z);T.matrixWorld.decompose(T.position,T.quaternion,T.scale),B.position.copy(T.position),B.quaternion.copy(T.quaternion),B.scale.copy(T.scale),B.matrix.copy(T.matrix),B.matrixWorld.copy(T.matrixWorld);const se=B.children;for(let ae=0,Le=se.length;ae<Le;ae++)se[ae].updateMatrixWorld(!0);ee.length===2?Q(T,S,_):T.projectionMatrix.copy(S.projectionMatrix)},this.getCamera=function(){return T},this.getFoveation=function(){if(f!==null)return f.fixedFoveation;if(d!==null)return d.fixedFoveation},this.setFoveation=function(B){f!==null&&(f.fixedFoveation=B),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=B)};let Y=null;function X(B,Z){if(u=Z.getViewerPose(o),p=Z,u!==null){const se=u.views;d!==null&&(e.setRenderTargetFramebuffer(y,d.framebuffer),e.setRenderTarget(y));let ae=!1;se.length!==T.cameras.length&&(T.cameras.length=0,ae=!0);for(let Le=0;Le<se.length;Le++){const ze=se[Le];let Pe=null;if(d!==null)Pe=d.getViewport(ze);else{const rt=c.getViewSubImage(f,ze);Pe=rt.viewport,Le===0&&(e.setRenderTargetTextures(y,rt.colorTexture,f.ignoreDepthValues?void 0:rt.depthStencilTexture),e.setRenderTarget(y))}const oe=w[Le];oe.matrix.fromArray(ze.transform.matrix),oe.projectionMatrix.fromArray(ze.projectionMatrix),oe.viewport.set(Pe.x,Pe.y,Pe.width,Pe.height),Le===0&&T.matrix.copy(oe.matrix),ae===!0&&T.cameras.push(oe)}}const ee=r.inputSources;for(let se=0;se<x.length;se++){const ae=x[se],Le=ee[se];ae.update(Le,Z,o)}Y&&Y(B,Z),p=null}const K=new GP;K.setAnimationLoop(X),this.setAnimationLoop=function(B){Y=B},this.dispose=function(){}}}function m7(n,e){function t(y,x){y.fogColor.value.copy(x.color),x.isFog?(y.fogNear.value=x.near,y.fogFar.value=x.far):x.isFogExp2&&(y.fogDensity.value=x.density)}function i(y,x,M,S,_){x.isMeshBasicMaterial||x.isMeshLambertMaterial?r(y,x):x.isMeshToonMaterial?(r(y,x),f(y,x)):x.isMeshPhongMaterial?(r(y,x),c(y,x)):x.isMeshStandardMaterial?(r(y,x),d(y,x),x.isMeshPhysicalMaterial&&p(y,x,_)):x.isMeshMatcapMaterial?(r(y,x),g(y,x)):x.isMeshDepthMaterial?r(y,x):x.isMeshDistanceMaterial?(r(y,x),v(y,x)):x.isMeshNormalMaterial?r(y,x):x.isLineBasicMaterial?(s(y,x),x.isLineDashedMaterial&&o(y,x)):x.isPointsMaterial?a(y,x,M,S):x.isSpriteMaterial?u(y,x):x.isShadowMaterial?(y.color.value.copy(x.color),y.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function r(y,x){y.opacity.value=x.opacity,x.color&&y.diffuse.value.copy(x.color),x.emissive&&y.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(y.map.value=x.map),x.alphaMap&&(y.alphaMap.value=x.alphaMap),x.bumpMap&&(y.bumpMap.value=x.bumpMap,y.bumpScale.value=x.bumpScale,x.side===wr&&(y.bumpScale.value*=-1)),x.displacementMap&&(y.displacementMap.value=x.displacementMap,y.displacementScale.value=x.displacementScale,y.displacementBias.value=x.displacementBias),x.emissiveMap&&(y.emissiveMap.value=x.emissiveMap),x.normalMap&&(y.normalMap.value=x.normalMap,y.normalScale.value.copy(x.normalScale),x.side===wr&&y.normalScale.value.negate()),x.specularMap&&(y.specularMap.value=x.specularMap),x.alphaTest>0&&(y.alphaTest.value=x.alphaTest);const M=e.get(x).envMap;if(M&&(y.envMap.value=M,y.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=x.reflectivity,y.ior.value=x.ior,y.refractionRatio.value=x.refractionRatio),x.lightMap){y.lightMap.value=x.lightMap;const w=n.physicallyCorrectLights!==!0?Math.PI:1;y.lightMapIntensity.value=x.lightMapIntensity*w}x.aoMap&&(y.aoMap.value=x.aoMap,y.aoMapIntensity.value=x.aoMapIntensity);let S;x.map?S=x.map:x.specularMap?S=x.specularMap:x.displacementMap?S=x.displacementMap:x.normalMap?S=x.normalMap:x.bumpMap?S=x.bumpMap:x.roughnessMap?S=x.roughnessMap:x.metalnessMap?S=x.metalnessMap:x.alphaMap?S=x.alphaMap:x.emissiveMap?S=x.emissiveMap:x.clearcoatMap?S=x.clearcoatMap:x.clearcoatNormalMap?S=x.clearcoatNormalMap:x.clearcoatRoughnessMap?S=x.clearcoatRoughnessMap:x.specularIntensityMap?S=x.specularIntensityMap:x.specularColorMap?S=x.specularColorMap:x.transmissionMap?S=x.transmissionMap:x.thicknessMap?S=x.thicknessMap:x.sheenColorMap?S=x.sheenColorMap:x.sheenRoughnessMap&&(S=x.sheenRoughnessMap),S!==void 0&&(S.isWebGLRenderTarget&&(S=S.texture),S.matrixAutoUpdate===!0&&S.updateMatrix(),y.uvTransform.value.copy(S.matrix));let _;x.aoMap?_=x.aoMap:x.lightMap&&(_=x.lightMap),_!==void 0&&(_.isWebGLRenderTarget&&(_=_.texture),_.matrixAutoUpdate===!0&&_.updateMatrix(),y.uv2Transform.value.copy(_.matrix))}function s(y,x){y.diffuse.value.copy(x.color),y.opacity.value=x.opacity}function o(y,x){y.dashSize.value=x.dashSize,y.totalSize.value=x.dashSize+x.gapSize,y.scale.value=x.scale}function a(y,x,M,S){y.diffuse.value.copy(x.color),y.opacity.value=x.opacity,y.size.value=x.size*M,y.scale.value=S*.5,x.map&&(y.map.value=x.map),x.alphaMap&&(y.alphaMap.value=x.alphaMap),x.alphaTest>0&&(y.alphaTest.value=x.alphaTest);let _;x.map?_=x.map:x.alphaMap&&(_=x.alphaMap),_!==void 0&&(_.matrixAutoUpdate===!0&&_.updateMatrix(),y.uvTransform.value.copy(_.matrix))}function u(y,x){y.diffuse.value.copy(x.color),y.opacity.value=x.opacity,y.rotation.value=x.rotation,x.map&&(y.map.value=x.map),x.alphaMap&&(y.alphaMap.value=x.alphaMap),x.alphaTest>0&&(y.alphaTest.value=x.alphaTest);let M;x.map?M=x.map:x.alphaMap&&(M=x.alphaMap),M!==void 0&&(M.matrixAutoUpdate===!0&&M.updateMatrix(),y.uvTransform.value.copy(M.matrix))}function c(y,x){y.specular.value.copy(x.specular),y.shininess.value=Math.max(x.shininess,1e-4)}function f(y,x){x.gradientMap&&(y.gradientMap.value=x.gradientMap)}function d(y,x){y.roughness.value=x.roughness,y.metalness.value=x.metalness,x.roughnessMap&&(y.roughnessMap.value=x.roughnessMap),x.metalnessMap&&(y.metalnessMap.value=x.metalnessMap),e.get(x).envMap&&(y.envMapIntensity.value=x.envMapIntensity)}function p(y,x,M){y.ior.value=x.ior,x.sheen>0&&(y.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),y.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(y.sheenColorMap.value=x.sheenColorMap),x.sheenRoughnessMap&&(y.sheenRoughnessMap.value=x.sheenRoughnessMap)),x.clearcoat>0&&(y.clearcoat.value=x.clearcoat,y.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(y.clearcoatMap.value=x.clearcoatMap),x.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap),x.clearcoatNormalMap&&(y.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),y.clearcoatNormalMap.value=x.clearcoatNormalMap,x.side===wr&&y.clearcoatNormalScale.value.negate())),x.transmission>0&&(y.transmission.value=x.transmission,y.transmissionSamplerMap.value=M.texture,y.transmissionSamplerSize.value.set(M.width,M.height),x.transmissionMap&&(y.transmissionMap.value=x.transmissionMap),y.thickness.value=x.thickness,x.thicknessMap&&(y.thicknessMap.value=x.thicknessMap),y.attenuationDistance.value=x.attenuationDistance,y.attenuationColor.value.copy(x.attenuationColor)),y.specularIntensity.value=x.specularIntensity,y.specularColor.value.copy(x.specularColor),x.specularIntensityMap&&(y.specularIntensityMap.value=x.specularIntensityMap),x.specularColorMap&&(y.specularColorMap.value=x.specularColorMap)}function g(y,x){x.matcap&&(y.matcap.value=x.matcap)}function v(y,x){y.referencePosition.value.copy(x.referencePosition),y.nearDistance.value=x.nearDistance,y.farDistance.value=x.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function g7(){const n=Gf("canvas");return n.style.display="block",n}function tn(n={}){const e=n.canvas!==void 0?n.canvas:g7(),t=n.context!==void 0?n.context:null,i=n.depth!==void 0?n.depth:!0,r=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,a=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,u=n.powerPreference!==void 0?n.powerPreference:"default",c=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let f;n.context!==void 0?f=t.getContextAttributes().alpha:f=n.alpha!==void 0?n.alpha:!1;let d=null,p=null;const g=[],v=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=sr,this.physicallyCorrectLights=!1,this.toneMapping=Bs,this.toneMappingExposure=1;const y=this;let x=!1,M=0,S=0,_=null,w=-1,T=null;const E=new Wt,R=new Wt;let P=null,V=e.width,F=e.height,C=1,N=null,Q=null;const G=new Wt(0,0,V,F),Y=new Wt(0,0,V,F);let X=!1;const K=new hd;let B=!1,Z=!1,ee=null;const se=new Me,ae=new ie,Le=new O,ze={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Pe(){return _===null?C:1}let oe=t;function rt(U,te){for(let le=0;le<U.length;le++){const re=U[le],ge=e.getContext(re,te);if(ge!==null)return ge}return null}try{const U={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:u,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Z1}`),e.addEventListener("webglcontextlost",j,!1),e.addEventListener("webglcontextrestored",Ae,!1),oe===null){const te=["webgl2","webgl","experimental-webgl"];if(y.isWebGL1Renderer===!0&&te.shift(),oe=rt(te,U),oe===null)throw rt(te)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}oe.getShaderPrecisionFormat===void 0&&(oe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let Xe,Ze,Se,Qe,ue,fe,ye,Ne,De,qe,$e,Ue,_t,st,k,D,J,he,me,Ce,be,z,xe;function He(){Xe=new O8(oe),Ze=new C8(oe,Xe,n),Xe.init(Ze),z=new f7(oe,Xe,Ze),Se=new c7(oe,Xe,Ze),Qe=new N8(oe),ue=new J9,fe=new h7(oe,Xe,Se,ue,Ze,z,Qe),ye=new P8(y),Ne=new I8(y),De=new $6(oe,Ze),xe=new E8(oe,Xe,De,Ze),qe=new F8(oe,De,Qe,xe),$e=new V8(oe,qe,De,Qe),me=new U8(oe,Ze,fe),D=new R8(ue),Ue=new Q9(y,ye,Ne,Xe,Ze,xe,D),_t=new m7(y,ue),st=new t7,k=new a7(Xe,Ze),he=new T8(y,ye,Se,$e,f,o),J=new $P(y,$e,Ze),Ce=new A8(oe,Xe,Qe,Ze),be=new k8(oe,Xe,Qe,Ze),Qe.programs=Ue.programs,y.capabilities=Ze,y.extensions=Xe,y.properties=ue,y.renderLists=st,y.shadowMap=J,y.state=Se,y.info=Qe}He();const Ee=new p7(y,oe);this.xr=Ee,this.getContext=function(){return oe},this.getContextAttributes=function(){return oe.getContextAttributes()},this.forceContextLoss=function(){const U=Xe.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=Xe.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(U){U!==void 0&&(C=U,this.setSize(V,F,!1))},this.getSize=function(U){return U.set(V,F)},this.setSize=function(U,te,le){if(Ee.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}V=U,F=te,e.width=Math.floor(U*C),e.height=Math.floor(te*C),le!==!1&&(e.style.width=U+"px",e.style.height=te+"px"),this.setViewport(0,0,U,te)},this.getDrawingBufferSize=function(U){return U.set(V*C,F*C).floor()},this.setDrawingBufferSize=function(U,te,le){V=U,F=te,C=le,e.width=Math.floor(U*le),e.height=Math.floor(te*le),this.setViewport(0,0,U,te)},this.getCurrentViewport=function(U){return U.copy(E)},this.getViewport=function(U){return U.copy(G)},this.setViewport=function(U,te,le,re){U.isVector4?G.set(U.x,U.y,U.z,U.w):G.set(U,te,le,re),Se.viewport(E.copy(G).multiplyScalar(C).floor())},this.getScissor=function(U){return U.copy(Y)},this.setScissor=function(U,te,le,re){U.isVector4?Y.set(U.x,U.y,U.z,U.w):Y.set(U,te,le,re),Se.scissor(R.copy(Y).multiplyScalar(C).floor())},this.getScissorTest=function(){return X},this.setScissorTest=function(U){Se.setScissorTest(X=U)},this.setOpaqueSort=function(U){N=U},this.setTransparentSort=function(U){Q=U},this.getClearColor=function(U){return U.copy(he.getClearColor())},this.setClearColor=function(){he.setClearColor.apply(he,arguments)},this.getClearAlpha=function(){return he.getClearAlpha()},this.setClearAlpha=function(){he.setClearAlpha.apply(he,arguments)},this.clear=function(U=!0,te=!0,le=!0){let re=0;U&&(re|=16384),te&&(re|=256),le&&(re|=1024),oe.clear(re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",j,!1),e.removeEventListener("webglcontextrestored",Ae,!1),st.dispose(),k.dispose(),ue.dispose(),ye.dispose(),Ne.dispose(),$e.dispose(),xe.dispose(),Ue.dispose(),Ee.dispose(),Ee.removeEventListener("sessionstart",lt),Ee.removeEventListener("sessionend",nn),ee&&(ee.dispose(),ee=null),bt.stop()};function j(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Ae(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const U=Qe.autoReset,te=J.enabled,le=J.autoUpdate,re=J.needsUpdate,ge=J.type;He(),Qe.autoReset=U,J.enabled=te,J.autoUpdate=le,J.needsUpdate=re,J.type=ge}function Te(U){const te=U.target;te.removeEventListener("dispose",Te),Je(te)}function Je(U){Ie(U),ue.remove(U)}function Ie(U){const te=ue.get(U).programs;te!==void 0&&(te.forEach(function(le){Ue.releaseProgram(le)}),U.isShaderMaterial&&Ue.releaseShaderCache(U))}this.renderBufferDirect=function(U,te,le,re,ge,ot){te===null&&(te=ze);const ht=ge.isMesh&&ge.matrixWorld.determinant()<0,yt=l0(U,te,le,re,ge);Se.setMaterial(re,ht);let mt=le.index;const Vt=le.attributes.position;if(mt===null){if(Vt===void 0||Vt.count===0)return}else if(mt.count===0)return;let It=1;re.wireframe===!0&&(mt=qe.getWireframeAttribute(le),It=2),xe.setup(ge,re,yt,le,mt);let zt,xn=Ce;mt!==null&&(zt=De.get(mt),xn=be,xn.setIndex(zt));const Zs=mt!==null?mt.count:Vt.count,Go=le.drawRange.start*It,Wo=le.drawRange.count*It,Ri=ot!==null?ot.start*It:0,Ht=ot!==null?ot.count*It:1/0,rs=Math.max(Go,Ri),Dn=Math.min(Zs,Go+Wo,Ri+Ht)-1,Lr=Math.max(0,Dn-rs+1);if(Lr!==0){if(ge.isMesh)re.wireframe===!0?(Se.setLineWidth(re.wireframeLinewidth*Pe()),xn.setMode(1)):xn.setMode(4);else if(ge.isLine){let Es=re.linewidth;Es===void 0&&(Es=1),Se.setLineWidth(Es*Pe()),ge.isLineSegments?xn.setMode(1):ge.isLineLoop?xn.setMode(2):xn.setMode(3)}else ge.isPoints?xn.setMode(0):ge.isSprite&&xn.setMode(4);if(ge.isInstancedMesh)xn.renderInstances(rs,Lr,ge.count);else if(le.isInstancedBufferGeometry){const Es=Math.min(le.instanceCount,le._maxInstanceCount);xn.renderInstances(rs,Lr,Es)}else xn.render(rs,Lr)}},this.compile=function(U,te){p=k.get(U),p.init(),v.push(p),U.traverseVisible(function(le){le.isLight&&le.layers.test(te.layers)&&(p.pushLight(le),le.castShadow&&p.pushShadow(le))}),p.setupLights(y.physicallyCorrectLights),U.traverse(function(le){const re=le.material;if(re)if(Array.isArray(re))for(let ge=0;ge<re.length;ge++){const ot=re[ge];uh(ot,U,le)}else uh(re,U,le)}),v.pop(),p=null};let Ye=null;function Re(U){Ye&&Ye(U)}function lt(){bt.stop()}function nn(){bt.start()}const bt=new GP;bt.setAnimationLoop(Re),typeof self!="undefined"&&bt.setContext(self),this.setAnimationLoop=function(U){Ye=U,Ee.setAnimationLoop(U),U===null?bt.stop():bt.start()},Ee.addEventListener("sessionstart",lt),Ee.addEventListener("sessionend",nn),this.render=function(U,te){if(te!==void 0&&te.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x===!0)return;U.autoUpdate===!0&&U.updateMatrixWorld(),te.parent===null&&te.updateMatrixWorld(),Ee.enabled===!0&&Ee.isPresenting===!0&&(Ee.cameraAutoUpdate===!0&&Ee.updateCamera(te),te=Ee.getCamera()),U.isScene===!0&&U.onBeforeRender(y,U,te,_),p=k.get(U,v.length),p.init(),v.push(p),se.multiplyMatrices(te.projectionMatrix,te.matrixWorldInverse),K.setFromProjectionMatrix(se),Z=this.localClippingEnabled,B=D.init(this.clippingPlanes,Z,te),d=st.get(U,g.length),d.init(),g.push(d),Rr(U,te,0,y.sortObjects),d.finish(),y.sortObjects===!0&&d.sort(N,Q),B===!0&&D.beginShadows();const le=p.state.shadowsArray;if(J.render(le,U,te),B===!0&&D.endShadows(),this.info.autoReset===!0&&this.info.reset(),he.render(d,U),p.setupLights(y.physicallyCorrectLights),te.isArrayCamera){const re=te.cameras;for(let ge=0,ot=re.length;ge<ot;ge++){const ht=re[ge];Pr(d,U,ht,ht.viewport)}}else Pr(d,U,te);_!==null&&(fe.updateMultisampleRenderTarget(_),fe.updateRenderTargetMipmap(_)),U.isScene===!0&&U.onAfterRender(y,U,te),xe.resetDefaultState(),w=-1,T=null,v.pop(),v.length>0?p=v[v.length-1]:p=null,g.pop(),g.length>0?d=g[g.length-1]:d=null};function Rr(U,te,le,re){if(U.visible===!1)return;if(U.layers.test(te.layers)){if(U.isGroup)le=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(te);else if(U.isLight)p.pushLight(U),U.castShadow&&p.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||K.intersectsSprite(U)){re&&Le.setFromMatrixPosition(U.matrixWorld).applyMatrix4(se);const ht=$e.update(U),yt=U.material;yt.visible&&d.push(U,ht,yt,le,Le.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(U.isSkinnedMesh&&U.skeleton.frame!==Qe.render.frame&&(U.skeleton.update(),U.skeleton.frame=Qe.render.frame),!U.frustumCulled||K.intersectsObject(U))){re&&Le.setFromMatrixPosition(U.matrixWorld).applyMatrix4(se);const ht=$e.update(U),yt=U.material;if(Array.isArray(yt)){const mt=ht.groups;for(let Vt=0,It=mt.length;Vt<It;Vt++){const zt=mt[Vt],xn=yt[zt.materialIndex];xn&&xn.visible&&d.push(U,ht,xn,le,Le.z,zt)}}else yt.visible&&d.push(U,ht,yt,le,Le.z,null)}}const ot=U.children;for(let ht=0,yt=ot.length;ht<yt;ht++)Rr(ot[ht],te,le,re)}function Pr(U,te,le,re){const ge=U.opaque,ot=U.transmissive,ht=U.transparent;p.setupLightsView(le),ot.length>0&&a0(ge,te,le),re&&Se.viewport(E.copy(re)),ge.length>0&&nu(ge,te,le),ot.length>0&&nu(ot,te,le),ht.length>0&&nu(ht,te,le),Se.buffers.depth.setTest(!0),Se.buffers.depth.setMask(!0),Se.buffers.color.setMask(!0),Se.setPolygonOffset(!1)}function a0(U,te,le){const re=Ze.isWebGL2;ee===null&&(ee=new Gt(1,1,{generateMipmaps:!0,type:z.convert(_s)!==null?_s:Hl,minFilter:Kl,samples:re&&s===!0?4:0})),y.getDrawingBufferSize(ae),re?ee.setSize(ae.x,ae.y):ee.setSize(Ag(ae.x),Ag(ae.y));const ge=y.getRenderTarget();y.setRenderTarget(ee),y.clear();const ot=y.toneMapping;y.toneMapping=Bs,nu(U,te,le),y.toneMapping=ot,fe.updateMultisampleRenderTarget(ee),fe.updateRenderTargetMipmap(ee),y.setRenderTarget(ge)}function nu(U,te,le){const re=te.isScene===!0?te.overrideMaterial:null;for(let ge=0,ot=U.length;ge<ot;ge++){const ht=U[ge],yt=ht.object,mt=ht.geometry,Vt=re===null?ht.material:re,It=ht.group;yt.layers.test(le.layers)&&Ld(yt,te,le,mt,Vt,It)}}function Ld(U,te,le,re,ge,ot){U.onBeforeRender(y,te,le,re,ge,ot),U.modelViewMatrix.multiplyMatrices(le.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),ge.onBeforeRender(y,te,le,re,U,ot),ge.transparent===!0&&ge.side===Lo?(ge.side=wr,ge.needsUpdate=!0,y.renderBufferDirect(le,te,re,ge,U,ot),ge.side=Mc,ge.needsUpdate=!0,y.renderBufferDirect(le,te,re,ge,U,ot),ge.side=Lo):y.renderBufferDirect(le,te,re,ge,U,ot),U.onAfterRender(y,te,le,re,ge,ot)}function uh(U,te,le){te.isScene!==!0&&(te=ze);const re=ue.get(U),ge=p.state.lights,ot=p.state.shadowsArray,ht=ge.state.version,yt=Ue.getParameters(U,ge.state,ot,te,le),mt=Ue.getProgramCacheKey(yt);let Vt=re.programs;re.environment=U.isMeshStandardMaterial?te.environment:null,re.fog=te.fog,re.envMap=(U.isMeshStandardMaterial?Ne:ye).get(U.envMap||re.environment),Vt===void 0&&(U.addEventListener("dispose",Te),Vt=new Map,re.programs=Vt);let It=Vt.get(mt);if(It!==void 0){if(re.currentProgram===It&&re.lightsStateVersion===ht)return Dd(U,yt),It}else yt.uniforms=Ue.getUniforms(U),U.onBuild(le,yt,y),U.onBeforeCompile(yt,y),It=Ue.acquireProgram(yt,mt),Vt.set(mt,It),re.uniforms=yt.uniforms;const zt=re.uniforms;(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(zt.clippingPlanes=D.uniform),Dd(U,yt),re.needsLights=u0(U),re.lightsStateVersion=ht,re.needsLights&&(zt.ambientLightColor.value=ge.state.ambient,zt.lightProbe.value=ge.state.probe,zt.directionalLights.value=ge.state.directional,zt.directionalLightShadows.value=ge.state.directionalShadow,zt.spotLights.value=ge.state.spot,zt.spotLightShadows.value=ge.state.spotShadow,zt.rectAreaLights.value=ge.state.rectArea,zt.ltc_1.value=ge.state.rectAreaLTC1,zt.ltc_2.value=ge.state.rectAreaLTC2,zt.pointLights.value=ge.state.point,zt.pointLightShadows.value=ge.state.pointShadow,zt.hemisphereLights.value=ge.state.hemi,zt.directionalShadowMap.value=ge.state.directionalShadowMap,zt.directionalShadowMatrix.value=ge.state.directionalShadowMatrix,zt.spotShadowMap.value=ge.state.spotShadowMap,zt.spotShadowMatrix.value=ge.state.spotShadowMatrix,zt.pointShadowMap.value=ge.state.pointShadowMap,zt.pointShadowMatrix.value=ge.state.pointShadowMatrix);const xn=It.getUniforms(),Zs=Aa.seqWithValue(xn.seq,zt);return re.currentProgram=It,re.uniformsList=Zs,It}function Dd(U,te){const le=ue.get(U);le.outputEncoding=te.outputEncoding,le.instancing=te.instancing,le.skinning=te.skinning,le.morphTargets=te.morphTargets,le.morphNormals=te.morphNormals,le.morphColors=te.morphColors,le.morphTargetsCount=te.morphTargetsCount,le.numClippingPlanes=te.numClippingPlanes,le.numIntersection=te.numClipIntersection,le.vertexAlphas=te.vertexAlphas,le.vertexTangents=te.vertexTangents,le.toneMapping=te.toneMapping}function l0(U,te,le,re,ge){te.isScene!==!0&&(te=ze),fe.resetTextureUnits();const ot=te.fog,ht=re.isMeshStandardMaterial?te.environment:null,yt=_===null?y.outputEncoding:_.isXRRenderTarget===!0?_.texture.encoding:sr,mt=(re.isMeshStandardMaterial?Ne:ye).get(re.envMap||ht),Vt=re.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,It=!!re.normalMap&&!!le.attributes.tangent,zt=!!le.morphAttributes.position,xn=!!le.morphAttributes.normal,Zs=!!le.morphAttributes.color,Go=re.toneMapped?y.toneMapping:Bs,Wo=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,Ri=Wo!==void 0?Wo.length:0,Ht=ue.get(re),rs=p.state.lights;if(B===!0&&(Z===!0||U!==T)){const ar=U===T&&re.id===w;D.setState(re,U,ar)}let Dn=!1;re.version===Ht.__version?(Ht.needsLights&&Ht.lightsStateVersion!==rs.state.version||Ht.outputEncoding!==yt||ge.isInstancedMesh&&Ht.instancing===!1||!ge.isInstancedMesh&&Ht.instancing===!0||ge.isSkinnedMesh&&Ht.skinning===!1||!ge.isSkinnedMesh&&Ht.skinning===!0||Ht.envMap!==mt||re.fog&&Ht.fog!==ot||Ht.numClippingPlanes!==void 0&&(Ht.numClippingPlanes!==D.numPlanes||Ht.numIntersection!==D.numIntersection)||Ht.vertexAlphas!==Vt||Ht.vertexTangents!==It||Ht.morphTargets!==zt||Ht.morphNormals!==xn||Ht.morphColors!==Zs||Ht.toneMapping!==Go||Ze.isWebGL2===!0&&Ht.morphTargetsCount!==Ri)&&(Dn=!0):(Dn=!0,Ht.__version=re.version);let Lr=Ht.currentProgram;Dn===!0&&(Lr=uh(re,te,ge));let Es=!1,jo=!1,iu=!1;const Qn=Lr.getUniforms(),tl=Ht.uniforms;if(Se.useProgram(Lr.program)&&(Es=!0,jo=!0,iu=!0),re.id!==w&&(w=re.id,jo=!0),Es||T!==U){if(Qn.setValue(oe,"projectionMatrix",U.projectionMatrix),Ze.logarithmicDepthBuffer&&Qn.setValue(oe,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),T!==U&&(T=U,jo=!0,iu=!0),re.isShaderMaterial||re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshStandardMaterial||re.envMap){const ar=Qn.map.cameraPosition;ar!==void 0&&ar.setValue(oe,Le.setFromMatrixPosition(U.matrixWorld))}(re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshLambertMaterial||re.isMeshBasicMaterial||re.isMeshStandardMaterial||re.isShaderMaterial)&&Qn.setValue(oe,"isOrthographic",U.isOrthographicCamera===!0),(re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshLambertMaterial||re.isMeshBasicMaterial||re.isMeshStandardMaterial||re.isShaderMaterial||re.isShadowMaterial||ge.isSkinnedMesh)&&Qn.setValue(oe,"viewMatrix",U.matrixWorldInverse)}if(ge.isSkinnedMesh){Qn.setOptional(oe,ge,"bindMatrix"),Qn.setOptional(oe,ge,"bindMatrixInverse");const ar=ge.skeleton;ar&&(Ze.floatVertexTextures?(ar.boneTexture===null&&ar.computeBoneTexture(),Qn.setValue(oe,"boneTexture",ar.boneTexture,fe),Qn.setValue(oe,"boneTextureSize",ar.boneTextureSize)):Qn.setOptional(oe,ar,"boneMatrices"))}const hh=le.morphAttributes;return(hh.position!==void 0||hh.normal!==void 0||hh.color!==void 0&&Ze.isWebGL2===!0)&&me.update(ge,le,re,Lr),(jo||Ht.receiveShadow!==ge.receiveShadow)&&(Ht.receiveShadow=ge.receiveShadow,Qn.setValue(oe,"receiveShadow",ge.receiveShadow)),jo&&(Qn.setValue(oe,"toneMappingExposure",y.toneMappingExposure),Ht.needsLights&&ch(tl,iu),ot&&re.fog&&_t.refreshFogUniforms(tl,ot),_t.refreshMaterialUniforms(tl,re,C,F,ee),Aa.upload(oe,Ht.uniformsList,tl,fe)),re.isShaderMaterial&&re.uniformsNeedUpdate===!0&&(Aa.upload(oe,Ht.uniformsList,tl,fe),re.uniformsNeedUpdate=!1),re.isSpriteMaterial&&Qn.setValue(oe,"center",ge.center),Qn.setValue(oe,"modelViewMatrix",ge.modelViewMatrix),Qn.setValue(oe,"normalMatrix",ge.normalMatrix),Qn.setValue(oe,"modelMatrix",ge.matrixWorld),Lr}function ch(U,te){U.ambientLightColor.needsUpdate=te,U.lightProbe.needsUpdate=te,U.directionalLights.needsUpdate=te,U.directionalLightShadows.needsUpdate=te,U.pointLights.needsUpdate=te,U.pointLightShadows.needsUpdate=te,U.spotLights.needsUpdate=te,U.spotLightShadows.needsUpdate=te,U.rectAreaLights.needsUpdate=te,U.hemisphereLights.needsUpdate=te}function u0(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return _},this.setRenderTargetTextures=function(U,te,le){ue.get(U.texture).__webglTexture=te,ue.get(U.depthTexture).__webglTexture=le;const re=ue.get(U);re.__hasExternalTextures=!0,re.__hasExternalTextures&&(re.__autoAllocateDepthBuffer=le===void 0,re.__autoAllocateDepthBuffer||Xe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),re.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(U,te){const le=ue.get(U);le.__webglFramebuffer=te,le.__useDefaultFramebuffer=te===void 0},this.setRenderTarget=function(U,te=0,le=0){_=U,M=te,S=le;let re=!0;if(U){const mt=ue.get(U);mt.__useDefaultFramebuffer!==void 0?(Se.bindFramebuffer(36160,null),re=!1):mt.__webglFramebuffer===void 0?fe.setupRenderTarget(U):mt.__hasExternalTextures&&fe.rebindTextures(U,ue.get(U.texture).__webglTexture,ue.get(U.depthTexture).__webglTexture)}let ge=null,ot=!1,ht=!1;if(U){const mt=U.texture;(mt.isData3DTexture||mt.isDataArrayTexture)&&(ht=!0);const Vt=ue.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(ge=Vt[te],ot=!0):Ze.isWebGL2&&U.samples>0&&fe.useMultisampledRTT(U)===!1?ge=ue.get(U).__webglMultisampledFramebuffer:ge=Vt,E.copy(U.viewport),R.copy(U.scissor),P=U.scissorTest}else E.copy(G).multiplyScalar(C).floor(),R.copy(Y).multiplyScalar(C).floor(),P=X;if(Se.bindFramebuffer(36160,ge)&&Ze.drawBuffers&&re&&Se.drawBuffers(U,ge),Se.viewport(E),Se.scissor(R),Se.setScissorTest(P),ot){const mt=ue.get(U.texture);oe.framebufferTexture2D(36160,36064,34069+te,mt.__webglTexture,le)}else if(ht){const mt=ue.get(U.texture),Vt=te||0;oe.framebufferTextureLayer(36160,36064,mt.__webglTexture,le||0,Vt)}w=-1},this.readRenderTargetPixels=function(U,te,le,re,ge,ot,ht){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let yt=ue.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&ht!==void 0&&(yt=yt[ht]),yt){Se.bindFramebuffer(36160,yt);try{const mt=U.texture,Vt=mt.format,It=mt.type;if(Vt!==qr&&z.convert(Vt)!==oe.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const zt=It===_s&&(Xe.has("EXT_color_buffer_half_float")||Ze.isWebGL2&&Xe.has("EXT_color_buffer_float"));if(It!==Hl&&z.convert(It)!==oe.getParameter(35738)&&!(It===xs&&(Ze.isWebGL2||Xe.has("OES_texture_float")||Xe.has("WEBGL_color_buffer_float")))&&!zt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}te>=0&&te<=U.width-re&&le>=0&&le<=U.height-ge&&oe.readPixels(te,le,re,ge,z.convert(Vt),z.convert(It),ot)}finally{const mt=_!==null?ue.get(_).__webglFramebuffer:null;Se.bindFramebuffer(36160,mt)}}},this.copyFramebufferToTexture=function(U,te,le=0){if(te.isFramebufferTexture!==!0){console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");return}const re=Math.pow(2,-le),ge=Math.floor(te.image.width*re),ot=Math.floor(te.image.height*re);fe.setTexture2D(te,0),oe.copyTexSubImage2D(3553,le,0,0,U.x,U.y,ge,ot),Se.unbindTexture()},this.copyTextureToTexture=function(U,te,le,re=0){const ge=te.image.width,ot=te.image.height,ht=z.convert(le.format),yt=z.convert(le.type);fe.setTexture2D(le,0),oe.pixelStorei(37440,le.flipY),oe.pixelStorei(37441,le.premultiplyAlpha),oe.pixelStorei(3317,le.unpackAlignment),te.isDataTexture?oe.texSubImage2D(3553,re,U.x,U.y,ge,ot,ht,yt,te.image.data):te.isCompressedTexture?oe.compressedTexSubImage2D(3553,re,U.x,U.y,te.mipmaps[0].width,te.mipmaps[0].height,ht,te.mipmaps[0].data):oe.texSubImage2D(3553,re,U.x,U.y,ht,yt,te.image),re===0&&le.generateMipmaps&&oe.generateMipmap(3553),Se.unbindTexture()},this.copyTextureToTexture3D=function(U,te,le,re,ge=0){if(y.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ot=U.max.x-U.min.x+1,ht=U.max.y-U.min.y+1,yt=U.max.z-U.min.z+1,mt=z.convert(re.format),Vt=z.convert(re.type);let It;if(re.isData3DTexture)fe.setTexture3D(re,0),It=32879;else if(re.isDataArrayTexture)fe.setTexture2DArray(re,0),It=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}oe.pixelStorei(37440,re.flipY),oe.pixelStorei(37441,re.premultiplyAlpha),oe.pixelStorei(3317,re.unpackAlignment);const zt=oe.getParameter(3314),xn=oe.getParameter(32878),Zs=oe.getParameter(3316),Go=oe.getParameter(3315),Wo=oe.getParameter(32877),Ri=le.isCompressedTexture?le.mipmaps[0]:le.image;oe.pixelStorei(3314,Ri.width),oe.pixelStorei(32878,Ri.height),oe.pixelStorei(3316,U.min.x),oe.pixelStorei(3315,U.min.y),oe.pixelStorei(32877,U.min.z),le.isDataTexture||le.isData3DTexture?oe.texSubImage3D(It,ge,te.x,te.y,te.z,ot,ht,yt,mt,Vt,Ri.data):le.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),oe.compressedTexSubImage3D(It,ge,te.x,te.y,te.z,ot,ht,yt,mt,Ri.data)):oe.texSubImage3D(It,ge,te.x,te.y,te.z,ot,ht,yt,mt,Vt,Ri),oe.pixelStorei(3314,zt),oe.pixelStorei(32878,xn),oe.pixelStorei(3316,Zs),oe.pixelStorei(3315,Go),oe.pixelStorei(32877,Wo),ge===0&&re.generateMipmaps&&oe.generateMipmap(It),Se.unbindTexture()},this.initTexture=function(U){fe.setTexture2D(U,0),Se.unbindTexture()},this.resetState=function(){M=0,S=0,_=null,Se.reset(),xe.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}tn.prototype.isWebGLRenderer=!0;class v7 extends tn{}v7.prototype.isWebGL1Renderer=!0;class Sv{constructor(e,t=1,i=1e3){this.name="",this.color=new ve(e),this.near=t,this.far=i}clone(){return new Sv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Sv.prototype.isFog=!0;class rS extends Lt{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}rS.prototype.isScene=!0;class qc{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Vf,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=$r()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$r()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$r()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}qc.prototype.isInterleavedBuffer=!0;const Oi=new O;class Pc{constructor(e,t,i,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Oi.fromBufferAttribute(this,t),Oi.applyMatrix4(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Oi.fromBufferAttribute(this,t),Oi.applyNormalMatrix(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Oi.fromBufferAttribute(this,t),Oi.transformDirection(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new hn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Pc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Pc.prototype.isInterleavedBufferAttribute=!0;class dd extends Nn{constructor(e){super(),this.type="SpriteMaterial",this.color=new ve(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}dd.prototype.isSpriteMaterial=!0;let ku;const Bh=new O,Nu=new O,zu=new O,Bu=new ie,Uh=new ie,JP=new Me,om=new O,Vh=new O,am=new O,_2=new ie,bx=new ie,w2=new ie;class sS extends Lt{constructor(e){if(super(),this.type="Sprite",ku===void 0){ku=new ct;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new qc(t,5);ku.setIndex([0,1,2,0,2,3]),ku.setAttribute("position",new Pc(i,3,0,!1)),ku.setAttribute("uv",new Pc(i,2,3,!1))}this.geometry=ku,this.material=e!==void 0?e:new dd,this.center=new ie(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Nu.setFromMatrixScale(this.matrixWorld),JP.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),zu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Nu.multiplyScalar(-zu.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;lm(om.set(-.5,-.5,0),zu,o,Nu,r,s),lm(Vh.set(.5,-.5,0),zu,o,Nu,r,s),lm(am.set(.5,.5,0),zu,o,Nu,r,s),_2.set(0,0),bx.set(1,0),w2.set(1,1);let a=e.ray.intersectTriangle(om,Vh,am,!1,Bh);if(a===null&&(lm(Vh.set(-.5,.5,0),zu,o,Nu,r,s),bx.set(0,1),a=e.ray.intersectTriangle(om,am,Vh,!1,Bh),a===null))return;const u=e.ray.origin.distanceTo(Bh);u<e.near||u>e.far||t.push({distance:u,point:Bh.clone(),uv:Kn.getUV(Bh,om,Vh,am,_2,bx,w2,new ie),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}sS.prototype.isSprite=!0;function lm(n,e,t,i,r,s){Bu.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Uh.x=s*Bu.x-r*Bu.y,Uh.y=r*Bu.x+s*Bu.y):Uh.copy(Bu),n.copy(e),n.x+=Uh.x,n.y+=Uh.y,n.applyMatrix4(JP)}const S2=new O,M2=new Wt,b2=new Wt,y7=new O,T2=new Me;class Mv extends un{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Me,this.bindMatrixInverse=new Me}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Wt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;M2.fromBufferAttribute(r.attributes.skinIndex,e),b2.fromBufferAttribute(r.attributes.skinWeight,e),S2.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=b2.getComponent(s);if(o!==0){const a=M2.getComponent(s);T2.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(y7.copy(S2).applyMatrix4(T2),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}Mv.prototype.isSkinnedMesh=!0;class Wf extends Lt{constructor(){super(),this.type="Bone"}}Wf.prototype.isBone=!0;class oS extends zn{constructor(e=null,t=1,i=1,r,s,o,a,u,c=Ft,f=Ft,d,p){super(null,o,a,u,c,f,r,s,d,p),this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}oS.prototype.isDataTexture=!0;const E2=new Me,x7=new Me;class bv{constructor(e=[],t=[]){this.uuid=$r(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Me)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Me;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:x7;E2.multiplyMatrices(a,t[s]),E2.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new bv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=NP(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new oS(t,e,e,qr,xs);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Wf),this.bones.push(o),this.boneInverses.push(new Me().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class rw extends hn{constructor(e,t,i,r=1){typeof i=="number"&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}rw.prototype.isInstancedBufferAttribute=!0;const A2=new Me,C2=new Me,um=[],Hh=new un;class _7 extends un{constructor(e,t,i){super(e,t),this.instanceMatrix=new rw(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Hh.geometry=this.geometry,Hh.material=this.material,Hh.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,A2),C2.multiplyMatrices(i,A2),Hh.matrixWorld=C2,Hh.raycast(e,um);for(let o=0,a=um.length;o<a;o++){const u=um[o];u.instanceId=s,u.object=this,t.push(u)}um.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new rw(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}_7.prototype.isInstancedMesh=!0;class Ar extends Nn{constructor(e){super(),this.type="LineBasicMaterial",this.color=new ve(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Ar.prototype.isLineBasicMaterial=!0;const R2=new O,P2=new O,L2=new Me,Tx=new Bo,cm=new Ql;class Oa extends Lt{constructor(e=new ct,t=new Ar){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)R2.fromBufferAttribute(t,r-1),P2.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=R2.distanceTo(P2);e.setAttribute("lineDistance",new it(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),cm.copy(i.boundingSphere),cm.applyMatrix4(r),cm.radius+=s,e.ray.intersectsSphere(cm)===!1)return;L2.copy(r).invert(),Tx.copy(e.ray).applyMatrix4(L2);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=a*a,c=new O,f=new O,d=new O,p=new O,g=this.isLineSegments?2:1;if(i.isBufferGeometry){const v=i.index,x=i.attributes.position;if(v!==null){const M=Math.max(0,o.start),S=Math.min(v.count,o.start+o.count);for(let _=M,w=S-1;_<w;_+=g){const T=v.getX(_),E=v.getX(_+1);if(c.fromBufferAttribute(x,T),f.fromBufferAttribute(x,E),Tx.distanceSqToSegment(c,f,p,d)>u)continue;p.applyMatrix4(this.matrixWorld);const P=e.ray.origin.distanceTo(p);P<e.near||P>e.far||t.push({distance:P,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{const M=Math.max(0,o.start),S=Math.min(x.count,o.start+o.count);for(let _=M,w=S-1;_<w;_+=g){if(c.fromBufferAttribute(x,_),f.fromBufferAttribute(x,_+1),Tx.distanceSqToSegment(c,f,p,d)>u)continue;p.applyMatrix4(this.matrixWorld);const E=e.ray.origin.distanceTo(p);E<e.near||E>e.far||t.push({distance:E,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}else i.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Oa.prototype.isLine=!0;const D2=new O,I2=new O;class Fa extends Oa{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)D2.fromBufferAttribute(t,r),I2.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+D2.distanceTo(I2);e.setAttribute("lineDistance",new it(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Fa.prototype.isLineSegments=!0;class eL extends Oa{constructor(e,t){super(e,t),this.type="LineLoop"}}eL.prototype.isLineLoop=!0;class Tv extends Nn{constructor(e){super(),this.type="PointsMaterial",this.color=new ve(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}Tv.prototype.isPointsMaterial=!0;const O2=new Me,sw=new Bo,hm=new Ql,fm=new O;class tL extends Lt{constructor(e=new ct,t=new Tv){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),hm.copy(i.boundingSphere),hm.applyMatrix4(r),hm.radius+=s,e.ray.intersectsSphere(hm)===!1)return;O2.copy(r).invert(),sw.copy(e.ray).applyMatrix4(O2);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=a*a;if(i.isBufferGeometry){const c=i.index,d=i.attributes.position;if(c!==null){const p=Math.max(0,o.start),g=Math.min(c.count,o.start+o.count);for(let v=p,y=g;v<y;v++){const x=c.getX(v);fm.fromBufferAttribute(d,x),F2(fm,x,u,r,e,t,this)}}else{const p=Math.max(0,o.start),g=Math.min(d.count,o.start+o.count);for(let v=p,y=g;v<y;v++)fm.fromBufferAttribute(d,v),F2(fm,v,u,r,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}tL.prototype.isPoints=!0;function F2(n,e,t,i,r,s,o){const a=sw.distanceSqToPoint(n);if(a<t){const u=new O;sw.closestPointToPoint(n,u),u.applyMatrix4(i);const c=r.ray.origin.distanceTo(u);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:u,index:e,face:null,object:o})}}class nL extends zn{constructor(e,t,i,r,s,o,a,u,c){super(e,t,i,r,s,o,a,u,c),this.minFilter=o!==void 0?o:An,this.magFilter=s!==void 0?s:An,this.generateMipmaps=!1;const f=this;function d(){f.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}nL.prototype.isVideoTexture=!0;class w7 extends zn{constructor(e,t,i){super({width:e,height:t}),this.format=i,this.magFilter=Ft,this.minFilter=Ft,this.generateMipmaps=!1,this.needsUpdate=!0}}w7.prototype.isFramebufferTexture=!0;class S7 extends zn{constructor(e,t,i,r,s,o,a,u,c,f,d,p){super(null,o,a,u,c,f,r,s,d,p),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}S7.prototype.isCompressedTexture=!0;class M7 extends zn{constructor(e,t,i,r,s,o,a,u,c){super(e,t,i,r,s,o,a,u,c),this.needsUpdate=!0}}M7.prototype.isCanvasTexture=!0;class br{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,u=s-1,c;for(;a<=u;)if(r=Math.floor(a+(u-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)u=r-1;else{u=r;break}if(r=u,i[r]===o)return r/(s-1);const f=i[r],p=i[r+1]-f,g=(o-f)/p;return(r+g)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),u=t||(o.isVector2?new ie:new O);return u.copy(a).sub(o).normalize(),u}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new O,r=[],s=[],o=[],a=new O,u=new Me;for(let g=0;g<=e;g++){const v=g/e;r[g]=this.getTangentAt(v,new O)}s[0]=new O,o[0]=new O;let c=Number.MAX_VALUE;const f=Math.abs(r[0].x),d=Math.abs(r[0].y),p=Math.abs(r[0].z);f<=c&&(c=f,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),p<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),a.crossVectors(r[g-1],r[g]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(Yn(r[g-1].dot(r[g]),-1,1));s[g].applyMatrix4(u.makeRotationAxis(a,v))}o[g].crossVectors(r[g],s[g])}if(t===!0){let g=Math.acos(Yn(s[0].dot(s[e]),-1,1));g/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(g=-g);for(let v=1;v<=e;v++)s[v].applyMatrix4(u.makeRotationAxis(r[v],g*v)),o[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ev extends br{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,u=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=u}getPoint(e,t){const i=t||new ie,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let u=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const f=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=u-this.aX,g=c-this.aY;u=p*f-g*d+this.aX,c=p*d+g*f+this.aY}return i.set(u,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Ev.prototype.isEllipseCurve=!0;class iL extends Ev{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.type="ArcCurve"}}iL.prototype.isArcCurve=!0;function aS(){let n=0,e=0,t=0,i=0;function r(s,o,a,u){n=s,e=a,t=-3*s+3*o-2*a-u,i=2*s-2*o+a+u}return{initCatmullRom:function(s,o,a,u,c){r(o,a,c*(a-s),c*(u-o))},initNonuniformCatmullRom:function(s,o,a,u,c,f,d){let p=(o-s)/c-(a-s)/(c+f)+(a-o)/f,g=(a-o)/f-(u-o)/(f+d)+(u-a)/d;p*=f,g*=f,r(o,a,p,g)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const dm=new O,Ex=new aS,Ax=new aS,Cx=new aS;class rL extends br{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new O){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),u=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:u===0&&a===s-1&&(a=s-2,u=1);let c,f;this.closed||a>0?c=r[(a-1)%s]:(dm.subVectors(r[0],r[1]).add(r[0]),c=dm);const d=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?f=r[(a+2)%s]:(dm.subVectors(r[s-1],r[s-2]).add(r[s-1]),f=dm),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(d),g),y=Math.pow(d.distanceToSquared(p),g),x=Math.pow(p.distanceToSquared(f),g);y<1e-4&&(y=1),v<1e-4&&(v=y),x<1e-4&&(x=y),Ex.initNonuniformCatmullRom(c.x,d.x,p.x,f.x,v,y,x),Ax.initNonuniformCatmullRom(c.y,d.y,p.y,f.y,v,y,x),Cx.initNonuniformCatmullRom(c.z,d.z,p.z,f.z,v,y,x)}else this.curveType==="catmullrom"&&(Ex.initCatmullRom(c.x,d.x,p.x,f.x,this.tension),Ax.initCatmullRom(c.y,d.y,p.y,f.y,this.tension),Cx.initCatmullRom(c.z,d.z,p.z,f.z,this.tension));return i.set(Ex.calc(u),Ax.calc(u),Cx.calc(u)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new O().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}rL.prototype.isCatmullRomCurve3=!0;function k2(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,u=n*a;return(2*t-2*i+s+o)*u+(-3*t+3*i-2*s-o)*a+s*n+t}function b7(n,e){const t=1-n;return t*t*e}function T7(n,e){return 2*(1-n)*n*e}function E7(n,e){return n*n*e}function gf(n,e,t,i){return b7(n,e)+T7(n,t)+E7(n,i)}function A7(n,e){const t=1-n;return t*t*t*e}function C7(n,e){const t=1-n;return 3*t*t*n*e}function R7(n,e){return 3*(1-n)*n*n*e}function P7(n,e){return n*n*n*e}function vf(n,e,t,i,r){return A7(n,e)+C7(n,t)+R7(n,i)+P7(n,r)}class lS extends br{constructor(e=new ie,t=new ie,i=new ie,r=new ie){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ie){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(vf(e,r.x,s.x,o.x,a.x),vf(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}lS.prototype.isCubicBezierCurve=!0;class sL extends br{constructor(e=new O,t=new O,i=new O,r=new O){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new O){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(vf(e,r.x,s.x,o.x,a.x),vf(e,r.y,s.y,o.y,a.y),vf(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}sL.prototype.isCubicBezierCurve3=!0;class Av extends br{constructor(e=new ie,t=new ie){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ie){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new ie;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Av.prototype.isLineCurve=!0;class L7 extends br{constructor(e=new O,t=new O){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new O){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uS extends br{constructor(e=new ie,t=new ie,i=new ie){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ie){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(gf(e,r.x,s.x,o.x),gf(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}uS.prototype.isQuadraticBezierCurve=!0;class oL extends br{constructor(e=new O,t=new O,i=new O){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new O){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(gf(e,r.x,s.x,o.x),gf(e,r.y,s.y,o.y),gf(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}oL.prototype.isQuadraticBezierCurve3=!0;class cS extends br{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new ie){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,u=r[o===0?o:o-1],c=r[o],f=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(k2(a,u.x,c.x,f.x,d.x),k2(a,u.y,c.y,f.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ie().fromArray(r))}return this}}cS.prototype.isSplineCurve=!0;var aL=Object.freeze({__proto__:null,ArcCurve:iL,CatmullRomCurve3:rL,CubicBezierCurve:lS,CubicBezierCurve3:sL,EllipseCurve:Ev,LineCurve:Av,LineCurve3:L7,QuadraticBezierCurve:uS,QuadraticBezierCurve3:oL,SplineCurve:cS});class D7 extends br{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Av(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],u=a.getLength(),c=u===0?0:1-o/u;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,u=o.getPoints(a);for(let c=0;c<u.length;c++){const f=u[c];i&&i.equals(f)||(t.push(f),i=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new aL[r.type]().fromJSON(r))}return this}}class Cg extends D7{constructor(e){super(),this.type="Path",this.currentPoint=new ie,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Av(this.currentPoint.clone(),new ie(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new uS(this.currentPoint.clone(),new ie(e,t),new ie(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new lS(this.currentPoint.clone(),new ie(e,t),new ie(i,r),new ie(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new cS(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+a,t+u,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,u){const c=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+c,t+f,i,r,s,o,a,u),this}absellipse(e,t,i,r,s,o,a,u){const c=new Ev(e,t,i,r,s,o,a,u);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const f=c.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class hS extends ct{constructor(e=1,t=8,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],u=[],c=new O,f=new ie;o.push(0,0,0),a.push(0,0,1),u.push(.5,.5);for(let d=0,p=3;d<=t;d++,p+=3){const g=i+d/t*r;c.x=e*Math.cos(g),c.y=e*Math.sin(g),o.push(c.x,c.y,c.z),a.push(0,0,1),f.x=(o[p]/e+1)/2,f.y=(o[p+1]/e+1)/2,u.push(f.x,f.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new it(o,3)),this.setAttribute("normal",new it(a,3)),this.setAttribute("uv",new it(u,2))}static fromJSON(e){return new hS(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Cv extends ct{constructor(e=1,t=1,i=1,r=8,s=1,o=!1,a=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:u};const c=this;r=Math.floor(r),s=Math.floor(s);const f=[],d=[],p=[],g=[];let v=0;const y=[],x=i/2;let M=0;S(),o===!1&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(f),this.setAttribute("position",new it(d,3)),this.setAttribute("normal",new it(p,3)),this.setAttribute("uv",new it(g,2));function S(){const w=new O,T=new O;let E=0;const R=(t-e)/i;for(let P=0;P<=s;P++){const V=[],F=P/s,C=F*(t-e)+e;for(let N=0;N<=r;N++){const Q=N/r,G=Q*u+a,Y=Math.sin(G),X=Math.cos(G);T.x=C*Y,T.y=-F*i+x,T.z=C*X,d.push(T.x,T.y,T.z),w.set(Y,R,X).normalize(),p.push(w.x,w.y,w.z),g.push(Q,1-F),V.push(v++)}y.push(V)}for(let P=0;P<r;P++)for(let V=0;V<s;V++){const F=y[V][P],C=y[V+1][P],N=y[V+1][P+1],Q=y[V][P+1];f.push(F,C,Q),f.push(C,N,Q),E+=6}c.addGroup(M,E,0),M+=E}function _(w){const T=v,E=new ie,R=new O;let P=0;const V=w===!0?e:t,F=w===!0?1:-1;for(let N=1;N<=r;N++)d.push(0,x*F,0),p.push(0,F,0),g.push(.5,.5),v++;const C=v;for(let N=0;N<=r;N++){const G=N/r*u+a,Y=Math.cos(G),X=Math.sin(G);R.x=V*X,R.y=x*F,R.z=V*Y,d.push(R.x,R.y,R.z),p.push(0,F,0),E.x=Y*.5+.5,E.y=X*.5*F+.5,g.push(E.x,E.y),v++}for(let N=0;N<r;N++){const Q=T+N,G=C+N;w===!0?f.push(G,G+1,Q):f.push(G+1,G,Q),P+=3}c.addGroup(M,P,w===!0?1:2),M+=P}}static fromJSON(e){return new Cv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class fS extends Cv{constructor(e=1,t=1,i=8,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new fS(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Rv extends ct{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),f(),this.setAttribute("position",new it(s,3)),this.setAttribute("normal",new it(s.slice(),3)),this.setAttribute("uv",new it(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const _=new O,w=new O,T=new O;for(let E=0;E<t.length;E+=3)g(t[E+0],_),g(t[E+1],w),g(t[E+2],T),u(_,w,T,S)}function u(S,_,w,T){const E=T+1,R=[];for(let P=0;P<=E;P++){R[P]=[];const V=S.clone().lerp(w,P/E),F=_.clone().lerp(w,P/E),C=E-P;for(let N=0;N<=C;N++)N===0&&P===E?R[P][N]=V:R[P][N]=V.clone().lerp(F,N/C)}for(let P=0;P<E;P++)for(let V=0;V<2*(E-P)-1;V++){const F=Math.floor(V/2);V%2===0?(p(R[P][F+1]),p(R[P+1][F]),p(R[P][F])):(p(R[P][F+1]),p(R[P+1][F+1]),p(R[P+1][F]))}}function c(S){const _=new O;for(let w=0;w<s.length;w+=3)_.x=s[w+0],_.y=s[w+1],_.z=s[w+2],_.normalize().multiplyScalar(S),s[w+0]=_.x,s[w+1]=_.y,s[w+2]=_.z}function f(){const S=new O;for(let _=0;_<s.length;_+=3){S.x=s[_+0],S.y=s[_+1],S.z=s[_+2];const w=x(S)/2/Math.PI+.5,T=M(S)/Math.PI+.5;o.push(w,1-T)}v(),d()}function d(){for(let S=0;S<o.length;S+=6){const _=o[S+0],w=o[S+2],T=o[S+4],E=Math.max(_,w,T),R=Math.min(_,w,T);E>.9&&R<.1&&(_<.2&&(o[S+0]+=1),w<.2&&(o[S+2]+=1),T<.2&&(o[S+4]+=1))}}function p(S){s.push(S.x,S.y,S.z)}function g(S,_){const w=S*3;_.x=e[w+0],_.y=e[w+1],_.z=e[w+2]}function v(){const S=new O,_=new O,w=new O,T=new O,E=new ie,R=new ie,P=new ie;for(let V=0,F=0;V<s.length;V+=9,F+=6){S.set(s[V+0],s[V+1],s[V+2]),_.set(s[V+3],s[V+4],s[V+5]),w.set(s[V+6],s[V+7],s[V+8]),E.set(o[F+0],o[F+1]),R.set(o[F+2],o[F+3]),P.set(o[F+4],o[F+5]),T.copy(S).add(_).add(w).divideScalar(3);const C=x(T);y(E,F+0,S,C),y(R,F+2,_,C),y(P,F+4,w,C)}}function y(S,_,w,T){T<0&&S.x===1&&(o[_]=S.x-1),w.x===0&&w.z===0&&(o[_]=T/2/Math.PI+.5)}function x(S){return Math.atan2(S.z,-S.x)}function M(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}static fromJSON(e){return new Rv(e.vertices,e.indices,e.radius,e.details)}}new O;new O;new O;new Kn;class Ca extends Cg{constructor(e){super(e),this.uuid=$r(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Cg().fromJSON(r))}return this}}const I7={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=lL(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,u,c,f,d,p,g;if(i&&(s=z7(n,e,s,t)),n.length>80*t){a=c=n[0],u=f=n[1];for(let v=t;v<r;v+=t)d=n[v],p=n[v+1],d<a&&(a=d),p<u&&(u=p),d>c&&(c=d),p>f&&(f=p);g=Math.max(c-a,f-u),g=g!==0?1/g:0}return jf(s,o,t,a,u,g),o}};function lL(n,e,t,i,r){let s,o;if(r===Z7(n,e,t,i)>0)for(s=e;s<t;s+=i)o=N2(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=N2(s,n[s],n[s+1],o);return o&&Pv(o,o.next)&&(qf(o),o=o.next),o}function ka(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Pv(t,t.next)||Cn(t.prev,t,t.next)===0)){if(qf(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function jf(n,e,t,i,r,s,o){if(!n)return;!o&&s&&G7(n,i,r,s);let a=n,u,c;for(;n.prev!==n.next;){if(u=n.prev,c=n.next,s?F7(n,i,r,s):O7(n)){e.push(u.i/t),e.push(n.i/t),e.push(c.i/t),qf(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=k7(ka(n),e,t),jf(n,e,t,i,r,s,2)):o===2&&N7(n,e,t,i,r,s):jf(ka(n),e,t,i,r,s,1);break}}}function O7(n){const e=n.prev,t=n,i=n.next;if(Cn(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(rc(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&Cn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function F7(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Cn(r,s,o)>=0)return!1;const a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,u=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,c=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,f=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,d=ow(a,u,e,t,i),p=ow(c,f,e,t,i);let g=n.prevZ,v=n.nextZ;for(;g&&g.z>=d&&v&&v.z<=p;){if(g!==n.prev&&g!==n.next&&rc(r.x,r.y,s.x,s.y,o.x,o.y,g.x,g.y)&&Cn(g.prev,g,g.next)>=0||(g=g.prevZ,v!==n.prev&&v!==n.next&&rc(r.x,r.y,s.x,s.y,o.x,o.y,v.x,v.y)&&Cn(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;g&&g.z>=d;){if(g!==n.prev&&g!==n.next&&rc(r.x,r.y,s.x,s.y,o.x,o.y,g.x,g.y)&&Cn(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;v&&v.z<=p;){if(v!==n.prev&&v!==n.next&&rc(r.x,r.y,s.x,s.y,o.x,o.y,v.x,v.y)&&Cn(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function k7(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!Pv(r,s)&&uL(r,i,i.next,s)&&Xf(r,s)&&Xf(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),qf(i),qf(i.next),i=n=s),i=i.next}while(i!==n);return ka(i)}function N7(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&X7(o,a)){let u=cL(o,a);o=ka(o,o.next),u=ka(u,u.next),jf(o,e,t,i,r,s),jf(u,e,t,i,r,s);return}a=a.next}o=o.next}while(o!==n)}function z7(n,e,t,i){const r=[];let s,o,a,u,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,u=s<o-1?e[s+1]*i:n.length,c=lL(n,a,u,i,!1),c===c.next&&(c.steiner=!0),r.push(j7(c));for(r.sort(B7),s=0;s<r.length;s++)U7(r[s],t),t=ka(t,t.next);return t}function B7(n,e){return n.x-e.x}function U7(n,e){if(e=V7(n,e),e){const t=cL(e,n);ka(e,e.next),ka(t,t.next)}}function V7(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,o;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const p=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=i&&p>s){if(s=p,p===i){if(r===t.y)return t;if(r===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(i===s)return o;const a=o,u=o.x,c=o.y;let f=1/0,d;t=o;do i>=t.x&&t.x>=u&&i!==t.x&&rc(r<c?i:s,r,u,c,r<c?s:i,r,t.x,t.y)&&(d=Math.abs(r-t.y)/(i-t.x),Xf(t,n)&&(d<f||d===f&&(t.x>o.x||t.x===o.x&&H7(o,t)))&&(o=t,f=d)),t=t.next;while(t!==a);return o}function H7(n,e){return Cn(n.prev,n,e.prev)<0&&Cn(e.next,n,n.next)<0}function G7(n,e,t,i){let r=n;do r.z===null&&(r.z=ow(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,W7(r)}function W7(n){let e,t,i,r,s,o,a,u,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(u=c;a>0||u>0&&i;)a!==0&&(u===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,u--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function ow(n,e,t,i,r){return n=32767*(n-t)*r,e=32767*(e-i)*r,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function j7(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function rc(n,e,t,i,r,s,o,a){return(r-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(i-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(r-o)*(i-a)>=0}function X7(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!q7(n,e)&&(Xf(n,e)&&Xf(e,n)&&Y7(n,e)&&(Cn(n.prev,n,e.prev)||Cn(n,e.prev,e))||Pv(n,e)&&Cn(n.prev,n,n.next)>0&&Cn(e.prev,e,e.next)>0)}function Cn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Pv(n,e){return n.x===e.x&&n.y===e.y}function uL(n,e,t,i){const r=mm(Cn(n,e,t)),s=mm(Cn(n,e,i)),o=mm(Cn(t,i,n)),a=mm(Cn(t,i,e));return!!(r!==s&&o!==a||r===0&&pm(n,t,e)||s===0&&pm(n,i,e)||o===0&&pm(t,n,i)||a===0&&pm(t,e,i))}function pm(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function mm(n){return n>0?1:n<0?-1:0}function q7(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&uL(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Xf(n,e){return Cn(n.prev,n,n.next)<0?Cn(n,e,n.next)>=0&&Cn(n,n.prev,e)>=0:Cn(n,e,n.prev)<0||Cn(n,n.next,e)<0}function Y7(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function cL(n,e){const t=new aw(n.i,n.x,n.y),i=new aw(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function N2(n,e,t,i){const r=new aw(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function qf(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function aw(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Z7(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class To{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return To.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];z2(e),B2(i,e);let o=e.length;t.forEach(z2);for(let u=0;u<t.length;u++)r.push(o),o+=t[u].length,B2(i,t[u]);const a=I7.triangulate(i,r);for(let u=0;u<a.length;u+=3)s.push(a.slice(u,u+3));return s}}function z2(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function B2(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Na extends ct{constructor(e=new Ca([new ie(.5,.5),new ie(-.5,.5),new ie(-.5,-.5),new ie(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,u=e.length;a<u;a++){const c=e[a];o(c)}this.setAttribute("position",new it(r,3)),this.setAttribute("uv",new it(s,2)),this.computeVertexNormals();function o(a){const u=[],c=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1;let d=t.depth!==void 0?t.depth:1,p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,g=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:g-.1,y=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const M=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:K7;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),d=t.amount);let _,w=!1,T,E,R,P;M&&(_=M.getSpacedPoints(f),w=!0,p=!1,T=M.computeFrenetFrames(f,!1),E=new O,R=new O,P=new O),p||(x=0,g=0,v=0,y=0);const V=a.extractPoints(c);let F=V.shape;const C=V.holes;if(!To.isClockWise(F)){F=F.reverse();for(let ue=0,fe=C.length;ue<fe;ue++){const ye=C[ue];To.isClockWise(ye)&&(C[ue]=ye.reverse())}}const Q=To.triangulateShape(F,C),G=F;for(let ue=0,fe=C.length;ue<fe;ue++){const ye=C[ue];F=F.concat(ye)}function Y(ue,fe,ye){return fe||console.error("THREE.ExtrudeGeometry: vec does not exist"),fe.clone().multiplyScalar(ye).add(ue)}const X=F.length,K=Q.length;function B(ue,fe,ye){let Ne,De,qe;const $e=ue.x-fe.x,Ue=ue.y-fe.y,_t=ye.x-ue.x,st=ye.y-ue.y,k=$e*$e+Ue*Ue,D=$e*st-Ue*_t;if(Math.abs(D)>Number.EPSILON){const J=Math.sqrt(k),he=Math.sqrt(_t*_t+st*st),me=fe.x-Ue/J,Ce=fe.y+$e/J,be=ye.x-st/he,z=ye.y+_t/he,xe=((be-me)*st-(z-Ce)*_t)/($e*st-Ue*_t);Ne=me+$e*xe-ue.x,De=Ce+Ue*xe-ue.y;const He=Ne*Ne+De*De;if(He<=2)return new ie(Ne,De);qe=Math.sqrt(He/2)}else{let J=!1;$e>Number.EPSILON?_t>Number.EPSILON&&(J=!0):$e<-Number.EPSILON?_t<-Number.EPSILON&&(J=!0):Math.sign(Ue)===Math.sign(st)&&(J=!0),J?(Ne=-Ue,De=$e,qe=Math.sqrt(k)):(Ne=$e,De=Ue,qe=Math.sqrt(k/2))}return new ie(Ne/qe,De/qe)}const Z=[];for(let ue=0,fe=G.length,ye=fe-1,Ne=ue+1;ue<fe;ue++,ye++,Ne++)ye===fe&&(ye=0),Ne===fe&&(Ne=0),Z[ue]=B(G[ue],G[ye],G[Ne]);const ee=[];let se,ae=Z.concat();for(let ue=0,fe=C.length;ue<fe;ue++){const ye=C[ue];se=[];for(let Ne=0,De=ye.length,qe=De-1,$e=Ne+1;Ne<De;Ne++,qe++,$e++)qe===De&&(qe=0),$e===De&&($e=0),se[Ne]=B(ye[Ne],ye[qe],ye[$e]);ee.push(se),ae=ae.concat(se)}for(let ue=0;ue<x;ue++){const fe=ue/x,ye=g*Math.cos(fe*Math.PI/2),Ne=v*Math.sin(fe*Math.PI/2)+y;for(let De=0,qe=G.length;De<qe;De++){const $e=Y(G[De],Z[De],Ne);rt($e.x,$e.y,-ye)}for(let De=0,qe=C.length;De<qe;De++){const $e=C[De];se=ee[De];for(let Ue=0,_t=$e.length;Ue<_t;Ue++){const st=Y($e[Ue],se[Ue],Ne);rt(st.x,st.y,-ye)}}}const Le=v+y;for(let ue=0;ue<X;ue++){const fe=p?Y(F[ue],ae[ue],Le):F[ue];w?(R.copy(T.normals[0]).multiplyScalar(fe.x),E.copy(T.binormals[0]).multiplyScalar(fe.y),P.copy(_[0]).add(R).add(E),rt(P.x,P.y,P.z)):rt(fe.x,fe.y,0)}for(let ue=1;ue<=f;ue++)for(let fe=0;fe<X;fe++){const ye=p?Y(F[fe],ae[fe],Le):F[fe];w?(R.copy(T.normals[ue]).multiplyScalar(ye.x),E.copy(T.binormals[ue]).multiplyScalar(ye.y),P.copy(_[ue]).add(R).add(E),rt(P.x,P.y,P.z)):rt(ye.x,ye.y,d/f*ue)}for(let ue=x-1;ue>=0;ue--){const fe=ue/x,ye=g*Math.cos(fe*Math.PI/2),Ne=v*Math.sin(fe*Math.PI/2)+y;for(let De=0,qe=G.length;De<qe;De++){const $e=Y(G[De],Z[De],Ne);rt($e.x,$e.y,d+ye)}for(let De=0,qe=C.length;De<qe;De++){const $e=C[De];se=ee[De];for(let Ue=0,_t=$e.length;Ue<_t;Ue++){const st=Y($e[Ue],se[Ue],Ne);w?rt(st.x,st.y+_[f-1].y,_[f-1].x+ye):rt(st.x,st.y,d+ye)}}}ze(),Pe();function ze(){const ue=r.length/3;if(p){let fe=0,ye=X*fe;for(let Ne=0;Ne<K;Ne++){const De=Q[Ne];Xe(De[2]+ye,De[1]+ye,De[0]+ye)}fe=f+x*2,ye=X*fe;for(let Ne=0;Ne<K;Ne++){const De=Q[Ne];Xe(De[0]+ye,De[1]+ye,De[2]+ye)}}else{for(let fe=0;fe<K;fe++){const ye=Q[fe];Xe(ye[2],ye[1],ye[0])}for(let fe=0;fe<K;fe++){const ye=Q[fe];Xe(ye[0]+X*f,ye[1]+X*f,ye[2]+X*f)}}i.addGroup(ue,r.length/3-ue,0)}function Pe(){const ue=r.length/3;let fe=0;oe(G,fe),fe+=G.length;for(let ye=0,Ne=C.length;ye<Ne;ye++){const De=C[ye];oe(De,fe),fe+=De.length}i.addGroup(ue,r.length/3-ue,1)}function oe(ue,fe){let ye=ue.length;for(;--ye>=0;){const Ne=ye;let De=ye-1;De<0&&(De=ue.length-1);for(let qe=0,$e=f+x*2;qe<$e;qe++){const Ue=X*qe,_t=X*(qe+1),st=fe+Ne+Ue,k=fe+De+Ue,D=fe+De+_t,J=fe+Ne+_t;Ze(st,k,D,J)}}}function rt(ue,fe,ye){u.push(ue),u.push(fe),u.push(ye)}function Xe(ue,fe,ye){Se(ue),Se(fe),Se(ye);const Ne=r.length/3,De=S.generateTopUV(i,r,Ne-3,Ne-2,Ne-1);Qe(De[0]),Qe(De[1]),Qe(De[2])}function Ze(ue,fe,ye,Ne){Se(ue),Se(fe),Se(Ne),Se(fe),Se(ye),Se(Ne);const De=r.length/3,qe=S.generateSideWallUV(i,r,De-6,De-3,De-2,De-1);Qe(qe[0]),Qe(qe[1]),Qe(qe[3]),Qe(qe[1]),Qe(qe[2]),Qe(qe[3])}function Se(ue){r.push(u[ue*3+0]),r.push(u[ue*3+1]),r.push(u[ue*3+2])}function Qe(ue){s.push(ue.x),s.push(ue.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return $7(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new aL[r.type]().fromJSON(r)),new Na(i,e.options)}}const K7={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],u=e[i*3+1],c=e[r*3],f=e[r*3+1];return[new ie(s,o),new ie(a,u),new ie(c,f)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],u=e[t*3+2],c=e[i*3],f=e[i*3+1],d=e[i*3+2],p=e[r*3],g=e[r*3+1],v=e[r*3+2],y=e[s*3],x=e[s*3+1],M=e[s*3+2];return Math.abs(a-f)<Math.abs(o-c)?[new ie(o,1-u),new ie(c,1-d),new ie(p,1-v),new ie(y,1-M)]:[new ie(a,1-u),new ie(f,1-d),new ie(g,1-v),new ie(x,1-M)]}};function $7(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Lv extends Rv{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Lv(e.radius,e.detail)}}class dS extends ct{constructor(e=new Ca([new ie(0,.5),new ie(-.5,-.5),new ie(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,u=0;if(Array.isArray(e)===!1)c(e);else for(let f=0;f<e.length;f++)c(e[f]),this.addGroup(a,u,f),a+=u,u=0;this.setIndex(i),this.setAttribute("position",new it(r,3)),this.setAttribute("normal",new it(s,3)),this.setAttribute("uv",new it(o,2));function c(f){const d=r.length/3,p=f.extractPoints(t);let g=p.shape;const v=p.holes;To.isClockWise(g)===!1&&(g=g.reverse());for(let x=0,M=v.length;x<M;x++){const S=v[x];To.isClockWise(S)===!0&&(v[x]=S.reverse())}const y=To.triangulateShape(g,v);for(let x=0,M=v.length;x<M;x++){const S=v[x];g=g.concat(S)}for(let x=0,M=g.length;x<M;x++){const S=g[x];r.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let x=0,M=y.length;x<M;x++){const S=y[x],_=S[0]+d,w=S[1]+d,T=S[2]+d;i.push(_,w,T),u+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Q7(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new dS(i,e.curveSegments)}}function Q7(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Dv extends ct{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const u=Math.min(o+a,Math.PI);let c=0;const f=[],d=new O,p=new O,g=[],v=[],y=[],x=[];for(let M=0;M<=i;M++){const S=[],_=M/i;let w=0;M==0&&o==0?w=.5/t:M==i&&u==Math.PI&&(w=-.5/t);for(let T=0;T<=t;T++){const E=T/t;d.x=-e*Math.cos(r+E*s)*Math.sin(o+_*a),d.y=e*Math.cos(o+_*a),d.z=e*Math.sin(r+E*s)*Math.sin(o+_*a),v.push(d.x,d.y,d.z),p.copy(d).normalize(),y.push(p.x,p.y,p.z),x.push(E+w,1-_),S.push(c++)}f.push(S)}for(let M=0;M<i;M++)for(let S=0;S<t;S++){const _=f[M][S+1],w=f[M][S],T=f[M+1][S],E=f[M+1][S+1];(M!==0||o>0)&&g.push(_,w,E),(M!==i-1||u<Math.PI)&&g.push(w,T,E)}this.setIndex(g),this.setAttribute("position",new it(v,3)),this.setAttribute("normal",new it(y,3)),this.setAttribute("uv",new it(x,2))}static fromJSON(e){return new Dv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class pS extends Rv{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new pS(e.radius,e.detail)}}class mS extends ct{constructor(e=1,t=.4,i=8,r=6,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],u=[],c=[],f=new O,d=new O,p=new O;for(let g=0;g<=i;g++)for(let v=0;v<=r;v++){const y=v/r*s,x=g/i*Math.PI*2;d.x=(e+t*Math.cos(x))*Math.cos(y),d.y=(e+t*Math.cos(x))*Math.sin(y),d.z=t*Math.sin(x),a.push(d.x,d.y,d.z),f.x=e*Math.cos(y),f.y=e*Math.sin(y),p.subVectors(d,f).normalize(),u.push(p.x,p.y,p.z),c.push(v/r),c.push(g/i)}for(let g=1;g<=i;g++)for(let v=1;v<=r;v++){const y=(r+1)*g+v-1,x=(r+1)*(g-1)+v-1,M=(r+1)*(g-1)+v,S=(r+1)*g+v;o.push(y,x,S),o.push(x,M,S)}this.setIndex(o),this.setAttribute("position",new it(a,3)),this.setAttribute("normal",new it(u,3)),this.setAttribute("uv",new it(c,2))}static fromJSON(e){return new mS(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class hL extends Nn{constructor(e){super(),this.type="ShadowMaterial",this.color=new ve(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}hL.prototype.isShadowMaterial=!0;class fL extends Nt{constructor(e){super(e),this.type="RawShaderMaterial"}}fL.prototype.isRawShaderMaterial=!0;class Ss extends Nn{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ve(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qa,this.normalScale=new ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Ss.prototype.isMeshStandardMaterial=!0;class Ka extends Ss{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ie(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Yn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new ve(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new ve(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ve(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}Ka.prototype.isMeshPhysicalMaterial=!0;class yf extends Nn{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new ve(16777215),this.specular=new ve(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qa,this.normalScale=new ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=pv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}yf.prototype.isMeshPhongMaterial=!0;class sc extends Nn{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ve(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qa,this.normalScale=new ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}sc.prototype.isMeshToonMaterial=!0;class Iv extends Nn{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qa,this.normalScale=new ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}Iv.prototype.isMeshNormalMaterial=!0;class gS extends Nn{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new ve(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=pv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}gS.prototype.isMeshLambertMaterial=!0;class dL extends Nn{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ve(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qa,this.normalScale=new ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}dL.prototype.isMeshMatcapMaterial=!0;class pL extends Ar{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}pL.prototype.isLineDashedMaterial=!0;const J7={ShadowMaterial:hL,SpriteMaterial:dd,RawShaderMaterial:fL,ShaderMaterial:Nt,PointsMaterial:Tv,MeshPhysicalMaterial:Ka,MeshStandardMaterial:Ss,MeshPhongMaterial:yf,MeshToonMaterial:sc,MeshNormalMaterial:Iv,MeshLambertMaterial:gS,MeshDepthMaterial:Xc,MeshDistanceMaterial:iS,MeshBasicMaterial:pi,MeshMatcapMaterial:dL,LineDashedMaterial:pL,LineBasicMaterial:Ar,Material:Nn};Nn.fromType=function(n){return new J7[n]};const wn={arraySlice:function(n,e,t){return wn.isTypedArray(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i},sortedArray:function(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let u=0;u!==e;++u)r[o++]=n[a+u]}return r},flattenJSON:function(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)},subclip:function(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let u=0;u<s.tracks.length;++u){const c=s.tracks[u],f=c.getValueSize(),d=[],p=[];for(let g=0;g<c.times.length;++g){const v=c.times[g]*r;if(!(v<t||v>=i)){d.push(c.times[g]);for(let y=0;y<f;++y)p.push(c.values[g*f+y])}}d.length!==0&&(c.times=wn.convertArray(d,c.times.constructor),c.values=wn.convertArray(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let u=0;u<s.tracks.length;++u)a>s.tracks[u].times[0]&&(a=s.tracks[u].times[0]);for(let u=0;u<s.tracks.length;++u)s.tracks[u].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],u=a.ValueTypeName;if(u==="bool"||u==="string")continue;const c=n.tracks.find(function(M){return M.name===a.name&&M.ValueTypeName===u});if(c===void 0)continue;let f=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);let p=0;const g=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);const v=a.times.length-1;let y;if(s<=a.times[0]){const M=f,S=d-f;y=wn.arraySlice(a.values,M,S)}else if(s>=a.times[v]){const M=v*d+f,S=M+d-f;y=wn.arraySlice(a.values,M,S)}else{const M=a.createInterpolant(),S=f,_=d-f;M.evaluate(s),y=wn.arraySlice(M.resultBuffer,S,_)}u==="quaternion"&&new Mn().fromArray(y).normalize().conjugate().toArray(y);const x=c.times.length;for(let M=0;M<x;++M){const S=M*g+p;if(u==="quaternion")Mn.multiplyQuaternionsFlat(c.values,S,y,0,c.values,S);else{const _=g-p*2;for(let w=0;w<_;++w)c.values[S+w]-=y[w]}}}return n.blendMode=OP,n}};class Io{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,e,s)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let u=i-2;;){if(s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(i===u)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(r===void 0)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,s,e)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Io.prototype.beforeStart_=Io.prototype.copySampleValue_;Io.prototype.afterEnd_=Io.prototype.copySampleValue_;class ej extends Io{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:tc,endingEnd:tc}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],u=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case nc:s=e,a=2*t-i;break;case Tg:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(u===void 0)switch(this.getSettings_().endingEnd){case nc:o=e,u=2*i-t;break;case Tg:o=1,u=i+r[1]-r[0];break;default:o=e-1,u=t}const c=(i-t)*.5,f=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(u-i),this._offsetPrev=s*f,this._offsetNext=o*f}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,u=e*a,c=u-a,f=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,g=this._weightNext,v=(i-t)/(r-t),y=v*v,x=y*v,M=-p*x+2*p*y-p*v,S=(1+p)*x+(-1.5-2*p)*y+(-.5+p)*v+1,_=(-1-g)*x+(1.5+g)*y+.5*v,w=g*x-g*y;for(let T=0;T!==a;++T)s[T]=M*o[f+T]+S*o[c+T]+_*o[u+T]+w*o[d+T];return s}}class mL extends Io{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,u=e*a,c=u-a,f=(i-t)/(r-t),d=1-f;for(let p=0;p!==a;++p)s[p]=o[c+p]*d+o[u+p]*f;return s}}class tj extends Io{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class qs{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=wn.convertArray(t,this.TimeBufferType),this.values=wn.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:wn.convertArray(e.times,Array),values:wn.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new tj(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new mL(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ej(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Uf:t=this.InterpolantFactoryMethodDiscrete;break;case Cc:t=this.InterpolantFactoryMethodLinear;break;case Ky:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Uf;case this.InterpolantFactoryMethodLinear:return Cc;case this.InterpolantFactoryMethodSmooth:return Ky}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=wn.arraySlice(i,s,o),this.values=wn.arraySlice(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const u=i[a];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,u),e=!1;break}if(o!==null&&o>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,u,o),e=!1;break}o=u}if(r!==void 0&&wn.isTypedArray(r))for(let a=0,u=r.length;a!==u;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=wn.arraySlice(this.times),t=wn.arraySlice(this.values),i=this.getValueSize(),r=this.getInterpolation()===Ky,s=e.length-1;let o=1;for(let a=1;a<s;++a){let u=!1;const c=e[a],f=e[a+1];if(c!==f&&(a!==1||c!==e[0]))if(r)u=!0;else{const d=a*i,p=d-i,g=d+i;for(let v=0;v!==i;++v){const y=t[d+v];if(y!==t[p+v]||y!==t[g+v]){u=!0;break}}}if(u){if(a!==o){e[o]=e[a];const d=a*i,p=o*i;for(let g=0;g!==i;++g)t[p+g]=t[d+g]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,u=o*i,c=0;c!==i;++c)t[u+c]=t[a+c];++o}return o!==e.length?(this.times=wn.arraySlice(e,0,o),this.values=wn.arraySlice(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=wn.arraySlice(this.times,0),t=wn.arraySlice(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}qs.prototype.TimeBufferType=Float32Array;qs.prototype.ValueBufferType=Float32Array;qs.prototype.DefaultInterpolation=Cc;class Yc extends qs{}Yc.prototype.ValueTypeName="bool";Yc.prototype.ValueBufferType=Array;Yc.prototype.DefaultInterpolation=Uf;Yc.prototype.InterpolantFactoryMethodLinear=void 0;Yc.prototype.InterpolantFactoryMethodSmooth=void 0;class gL extends qs{}gL.prototype.ValueTypeName="color";class Wl extends qs{}Wl.prototype.ValueTypeName="number";class nj extends Io{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,u=(i-t)/(r-t);let c=e*a;for(let f=c+a;c!==f;c+=4)Mn.slerpFlat(s,0,o,c-a,o,c,u);return s}}class za extends qs{InterpolantFactoryMethodLinear(e){return new nj(this.times,this.values,this.getValueSize(),e)}}za.prototype.ValueTypeName="quaternion";za.prototype.DefaultInterpolation=Cc;za.prototype.InterpolantFactoryMethodSmooth=void 0;class Zc extends qs{}Zc.prototype.ValueTypeName="string";Zc.prototype.ValueBufferType=Array;Zc.prototype.DefaultInterpolation=Uf;Zc.prototype.InterpolantFactoryMethodLinear=void 0;Zc.prototype.InterpolantFactoryMethodSmooth=void 0;class Lc extends qs{}Lc.prototype.ValueTypeName="vector";class Yf{constructor(e,t=-1,i,r=K1){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=$r(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(rj(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(qs.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let u=[],c=[];u.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const f=wn.getKeyframeOrder(u);u=wn.sortedArray(u,1,f),c=wn.sortedArray(c,1,f),!r&&u[0]===0&&(u.push(s),c.push(c[0])),o.push(new Wl(".morphTargetInfluences["+t[a].name+"]",u,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,u=e.length;a<u;a++){const c=e[a],f=c.name.match(s);if(f&&f.length>1){const d=f[1];let p=r[d];p||(r[d]=p=[]),p.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,p,g,v,y){if(g.length!==0){const x=[],M=[];wn.flattenJSON(g,x,M,v),x.length!==0&&y.push(new d(p,x,M))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let u=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const p=c[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const g={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let y=0;y<p[v].morphTargets.length;y++)g[p[v].morphTargets[y]]=-1;for(const y in g){const x=[],M=[];for(let S=0;S!==p[v].morphTargets.length;++S){const _=p[v];x.push(_.time),M.push(_.morphTarget===y?1:0)}r.push(new Wl(".morphTargetInfluence["+y+"]",x,M))}u=g.length*o}else{const g=".bones["+t[d].name+"]";i(Lc,g+".position",p,"pos",r),i(za,g+".quaternion",p,"rot",r),i(Lc,g+".scale",p,"scl",r)}}return r.length===0?null:new this(s,u,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function ij(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Wl;case"vector":case"vector2":case"vector3":case"vector4":return Lc;case"color":return gL;case"quaternion":return za;case"bool":case"boolean":return Yc;case"string":return Zc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function rj(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=ij(n.type);if(n.times===void 0){const t=[],i=[];wn.flattenJSON(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Dc={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class sj{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,u;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(f){a++,s===!1&&r.onStart!==void 0&&r.onStart(f,o,a),s=!0},this.itemEnd=function(f){o++,r.onProgress!==void 0&&r.onProgress(f,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return u?u(f):f},this.setURLModifier=function(f){return u=f,this},this.addHandler=function(f,d){return c.push(f,d),this},this.removeHandler=function(f){const d=c.indexOf(f);return d!==-1&&c.splice(d,2),this},this.getHandler=function(f){for(let d=0,p=c.length;d<p;d+=2){const g=c[d],v=c[d+1];if(g.global&&(g.lastIndex=0),g.test(f))return v}return null}}}const oj=new sj;class ns{constructor(e){this.manager=e!==void 0?e:oj,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const co={};class Ba extends ns{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Dc.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(co[e]!==void 0){co[e].push({onLoad:t,onProgress:i,onError:r});return}co[e]=[],co[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,u=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||c.body===void 0||c.body.getReader===void 0)return c;const f=co[e],d=c.body.getReader(),p=c.headers.get("Content-Length"),g=p?parseInt(p):0,v=g!==0;let y=0;const x=new ReadableStream({start(M){S();function S(){d.read().then(({done:_,value:w})=>{if(_)M.close();else{y+=w.byteLength;const T=new ProgressEvent("progress",{lengthComputable:v,loaded:y,total:g});for(let E=0,R=f.length;E<R;E++){const P=f[E];P.onProgress&&P.onProgress(T)}M.enqueue(w),S()}})}}});return new Response(x)}else throw Error(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`)}).then(c=>{switch(u){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return c.json();default:if(a===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,g=new TextDecoder(p);return c.arrayBuffer().then(v=>g.decode(v))}}}).then(c=>{Dc.add(e,c);const f=co[e];delete co[e];for(let d=0,p=f.length;d<p;d++){const g=f[d];g.onLoad&&g.onLoad(c)}}).catch(c=>{const f=co[e];if(f===void 0)throw this.manager.itemError(e),c;delete co[e];for(let d=0,p=f.length;d<p;d++){const g=f[d];g.onError&&g.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class vL extends ns{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Dc.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Gf("img");function u(){f(),Dc.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){f(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function f(){a.removeEventListener("load",u,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",u,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class yL extends ns{constructor(e){super(e)}load(e,t,i,r){const s=new xv,o=new vL(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function u(c){o.load(e[c],function(f){s.images[c]=f,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)u(c);return s}}class aj extends ns{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new oS,a=new Ba(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(u){const c=s.parse(u);!c||(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:bi,o.wrapT=c.wrapT!==void 0?c.wrapT:bi,o.magFilter=c.magFilter!==void 0?c.magFilter:An,o.minFilter=c.minFilter!==void 0?c.minFilter:An,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Kl),c.mipmapCount===1&&(o.minFilter=An),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c))},i,r),o}}class Ov extends ns{constructor(e){super(e)}load(e,t,i,r){const s=new zn,o=new vL(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Hs extends Lt{constructor(e,t=1){super(),this.type="Light",this.color=new ve(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}Hs.prototype.isLight=!0;class vS extends Hs{constructor(e,t,i){super(e,i),this.type="HemisphereLight",this.position.copy(Lt.DefaultUp),this.updateMatrix(),this.groundColor=new ve(t)}copy(e){return Hs.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}vS.prototype.isHemisphereLight=!0;const U2=new Me,V2=new O,H2=new O;class yS{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ie(512,512),this.map=null,this.mapPass=null,this.matrix=new Me,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new hd,this._frameExtents=new ie(1,1),this._viewportCount=1,this._viewports=[new Wt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;V2.setFromMatrixPosition(e.matrixWorld),t.position.copy(V2),H2.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(H2),t.updateMatrixWorld(),U2.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(U2),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class xL extends yS{constructor(){super(new jn(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,i=Hf*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}xL.prototype.isSpotLightShadow=!0;class Fv extends Hs{constructor(e,t,i=0,r=Math.PI/3,s=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(Lt.DefaultUp),this.updateMatrix(),this.target=new Lt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.shadow=new xL}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Fv.prototype.isSpotLight=!0;const G2=new Me,Gh=new O,Rx=new O;class _L extends yS{constructor(){super(new jn(90,1,.5,500)),this._frameExtents=new ie(4,2),this._viewportCount=6,this._viewports=[new Wt(2,1,1,1),new Wt(0,1,1,1),new Wt(3,1,1,1),new Wt(1,1,1,1),new Wt(3,0,1,1),new Wt(1,0,1,1)],this._cubeDirections=[new O(1,0,0),new O(-1,0,0),new O(0,0,1),new O(0,0,-1),new O(0,1,0),new O(0,-1,0)],this._cubeUps=[new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,0,1),new O(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Gh.setFromMatrixPosition(e.matrixWorld),i.position.copy(Gh),Rx.copy(i.position),Rx.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Rx),i.updateMatrixWorld(),r.makeTranslation(-Gh.x,-Gh.y,-Gh.z),G2.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(G2)}}_L.prototype.isPointLightShadow=!0;class Zf extends Hs{constructor(e,t,i=0,r=1){super(e,t),this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new _L}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}Zf.prototype.isPointLight=!0;class wL extends yS{constructor(){super(new Za(-5,5,5,-5,.5,500))}}wL.prototype.isDirectionalLightShadow=!0;class pd extends Hs{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(Lt.DefaultUp),this.updateMatrix(),this.target=new Lt,this.shadow=new wL}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}pd.prototype.isDirectionalLight=!0;class xS extends Hs{constructor(e,t){super(e,t),this.type="AmbientLight"}}xS.prototype.isAmbientLight=!0;class SL extends Hs{constructor(e,t,i=10,r=10){super(e,t),this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}SL.prototype.isRectAreaLight=!0;class ML{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new O)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}ML.prototype.isSphericalHarmonics3=!0;class _S extends Hs{constructor(e=new ML,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}_S.prototype.isLightProbe=!0;class Ms{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class lj extends ct{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}lj.prototype.isInstancedBufferGeometry=!0;class bL extends ns{constructor(e){super(e),typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Dc.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){Dc.add(e,u),t&&t(u),s.manager.itemEnd(e)}).catch(function(u){r&&r(u),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}bL.prototype.isImageBitmapLoader=!0;let gm;const uj={getContext:function(){return gm===void 0&&(gm=new(window.AudioContext||window.webkitAudioContext)),gm},setContext:function(n){gm=n}};class cj extends ns{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ba(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const u=a.slice(0);uj.getContext().decodeAudioData(u,function(f){t(f)})}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}}class hj extends _S{constructor(e,t,i=1){super(void 0,i);const r=new ve().set(e),s=new ve().set(t),o=new O(r.r,r.g,r.b),a=new O(s.r,s.g,s.b),u=Math.sqrt(Math.PI),c=u*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(u),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}hj.prototype.isHemisphereLightProbe=!0;class fj extends _S{constructor(e,t=1){super(void 0,t);const i=new ve().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}fj.prototype.isAmbientLightProbe=!0;class TL{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=W2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=W2();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function W2(){return(typeof performance=="undefined"?Date:performance).now()}class dj extends Lt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}class pj{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const u=t*this._origIndex;this._mixBufferRegion(i,r,u,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let u=t,c=t+t;u!==c;++u)if(i[u]!==i[u+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Mn.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Mn.multiplyQuaternionsFlat(e,o,e,t,e,i),Mn.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const u=t+a;e[u]=e[u]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const wS="\\[\\]\\.:\\/",mj=new RegExp("["+wS+"]","g"),SS="[^"+wS+"]",gj="[^"+wS.replace("\\.","")+"]",vj=/((?:WC+[\/:])*)/.source.replace("WC",SS),yj=/(WCOD+)?/.source.replace("WCOD",gj),xj=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",SS),_j=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",SS),wj=new RegExp("^"+vj+yj+xj+_j+"$"),Sj=["material","materials","bones"];class Mj{constructor(e,t,i){const r=i||Rt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Rt{constructor(e,t,i){this.path=t,this.parsedPath=i||Rt.parseTrackName(t),this.node=Rt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Rt.Composite(e,t,i):new Rt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(mj,"")}static parseTrackName(e){const t=wj.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);Sj.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const u=i(a.children);if(u)return u}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Rt.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===c){c=f;break}break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}u=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(u=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Rt.Composite=Mj;Rt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Rt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Rt.prototype.GetterByBindingType=[Rt.prototype._getValue_direct,Rt.prototype._getValue_array,Rt.prototype._getValue_arrayElement,Rt.prototype._getValue_toArray];Rt.prototype.SetterByBindingTypeAndVersioning=[[Rt.prototype._setValue_direct,Rt.prototype._setValue_direct_setNeedsUpdate,Rt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Rt.prototype._setValue_array,Rt.prototype._setValue_array_setNeedsUpdate,Rt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Rt.prototype._setValue_arrayElement,Rt.prototype._setValue_arrayElement_setNeedsUpdate,Rt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Rt.prototype._setValue_fromArray,Rt.prototype._setValue_fromArray_setNeedsUpdate,Rt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class bj{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),u={endingStart:tc,endingEnd:tc};for(let c=0;c!==o;++c){const f=s[c].createInterpolant(null);a[c]=f,f.settings=u}this._interpolantSettings=u,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ew,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const u=a.parameterPositions,c=a.sampleValues;return u[0]=s,u[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const u=(e-s)*i;if(u<0||i===0)return;this._startTime=null,t=i*u}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const u=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case OP:for(let f=0,d=u.length;f!==d;++f)u[f].evaluate(o),c[f].accumulateAdditive(a);break;case K1:default:for(let f=0,d=u.length;f!==d;++f)u[f].evaluate(o),c[f].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;i!==null&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===f6;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===J_){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const u=this.repetitions-s;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=nc,r.endingEnd=nc):(e?r.endingStart=this.zeroSlopeAtStart?nc:tc:r.endingStart=Tg,t?r.endingEnd=this.zeroSlopeAtEnd?nc:tc:r.endingEnd=Tg)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,u=o.sampleValues;return a[0]=s,u[0]=t,a[1]=s+e,u[1]=i,this}}class EL extends Ya{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,u=i.uuid,c=this._bindingsByRootAndName;let f=c[u];f===void 0&&(f={},c[u]=f);for(let d=0;d!==s;++d){const p=r[d],g=p.name;let v=f[g];if(v!==void 0)++v.referenceCount,o[d]=v;else{if(v=o[d],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,u,g));continue}const y=t&&t._propertyBindings[d].binding.parsedPath;v=new pj(Rt.create(i,g,y),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,u,g),o[d]=v}a[d].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],u=a.knownActions,c=u[u.length-1],f=e._byClipCacheIndex;c._byClipCacheIndex=f,u[f]=c,u.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],u.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],u=t[t.length-1],c=e._cacheIndex;u._cacheIndex=c,t[c]=u,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new mL(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Yf.findByName(r,e):e;const a=o!==null?o.uuid:e,u=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=K1),u!==void 0){const d=u.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;c=u.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const f=new bj(this,o,t,i);return this._bindAction(f,c),this._addInactiveAction(f,a,s),f}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Yf.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,u=this._nActiveBindings;for(let c=0;c!==u;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,u=o.length;a!==u;++a){const c=o[a];this._deactivateAction(c);const f=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=f,t[f]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,u=a[t];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}EL.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Tj extends qc{constructor(e,t,i=1){super(e,t),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}Tj.prototype.isInstancedInterleavedBuffer=!0;class Ej{constructor(e,t,i=0,r=1/0){this.ray=new Bo(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new J1,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return lw(e,this,i,t),i.sort(j2),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)lw(e[r],this,i,t);return i.sort(j2),i}}function j2(n,e){return n.distance-e.distance}function lw(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)lw(r[s],e,t,!0)}}class X2{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Yn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const q2=new ie;class md{constructor(e=new ie(1/0,1/0),t=new ie(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=q2.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return q2.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}md.prototype.isBox2=!0;const Y2=new O,vm=new O;class AL{constructor(e=new O,t=new O){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Y2.subVectors(e,this.start),vm.subVectors(this.end,this.start);const i=vm.dot(vm);let s=vm.dot(Y2)/i;return t&&(s=Yn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Z2=new O;class Aj extends Lt{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const i=new ct,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,u=32;o<u;o++,a++){const c=o/u*Math.PI*2,f=a/u*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(f),Math.sin(f),1)}i.setAttribute("position",new it(r,3));const s=new Ar({fog:!1,toneMapped:!1});this.cone=new Fa(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Z2.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Z2),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const la=new O,ym=new Me,Px=new Me;class Cj extends Fa{constructor(e){const t=CL(e),i=new ct,r=[],s=[],o=new ve(0,0,1),a=new ve(0,1,0);for(let c=0;c<t.length;c++){const f=t[c];f.parent&&f.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new it(r,3)),i.setAttribute("color",new it(s,3));const u=new Ar({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,u),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Px.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(ym.multiplyMatrices(Px,a.matrixWorld),la.setFromMatrixPosition(ym),r.setXYZ(o,la.x,la.y,la.z),ym.multiplyMatrices(Px,a.parent.matrixWorld),la.setFromMatrixPosition(ym),r.setXYZ(o+1,la.x,la.y,la.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function CL(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,CL(n.children[t]));return e}class Rj extends un{constructor(e,t,i){const r=new Dv(t,4,2),s=new pi({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Pj=new O,K2=new ve,$2=new ve;class Lj extends Lt{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const r=new Lv(t);r.rotateY(Math.PI*.5),this.material=new pi({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new hn(o,3)),this.add(new un(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");K2.copy(this.light.color),$2.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?K2:$2;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}e.lookAt(Pj.setFromMatrixPosition(this.light.matrixWorld).negate())}}class RL extends Fa{constructor(e=10,t=10,i=4473924,r=8947848){i=new ve(i),r=new ve(r);const s=t/2,o=e/t,a=e/2,u=[],c=[];for(let p=0,g=0,v=-a;p<=t;p++,v+=o){u.push(-a,0,v,a,0,v),u.push(v,0,-a,v,0,a);const y=p===s?i:r;y.toArray(c,g),g+=3,y.toArray(c,g),g+=3,y.toArray(c,g),g+=3,y.toArray(c,g),g+=3}const f=new ct;f.setAttribute("position",new it(u,3)),f.setAttribute("color",new it(c,3));const d=new Ar({vertexColors:!0,toneMapped:!1});super(f,d),this.type="GridHelper"}}const Q2=new O,xm=new O,J2=new O;class Dj extends Lt{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,t===void 0&&(t=1);let r=new ct;r.setAttribute("position",new it([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Ar({fog:!1,toneMapped:!1});this.lightPlane=new Oa(r,s),this.add(this.lightPlane),r=new ct,r.setAttribute("position",new it([0,0,0,0,0,1],3)),this.targetLine=new Oa(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Q2.setFromMatrixPosition(this.light.matrixWorld),xm.setFromMatrixPosition(this.light.target.matrixWorld),J2.subVectors(xm,Q2),this.lightPlane.lookAt(xm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(xm),this.targetLine.scale.z=J2.length()}}const _m=new O,On=new yv;class Ij extends Fa{constructor(e){const t=new ct,i=new Ar({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={},a=new ve(16755200),u=new ve(16711680),c=new ve(43775),f=new ve(16777215),d=new ve(3355443);p("n1","n2",a),p("n2","n4",a),p("n4","n3",a),p("n3","n1",a),p("f1","f2",a),p("f2","f4",a),p("f4","f3",a),p("f3","f1",a),p("n1","f1",a),p("n2","f2",a),p("n3","f3",a),p("n4","f4",a),p("p","n1",u),p("p","n2",u),p("p","n3",u),p("p","n4",u),p("u1","u2",c),p("u2","u3",c),p("u3","u1",c),p("c","t",f),p("p","c",d),p("cn1","cn2",d),p("cn3","cn4",d),p("cf1","cf2",d),p("cf3","cf4",d);function p(v,y,x){g(v,x),g(y,x)}function g(v,y){r.push(0,0,0),s.push(y.r,y.g,y.b),o[v]===void 0&&(o[v]=[]),o[v].push(r.length/3-1)}t.setAttribute("position",new it(r,3)),t.setAttribute("color",new it(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;On.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Vn("c",t,e,On,0,0,-1),Vn("t",t,e,On,0,0,1),Vn("n1",t,e,On,-i,-r,-1),Vn("n2",t,e,On,i,-r,-1),Vn("n3",t,e,On,-i,r,-1),Vn("n4",t,e,On,i,r,-1),Vn("f1",t,e,On,-i,-r,1),Vn("f2",t,e,On,i,-r,1),Vn("f3",t,e,On,-i,r,1),Vn("f4",t,e,On,i,r,1),Vn("u1",t,e,On,i*.7,r*1.1,-1),Vn("u2",t,e,On,-i*.7,r*1.1,-1),Vn("u3",t,e,On,0,r*2,-1),Vn("cf1",t,e,On,-i,0,1),Vn("cf2",t,e,On,i,0,1),Vn("cf3",t,e,On,0,-r,1),Vn("cf4",t,e,On,0,r,1),Vn("cn1",t,e,On,-i,0,-1),Vn("cn2",t,e,On,i,0,-1),Vn("cn3",t,e,On,0,-r,-1),Vn("cn4",t,e,On,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Vn(n,e,t,i,r,s,o){_m.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const u=t.getAttribute("position");for(let c=0,f=a.length;c<f;c++)u.setXYZ(a[c],_m.x,_m.y,_m.z)}}const wm=new Gi;class PL extends Fa{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new ct;s.setIndex(new hn(i,1)),s.setAttribute("position",new hn(r,3)),super(s,new Ar({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&wm.setFromObject(this.object),wm.isEmpty())return;const t=wm.min,i=wm.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return Fa.prototype.copy.call(this,e),this.object=e.object,this}}class _Q{constructor(){this.type="ShapePath",this.color=new ve,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Cg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function i(S){const _=[];for(let w=0,T=S.length;w<T;w++){const E=S[w],R=new Ca;R.curves=E.curves,_.push(R)}return _}function r(S,_){const w=_.length;let T=!1;for(let E=w-1,R=0;R<w;E=R++){let P=_[E],V=_[R],F=V.x-P.x,C=V.y-P.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(P=_[R],F=-F,V=_[E],C=-C),S.y<P.y||S.y>V.y)continue;if(S.y===P.y){if(S.x===P.x)return!0}else{const N=C*(S.x-P.x)-F*(S.y-P.y);if(N===0)return!0;if(N<0)continue;T=!T}}else{if(S.y!==P.y)continue;if(V.x<=S.x&&S.x<=P.x||P.x<=S.x&&S.x<=V.x)return!0}}return T}const s=To.isClockWise,o=this.subPaths;if(o.length===0)return[];if(t===!0)return i(o);let a,u,c;const f=[];if(o.length===1)return u=o[0],c=new Ca,c.curves=u.curves,f.push(c),f;let d=!s(o[0].getPoints());d=e?!d:d;const p=[],g=[];let v=[],y=0,x;g[y]=void 0,v[y]=[];for(let S=0,_=o.length;S<_;S++)u=o[S],x=u.getPoints(),a=s(x),a=e?!a:a,a?(!d&&g[y]&&y++,g[y]={s:new Ca,p:x},g[y].s.curves=u.curves,d&&y++,v[y]=[]):v[y].push({h:u,p:x[0]});if(!g[0])return i(o);if(g.length>1){let S=!1,_=0;for(let w=0,T=g.length;w<T;w++)p[w]=[];for(let w=0,T=g.length;w<T;w++){const E=v[w];for(let R=0;R<E.length;R++){const P=E[R];let V=!0;for(let F=0;F<g.length;F++)r(P.p,g[F].p)&&(w!==F&&_++,V?(V=!1,p[F].push(P)):S=!0);V&&p[w].push(P)}}_>0&&S===!1&&(v=p)}let M;for(let S=0,_=g.length;S<_;S++){c=g[S].s,f.push(c),M=v[S];for(let w=0,T=M.length;w<T;w++)c.holes.push(M[w].h)}return f}}class Sm{static toHalfFloat(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Yn(e,-65504,65504),eC[0]=e;const t=tC[0],i=t>>23&511;return ms[i]+((t&8388607)>>gs[i])}static fromHalfFloat(e){const t=e>>10;return tC[0]=MS[DL[t]+(e&1023)]+Kc[t],eC[0]}}const LL=new ArrayBuffer(4),eC=new Float32Array(LL),tC=new Uint32Array(LL),ms=new Uint32Array(512),gs=new Uint32Array(512);for(let n=0;n<256;++n){const e=n-127;e<-27?(ms[n]=0,ms[n|256]=32768,gs[n]=24,gs[n|256]=24):e<-14?(ms[n]=1024>>-e-14,ms[n|256]=1024>>-e-14|32768,gs[n]=-e-1,gs[n|256]=-e-1):e<=15?(ms[n]=e+15<<10,ms[n|256]=e+15<<10|32768,gs[n]=13,gs[n|256]=13):e<128?(ms[n]=31744,ms[n|256]=64512,gs[n]=24,gs[n|256]=24):(ms[n]=31744,ms[n|256]=64512,gs[n]=13,gs[n|256]=13)}const MS=new Uint32Array(2048),Kc=new Uint32Array(64),DL=new Uint32Array(64);for(let n=1;n<1024;++n){let e=n<<13,t=0;for(;(e&8388608)===0;)e<<=1,t-=8388608;e&=-8388609,t+=947912704,MS[n]=e|t}for(let n=1024;n<2048;++n)MS[n]=939524096+(n-1024<<13);for(let n=1;n<31;++n)Kc[n]=n<<23;Kc[31]=1199570944;Kc[32]=2147483648;for(let n=33;n<63;++n)Kc[n]=2147483648+(n-32<<23);Kc[63]=3347054592;for(let n=1;n<64;++n)n!==32&&(DL[n]=1024);br.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(br.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n};Cg.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)};RL.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};Cj.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};ns.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Ms.extractUrlBase(n)};ns.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};md.prototype.center=function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)};md.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()};md.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};md.prototype.size=function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)};Gi.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)};Gi.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Gi.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};Gi.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};Gi.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)};yr.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")};Ql.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};hd.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)};AL.prototype.center=function(n){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(n)};Pn.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};Pn.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};Pn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};Pn.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};Pn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};Pn.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};Me.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)};Me.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};Me.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new O().setFromMatrixColumn(this,3)};Me.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)};Me.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};Me.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Me.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Me.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};Me.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)};Me.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Me.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};Me.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};Me.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};Me.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};Me.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};Me.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Me.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};Me.prototype.makeFrustum=function(n,e,t,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,i,t,r,s)};Me.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};vo.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)};Mn.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)};Mn.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};Bo.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};Bo.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)};Bo.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};Kn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};Kn.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)};Kn.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)};Kn.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)};Kn.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)};Kn.barycoordFromPoint=function(n,e,t,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Kn.getBarycoord(n,e,t,i,r)};Kn.normal=function(n,e,t,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Kn.getNormal(n,e,t,i)};Ca.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)};Ca.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Na(this,n)};Ca.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new dS(this,n)};ie.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};ie.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};ie.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};O.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};O.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};O.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)};O.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)};O.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)};O.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)};O.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};O.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};O.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Wt.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};Wt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Lt.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)};Lt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};Lt.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)};Lt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};Lt.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(Lt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});un.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(un.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),d6},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Mv.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};jn.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(n)};Object.defineProperties(Hs.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}});Object.defineProperties(hn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Eg},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Eg)}}});hn.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?Eg:Vf),this};hn.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},hn.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};ct.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)};ct.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new hn(arguments[1],arguments[2]))):n==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e)};ct.prototype.addDrawCall=function(n,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)};ct.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};ct.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};ct.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)};ct.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(ct.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});qc.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?Eg:Vf),this};qc.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Na.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};Na.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};Na.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};rS.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Object.defineProperties(Nn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ve}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===CP}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(Nt.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}});tn.prototype.clearTarget=function(n,e,t,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,i)};tn.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)};tn.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};tn.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};tn.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};tn.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};tn.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};tn.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};tn.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};tn.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};tn.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};tn.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};tn.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};tn.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};tn.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)};tn.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};tn.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};tn.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};tn.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};tn.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};tn.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};tn.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};tn.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};tn.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};tn.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(tn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=n===!0?Mt:sr}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});Object.defineProperties($P.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Gt.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}});dj.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new cj().load(n,function(i){e.setBuffer(i)}),this};tS.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)};tS.prototype.clear=function(n,e,t,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,i)};$l.crossOrigin=void 0;$l.loadTexture=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new Ov;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s};$l.loadTextureCube=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new yL;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s};$l.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};$l.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Z1}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Z1);class Oj{constructor(e,t){this.x=e,this.y=t}}class Lx{constructor(e,t,i){this.x=e,this.y=t,this.z=i}}const Fn=180/Math.PI,rn=Math.PI/180,Fj=(n,e,t,i,r,s)=>{const o=t-e,a=r-i,u=i+(n-e)/o*a;if(!s)return u;let c,f;return i<r?(c=i,f=r):(c=r,f=i),u<c?c:u>f?f:u},kj=(n,e,t,i)=>Math.sqrt((n-t)**2+(e-i)**2),IL=(n,e,t,i,r,s)=>Math.sqrt((n-i)**2+(e-r)**2+(t-s)**2),Nj=(n,e,t,i)=>{const r=t*=rn;return new Oj(n+i*Math.cos(r),e+i*Math.sin(r))},[zj,uw]=Ge(1);var OL=function(){if(typeof Map!="undefined")return Map;function n(e,t){var i=-1;return e.some(function(r,s){return r[0]===t?(i=s,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var i=n(this.__entries__,t),r=this.__entries__[i];return r&&r[1]},e.prototype.set=function(t,i){var r=n(this.__entries__,t);~r?this.__entries__[r][1]=i:this.__entries__.push([t,i])},e.prototype.delete=function(t){var i=this.__entries__,r=n(i,t);~r&&i.splice(r,1)},e.prototype.has=function(t){return!!~n(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,i){i===void 0&&(i=null);for(var r=0,s=this.__entries__;r<s.length;r++){var o=s[r];t.call(i,o[1],o[0])}},e}()}(),cw=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,Rg=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),Bj=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Rg):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),Uj=2;function Vj(n,e){var t=!1,i=!1,r=0;function s(){t&&(t=!1,n()),i&&a()}function o(){Bj(s)}function a(){var u=Date.now();if(t){if(u-r<Uj)return;i=!0}else t=!0,i=!1,setTimeout(o,e);r=u}return a}var Hj=20,Gj=["top","right","bottom","left","width","height","size","weight"],Wj=typeof MutationObserver!="undefined",jj=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Vj(this.refresh.bind(this),Hj)}return n.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},n.prototype.removeObserver=function(e){var t=this.observers_,i=t.indexOf(e);~i&&t.splice(i,1),!t.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},n.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},n.prototype.connect_=function(){!cw||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Wj?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!cw||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(e){var t=e.propertyName,i=t===void 0?"":t,r=Gj.some(function(s){return!!~i.indexOf(s)});r&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),FL=function(n,e){for(var t=0,i=Object.keys(e);t<i.length;t++){var r=i[t];Object.defineProperty(n,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return n},Ic=function(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||Rg},kL=kv(0,0,0,0);function Pg(n){return parseFloat(n)||0}function nC(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(i,r){var s=n["border-"+r+"-width"];return i+Pg(s)},0)}function Xj(n){for(var e=["top","right","bottom","left"],t={},i=0,r=e;i<r.length;i++){var s=r[i],o=n["padding-"+s];t[s]=Pg(o)}return t}function qj(n){var e=n.getBBox();return kv(0,0,e.width,e.height)}function Yj(n){var e=n.clientWidth,t=n.clientHeight;if(!e&&!t)return kL;var i=Ic(n).getComputedStyle(n),r=Xj(i),s=r.left+r.right,o=r.top+r.bottom,a=Pg(i.width),u=Pg(i.height);if(i.boxSizing==="border-box"&&(Math.round(a+s)!==e&&(a-=nC(i,"left","right")+s),Math.round(u+o)!==t&&(u-=nC(i,"top","bottom")+o)),!Kj(n)){var c=Math.round(a+s)-e,f=Math.round(u+o)-t;Math.abs(c)!==1&&(a-=c),Math.abs(f)!==1&&(u-=f)}return kv(r.left,r.top,a,u)}var Zj=function(){return typeof SVGGraphicsElement!="undefined"?function(n){return n instanceof Ic(n).SVGGraphicsElement}:function(n){return n instanceof Ic(n).SVGElement&&typeof n.getBBox=="function"}}();function Kj(n){return n===Ic(n).document.documentElement}function $j(n){return cw?Zj(n)?qj(n):Yj(n):kL}function Qj(n){var e=n.x,t=n.y,i=n.width,r=n.height,s=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,o=Object.create(s.prototype);return FL(o,{x:e,y:t,width:i,height:r,top:t,right:e+i,bottom:r+t,left:e}),o}function kv(n,e,t,i){return{x:n,y:e,width:t,height:i}}var Jj=function(){function n(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=kv(0,0,0,0),this.target=e}return n.prototype.isActive=function(){var e=$j(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},n}(),eX=function(){function n(e,t){var i=Qj(t);FL(this,{target:e,contentRect:i})}return n}(),tX=function(){function n(e,t,i){if(this.activeObservations_=[],this.observations_=new OL,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=i}return n.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof Ic(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Jj(e)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof Ic(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;!t.has(e)||(t.delete(e),t.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},n.prototype.broadcastActive=function(){if(!!this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(i){return new eX(i.target,i.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),NL=typeof WeakMap!="undefined"?new WeakMap:new OL,zL=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=jj.getInstance(),i=new tX(e,t,this);NL.set(this,i)}return n}();["observe","unobserve","disconnect"].forEach(function(n){zL.prototype[n]=function(){var e;return(e=NL.get(this))[n].apply(e,arguments)}});var nX=function(){return typeof Rg.ResizeObserver!="undefined"?Rg.ResizeObserver:zL}();const Nv=375,zv=667,bS=5,TS=175,[BL,Ui]=Ge([Nv,zv]),[iX,Oc]=Ge("balanced"),[UL,bs]=Ge(1);Oc(n=>n==="quality"?UL(devicePixelRatio):1);const Qg=class{static createButton(e,t){t&&console.error('THREE.VRButton: The "options" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.');const i=document.createElement("button");function r(){let c=null;async function f(p){p.addEventListener("end",d),await e.xr.setSession(p),i.textContent="EXIT VR",c=p}function d(){c.removeEventListener("end",d),i.textContent="ENTER VR",c=null}i.style.display="",i.style.cursor="pointer",i.style.left="calc(50% - 50px)",i.style.width="100px",i.textContent="ENTER VR",i.onmouseenter=function(){i.style.opacity="1.0"},i.onmouseleave=function(){i.style.opacity="0.5"},i.onclick=function(){if(c===null){const p={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]};navigator.xr.requestSession("immersive-vr",p).then(f)}else c.end()}}function s(){i.style.display="",i.style.cursor="auto",i.style.left="calc(50% - 75px)",i.style.width="150px",i.onmouseenter=null,i.onmouseleave=null,i.onclick=null}function o(){s(),i.textContent="VR NOT SUPPORTED"}function a(c){s(),console.warn("Exception when trying to call xr.isSessionSupported",c),i.textContent="VR NOT ALLOWED"}function u(c){c.style.position="absolute",c.style.bottom="20px",c.style.padding="12px 6px",c.style.border="1px solid #fff",c.style.borderRadius="4px",c.style.background="rgba(0,0,0,0.1)",c.style.color="#fff",c.style.font="normal 13px sans-serif",c.style.textAlign="center",c.style.opacity="0.5",c.style.outline="none",c.style.zIndex="999"}if("xr"in navigator)return i.id="VRButton",i.style.display="none",u(i),navigator.xr.isSessionSupported("immersive-vr").then(function(c){c?r():o(),c&&Qg.xrSessionIsGranted&&i.click()}).catch(a),i;{const c=document.createElement("a");return window.isSecureContext===!1?(c.href=document.location.href.replace(/^http:/,"https:"),c.innerHTML="WEBXR NEEDS HTTPS"):(c.href="https://immersiveweb.dev/",c.innerHTML="WEBXR NOT AVAILABLE"),c.style.left="calc(50% - 90px)",c.style.width="180px",c.style.textDecoration="none",u(c),c}}static registerSessionGrantedListener(){"xr"in navigator&&navigator.xr.addEventListener("sessiongranted",()=>{Qg.xrSessionIsGranted=!0})}};let xf=Qg;QT(xf,"xrSessionIsGranted",!1);xf.registerSessionGrantedListener();const[wQ,Fc]=Ge(!1),[VL,Lg]=Ge([Nv,zv]),[rX,hw]=Ge(!1);Qt(()=>{if(!hw())return;const n=()=>{VL([window.innerWidth,window.innerHeight]),BL([window.innerWidth,window.innerHeight])};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[hw]);const[sX,fw]=Ge(!1),[oX,dw]=Ge(!0),[aX,HL]=Ge(!1),[lX,pw]=Ge(!0),[uX,Kf]=Ge(!0),[cX,$f]=Ge(!1),[hX,GL]=Ge(20),[fX,dX]=Ge(0);var Ua={get fillWindow(){return hw()},set fillWindow(n){rX(n)},get viewportSize(){return Lg()},set viewportSize(n){VL(n)},get resolution(){return Ui()},set resolution(n){BL(n)},get pixelRatio(){return bs()},set pixelRatio(n){UL(n)},get performance(){return Oc()},set performance(n){iX(n)},get gridHelper(){return HL()},set gridHelper(n){aX(n)},get cameraHelper(){return pw()},set cameraHelper(n){lX(n)},get lightHelper(){return Kf()},set lightHelper(n){uX(n)},get defaultFog(){return fw()},set defaultFog(n){sX(n)},get defaultLight(){return dw()},set defaultLight(n){oX(n)},get defaultOrbitControls(){return $f()},set defaultOrbitControls(n){cX(n)},get gravity(){return GL()},set gravity(n){hX(n)},get mapPhysics(){return dX()},set mapPhysics(n){fX(n)},wasmPath:"https://www.lingo3d.com/wasm/",autoMout:!0};const[pX,Qf]=Ge(void 0),[mX,ES]=Ge(!1),WL=()=>new tn({powerPreference:"high-performance",alpha:Qf()==="transparent",logarithmicDepthBuffer:ES(),antialias:!0}),jL=WL();queueMicrotask(()=>jL.dispose());const[gX,yn]=Ge(jL);Qt(()=>{const n=WL();return gX(n),()=>{n.dispose()}},[Qf,ES]);const[vX,Jf]=Ge("linear"),[yX,mw]=Ge(!1),Rn=document.createElement("div");Object.assign(Rn.style,{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"});const AS=[Rn.getBoundingClientRect()],xX=new nX(()=>AS[0]=Rn.getBoundingClientRect());xX.observe(Rn);queueMicrotask(()=>{!Ua.autoMout||Rn.parentElement||(document.body.appendChild(Rn),Ua.fillWindow=!0)});const Gs=document.createElement("div");Object.assign(Gs.style,{border:"1px solid blue",position:"absolute",left:"50%",top:"50%",transform:"translateX(-50%) translateY(-50%)"});Qt(()=>{const n=yn().domElement;return Rn.appendChild(n),Rn.appendChild(Gs),Object.assign(n.style,{position:"absolute",left:"0px",top:"0px"}),()=>{Rn.removeChild(n)}},[yn]);Qt(()=>{const n=yn(),[e,t]=Ui();n.setSize(e,t),n.setPixelRatio(bs())},[yn,Ui,bs]);Qt(()=>{const n=yn();n.shadowMap.enabled=Oc()!=="speed"},[yn,Oc]);Qt(()=>{const n=yn();n.physicallyCorrectLights=mw()},[yn,mw]);Qt(()=>{const n=yn(),e=uw();n.toneMapping=e!==1?LP:Bs,n.toneMappingExposure=e},[uw,yn]);Qt(()=>{const n=yn(),e=Jf();n.outputEncoding=e==="linear"?sr:Mt},[Jf,yn]);Qt(()=>{if(Fc()!=="webxr")return;const n=yn();n.xr.enabled=!0;const e=xf.createButton(n);return Rn.appendChild(e),e.ontouchstart=()=>{var t;return(t=e.onclick)===null||t===void 0?void 0:t.call(e,new MouseEvent("click"))},()=>{n.xr.enabled=!1,Rn.removeChild(e)}},[Fc,yn]);const[SQ,Cl]=Ge(!1),[iC,_X]=Ge(1);var wX=(n,e)=>{const t=AS[0],i=_X(),r=(n-t.width*.5)/i,s=-(e-t.height*.5)/i;return[r,s]};const[MQ,SX]=Ge(!1),rC=(n,e,t)=>{let i=0;const r=setInterval(()=>{document.hidden||(t(),++i>=e&&clearInterval(r))},n);return new ui(()=>clearInterval(r))},MX=(...n)=>{if(n.length===2)return rC(n[0],0,n[1]);if(n.length===3)return rC(n[0],n[1],n[2]);throw new Error("incorrect number of arguments")};let Dx=-1;const Wh=[],bX=[1,2];let XL=1/0;const qL=n=>{if(Wh.length===120){Wh.sort((r,s)=>r-s);const t=Wh[Math.round(Wh.length*.5)]/60;let i=1/0;for(const r of bX){const s=Math.abs(t-r);s>i||(i=s,XL=r)}return}requestAnimationFrame(qL),Dx!==-1&&Wh.push(1e3/(n-Dx)),Dx=n};requestAnimationFrame(qL);const gw=new Set;let sC=0;yn(n=>{n.setAnimationLoop(()=>{if(!(++sC<XL)&&(sC=0,!SX()))for(const e of gw)e()})});const ir=n=>(gw.add(n),new ui(()=>gw.delete(n)));class TX extends bP{initOuterObject3d(){this.outerObject3d.userData.manager=this}attach(e){this.outerObject3d.attach(e.outerObject3d)}append(e){this.outerObject3d.add(e.outerObject3d)}dispose(){var e,t;if(this.done)return this;super.dispose(),(e=this.outerObject3d.parent)===null||e===void 0||e.remove(this.outerObject3d);for(const i of[...this.outerObject3d.children])(t=i.userData.manager)===null||t===void 0||t.dispose();return this}}class eu extends TX{timer(...e){return this.watch(MX(...e))}loop(e){return this.watch(ir(e))}queueMicrotask(e){queueMicrotask(()=>!this.done&&e())}cancellable(e){return this.watch(new ui(e))}createEffect(e,t){return this.watch(Qt(e,t))}get onLoop(){return this._onLoop}set onLoop(e){var t;this._onLoop=e,(t=this._loopHandle)===null||t===void 0||t.cancel(),e&&(this._loopHandle=this.loop(e))}}const EX=()=>{const n=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(n)?!0:!!/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(n)};var YL=EX();const[bQ,AX]=Ge(void 0),ya=new SH,CX=q1(n=>{const e="targetTouches"in n?n.targetTouches[0]:n;if(!e)return{x:0,y:0,clientX:0,clientY:0,xNorm:0,yNorm:0};const t=AS[0],i=e.clientX-t.x,r=e.clientY-t.y;if(AX())return{x:0,y:0,clientX:i,clientY:r,xNorm:0,yNorm:0};const[s,o]=wX(i,r),a=i/t.width*2-1,u=-(r/t.height)*2+1;return{x:s,y:o,clientX:i,clientY:r,xNorm:a,yNorm:u}},0,"leading"),pl=n=>e=>{const t=CX(e);for(const i of n)ya.emit(i,t)};YL?(document.addEventListener("touchmove",pl(["move"])),Rn.addEventListener("touchstart",pl(["click","down","move"])),Rn.addEventListener("touchend",pl(["up"]))):(document.addEventListener("mousemove",pl(["move"])),Rn.addEventListener("click",pl(["click"])),Rn.addEventListener("mousedown",pl(["down"])),Rn.addEventListener("mouseup",pl(["up"])));class RX extends eu{constructor(){super(),this.outerObject3d=new cn,this.x=0,this.y=0,this.clientX=0,this.clientY=0,this.initOuterObject3d();let e={x:0,y:0,clientX:0,clientY:0,xNorm:0,yNorm:0};this.watch(ya.on("move",i=>{var r;this.x=i.x,this.y=i.y,this.clientX=i.clientX,this.clientY=i.clientY,!Cl()&&((r=this.onMouseMove)===null||r===void 0||r.call(this,i)),e=i})),this.watch(ya.on("click",i=>{var r;!Cl()&&((r=this.onClick)===null||r===void 0||r.call(this,i)),e=i}));let t=!1;this.watch(ya.on("down",i=>{var r;!Cl()&&((r=this.onMouseDown)===null||r===void 0||r.call(this,i)),t=!0,e=i})),this.watch(ya.on("up",i=>{var r;!Cl()&&((r=this.onMouseUp)===null||r===void 0||r.call(this,i)),t=!1,e=i})),this.loop(()=>{var i;return t&&!Cl()&&((i=this.onMousePress)===null||i===void 0?void 0:i.call(this,e))})}}new RX;const[Dg,ed]=Ge(void 0),[oC,ZL]=Ge(0),CS=100,je=1/CS,sn=CS,KL=Fj(CS,1,100,100,1),Bv=.1,Uv=1e4*KL,Vv=1*je,Sr=100*je,Eo=Sr*.5,Ni=new jn(75,1,Bv,Uv);ZL(n=>Ni.position.z=n);const[aC,St]=Ge(Ni),[PX,lC]=Ge(!0),vw=No(PX,1,"trailing"),[$L,QL]=Ge(0),gd=()=>$L(QL()+1),Ws=()=>$L(QL()-1),LX=[0],vd=n=>LX[0]+=n.loaded;class DX extends aj{constructor(e){super(e),this.type=_s}parse(e){const a=function(_,w){switch(_){case 1:console.error("THREE.RGBELoader Read Error: "+(w||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(w||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(w||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(w||""))}return-1},d=`
`,p=function(_,w,T){w=w||1024;let R=_.pos,P=-1,V=0,F="",C=String.fromCharCode.apply(null,new Uint16Array(_.subarray(R,R+128)));for(;0>(P=C.indexOf(d))&&V<w&&R<_.byteLength;)F+=C,V+=C.length,R+=128,C+=String.fromCharCode.apply(null,new Uint16Array(_.subarray(R,R+128)));return-1<P?(T!==!1&&(_.pos+=V+P+1),F+C.slice(0,P)):!1},g=function(_){const w=/^#\?(\S+)/,T=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,E=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,R=/^\s*FORMAT=(\S+)\s*$/,P=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,V={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let F,C;if(_.pos>=_.byteLength||!(F=p(_)))return a(1,"no header found");if(!(C=F.match(w)))return a(3,"bad initial token");for(V.valid|=1,V.programtype=C[1],V.string+=F+`
`;F=p(_),F!==!1;){if(V.string+=F+`
`,F.charAt(0)==="#"){V.comments+=F+`
`;continue}if((C=F.match(T))&&(V.gamma=parseFloat(C[1])),(C=F.match(E))&&(V.exposure=parseFloat(C[1])),(C=F.match(R))&&(V.valid|=2,V.format=C[1]),(C=F.match(P))&&(V.valid|=4,V.height=parseInt(C[1],10),V.width=parseInt(C[2],10)),V.valid&2&&V.valid&4)break}return V.valid&2?V.valid&4?V:a(3,"missing image size specifier"):a(3,"missing format specifier")},v=function(_,w,T){const E=w;if(E<8||E>32767||_[0]!==2||_[1]!==2||_[2]&128)return new Uint8Array(_);if(E!==(_[2]<<8|_[3]))return a(3,"wrong scanline width");const R=new Uint8Array(4*w*T);if(!R.length)return a(4,"unable to allocate buffer space");let P=0,V=0;const F=4*E,C=new Uint8Array(4),N=new Uint8Array(F);let Q=T;for(;Q>0&&V<_.byteLength;){if(V+4>_.byteLength)return a(1);if(C[0]=_[V++],C[1]=_[V++],C[2]=_[V++],C[3]=_[V++],C[0]!=2||C[1]!=2||(C[2]<<8|C[3])!=E)return a(3,"bad rgbe scanline format");let G=0,Y;for(;G<F&&V<_.byteLength;){Y=_[V++];const K=Y>128;if(K&&(Y-=128),Y===0||G+Y>F)return a(3,"bad scanline data");if(K){const B=_[V++];for(let Z=0;Z<Y;Z++)N[G++]=B}else N.set(_.subarray(V,V+Y),G),G+=Y,V+=Y}const X=E;for(let K=0;K<X;K++){let B=0;R[P]=N[K+B],B+=E,R[P+1]=N[K+B],B+=E,R[P+2]=N[K+B],B+=E,R[P+3]=N[K+B],P+=4}Q--}return R},y=function(_,w,T,E){const R=_[w+3],P=Math.pow(2,R-128)/255;T[E+0]=_[w+0]*P,T[E+1]=_[w+1]*P,T[E+2]=_[w+2]*P,T[E+3]=1},x=function(_,w,T,E){const R=_[w+3],P=Math.pow(2,R-128)/255;T[E+0]=Sm.toHalfFloat(Math.min(_[w+0]*P,65504)),T[E+1]=Sm.toHalfFloat(Math.min(_[w+1]*P,65504)),T[E+2]=Sm.toHalfFloat(Math.min(_[w+2]*P,65504)),T[E+3]=Sm.toHalfFloat(1)},M=new Uint8Array(e);M.pos=0;const S=g(M);if(S!==-1){const _=S.width,w=S.height,T=v(M.subarray(M.pos),_,w);if(T!==-1){let E,R,P,V;switch(this.type){case xs:V=T.length/4;const F=new Float32Array(V*4);for(let N=0;N<V;N++)y(T,N*4,F,N*4);E=F,P=xs;break;case _s:V=T.length/4;const C=new Uint16Array(V*4);for(let N=0;N<V;N++)x(T,N*4,C,N*4);E=C,P=_s;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:_,height:w,data:E,header:S.string,gamma:S.gamma,exposure:S.exposure,format:R,type:P}}}return null}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){switch(o.type){case xs:o.encoding=sr,o.minFilter=An,o.magFilter=An,o.generateMipmaps=!1,o.flipY=!0;break;case _s:o.encoding=sr,o.minFilter=An,o.magFilter=An,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,i,r)}}const IX=new Map,JL=new Ov,OX=new DX;var oi=(n,e)=>Ts(IX,n,()=>(gd(),(n.endsWith(".hdr")?OX:JL).load(n,r=>{r.wrapS=r.wrapT=Do,e==null||e(),Ws()},vd,()=>{e==null||e(),Ws()}))),Ke=new rS,FX={};console.log("default light");Qt(()=>{const n=dw();if(!n)return;if(typeof n=="string"){if(n==="studio"){const r=new ui;return(async()=>{const s=(await Promise.resolve().then(function(){return DY})).default;r.done||(r.watch(Object.assign(new s,{innerY:1e3,innerRotationX:-90,intensity:3})),r.watch(Object.assign(new s,{innerY:1e3,innerRotationX:-90,rotationX:90,intensity:3})),r.watch(Object.assign(new s,{innerY:1e3,innerRotationX:-90,rotationX:-90,intensity:3})),r.watch(Object.assign(new s,{innerY:1e3,innerRotationX:-90,rotationZ:90,intensity:3})),r.watch(Object.assign(new s,{innerY:1e3,innerRotationX:-90,rotationZ:-90,intensity:3})))})(),()=>{r.cancel()}}const i=oi(n);return i.mapping=Ec,Ke.environment=i,()=>{Ke.environment=null}}const e=new vS(16777215,6710886,1);Ke.add(e);const t=new pd(16777215,.5);return t.position.set(0,1,1),Ke.add(t),()=>{e.dispose(),Ke.remove(e),t.dispose(),Ke.remove(t)}},[dw]);var kX={};Qt(()=>{if(!!fw())return Ke.fog=new Sv(0,0,100),()=>{Ke.fog=null}},[fw]);const NX=new Map,zX=new yL;var eD=n=>Ts(NX,n.join(","),()=>(gd(),zX.load(n,Ws,vd,Ws)));const[BX,yw]=Ge(void 0),[xw,_w]=Ge(void 0);var UX={};Qt(()=>{const n=yw(),e=Qf(),t=_w();if(t)if(Array.isArray(t))Ke.background=eD(t);else{const i=oi(t);i.mapping=Ec,Ke.background=i}else n?Ke.background=oi(n):e?e==="transparent"?Ke.background=null:Ke.background=new ve(e):Ke.background=new ve("black")},[Qf,yw,_w]);Zl(FX);Zl(kX);Zl(UX);const[TQ,uC]=Ge(!1),[VX,HX]=zo(),cC=No(VX,0,"trailing"),Zt=new O,Tl=new O,EQ=new O,Ig=new Mn,GX=new Mn,ww=new O(Sr,Sr,Sr);Object.freeze(ww);const tD=new O(Eo,Eo,Eo);Object.freeze(tD);const kc=new Gi,nD=new Bo,jr=new yr(0,0,0,"YXZ"),AQ=new AL,iD=new pi({wireframe:!0}),rD=new hd,WX=new Me;var RS=n=>kc.setFromObject(n).getCenter(Zt);const Mm=new WeakMap;var Og=n=>{if(Mm.has(n))return Mm.get(n);"id"in n?RS(n):Zt.set(n.x*je,n.y*je,n.z*je);const e=St();Zt.project(e);const t=(Zt.x*.5+.5)*Gs.clientWidth,i=(Zt.y*-.5+.5)*Gs.clientHeight,r={x:t,y:i};return Mm.set(n,r),setTimeout(()=>Mm.delete(n)),r};class sD{constructor(e,t,i){this.x=e,this.y=t,this.z=i}get clientX(){return Og(this).x}get clientY(){return Og(this).y}}const hC=new Ej,jX=()=>{const n=new Set;return Ke.traverse(e=>{var t;const{manager:i}=e.userData;i&&n.add((t=i.object3d)!==null&&t!==void 0?t:e)}),n},XX=(n,e,t)=>(hC.setFromCamera({x:n,y:e},St()),hC.intersectObjects([...t])[0]),ml=(n,e,t)=>ya.on(n,i=>{const r=XX(i.xNorm,i.yNorm,e);if(!r)return;const{x:s,y:o,z:a}=r.point,u=new sD(s*sn,o*sn,a*sn),c=r.distance*sn;t(r.object.userData.manager,Ii(vt({},i),{point:u,distance:c}))}),Sw=new Set,Mw=new Set,bw=new Set,Tw=new Set,Wm=new Set,oD=new Set;Qt(()=>{const n=Cl(),e=lC(),t=uC(),i=EH(!0);if(Qt(()=>{!t&&(i.current=!0)},[t]),n&&e){const a=new ui;return a.watch(ya.on("click",()=>{cC(void 0)})),a.watch(ml("click",jX(),u=>{cC(u)})),a.watch(HX(u=>{if(t){if(!u)return;if(i.current){const c=ed();c&&PC(c)}i.current=!1,Va().includes(u)?bq(u):PC(u);return}LC(),Dg(u)})),()=>{a.cancel()}}if(n)return;LC(),Dg(void 0);const r=new ui;r.watch(ml("click",Sw,(a,u)=>{var c;return(c=a.onClick)===null||c===void 0?void 0:c.call(a,u)})),r.watch(ml("down",Mw,(a,u)=>{var c;return(c=a.onMouseDown)===null||c===void 0?void 0:c.call(a,u)})),r.watch(ml("up",bw,(a,u)=>{var c;return(c=a.onMouseUp)===null||c===void 0?void 0:c.call(a,u)}));let s=new Set,o=new Set;return r.watch(ml("move",Tw,(a,u)=>{s.add(a),a.outerObject3d.userData.eMove=u})),r.watch(ml("move",Wm,(a,u)=>{s.add(a),a.outerObject3d.userData.eMove=u})),r.watch(ml("move",oD,(a,u)=>{s.add(a),a.outerObject3d.userData.eMove=u})),r.watch(ya.on("move",()=>{var a,u,c;for(const f of s)o.has(f)||(a=f.onMouseOver)===null||a===void 0||a.call(f,f.outerObject3d.userData.eMove),(u=f.onMouseMove)===null||u===void 0||u.call(f,f.outerObject3d.userData.eMove);for(const f of o)s.has(f)||(c=f.onMouseOut)===null||c===void 0||c.call(f,f.outerObject3d.userData.eMove);o=s,s=new Set})),()=>{r.cancel()}},[Cl,lC,uC]);const Bt={c:null,u:[new O,new O,new O],e:[]},Xt={c:null,u:[new O,new O,new O],e:[]},Tn=[[],[],[]],dt=[[],[],[]],pn=[],gl=new O,vl=new O,yl=new O,ni=new O,fC=new O,dC=new O,ds=new Pn,pC=new Gi,bm=new Me,mC=new Me,gC=new Bo;class PS{constructor(e=new O,t=new O,i=new Pn){this.center=e,this.halfSize=t,this.rotation=i}set(e,t,i){return this.center=e,this.halfSize=t,this.rotation=i,this}copy(e){return this.center.copy(e.center),this.halfSize.copy(e.halfSize),this.rotation.copy(e.rotation),this}clone(){return new this.constructor().copy(this)}getSize(e){return e.copy(this.halfSize).multiplyScalar(2)}clampPoint(e,t){const i=this.halfSize;ni.subVectors(e,this.center),this.rotation.extractBasis(gl,vl,yl),t.copy(this.center);const r=Qi.clamp(ni.dot(gl),-i.x,i.x);t.add(gl.multiplyScalar(r));const s=Qi.clamp(ni.dot(vl),-i.y,i.y);t.add(vl.multiplyScalar(s));const o=Qi.clamp(ni.dot(yl),-i.z,i.z);return t.add(yl.multiplyScalar(o)),t}containsPoint(e){return ni.subVectors(e,this.center),this.rotation.extractBasis(gl,vl,yl),Math.abs(ni.dot(gl))<=this.halfSize.x&&Math.abs(ni.dot(vl))<=this.halfSize.y&&Math.abs(ni.dot(yl))<=this.halfSize.z}intersectsBox3(e){return this.intersectsOBB(qX.fromBox3(e))}intersectsSphere(e){return this.clampPoint(e.center,dC),dC.distanceToSquared(e.center)<=e.radius*e.radius}intersectsOBB(e,t=Number.EPSILON){Bt.c=this.center,Bt.e[0]=this.halfSize.x,Bt.e[1]=this.halfSize.y,Bt.e[2]=this.halfSize.z,this.rotation.extractBasis(Bt.u[0],Bt.u[1],Bt.u[2]),Xt.c=e.center,Xt.e[0]=e.halfSize.x,Xt.e[1]=e.halfSize.y,Xt.e[2]=e.halfSize.z,e.rotation.extractBasis(Xt.u[0],Xt.u[1],Xt.u[2]);for(let s=0;s<3;s++)for(let o=0;o<3;o++)Tn[s][o]=Bt.u[s].dot(Xt.u[o]);ni.subVectors(Xt.c,Bt.c),pn[0]=ni.dot(Bt.u[0]),pn[1]=ni.dot(Bt.u[1]),pn[2]=ni.dot(Bt.u[2]);for(let s=0;s<3;s++)for(let o=0;o<3;o++)dt[s][o]=Math.abs(Tn[s][o])+t;let i,r;for(let s=0;s<3;s++)if(i=Bt.e[s],r=Xt.e[0]*dt[s][0]+Xt.e[1]*dt[s][1]+Xt.e[2]*dt[s][2],Math.abs(pn[s])>i+r)return!1;for(let s=0;s<3;s++)if(i=Bt.e[0]*dt[0][s]+Bt.e[1]*dt[1][s]+Bt.e[2]*dt[2][s],r=Xt.e[s],Math.abs(pn[0]*Tn[0][s]+pn[1]*Tn[1][s]+pn[2]*Tn[2][s])>i+r)return!1;return i=Bt.e[1]*dt[2][0]+Bt.e[2]*dt[1][0],r=Xt.e[1]*dt[0][2]+Xt.e[2]*dt[0][1],!(Math.abs(pn[2]*Tn[1][0]-pn[1]*Tn[2][0])>i+r||(i=Bt.e[1]*dt[2][1]+Bt.e[2]*dt[1][1],r=Xt.e[0]*dt[0][2]+Xt.e[2]*dt[0][0],Math.abs(pn[2]*Tn[1][1]-pn[1]*Tn[2][1])>i+r)||(i=Bt.e[1]*dt[2][2]+Bt.e[2]*dt[1][2],r=Xt.e[0]*dt[0][1]+Xt.e[1]*dt[0][0],Math.abs(pn[2]*Tn[1][2]-pn[1]*Tn[2][2])>i+r)||(i=Bt.e[0]*dt[2][0]+Bt.e[2]*dt[0][0],r=Xt.e[1]*dt[1][2]+Xt.e[2]*dt[1][1],Math.abs(pn[0]*Tn[2][0]-pn[2]*Tn[0][0])>i+r)||(i=Bt.e[0]*dt[2][1]+Bt.e[2]*dt[0][1],r=Xt.e[0]*dt[1][2]+Xt.e[2]*dt[1][0],Math.abs(pn[0]*Tn[2][1]-pn[2]*Tn[0][1])>i+r)||(i=Bt.e[0]*dt[2][2]+Bt.e[2]*dt[0][2],r=Xt.e[0]*dt[1][1]+Xt.e[1]*dt[1][0],Math.abs(pn[0]*Tn[2][2]-pn[2]*Tn[0][2])>i+r)||(i=Bt.e[0]*dt[1][0]+Bt.e[1]*dt[0][0],r=Xt.e[1]*dt[2][2]+Xt.e[2]*dt[2][1],Math.abs(pn[1]*Tn[0][0]-pn[0]*Tn[1][0])>i+r)||(i=Bt.e[0]*dt[1][1]+Bt.e[1]*dt[0][1],r=Xt.e[0]*dt[2][2]+Xt.e[2]*dt[2][0],Math.abs(pn[1]*Tn[0][1]-pn[0]*Tn[1][1])>i+r)||(i=Bt.e[0]*dt[1][2]+Bt.e[1]*dt[0][2],r=Xt.e[0]*dt[2][1]+Xt.e[1]*dt[2][0],Math.abs(pn[1]*Tn[0][2]-pn[0]*Tn[1][2])>i+r))}intersectsPlane(e){this.rotation.extractBasis(gl,vl,yl);const t=this.halfSize.x*Math.abs(e.normal.dot(gl))+this.halfSize.y*Math.abs(e.normal.dot(vl))+this.halfSize.z*Math.abs(e.normal.dot(yl)),i=e.normal.dot(this.center)-e.constant;return Math.abs(i)<=t}intersectRay(e,t){return this.getSize(fC),pC.setFromCenterAndSize(ni.set(0,0,0),fC),bm.setFromMatrix3(this.rotation),bm.setPosition(this.center),mC.copy(bm).invert(),gC.copy(e).applyMatrix4(mC),gC.intersectBox(pC,t)?t.applyMatrix4(bm):null}intersectsRay(e){return this.intersectRay(e,ni)!==null}fromBox3(e){return e.getCenter(this.center),e.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this}equals(e){return e.center.equals(this.center)&&e.halfSize.equals(this.halfSize)&&e.rotation.equals(this.rotation)}applyMatrix4(e){const t=e.elements;let i=ni.set(t[0],t[1],t[2]).length();const r=ni.set(t[4],t[5],t[6]).length(),s=ni.set(t[8],t[9],t[10]).length();e.determinant()<0&&(i=-i),ds.setFromMatrix4(e);const a=1/i,u=1/r,c=1/s;return ds.elements[0]*=a,ds.elements[1]*=a,ds.elements[2]*=a,ds.elements[3]*=u,ds.elements[4]*=u,ds.elements[5]*=u,ds.elements[6]*=c,ds.elements[7]*=c,ds.elements[8]*=c,this.rotation.multiply(ds),this.halfSize.x*=i,this.halfSize.y*=r,this.halfSize.z*=s,ni.setFromMatrixPosition(e),this.center.add(ni),this}}const qX=new PS,xr={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );
			gl_FragColor.a *= opacity;


		}`};class Uo{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const YX=new Za(-1,1,1,-1,0,1),LS=new ct;LS.setAttribute("position",new it([-1,3,0,-1,-1,0,3,-1,0],3));LS.setAttribute("uv",new it([0,2,0,0,2,0],2));class $c{constructor(e){this._mesh=new un(LS,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,YX)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Fg extends Uo{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof Nt?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=di.clone(e.uniforms),this.material=new Nt({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new $c(this.material)}render(e,t,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}class vC extends Uo{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,i){const r=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class ZX extends Uo{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class aD{constructor(e,t){if(this.renderer=e,t===void 0){const i=e.getSize(new ie);this._pixelRatio=e.getPixelRatio(),this._width=i.width,this._height=i.height,t=new Gt(this._width*this._pixelRatio,this._height*this._pixelRatio),t.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],xr===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),Fg===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new Fg(xr),this.clock=new TL}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let i=!1;for(let r=0,s=this.passes.length;r<s;r++){const o=this.passes[r];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),o.needsSwap){if(i){const a=this.renderer.getContext(),u=this.renderer.state.buffers.stencil;u.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),u.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}vC!==void 0&&(o instanceof vC?i=!0:o instanceof ZX&&(i=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new ie);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const i=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(i,r),this.renderTarget2.setSize(i,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(i,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}new Za(-1,1,1,-1,0,1);const lD=new ct;lD.setAttribute("position",new it([-1,3,0,-1,-1,0,3,-1,0],3));lD.setAttribute("uv",new it([0,2,0,0,2,0],2));class KX extends Uo{constructor(e,t,i,r,s){super(),this.scene=e,this.camera=t,this.overrideMaterial=i,this.clearColor=r,this.clearAlpha=s!==void 0?s:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new ve}render(e,t,i){const r=e.autoClear;e.autoClear=!1;let s,o;this.overrideMaterial!==void 0&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,s),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=o),e.autoClear=r}}const DS=new KX(Ke,St());St(n=>DS.camera=n);const yC={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new ve(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			vec3 luma = vec3( 0.299, 0.587, 0.114 );

			float v = dot( texel.xyz, luma );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class Nc extends Uo{constructor(e,t,i,r){super(),this.strength=t!==void 0?t:1,this.radius=i,this.threshold=r,this.resolution=e!==void 0?new ie(e.x,e.y):new ie(256,256),this.clearColor=new ve(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);this.renderTargetBright=new Gt(s,o),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let d=0;d<this.nMips;d++){const p=new Gt(s,o);p.texture.name="UnrealBloomPass.h"+d,p.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(p);const g=new Gt(s,o);g.texture.name="UnrealBloomPass.v"+d,g.texture.generateMipmaps=!1,this.renderTargetsVertical.push(g),s=Math.round(s/2),o=Math.round(o/2)}yC===void 0&&console.error("THREE.UnrealBloomPass relies on LuminosityHighPassShader");const a=yC;this.highPassUniforms=di.clone(a.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Nt({uniforms:this.highPassUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const u=[3,5,7,9,11];s=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);for(let d=0;d<this.nMips;d++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(u[d])),this.separableBlurMaterials[d].uniforms.texSize.value=new ie(s,o),s=Math.round(s/2),o=Math.round(o/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;const c=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=c,this.bloomTintColors=[new O(1,1,1),new O(1,1,1),new O(1,1,1),new O(1,1,1),new O(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,xr===void 0&&console.error("THREE.UnrealBloomPass relies on CopyShader");const f=xr;this.copyUniforms=di.clone(f.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new Nt({uniforms:this.copyUniforms,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader,blending:wg,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new ve,this.oldClearAlpha=1,this.basic=new pi,this.fsQuad=new $c(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()}setSize(e,t){let i=Math.round(e/2),r=Math.round(t/2);this.renderTargetBright.setSize(i,r);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(i,r),this.renderTargetsVertical[s].setSize(i,r),this.separableBlurMaterials[s].uniforms.texSize.value=new ie(i,r),i=Math.round(i/2),r=Math.round(r/2)}render(e,t,i,r,s){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const o=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=i.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=i.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let a=this.renderTargetBright;for(let u=0;u<this.nMips;u++)this.fsQuad.material=this.separableBlurMaterials[u],this.separableBlurMaterials[u].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[u].uniforms.direction.value=Nc.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[u]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[u].uniforms.colorTexture.value=this.renderTargetsHorizontal[u].texture,this.separableBlurMaterials[u].uniforms.direction.value=Nc.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[u]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[u];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=o}getSeperableBlurMaterial(e){return new Nt({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new ie(.5,.5)},direction:{value:new ie(.5,.5)}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}
				void main() {
					vec2 invSize = 1.0 / texSize;
					float fSigma = float(SIGMA);
					float weightSum = gaussianPdf(0.0, fSigma);
					vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianPdf(x, fSigma);
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new Nt({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform sampler2D dirtTexture;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}Nc.BlurDirectionX=new ie(1,0);Nc.BlurDirectionY=new ie(0,1);const[$X,uD]=Ge(0),[QX,cD]=Ge(1.5),[JX,hD]=Ge(0),yd=new Nc(new ie,1.5,0,0);uD(n=>yd.radius=n);cD(n=>yd.strength=n);hD(n=>yd.threshold=n);const Ra=new aD(yn());Ra.renderToScreen=!1;Qt(()=>{Ra.renderer=yn();const[n,e]=Ui();Ra.setSize(n,e),Ra.setPixelRatio(bs())},[yn,Ui,bs]);Ra.addPass(DS);Ra.addPass(yd);const fD=[!1],dD=n=>{n.userData.bloom=!0,fD[0]=!0},pD=n=>{n.userData.bloom=!1};let Ew;const mD=n=>{for(const e of n){if(e.userData.bloom){e.renderOrder=1;continue}!e.visible||(mD(e.children),e.material&&(e.material.colorWrite=!1),e.renderOrder=0)}},eq=()=>{mD(Ke.children),Ke.background&&(Ew=Ke.background,Ke.background=null)},tq=n=>n.material&&(n.material.colorWrite=!0),nq=()=>{Ke.traverse(tq),Ew&&(Ke.background=Ew)};var iq=()=>{eq(),Ra.render(),nq()};const Ix=n=>new sD(n.x*sn,n.y*sn,n.z*sn),xC=n=>new O(n.x*je,n.y*je,n.z*je),gD=[0],rq=new TL;ir(()=>gD[0]=rq.getDelta());const sq=new WeakMap,_C=new WeakMap,Ox=new WeakMap;class Aw extends bP{constructor(e,t){super(),this.mixer=Ts(sq,t,()=>new EL(t)),typeof e=="string"?this.name=e:(this.name=e.name,this.loadClip(e))}dispose(){return this.done?this:(super.dispose(),this.stop(),this)}get duration(){var e,t;return(t=(e=this.clip)===null||e===void 0?void 0:e.duration)!==null&&t!==void 0?t:0}loadClip(e){this.clip=e,this.action=this.mixer.clipAction(e)}setTracks(e){const t=Object.entries(e).map(([i,r])=>new Wl("."+i,Object.keys(r).map(s=>Number(s)),Object.values(r)));this.clip&&this.mixer.uncacheClip(this.clip),this.loadClip(new Yf(this.name,-1,t))}play({crossFade:e=.25,repeat:t=!0,onFinish:i}={}){var r,s;const[o,a]=(r=_C.get(this.mixer))!==null&&r!==void 0?r:[];if(o&&this.action===o){t!==a&&o.setLoop(t?ew:J_,1/0);return}(s=Ox.get(this.mixer))===null||s===void 0||s.cancel();const u=this.watch(ir(()=>this.mixer.update(gD[0])));Ox.set(this.mixer,u);const{action:c}=this;if(!c)return;o&&e?(c.time=0,c.enabled=!0,c.crossFadeFrom(o,e,!0)):this.mixer.stopAllAction(),_C.set(this.mixer,[c,t]),c.setLoop(t?ew:J_,1/0),c.clampWhenFinished=!0;const f=()=>i==null?void 0:i();this.mixer.addEventListener("finished",f),u.then(()=>this.mixer.removeEventListener("finished",f)),c.paused&&c.stop(),c.play()}stop(){var e;this.action&&(this.action.paused=!0),(e=Ox.get(this.mixer))===null||e===void 0||e.cancel()}update(e){this.mixer.time=0,this.action&&(this.action.time=0),this.mixer.update(e)}}var oq="$eWRhpRV$";const aq=No(n=>{const e=Object.entries(n);let t=0;for(const[,{length:o}]of e)o>t&&(t=o);const r=1e3*.001/t,s={};for(const[o,a]of e)s[o]=Object.fromEntries(a.map((u,c)=>[(c*r).toFixed(2),u]));return s},0,"trailingPromise");class lq extends eu{get animations(){var e;return(e=this.animationManagers)!==null&&e!==void 0?e:this.animationManagers={}}set animations(e){this.animationManagers=e}createAnimation(e){if(e in this.animations){const i=this.animations[e];if(typeof i!="string")return i}const t=this.watch(new Aw(e,this));return this.animations[e]=t,t}buildAnimation(e){aq(e).then(t=>{const i=oq+"animation";this.createAnimation(i).setTracks(t),this.playAnimation(i)})}makeAnimationProxy(e){return new Proxy(e,{get:(t,i)=>t[i],set:(t,i,r)=>(t[i]=r,this.buildAnimation(t),!0)})}async playAnimation(e,t){var i;await Promise.resolve(),this.loadingAnims&&(await Promise.all(this.loadingAnims),this.loadingAnims=void 0),!this.done&&(this.animationManager=typeof e=="string"?this.animations[e]:Object.values(this.animations)[e!=null?e:0],(i=this.animationManager)===null||i===void 0||i.play(t))}stopAnimation(){var e;(e=this.animationManager)===null||e===void 0||e.stop()}setAnimation(e,t){if(typeof e=="string"||typeof e=="number"){this.playAnimation(e,t),this._animation=void 0;return}if(typeof e=="boolean"){e?this.playAnimation(void 0,t):this.stopAnimation(),this._animation=void 0;return}if(this._animation=e,!e){this.stopAnimation();return}this._animation=this.makeAnimationProxy(e),this.buildAnimation(e)}get animation(){var e;return(e=this._animation)!==null&&e!==void 0?e:this._animation=this.makeAnimationProxy({})}set animation(e){if(Array.isArray(e)){let t=0;const i={onFinish:()=>{++t>=e.length&&(t=0),this.setAnimation(e[t],i)},repeat:!1};this.setAnimation(e[0],i);return}this.setAnimation(e)}}var Qc=n=>n.object3d.scale.clone().multiply(n.outerObject3d.scale);const[uq,wC]=Ge(void 0);var Jc=Xa(async()=>{const{World:n,GSSolver:e,SplitSolver:t,NaiveBroadphase:i,Material:r,ContactMaterial:s,Body:o,Vec3:a,Box:u,Sphere:c,Cylinder:f}=await import("./cannon-es.af838222.js"),d=new n;GL(y=>d.gravity.set(0,-y,0)),d.quatNormalizeSkip=0,d.quatNormalizeFast=!1;const p=new e;d.defaultContactMaterial.contactEquationStiffness=1e9,d.defaultContactMaterial.contactEquationRelaxation=4,p.iterations=7,p.tolerance=.1,d.solver=new t(p),d.broadphase=new i;const[g]=d.defaultContactMaterial.materials,v=new r("slipperyMaterial");return d.addContactMaterial(new s(v,v,{friction:0,restitution:0})),d.addContactMaterial(new s(v,g,{friction:.001,restitution:0})),uq(d),{world:d,defaultMaterial:g,slipperyMaterial:v,Body:o,Vec3:a,Box:u,Sphere:c,Cylinder:f}});async function vD(){const{Box:n}=await Jc();this.cannonBody.addShape(new n(Qc(this).multiplyScalar(.5)))}class cq extends lq{constructor(){super(...arguments),this._physicsShape=vD}getMAV(){var e;return(e=this._mAV)!==null&&e!==void 0?e:this._mAV=new Lx(1/0,1/0,1/0)}get maxAngularVelocityX(){var e,t;return(t=(e=this._mAV)===null||e===void 0?void 0:e.x)!==null&&t!==void 0?t:1/0}set maxAngularVelocityX(e){this.getMAV().x=e}get maxAngularVelocityY(){var e,t;return(t=(e=this._mAV)===null||e===void 0?void 0:e.y)!==null&&t!==void 0?t:1/0}set maxAngularVelocityY(e){this.getMAV().y=e}get maxAngularVelocityZ(){var e,t;return(t=(e=this._mAV)===null||e===void 0?void 0:e.z)!==null&&t!==void 0?t:1/0}set maxAngularVelocityZ(e){this.getMAV().z=e}getMV(){var e;return(e=this._mV)!==null&&e!==void 0?e:this._mV=new Lx(1/0,1/0,1/0)}get maxVelocityX(){var e,t;return(t=(e=this._mV)===null||e===void 0?void 0:e.x)!==null&&t!==void 0?t:1/0}set maxVelocityX(e){this.getMV().x=e}get maxVelocityY(){var e,t;return(t=(e=this._mV)===null||e===void 0?void 0:e.y)!==null&&t!==void 0?t:1/0}set maxVelocityY(e){this.getMV().y=e}get maxVelocityZ(){var e,t;return(t=(e=this._mV)===null||e===void 0?void 0:e.z)!==null&&t!==void 0?t:1/0}set maxVelocityZ(e){this.getMV().z=e}physicsRotate(){var e,t;if(!this.physicsUpdate)return;const i=(e=(t=this.physicsUpdate).rotation)!==null&&e!==void 0?e:t.rotation={};i.x=!0,i.y=!0,i.z=!0}physicsMove(){var e,t;if(!this.physicsUpdate)return;const i=(e=(t=this.physicsUpdate).position)!==null&&e!==void 0?e:t.position={};i.x=!0,i.y=!0,i.z=!0}physicsMoveXZ(){var e,t;if(!this.physicsUpdate)return;const i=(e=(t=this.physicsUpdate).position)!==null&&e!==void 0?e:t.position={};i.x=!0,i.z=!0}applyForce(e,t,i){setTimeout(()=>{var r;return(r=this.cannonBody)===null||r===void 0?void 0:r.applyForce({x:e,y:t,z:i})})}applyImpulse(e,t,i){setTimeout(()=>{var r;return(r=this.cannonBody)===null||r===void 0?void 0:r.applyImpulse({x:e,y:t,z:i})})}applyLocalForce(e,t,i){setTimeout(()=>{var r;return(r=this.cannonBody)===null||r===void 0?void 0:r.applyLocalForce({x:e,y:t,z:i})})}applyLocalImpulse(e,t,i){setTimeout(()=>{var r;return(r=this.cannonBody)===null||r===void 0?void 0:r.applyLocalImpulse({x:e,y:t,z:i})})}applyTorque(e,t,i){setTimeout(()=>{var r;return(r=this.cannonBody)===null||r===void 0?void 0:r.applyTorque({x:e,y:t,z:i})})}get velocity(){return this.bvhVelocity?this.bvhVelocity:this.cannonBody?this.cannonBody.velocity:new Lx(0,0,0)}set velocity(e){this.bvhVelocity?Object.assign(this.bvhVelocity,e):this.cannonBody&&Object.assign(this.cannonBody.velocity,e)}refreshCannon(){var e;this.physicsUpdate&&(this.physics=(e=this._physics)!==null&&e!==void 0?e:!1)}get noTumble(){return this._noTumble}set noTumble(e){this._noTumble=e,this.refreshCannon()}get slippery(){return this._slippery}set slippery(e){this._slippery=e,this.refreshCannon()}get mass(){return this._mass}set mass(e){this._mass=e,this.refreshCannon()}get physicsGroup(){return this._physicsGroup}set physicsGroup(e){this._physicsGroup=e,this.refreshCannon()}get ignorePhysicsGroups(){return this._ignorePhysicsGroups}set ignorePhysicsGroups(e){this._ignorePhysicsGroups=e,this.refreshCannon()}get physicsShape(){return this._physicsShape}set physicsShape(e){this._physicsShape=e,this.refreshCannon()}initPhysics(e,t){if(!(!e||t.done))switch(e){case!0:case"2d":import("./enableCannon.fb1310da.js").then(i=>i.default.call(this,t));break;case"map":this.bvh=!0,import("./enableBVHMap.ceae2822.js").then(i=>i.default.call(this,t,!1));break;case"map-debug":this.bvh=!0,import("./enableBVHMap.ceae2822.js").then(i=>i.default.call(this,t,!0));break;case"character":this.bvh=!0,import("./enableBVHCharacter.6e4e5b96.js").then(i=>i.default.call(this,t));break;default:xH(e)}}get physics(){var e;return(e=this._physics)!==null&&e!==void 0?e:!1}set physics(e){var t;if(this._physics===e)return;this._physics=e,(t=this.physicsHandle)===null||t===void 0||t.cancel();const i=this.physicsHandle=this.cancellable();this.initPhysics(e,i)}}const hq=new Set,kg=new Map,SC=new WeakSet,fq=()=>new WeakSet,dq=1/60;Qt(function(){const n=wC();if(!n)return;const e=ir(()=>{for(const t of hq){const i=t.cannonBody;if("_mAV"in t){const{x:o,y:a,z:u}=t._mAV,{angularVelocity:c}=i;c.x>o?c.x=o:c.x<-o&&(c.x=-o),c.y>a?c.y=a:c.y<-a&&(c.y=-a),c.z>u?c.z=u:c.z<-u&&(c.z=-u)}if("_mV"in t){const{x:o,y:a,z:u}=t._mV,{velocity:c}=i;c.x>o?c.x=o:c.x<-o&&(c.x=-o),c.y>a?c.y=a:c.y<-a&&(c.y=-a),c.z>u?c.z=u:c.z<-u&&(c.z=-u)}const{position:r,rotation:s}=t.physicsUpdate;t.physicsUpdate={},r&&(r.x&&(i.position.x=t.outerObject3d.position.x,i.velocity.x=0,i.force.x=0),r.y&&(i.position.y=t.outerObject3d.position.y,i.velocity.y=0,i.force.y=0),r.z&&(i.position.z=t.outerObject3d.position.z,i.velocity.z=0,i.force.z=0)),t.outerObject3d.position.copy(i.position),s?(s.x&&(i.angularVelocity.x=0,i.torque.x=0),s.y&&(i.angularVelocity.y=0,i.torque.y=0),s.z&&(i.angularVelocity.z=0,i.torque.z=0),i.quaternion.copy(t.outerObject3d.quaternion)):t.outerObject3d.quaternion.copy(i.quaternion)}n.step(dq),kg.clear();for(const t of n.contacts)Ts(kg,t.bi,fq).add(t.bj)});return()=>{e.cancel()}},[wC]);const ps={defines:{MAX_STEP:0,PERSPECTIVE_CAMERA:!0,DISTANCE_ATTENUATION:!0,FRESNEL:!0,INFINITE_THICK:!1,SELECTIVE:!1},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tMetalness:{value:null},tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new ie},cameraProjectionMatrix:{value:new Me},cameraInverseProjectionMatrix:{value:new Me},opacity:{value:.5},maxDistance:{value:180},cameraRange:{value:0},thickness:{value:.018}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}

	`,fragmentShader:`
		// precision highp float;
		precision highp sampler2D;
		varying vec2 vUv;
		uniform sampler2D tDepth;
		uniform sampler2D tNormal;
		uniform sampler2D tMetalness;
		uniform sampler2D tDiffuse;
		uniform float cameraRange;
		uniform vec2 resolution;
		uniform float opacity;
		uniform float cameraNear;
		uniform float cameraFar;
		uniform float maxDistance;
		uniform float thickness;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;
		#include <packing>
		float pointToLineDistance(vec3 x0, vec3 x1, vec3 x2) {
			//x0: point, x1: linePointA, x2: linePointB
			//https://mathworld.wolfram.com/Point-LineDistance3-Dimensional.html
			return length(cross(x0-x1,x0-x2))/length(x2-x1);
		}
		float pointPlaneDistance(vec3 point,vec3 planePoint,vec3 planeNormal){
			// https://mathworld.wolfram.com/Point-PlaneDistance.html
			//// https://en.wikipedia.org/wiki/Plane_(geometry)
			//// http://paulbourke.net/geometry/pointlineplane/
			float a=planeNormal.x,b=planeNormal.y,c=planeNormal.z;
			float x0=point.x,y0=point.y,z0=point.z;
			float x=planePoint.x,y=planePoint.y,z=planePoint.z;
			float d=-(a*x+b*y+c*z);
			float distance=(a*x0+b*y0+c*z0+d)/sqrt(a*a+b*b+c*c);
			return distance;
		}
		float getDepth( const in vec2 uv ) {
			return texture2D( tDepth, uv ).x;
		}
		float getViewZ( const in float depth ) {
			#ifdef PERSPECTIVE_CAMERA
				return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
				return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}
		vec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {
			vec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc
			clipPosition *= clipW; //clip
			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;//view
		}
		vec3 getViewNormal( const in vec2 uv ) {
			return unpackRGBToNormal( texture2D( tNormal, uv ).xyz );
		}
		vec2 viewPositionToXY(vec3 viewPosition){
			vec2 xy;
			vec4 clip=cameraProjectionMatrix*vec4(viewPosition,1);
			xy=clip.xy;//clip
			float clipW=clip.w;
			xy/=clipW;//NDC
			xy=(xy+1.)/2.;//uv
			xy*=resolution;//screen
			return xy;
		}
		void main(){
			#ifdef SELECTIVE
				float metalness=texture2D(tMetalness,vUv).r;
				if(metalness==0.) return;
			#endif

			float depth = getDepth( vUv );
			float viewZ = getViewZ( depth );
			if(-viewZ>=cameraFar) return;

			float clipW = cameraProjectionMatrix[2][3] * viewZ+cameraProjectionMatrix[3][3];
			vec3 viewPosition=getViewPosition( vUv, depth, clipW );

			vec2 d0=gl_FragCoord.xy;
			vec2 d1;

			vec3 viewNormal=getViewNormal( vUv );

			#ifdef PERSPECTIVE_CAMERA
				vec3 viewIncidentDir=normalize(viewPosition);
				vec3 viewReflectDir=reflect(viewIncidentDir,viewNormal);
			#else
				vec3 viewIncidentDir=vec3(0,0,-1);
				vec3 viewReflectDir=reflect(viewIncidentDir,viewNormal);
			#endif

			float maxReflectRayLen=maxDistance/dot(-viewIncidentDir,viewNormal);
			// dot(a,b)==length(a)*length(b)*cos(theta) // https://www.mathsisfun.com/algebra/vectors-dot-product.html
			// if(a.isNormalized&&b.isNormalized) dot(a,b)==cos(theta)
			// maxDistance/maxReflectRayLen=cos(theta)
			// maxDistance/maxReflectRayLen==dot(a,b)
			// maxReflectRayLen==maxDistance/dot(a,b)

			vec3 d1viewPosition=viewPosition+viewReflectDir*maxReflectRayLen;
			#ifdef PERSPECTIVE_CAMERA
				if(d1viewPosition.z>-cameraNear){
					//https://tutorial.math.lamar.edu/Classes/CalcIII/EqnsOfLines.aspx
					float t=(-cameraNear-viewPosition.z)/viewReflectDir.z;
					d1viewPosition=viewPosition+viewReflectDir*t;
				}
			#endif
			d1=viewPositionToXY(d1viewPosition);

			float totalLen=length(d1-d0);
			float xLen=d1.x-d0.x;
			float yLen=d1.y-d0.y;
			float totalStep=max(abs(xLen),abs(yLen));
			float xSpan=xLen/totalStep;
			float ySpan=yLen/totalStep;
			for(float i=0.;i<float(MAX_STEP);i++){
				if(i>=totalStep) break;
				vec2 xy=vec2(d0.x+i*xSpan,d0.y+i*ySpan);
				if(xy.x<0.||xy.x>resolution.x||xy.y<0.||xy.y>resolution.y) break;
				float s=length(xy-d0)/totalLen;
				vec2 uv=xy/resolution;

				float d = getDepth(uv);
				float vZ = getViewZ( d );
				if(-vZ>=cameraFar) continue;
				float cW = cameraProjectionMatrix[2][3] * vZ+cameraProjectionMatrix[3][3];
				vec3 vP=getViewPosition( uv, d, cW );

				#ifdef PERSPECTIVE_CAMERA
					// https://comp.nus.edu.sg/~lowkl/publications/lowk_persp_interp_techrep.pdf
					float recipVPZ=1./viewPosition.z;
					float viewReflectRayZ=1./(recipVPZ+s*(1./d1viewPosition.z-recipVPZ));
				#else
					float viewReflectRayZ=viewPosition.z+s*(d1viewPosition.z-viewPosition.z);
				#endif

				// if(viewReflectRayZ>vZ) continue; // will cause "npm run make-screenshot webgl_postprocessing_ssr" high probability hang.
				// https://github.com/mrdoob/three.js/pull/21539#issuecomment-821061164
				if(viewReflectRayZ<=vZ){

					bool hit;
					#ifdef INFINITE_THICK
						hit=true;
					#else
						float away=pointToLineDistance(vP,viewPosition,d1viewPosition);

						float minThickness;
						vec2 xyNeighbor=xy;
						xyNeighbor.x+=1.;
						vec2 uvNeighbor=xyNeighbor/resolution;
						vec3 vPNeighbor=getViewPosition(uvNeighbor,d,cW);
						minThickness=vPNeighbor.x-vP.x;
						minThickness*=3.;
						float tk=max(minThickness,thickness);

						hit=away<=tk;
					#endif

					if(hit){
						vec3 vN=getViewNormal( uv );
						if(dot(viewReflectDir,vN)>=0.) continue;
						float distance=pointPlaneDistance(vP,viewPosition,viewNormal);
						if(distance>maxDistance) break;
						float op=opacity;
						#ifdef DISTANCE_ATTENUATION
							float ratio=1.-(distance/maxDistance);
							float attenuation=ratio*ratio;
							op=opacity*attenuation;
						#endif
						#ifdef FRESNEL
							float fresnelCoe=(dot(viewIncidentDir,viewReflectDir)+1.)/2.;
							op*=fresnelCoe;
						#endif
						vec4 reflectColor=texture2D(tDiffuse,uv);
						gl_FragColor.xyz=reflectColor.xyz;
						gl_FragColor.a=op;
						break;
					}
				}
			}
		}
	`},Tm={defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}

	`,fragmentShader:`

		uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;

		varying vec2 vUv;

		#include <packing>

		float getLinearDepth( const in vec2 uv ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, uv ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, uv ).x;

			#endif

		}

		void main() {

			float depth = getLinearDepth( vUv );
			float d = 1.0 - depth;
			// d=(d-.999)*1000.;
			gl_FragColor = vec4( vec3( d ), 1.0 );

		}

	`},ua={uniforms:{tDiffuse:{value:null},resolution:{value:new ie},opacity:{value:.5}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}

	`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec2 resolution;
		varying vec2 vUv;
		void main() {
			//reverse engineering from PhotoShop blur filter, then change coefficient

			vec2 texelSize = ( 1.0 / resolution );

			vec4 c=texture2D(tDiffuse,vUv);

			vec2 offset;

			offset=(vec2(-1,0))*texelSize;
			vec4 cl=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(1,0))*texelSize;
			vec4 cr=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,-1))*texelSize;
			vec4 cb=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,1))*texelSize;
			vec4 ct=texture2D(tDiffuse,vUv+offset);

			// float coeCenter=.5;
			// float coeSide=.125;
			float coeCenter=.2;
			float coeSide=.2;
			float a=c.a*coeCenter+cl.a*coeSide+cr.a*coeSide+cb.a*coeSide+ct.a*coeSide;
			vec3 rgb=(c.rgb*c.a*coeCenter+cl.rgb*cl.a*coeSide+cr.rgb*cr.a*coeSide+cb.rgb*cb.a*coeSide+ct.rgb*ct.a*coeSide)/a;
			gl_FragColor=vec4(rgb,a);

		}
	`};class yo extends Uo{constructor({renderer:e,scene:t,camera:i,width:r,height:s,selects:o,bouncing:a=!1,groundReflector:u}){super(),this.width=r!==void 0?r:512,this.height=s!==void 0?s:512,this.clear=!0,this.renderer=e,this.scene=t,this.camera=i,this.groundReflector=u,this.opacity=ps.uniforms.opacity.value,this.output=0,this.maxDistance=ps.uniforms.maxDistance.value,this.thickness=ps.uniforms.thickness.value,this.tempColor=new ve,this._selects=o,this.selective=Array.isArray(this._selects),Object.defineProperty(this,"selects",{get(){return this._selects},set(f){this._selects!==f&&(this._selects=f,Array.isArray(f)?(this.selective=!0,this.ssrMaterial.defines.SELECTIVE=!0,this.ssrMaterial.needsUpdate=!0):(this.selective=!1,this.ssrMaterial.defines.SELECTIVE=!1,this.ssrMaterial.needsUpdate=!0))}}),this._bouncing=a,Object.defineProperty(this,"bouncing",{get(){return this._bouncing},set(f){this._bouncing!==f&&(this._bouncing=f,f?this.ssrMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture:this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture)}}),this.blur=!0,this._distanceAttenuation=ps.defines.DISTANCE_ATTENUATION,Object.defineProperty(this,"distanceAttenuation",{get(){return this._distanceAttenuation},set(f){this._distanceAttenuation!==f&&(this._distanceAttenuation=f,this.ssrMaterial.defines.DISTANCE_ATTENUATION=f,this.ssrMaterial.needsUpdate=!0)}}),this._fresnel=ps.defines.FRESNEL,Object.defineProperty(this,"fresnel",{get(){return this._fresnel},set(f){this._fresnel!==f&&(this._fresnel=f,this.ssrMaterial.defines.FRESNEL=f,this.ssrMaterial.needsUpdate=!0)}}),this._infiniteThick=ps.defines.INFINITE_THICK,Object.defineProperty(this,"infiniteThick",{get(){return this._infiniteThick},set(f){this._infiniteThick!==f&&(this._infiniteThick=f,this.ssrMaterial.defines.INFINITE_THICK=f,this.ssrMaterial.needsUpdate=!0)}});const c=new wv;c.type=Gl,c.minFilter=Ft,c.magFilter=Ft,this.beautyRenderTarget=new Gt(this.width,this.height,{minFilter:Ft,magFilter:Ft,depthTexture:c,depthBuffer:!0}),this.prevRenderTarget=new Gt(this.width,this.height,{minFilter:Ft,magFilter:Ft}),this.normalRenderTarget=new Gt(this.width,this.height,{minFilter:Ft,magFilter:Ft,type:_s}),this.metalnessRenderTarget=new Gt(this.width,this.height,{minFilter:Ft,magFilter:Ft}),this.ssrRenderTarget=new Gt(this.width,this.height,{minFilter:Ft,magFilter:Ft}),this.blurRenderTarget=this.ssrRenderTarget.clone(),this.blurRenderTarget2=this.ssrRenderTarget.clone(),ps===void 0&&console.error("THREE.SSRPass: The pass relies on SSRShader."),this.ssrMaterial=new Nt({defines:Object.assign({},ps.defines,{MAX_STEP:Math.sqrt(this.width*this.width+this.height*this.height)}),uniforms:di.clone(ps.uniforms),vertexShader:ps.vertexShader,fragmentShader:ps.fragmentShader,blending:Yt}),this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssrMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssrMaterial.defines.SELECTIVE=this.selective,this.ssrMaterial.needsUpdate=!0,this.ssrMaterial.uniforms.tMetalness.value=this.metalnessRenderTarget.texture,this.ssrMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.ssrMaterial.uniforms.cameraNear.value=this.camera.near,this.ssrMaterial.uniforms.cameraFar.value=this.camera.far,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.ssrMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new Iv,this.normalMaterial.blending=Yt,this.metalnessOnMaterial=new pi({color:"white"}),this.metalnessOffMaterial=new pi({color:"black"}),this.blurMaterial=new Nt({defines:Object.assign({},ua.defines),uniforms:di.clone(ua.uniforms),vertexShader:ua.vertexShader,fragmentShader:ua.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.blurMaterial2=new Nt({defines:Object.assign({},ua.defines),uniforms:di.clone(ua.uniforms),vertexShader:ua.vertexShader,fragmentShader:ua.fragmentShader}),this.blurMaterial2.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.blurMaterial2.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new Nt({defines:Object.assign({},Tm.defines),uniforms:di.clone(Tm.uniforms),vertexShader:Tm.vertexShader,fragmentShader:Tm.fragmentShader,blending:Yt}),this.depthRenderMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new Nt({uniforms:di.clone(xr.uniforms),vertexShader:xr.vertexShader,fragmentShader:xr.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:Sg,blendDst:Mg,blendEquation:Os,blendSrcAlpha:Sg,blendDstAlpha:Mg,blendEquationAlpha:Os}),this.fsQuad=new $c(null),this.originalClearColor=new ve}dispose(){this.beautyRenderTarget.dispose(),this.prevRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.metalnessRenderTarget.dispose(),this.ssrRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.blurRenderTarget2.dispose(),this.normalMaterial.dispose(),this.metalnessOnMaterial.dispose(),this.metalnessOffMaterial.dispose(),this.blurMaterial.dispose(),this.blurMaterial2.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(e,t){switch(e.setRenderTarget(this.beautyRenderTarget),e.clear(),this.groundReflector&&(this.groundReflector.visible=!1,this.groundReflector.doRender(this.renderer,this.scene,this.camera),this.groundReflector.visible=!0),e.render(this.scene,this.camera),this.groundReflector&&(this.groundReflector.visible=!1),this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,0,0),this.selective&&this.renderMetalness(e,this.metalnessOnMaterial,this.metalnessRenderTarget,0,0),this.ssrMaterial.uniforms.opacity.value=this.opacity,this.ssrMaterial.uniforms.maxDistance.value=this.maxDistance,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.renderPass(e,this.ssrMaterial,this.ssrRenderTarget),this.blur&&(this.renderPass(e,this.blurMaterial,this.blurRenderTarget),this.renderPass(e,this.blurMaterial2,this.blurRenderTarget2)),this.output){case yo.OUTPUT.Default:this.bouncing?(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Yt,this.renderPass(e,this.copyMaterial,this.prevRenderTarget),this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=bo,this.renderPass(e,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture,this.copyMaterial.blending=Yt,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t)):(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Yt,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t),this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=bo,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t));break;case yo.OUTPUT.SSR:this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=Yt,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t),this.bouncing&&(this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Yt,this.renderPass(e,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=bo,this.renderPass(e,this.copyMaterial,this.prevRenderTarget));break;case yo.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Yt,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case yo.OUTPUT.Depth:this.renderPass(e,this.depthRenderMaterial,this.renderToScreen?null:t);break;case yo.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=Yt,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case yo.OUTPUT.Metalness:this.copyMaterial.uniforms.tDiffuse.value=this.metalnessRenderTarget.texture,this.copyMaterial.blending=Yt,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;default:console.warn("THREE.SSRPass: Unknown output type.")}}renderPass(e,t,i,r,s){this.originalClearColor.copy(e.getClearColor(this.tempColor));const o=e.getClearAlpha(this.tempColor),a=e.autoClear;e.setRenderTarget(i),e.autoClear=!1,r!=null&&(e.setClearColor(r),e.setClearAlpha(s||0),e.clear()),this.fsQuad.material=t,this.fsQuad.render(e),e.autoClear=a,e.setClearColor(this.originalClearColor),e.setClearAlpha(o)}renderOverride(e,t,i,r,s){this.originalClearColor.copy(e.getClearColor(this.tempColor));const o=e.getClearAlpha(this.tempColor),a=e.autoClear;e.setRenderTarget(i),e.autoClear=!1,r=t.clearColor||r,s=t.clearAlpha||s,r!=null&&(e.setClearColor(r),e.setClearAlpha(s||0),e.clear()),this.scene.overrideMaterial=t,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=a,e.setClearColor(this.originalClearColor),e.setClearAlpha(o)}renderMetalness(e,t,i,r,s){this.originalClearColor.copy(e.getClearColor(this.tempColor));const o=e.getClearAlpha(this.tempColor),a=e.autoClear;e.setRenderTarget(i),e.autoClear=!1,r=t.clearColor||r,s=t.clearAlpha||s,r!=null&&(e.setClearColor(r),e.setClearAlpha(s||0),e.clear()),this.scene.traverseVisible(u=>{u._SSRPassBackupMaterial=u.material,this._selects.includes(u)?u.material=this.metalnessOnMaterial:u.material=this.metalnessOffMaterial}),e.render(this.scene,this.camera),this.scene.traverseVisible(u=>{u.material=u._SSRPassBackupMaterial}),e.autoClear=a,e.setClearColor(this.originalClearColor),e.setClearAlpha(o)}setSize(e,t){this.width=e,this.height=t,this.ssrMaterial.defines.MAX_STEP=Math.sqrt(e*e+t*t),this.ssrMaterial.needsUpdate=!0,this.beautyRenderTarget.setSize(e,t),this.prevRenderTarget.setSize(e,t),this.ssrRenderTarget.setSize(e,t),this.normalRenderTarget.setSize(e,t),this.metalnessRenderTarget.setSize(e,t),this.blurRenderTarget.setSize(e,t),this.blurRenderTarget2.setSize(e,t),this.ssrMaterial.uniforms.resolution.value.set(e,t),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(e,t),this.blurMaterial2.uniforms.resolution.value.set(e,t)}}yo.OUTPUT={Default:0,SSR:1,Beauty:3,Depth:4,Normal:5,Metalness:7};const[MC,yD]=Ge(null),IS=[!1],OS=[],pq=n=>{n.userData.ssr||(n.userData.ssr=!0,OS.push(n),IS[0]=!0)},bC=n=>{!n.userData.ssr||(n.userData.ssr=!1,MP(OS,n))},Hv=new yo({renderer:yn(),scene:Ke,camera:St(),width:Nv,height:zv,groundReflector:yD(),selects:OS});yn(n=>Hv.renderer=n);St(n=>Hv.camera=n);yD(n=>{Hv.groundReflector=n,n&&(IS[0]=!0)});var TC=new Map;class xa extends Uo{constructor(e,t,i,r){super(),this.renderScene=t,this.renderCamera=i,this.selectedObjects=r!==void 0?r:[],this.visibleEdgeColor=new ve(1,1,1),this.hiddenEdgeColor=new ve(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=e!==void 0?new ie(e.x,e.y):new ie(256,256);const s=Math.round(this.resolution.x/this.downSampleRatio),o=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new Gt(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new Xc,this.depthMaterial.side=Lo,this.depthMaterial.depthPacking=gv,this.depthMaterial.blending=Yt,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=Lo,this.prepareMaskMaterial.fragmentShader=f(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new Gt(this.resolution.x,this.resolution.y),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new Gt(s,o),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new Gt(s,o),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new Gt(Math.round(s/2),Math.round(o/2)),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new Gt(s,o),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new Gt(Math.round(s/2),Math.round(o/2)),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;const a=4,u=4;this.separableBlurMaterial1=this.getSeperableBlurMaterial(a),this.separableBlurMaterial1.uniforms.texSize.value.set(s,o),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(u),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(s/2),Math.round(o/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=u,this.overlayMaterial=this.getOverlayMaterial(),xr===void 0&&console.error("THREE.OutlinePass relies on CopyShader");const c=xr;this.copyUniforms=di.clone(c.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new Nt({uniforms:this.copyUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,blending:Yt,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new ve,this.oldClearAlpha=1,this.fsQuad=new $c(null),this.tempPulseColor1=new ve,this.tempPulseColor2=new ve,this.textureMatrix=new Me;function f(d,p){const g=p.isPerspectiveCamera?"perspective":"orthographic";return d.replace(/DEPTH_TO_VIEW_Z/g,g+"DepthToViewZ")}}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()}setSize(e,t){this.renderTargetMaskBuffer.setSize(e,t),this.renderTargetDepthBuffer.setSize(e,t);let i=Math.round(e/this.downSampleRatio),r=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(i,r),this.renderTargetBlurBuffer1.setSize(i,r),this.renderTargetEdgeBuffer1.setSize(i,r),this.separableBlurMaterial1.uniforms.texSize.value.set(i,r),i=Math.round(i/2),r=Math.round(r/2),this.renderTargetBlurBuffer2.setSize(i,r),this.renderTargetEdgeBuffer2.setSize(i,r),this.separableBlurMaterial2.uniforms.texSize.value.set(i,r)}changeVisibilityOfSelectedObjects(e){const t=this._visibilityCache;function i(r){r.isMesh&&(e===!0?r.visible=t.get(r):(t.set(r,r.visible),r.visible=e))}for(let r=0;r<this.selectedObjects.length;r++)this.selectedObjects[r].traverse(i)}changeVisibilityOfNonSelectedObjects(e){const t=this._visibilityCache,i=[];function r(o){o.isMesh&&i.push(o)}for(let o=0;o<this.selectedObjects.length;o++)this.selectedObjects[o].traverse(r);function s(o){if(o.isMesh||o.isSprite){let a=!1;for(let u=0;u<i.length;u++)if(i[u].id===o.id){a=!0;break}if(a===!1){const u=o.visible;(e===!1||t.get(o)===!0)&&(o.visible=e),t.set(o,u)}}else(o.isPoints||o.isLine)&&(e===!0?o.visible=t.get(o):(t.set(o,o.visible),o.visible=e))}this.renderScene.traverse(s)}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(e,t,i,r,s){if(this.selectedObjects.length>0){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const o=e.autoClear;e.autoClear=!1,s&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const a=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=a,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const u=.625+Math.cos(performance.now()*.01/this.pulsePeriod)*.75/2;this.tempPulseColor1.multiplyScalar(u),this.tempPulseColor2.multiplyScalar(u)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=xa.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=xa.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=xa.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=xa.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,s&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(i),this.fsQuad.render(e),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=o}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=i.texture,e.setRenderTarget(null),this.fsQuad.render(e))}getPrepareMaskMaterial(){return new Nt({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new ie(.5,.5)},textureMatrix:{value:null}},vertexShader:`#include <morphtarget_pars_vertex>
				#include <skinning_pars_vertex>

				varying vec4 projTexCoord;
				varying vec4 vPosition;
				uniform mat4 textureMatrix;

				void main() {

					#include <skinbase_vertex>
					#include <begin_vertex>
					#include <morphtarget_vertex>
					#include <skinning_vertex>
					#include <project_vertex>

					vPosition = mvPosition;
					vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
					projTexCoord = textureMatrix * worldPosition;

				}`,fragmentShader:`#include <packing>
				varying vec4 vPosition;
				varying vec4 projTexCoord;
				uniform sampler2D depthTexture;
				uniform vec2 cameraNearFar;

				void main() {

					float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));
					float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );
					float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;
					gl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);

				}`})}getEdgeDetectionMaterial(){return new Nt({uniforms:{maskTexture:{value:null},texSize:{value:new ie(.5,.5)},visibleEdgeColor:{value:new O(1,1,1)},hiddenEdgeColor:{value:new O(1,1,1)}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform vec2 texSize;
				uniform vec3 visibleEdgeColor;
				uniform vec3 hiddenEdgeColor;

				void main() {
					vec2 invSize = 1.0 / texSize;
					vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);
					vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);
					vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);
					vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);
					vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);
					float diff1 = (c1.r - c2.r)*0.5;
					float diff2 = (c3.r - c4.r)*0.5;
					float d = length( vec2(diff1, diff2) );
					float a1 = min(c1.g, c2.g);
					float a2 = min(c3.g, c4.g);
					float visibilityFactor = min(a1, a2);
					vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;
					gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);
				}`})}getSeperableBlurMaterial(e){return new Nt({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new ie(.5,.5)},direction:{value:new ie(.5,.5)},kernelRadius:{value:1}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;
				uniform float kernelRadius;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}

				void main() {
					vec2 invSize = 1.0 / texSize;
					float weightSum = gaussianPdf(0.0, kernelRadius);
					vec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;
					vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);
					vec2 uvOffset = delta;
					for( int i = 1; i <= MAX_RADIUS; i ++ ) {
						float w = gaussianPdf(uvOffset.x, kernelRadius);
						vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);
						vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);
						diffuseSum += ((sample1 + sample2) * w);
						weightSum += (2.0 * w);
						uvOffset += delta;
					}
					gl_FragColor = diffuseSum/weightSum;
				}`})}getOverlayMaterial(){return new Nt({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform sampler2D edgeTexture1;
				uniform sampler2D edgeTexture2;
				uniform sampler2D patternTexture;
				uniform float edgeStrength;
				uniform float edgeGlow;
				uniform bool usePatternTexture;

				void main() {
					vec4 edgeValue1 = texture2D(edgeTexture1, vUv);
					vec4 edgeValue2 = texture2D(edgeTexture2, vUv);
					vec4 maskColor = texture2D(maskTexture, vUv);
					vec4 patternColor = texture2D(patternTexture, 6.0 * vUv);
					float visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;
					vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;
					vec4 finalColor = edgeStrength * maskColor.r * edgeValue;
					if(usePatternTexture)
						finalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);
					gl_FragColor = finalColor;
				}`,blending:wg,depthTest:!1,depthWrite:!1,transparent:!0})}}xa.BlurDirectionX=new ie(1,0);xa.BlurDirectionY=new ie(0,1);const[mq,Cw]=Ge("#ffffff"),[gq,Rw]=Ge(void 0),[vq,Pw]=Ge(void 0),[yq,xD]=Ge(0),[xq,_D]=Ge(3),[_q,wD]=Ge(1),SD=[!1],FS=[],MD=n=>{n.userData.outline||(n.userData.outline=!0,FS.push(n),SD[0]=!0)},bD=n=>{!n.userData.outline||(n.userData.outline=!1,MP(FS,n))},Us=new xa(new ie,Ke,St(),FS);St(n=>Us.renderCamera=n);Qt(()=>{var n;const e=Cw(),t=(n=Rw())!==null&&n!==void 0?n:e;Us.visibleEdgeColor=new ve(e),Us.hiddenEdgeColor=new ve(t)},[Cw,Rw]);Qt(()=>{const n=Pw();if(!!n)return Us.patternTexture=oi(n),Us.usePatternTexture=!0,()=>{Us.usePatternTexture=!1}},[Pw]);xD(n=>Us.pulsePeriod=n);_D(n=>Us.edgeStrength=n);wD(n=>Us.edgeThickness=n);const Rl=new Set,wq=(n,e)=>{var t,i,r;return(t=(r=n.userData)[e])!==null&&t!==void 0?t:r[e]=(i=n.material[e])!==null&&i!==void 0?i:0},Fx=(n,e,t)=>{n.material[e]=wq(n,e)*t},EC=(n,e,t,i,r,s)=>{const{material:o}=n;if(!!o){if(Array.isArray(o)){for(let a=0;a<o.length;++a){const u=o[a];e&&(u instanceof sc||(o[a]=new sc,o[a].copy(u),u.dispose()))}return}if(e){o instanceof sc||(n.material=new sc,n.material.copy(o),o.dispose());return}t&&!(o instanceof Ss)&&(n.material=new Ss,n.material.copy(o),n.material.envMapIntensity=1,n.material.roughness=1,o.dispose()),(t||n.material instanceof Ss)&&(i!==void 0&&Fx(n,"metalness",i),r!==void 0&&Fx(n,"roughness",r),s!==void 0&&Fx(n,"envMapIntensity",s))}};var jh=No(()=>{for(const n of Rl){const{_toon:e,_pbr:t,_metalnessFactor:i,_roughnessFactor:r,_environmentFactor:s}=n;"loadedResolvable"in n?n.loadedResolvable.then(o=>{o.traverse(a=>EC(a,e,t,i,r,s))}):n.outerObject3d.traverse(o=>EC(o,e,t,i,r,s))}Rl.clear()},0,"trailing");const Xh=new Map,kx=new PS,qh=new PS,Sq=()=>new Set,AC=new WeakMap,CC=(n,e)=>{const t=AC.get(n);if(t)return t;const i=IL(n.x,n.y,n.z,e.x*sn,e.y*sn,e.z*sn);return AC.set(n,i),i},Mq=q1(()=>{const n=St();rD.setFromProjectionMatrix(WX.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse))},200,"leading");class zc extends cq{constructor(e){super(),this.object3d=e,this.outerObject3d=e,this.initOuterObject3d()}dispose(){return this.done?this:(super.dispose(),this._id!==void 0&&Xh.get(this._id).delete(this),bC(this.object3d),this)}find(e){var t,i;const r=this.outerObject3d.getObjectByName(Rt.sanitizeNodeName(e));return r&&((t=(i=r.userData).manager)!==null&&t!==void 0?t:i.manager=new zc(r))}findAll(e){const t=[];return this.outerObject3d.traverse(i=>{var r,s;i.name===e&&t.push((r=(s=i.userData).manager)!==null&&r!==void 0?r:s.manager=new zc(i))}),t}get onClick(){return this._onClick}set onClick(e){var t;(t=this.clickHandle)===null||t===void 0||t.cancel(),this._onClick=e,e&&(Sw.add(this.object3d),this.clickHandle=this.cancellable(()=>Sw.delete(this.object3d)))}get onMouseDown(){return this._onMouseDown}set onMouseDown(e){var t;(t=this.mouseDownHandle)===null||t===void 0||t.cancel(),this._onMouseDown=e,e&&(Mw.add(this.object3d),this.mouseDownHandle=this.cancellable(()=>Mw.delete(this.object3d)))}get onMouseUp(){return this._onMouseUp}set onMouseUp(e){var t;(t=this.mouseUpHandle)===null||t===void 0||t.cancel(),this._onMouseUp=e,e&&(bw.add(this.object3d),this.mouseUpHandle=this.cancellable(()=>bw.delete(this.object3d)))}get onMouseOver(){return this._onMouseOver}set onMouseOver(e){var t;(t=this.mouseOverHandle)===null||t===void 0||t.cancel(),this._onMouseOver=e,e&&(Tw.add(this.object3d),this.mouseOverHandle=this.cancellable(()=>Tw.delete(this.object3d)))}get onMouseOut(){return this._onMouseOut}set onMouseOut(e){var t;(t=this.mouseOutHandle)===null||t===void 0||t.cancel(),this._onMouseOut=e,e&&(Wm.add(this.object3d),this.mouseOutHandle=this.cancellable(()=>Wm.delete(this.object3d)))}get onMouseMove(){return this._onMouseMove}set onMouseMove(e){var t;(t=this.mouseMoveHandle)===null||t===void 0||t.cancel(),this._onMouseMove=e,e&&(oD.add(this.object3d),this.mouseMoveHandle=this.cancellable(()=>Wm.delete(this.object3d)))}get name(){return this.outerObject3d.name}set name(e){this.outerObject3d.name=Rt.sanitizeNodeName(e)}get id(){return this._id}set id(e){this._id!==void 0&&Xh.get(this._id).delete(this),this._id=e,e!==void 0&&Ts(Xh,e,Sq).add(this)}getWorldPosition(){return Ix(this.object3d.getWorldPosition(Tl))}getRay(){return nD.set(this.object3d.getWorldPosition(Tl),this.object3d.getWorldDirection(Zt))}pointAt(e){return Ix(this.getRay().at(e*je,Zt))}rayIntersectsAt(e,t){if(this.done||e.done||this===e)return;qh.set(e.object3d.getWorldPosition(new O),tD,new Pn().setFromMatrix4(e.object3d.matrixWorld));const i=qh.intersectRay(this.getRay(),Zt);if(!!i){if(t){const{x:r,y:s,z:o}=this.object3d.getWorldPosition(Tl);if(IL(i.x,i.y,i.z,r,s,o)*sn>t)return}return Ix(i)}}rayIntersects(e){return!!this.rayIntersectsAt(e)}getRayIntersectionsAt(e,t){var i;const r=[];for(const s of(i=Xh.get(e))!==null&&i!==void 0?i:[]){if(s===this)continue;const o=this.rayIntersectsAt(s,t);o&&r.push([s,o])}return this.object3d.getWorldPosition(Tl),r.sort((s,o)=>CC(s[1],Tl)-CC(o[1],Tl))}getRayIntersections(e,t){return this.getRayIntersectionsAt(e,t).map(i=>i[0])}listenToRayIntersection(e,t,i){return this.loop(()=>{for(const[r,s]of this.getRayIntersectionsAt(e,i))t(r,s)})}intersects(e){var t,i,r,s;return this.done||e.done||this===e?!1:this.bvh&&e.bvh?((t=TC.get(this))===null||t===void 0?void 0:t.has(e))||((i=TC.get(e))===null||i===void 0?void 0:i.has(this))||!1:this.cannonBody&&e.cannonBody?(SC.add(this.cannonBody),SC.add(e.cannonBody),((r=kg.get(this.cannonBody))===null||r===void 0?void 0:r.has(e.cannonBody))||((s=kg.get(e.cannonBody))===null||s===void 0?void 0:s.has(this.cannonBody))||!1):(kx.set(this.object3d.getWorldPosition(new O),ww.clone(),new Pn),kx.applyMatrix4(this.object3d.matrixWorld),qh.set(e.object3d.getWorldPosition(new O),ww.clone(),new Pn),qh.applyMatrix4(e.object3d.matrixWorld),kx.intersectsOBB(qh,0))}getIntersections(e){var t;const i=[];for(const r of(t=Xh.get(e))!==null&&t!==void 0?t:[])r!==this&&this.intersects(r)&&i.push(r);return i}listenToIntersection(e,t){return this.loop(()=>{for(const i of this.getIntersections(e))t(i)})}get onIntersect(){return this._onIntersect}set onIntersect(e){if(this._onIntersect=e,this._onIntersectHandles)for(const i of this._onIntersectHandles)i.cancel();if(!e||!this.intersectIDs)return;const t=this._onIntersectHandles=[];for(const i of this.intersectIDs)t.push(this.listenToIntersection(i,e))}get clientX(){return Og(this.object3d).x}get clientY(){return Og(this.object3d).y}get width(){return this.object3d.scale.x*sn}set width(e){this.object3d.scale.x=e*je}get height(){return this.object3d.scale.y*sn}set height(e){this.object3d.scale.y=e*je}get depth(){return this.object3d.scale.z*sn}set depth(e){this.object3d.scale.z=e*je}get x(){return this.outerObject3d.position.x*sn}set x(e){var t,i;this.outerObject3d.position.x=e*je,this.physicsUpdate&&(((t=(i=this.physicsUpdate).position)!==null&&t!==void 0?t:i.position={}).x=!0)}get y(){return this.outerObject3d.position.y*sn}set y(e){var t,i;this.outerObject3d.position.y=e*je,this.physicsUpdate&&(((t=(i=this.physicsUpdate).position)!==null&&t!==void 0?t:i.position={}).y=!0)}get z(){return this.outerObject3d.position.z*sn}set z(e){var t,i;this.outerObject3d.position.z=e*je,this.physicsUpdate&&(((t=(i=this.physicsUpdate).position)!==null&&t!==void 0?t:i.position={}).z=!0)}get scaleX(){return this.outerObject3d.scale.x}set scaleX(e){this.outerObject3d.scale.x=e}get scaleY(){return this.outerObject3d.scale.y}set scaleY(e){this.outerObject3d.scale.y=e}get scaleZ(){return this.outerObject3d.scale.z}set scaleZ(e){this.outerObject3d.scale.z=e}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e,this.scaleZ=e}get rotationX(){return this.outerObject3d.rotation.x*Fn}set rotationX(e){var t,i;this.outerObject3d.rotation.x=e*rn,this.physicsUpdate&&(((t=(i=this.physicsUpdate).rotation)!==null&&t!==void 0?t:i.rotation={}).x=!0)}get rotationY(){return this.outerObject3d.rotation.y*Fn}set rotationY(e){var t,i;this.outerObject3d.rotation.y=e*rn,this.physicsUpdate&&(((t=(i=this.physicsUpdate).rotation)!==null&&t!==void 0?t:i.rotation={}).y=!0)}get rotationZ(){return this.outerObject3d.rotation.z*Fn}set rotationZ(e){var t,i;this.outerObject3d.rotation.z=e*rn,this.physicsUpdate&&(((t=(i=this.physicsUpdate).rotation)!==null&&t!==void 0?t:i.rotation={}).z=!0)}get rotation(){return this.rotationZ}set rotation(e){this.rotationZ=e}get reflection(){return!!this.object3d.userData.ssr}set reflection(e){e?pq(this.object3d):bC(this.object3d)}get bloom(){return!!this.outerObject3d.userData.bloom}set bloom(e){e?dD(this.outerObject3d):pD(this.outerObject3d)}get outline(){return!!this.object3d.userData.outline}set outline(e){e?MD(this.object3d):bD(this.object3d)}get visible(){return!!this._visible}set visible(e){this._visible=e,this.outerObject3d.visible=e}get innerVisible(){return this.object3d.visible}set innerVisible(e){this.object3d.visible=e}get frustumCulled(){return this.outerObject3d.frustumCulled}set frustumCulled(e){this.outerObject3d.traverse(t=>t.frustumCulled=e)}get metalnessFactor(){var e;return(e=this._metalnessFactor)!==null&&e!==void 0?e:1}set metalnessFactor(e){this._metalnessFactor=e,Rl.add(this),jh()}get roughnessFactor(){var e;return(e=this._roughnessFactor)!==null&&e!==void 0?e:1}set roughnessFactor(e){this._roughnessFactor=e,Rl.add(this),jh()}get environmentFactor(){var e;return(e=this._environmentFactor)!==null&&e!==void 0?e:1}set environmentFactor(e){this._environmentFactor=e,Rl.add(this),jh()}get toon(){var e;return(e=this._toon)!==null&&e!==void 0?e:!1}set toon(e){this._toon=e,Rl.add(this),jh()}get pbr(){var e;return(e=this._pbr)!==null&&e!==void 0?e:!1}set pbr(e){this._pbr=e,Rl.add(this),jh()}lookAt(e){"object3d"in e?this.outerObject3d.lookAt(e.object3d.getWorldPosition(Zt)):this.outerObject3d.lookAt(xC(e)),this.physicsRotate()}translateX(e){this.outerObject3d.translateX(e*je),this.physicsMove()}translateY(e){this.outerObject3d.translateY(e*je),this.physicsMove()}translateZ(e){this.outerObject3d.translateZ(e*je),this.physicsMove()}rotateX(e){this.outerObject3d.rotateX(e*rn),this.physicsRotate()}rotateY(e){this.outerObject3d.rotateY(e*rn),this.physicsRotate()}rotateZ(e){this.outerObject3d.rotateZ(e*rn),this.physicsRotate()}placeAt(e){"object3d"in e?(this.outerObject3d.position.copy(e.object3d.getWorldPosition(Zt)),this.outerObject3d.quaternion.copy(e.outerObject3d.getWorldQuaternion(Ig))):this.outerObject3d.position.copy(xC(e)),this.physicsMove(),this.physicsRotate()}moveForward(e){e!==0&&(Zt.setFromMatrixColumn(this.outerObject3d.matrix,0),Zt.crossVectors(this.outerObject3d.up,Zt),this.outerObject3d.position.addScaledVector(Zt,e*je),this.physicsMoveXZ())}moveRight(e){e!==0&&(Zt.setFromMatrixColumn(this.outerObject3d.matrix,0),this.outerObject3d.position.addScaledVector(Zt,e*je),this.physicsMoveXZ())}get frustumVisible(){return Mq(),rD.containsPoint(RS(this.object3d))}}const[CQ,RC]=Ge(!0),[kS,Va]=Ge([]),PC=TP(kS,Va),bq=EP(kS,Va),LC=TH(kS,Va);Qt(()=>{const n=RC(),e=Va();if(!e.length||!n)return;const t=new cn;Ke.add(t),t.userData.isMultipleSelectionGroup=!0;const i=new zc(t);t.userData.manager=void 0,Dg(i);const r=[];for(const{outerObject3d:s}of e)!s.parent||(r.push([s,s.parent]),t.attach(s));kc.setFromObject(t);for(const[s,o]of r)o.attach(s);t.position.copy(kc.getCenter(Zt));for(const[s]of r)t.attach(s);return()=>{Dg(void 0);for(const[s,o]of r)o.attach(s);i.dispose(),Ke.remove(t)}},[Va,RC]);var Tq={};Qt(()=>{const n=ed();if(!n)return;const e=new PL(n.object3d);Ke.add(e);const t=ir(()=>e.update());return()=>{Ke.remove(e),t.cancel()}},[ed]);Qt(()=>{const n=Va();if(!n.length)return;const e=[];for(const i of n){const r=new PL(i.outerObject3d);Ke.add(r),e.push(r)}const t=ir(()=>{for(const i of e)i.update()});return()=>{for(const i of e)Ke.remove(i);t.cancel()}},[Va]);const[Eq,Ng]=Ge(!0),[RQ,Aq]=Ge(!0),DC={type:"change"},Nx={type:"start"},IC={type:"end"};class Cq extends Ya{constructor(e,t){super(),t===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new O,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:_u.ROTATE,MIDDLE:_u.DOLLY,RIGHT:_u.PAN},this.touches={ONE:wu.ROTATE,TWO:wu.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(z){z.addEventListener("keydown",st),this._domElementKeyEvents=z},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(DC),i.update(),s=r.NONE},this.update=function(){const z=new O,xe=new Mn().setFromUnitVectors(e.up,new O(0,1,0)),He=xe.clone().invert(),Ee=new O,j=new Mn,Ae=2*Math.PI;return function(){const Je=i.object.position;z.copy(Je).sub(i.target),z.applyQuaternion(xe),a.setFromVector3(z),i.autoRotate&&s===r.NONE&&V(R()),i.enableDamping?(a.theta+=u.theta*i.dampingFactor,a.phi+=u.phi*i.dampingFactor):(a.theta+=u.theta,a.phi+=u.phi);let Ie=i.minAzimuthAngle,Ye=i.maxAzimuthAngle;return isFinite(Ie)&&isFinite(Ye)&&(Ie<-Math.PI?Ie+=Ae:Ie>Math.PI&&(Ie-=Ae),Ye<-Math.PI?Ye+=Ae:Ye>Math.PI&&(Ye-=Ae),Ie<=Ye?a.theta=Math.max(Ie,Math.min(Ye,a.theta)):a.theta=a.theta>(Ie+Ye)/2?Math.max(Ie,a.theta):Math.min(Ye,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=c,a.radius=Math.max(i.minDistance,Math.min(i.maxDistance,a.radius)),i.enableDamping===!0?i.target.addScaledVector(f,i.dampingFactor):i.target.add(f),z.setFromSpherical(a),z.applyQuaternion(He),Je.copy(i.target).add(z),i.object.lookAt(i.target),i.enableDamping===!0?(u.theta*=1-i.dampingFactor,u.phi*=1-i.dampingFactor,f.multiplyScalar(1-i.dampingFactor)):(u.set(0,0,0),f.set(0,0,0)),c=1,d||Ee.distanceToSquared(i.object.position)>o||8*(1-j.dot(i.object.quaternion))>o?(i.dispatchEvent(DC),Ee.copy(i.object.position),j.copy(i.object.quaternion),d=!1,!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",J),i.domElement.removeEventListener("pointerdown",ye),i.domElement.removeEventListener("pointercancel",qe),i.domElement.removeEventListener("wheel",_t),i.domElement.removeEventListener("pointermove",Ne),i.domElement.removeEventListener("pointerup",De),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",st)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const o=1e-6,a=new X2,u=new X2;let c=1;const f=new O;let d=!1;const p=new ie,g=new ie,v=new ie,y=new ie,x=new ie,M=new ie,S=new ie,_=new ie,w=new ie,T=[],E={};function R(){return 2*Math.PI/60/60*i.autoRotateSpeed}function P(){return Math.pow(.95,i.zoomSpeed)}function V(z){u.theta-=z}function F(z){u.phi-=z}const C=function(){const z=new O;return function(He,Ee){z.setFromMatrixColumn(Ee,0),z.multiplyScalar(-He),f.add(z)}}(),N=function(){const z=new O;return function(He,Ee){i.screenSpacePanning===!0?z.setFromMatrixColumn(Ee,1):(z.setFromMatrixColumn(Ee,0),z.crossVectors(i.object.up,z)),z.multiplyScalar(He),f.add(z)}}(),Q=function(){const z=new O;return function(He,Ee){const j=i.domElement;if(i.object.isPerspectiveCamera){const Ae=i.object.position;z.copy(Ae).sub(i.target);let Te=z.length();Te*=Math.tan(i.object.fov/2*Math.PI/180),C(2*He*Te/j.clientHeight,i.object.matrix),N(2*Ee*Te/j.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(C(He*(i.object.right-i.object.left)/i.object.zoom/j.clientWidth,i.object.matrix),N(Ee*(i.object.top-i.object.bottom)/i.object.zoom/j.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function G(z){i.object.isPerspectiveCamera?c/=z:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*z)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Y(z){i.object.isPerspectiveCamera?c*=z:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/z)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function X(z){p.set(z.clientX,z.clientY)}function K(z){S.set(z.clientX,z.clientY)}function B(z){y.set(z.clientX,z.clientY)}function Z(z){g.set(z.clientX,z.clientY),v.subVectors(g,p).multiplyScalar(i.rotateSpeed);const xe=i.domElement;V(2*Math.PI*v.x/xe.clientHeight),F(2*Math.PI*v.y/xe.clientHeight),p.copy(g),i.update()}function ee(z){_.set(z.clientX,z.clientY),w.subVectors(_,S),w.y>0?G(P()):w.y<0&&Y(P()),S.copy(_),i.update()}function se(z){x.set(z.clientX,z.clientY),M.subVectors(x,y).multiplyScalar(i.panSpeed),Q(M.x,M.y),y.copy(x),i.update()}function ae(z){z.deltaY<0?Y(P()):z.deltaY>0&&G(P()),i.update()}function Le(z){let xe=!1;switch(z.code){case i.keys.UP:Q(0,i.keyPanSpeed),xe=!0;break;case i.keys.BOTTOM:Q(0,-i.keyPanSpeed),xe=!0;break;case i.keys.LEFT:Q(i.keyPanSpeed,0),xe=!0;break;case i.keys.RIGHT:Q(-i.keyPanSpeed,0),xe=!0;break}xe&&(z.preventDefault(),i.update())}function ze(){if(T.length===1)p.set(T[0].pageX,T[0].pageY);else{const z=.5*(T[0].pageX+T[1].pageX),xe=.5*(T[0].pageY+T[1].pageY);p.set(z,xe)}}function Pe(){if(T.length===1)y.set(T[0].pageX,T[0].pageY);else{const z=.5*(T[0].pageX+T[1].pageX),xe=.5*(T[0].pageY+T[1].pageY);y.set(z,xe)}}function oe(){const z=T[0].pageX-T[1].pageX,xe=T[0].pageY-T[1].pageY,He=Math.sqrt(z*z+xe*xe);S.set(0,He)}function rt(){i.enableZoom&&oe(),i.enablePan&&Pe()}function Xe(){i.enableZoom&&oe(),i.enableRotate&&ze()}function Ze(z){if(T.length==1)g.set(z.pageX,z.pageY);else{const He=be(z),Ee=.5*(z.pageX+He.x),j=.5*(z.pageY+He.y);g.set(Ee,j)}v.subVectors(g,p).multiplyScalar(i.rotateSpeed);const xe=i.domElement;V(2*Math.PI*v.x/xe.clientHeight),F(2*Math.PI*v.y/xe.clientHeight),p.copy(g)}function Se(z){if(T.length===1)x.set(z.pageX,z.pageY);else{const xe=be(z),He=.5*(z.pageX+xe.x),Ee=.5*(z.pageY+xe.y);x.set(He,Ee)}M.subVectors(x,y).multiplyScalar(i.panSpeed),Q(M.x,M.y),y.copy(x)}function Qe(z){const xe=be(z),He=z.pageX-xe.x,Ee=z.pageY-xe.y,j=Math.sqrt(He*He+Ee*Ee);_.set(0,j),w.set(0,Math.pow(_.y/S.y,i.zoomSpeed)),G(w.y),S.copy(_)}function ue(z){i.enableZoom&&Qe(z),i.enablePan&&Se(z)}function fe(z){i.enableZoom&&Qe(z),i.enableRotate&&Ze(z)}function ye(z){i.enabled!==!1&&(T.length===0&&(i.domElement.setPointerCapture(z.pointerId),i.domElement.addEventListener("pointermove",Ne),i.domElement.addEventListener("pointerup",De)),he(z),z.pointerType==="touch"?k(z):$e(z))}function Ne(z){i.enabled!==!1&&(z.pointerType==="touch"?D(z):Ue(z))}function De(z){me(z),T.length===0&&(i.domElement.releasePointerCapture(z.pointerId),i.domElement.removeEventListener("pointermove",Ne),i.domElement.removeEventListener("pointerup",De)),i.dispatchEvent(IC),s=r.NONE}function qe(z){me(z)}function $e(z){let xe;switch(z.button){case 0:xe=i.mouseButtons.LEFT;break;case 1:xe=i.mouseButtons.MIDDLE;break;case 2:xe=i.mouseButtons.RIGHT;break;default:xe=-1}switch(xe){case _u.DOLLY:if(i.enableZoom===!1)return;K(z),s=r.DOLLY;break;case _u.ROTATE:if(z.ctrlKey||z.metaKey||z.shiftKey){if(i.enablePan===!1)return;B(z),s=r.PAN}else{if(i.enableRotate===!1)return;X(z),s=r.ROTATE}break;case _u.PAN:if(z.ctrlKey||z.metaKey||z.shiftKey){if(i.enableRotate===!1)return;X(z),s=r.ROTATE}else{if(i.enablePan===!1)return;B(z),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(Nx)}function Ue(z){if(i.enabled!==!1)switch(s){case r.ROTATE:if(i.enableRotate===!1)return;Z(z);break;case r.DOLLY:if(i.enableZoom===!1)return;ee(z);break;case r.PAN:if(i.enablePan===!1)return;se(z);break}}function _t(z){i.enabled===!1||i.enableZoom===!1||s!==r.NONE||(z.preventDefault(),i.dispatchEvent(Nx),ae(z),i.dispatchEvent(IC))}function st(z){i.enabled===!1||i.enablePan===!1||Le(z)}function k(z){switch(Ce(z),T.length){case 1:switch(i.touches.ONE){case wu.ROTATE:if(i.enableRotate===!1)return;ze(),s=r.TOUCH_ROTATE;break;case wu.PAN:if(i.enablePan===!1)return;Pe(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case wu.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;rt(),s=r.TOUCH_DOLLY_PAN;break;case wu.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Xe(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(Nx)}function D(z){switch(Ce(z),s){case r.TOUCH_ROTATE:if(i.enableRotate===!1)return;Ze(z),i.update();break;case r.TOUCH_PAN:if(i.enablePan===!1)return;Se(z),i.update();break;case r.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ue(z),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;fe(z),i.update();break;default:s=r.NONE}}function J(z){i.enabled!==!1&&z.preventDefault()}function he(z){T.push(z)}function me(z){delete E[z.pointerId];for(let xe=0;xe<T.length;xe++)if(T[xe].pointerId==z.pointerId){T.splice(xe,1);return}}function Ce(z){let xe=E[z.pointerId];xe===void 0&&(xe=new ie,E[z.pointerId]=xe),xe.set(z.pageX,z.pageY)}function be(z){const xe=z.pointerId===T[0].pointerId?T[1]:T[0];return E[xe.pointerId]}i.domElement.addEventListener("contextmenu",J),i.domElement.addEventListener("pointerdown",ye),i.domElement.addEventListener("pointercancel",qe),i.domElement.addEventListener("wheel",_t,{passive:!1}),this.update()}}const Gv=!1,[NS,Lw]=Ge(Gv);St(n=>{var e;return NS((e=n.userData.bokeh)!==null&&e!==void 0?e:Gv)});const Wv=.025,[zS,TD]=Ge(Wv);St(n=>{var e;return zS((e=n.userData.bokehAperture)!==null&&e!==void 0?e:Wv)});const jv=1,[BS,ED]=Ge(jv);St(n=>{var e;return BS((e=n.userData.bokehFocus)!==null&&e!==void 0?e:jv)});const Xv=.01,[US,AD]=Ge(Xv);St(n=>{var e;return US((e=n.userData.bokehMaxBlur)!==null&&e!==void 0?e:Xv)});const[CD,RD]=Ge([]),Rq=TP(CD,RD),Pq=EP(CD,RD);class PD extends eu{initCamera(){Rq(this.camera),this.then(()=>{this.active&&aC(Ni),Pq(this.camera)}),this.createEffect(()=>{if(!pw()||St()!==Ni||St()===this.camera)return;const e=new Ij(this.camera);return Ke.add(e),()=>{e.dispose(),Ke.remove(e)}},[St,pw])}get fov(){return this.camera.fov}set fov(e){var t,i;this.camera.fov=e,(i=(t=this.camera).updateProjectionMatrix)===null||i===void 0||i.call(t)}get zoom(){return this.camera.zoom}set zoom(e){var t,i;this.camera.zoom=e,(i=(t=this.camera).updateProjectionMatrix)===null||i===void 0||i.call(t)}get near(){return this.camera.near}set near(e){var t,i;this.camera.near=e,(i=(t=this.camera).updateProjectionMatrix)===null||i===void 0||i.call(t)}get far(){return this.camera.far}set far(e){var t,i;this.camera.far=e,(i=(t=this.camera).updateProjectionMatrix)===null||i===void 0||i.call(t)}activate(){aC(this.camera)}get active(){return St()===this.camera}set active(e){e&&this.activate()}get bokeh(){var e;return(e=this.camera.userData.bokeh)!==null&&e!==void 0?e:Gv}set bokeh(e){St()===this.camera&&NS(e),this.camera.userData.bokeh=e}get bokehFocus(){var e;return(e=this.camera.userData.bokehFocus)!==null&&e!==void 0?e:jv}set bokehFocus(e){St()===this.camera&&BS(e),this.camera.userData.bokehFocus=e}get bokehMaxBlur(){var e;return(e=this.camera.userData.bokehMaxBlur)!==null&&e!==void 0?e:Xv}set bokehMaxBlur(e){St()===this.camera&&US(e),this.camera.userData.bokehMaxBlur=e}get bokehAperture(){var e;return(e=this.camera.userData.bokehAperture)!==null&&e!==void 0?e:Wv}set bokehAperture(e){St()===this.camera&&zS(e),this.camera.userData.bokehAperture=e}}const LD={fov:75,zoom:1,near:Bv,far:Uv,active:!1,bokeh:Gv,bokehFocus:jv,bokehMaxBlur:Xv,bokehAperture:Wv,minPolarAngle:bS,maxPolarAngle:TS},qv={},Lq=Ii(vt(vt({},qv),LD),{targetX:0,targetY:0,targetZ:0,x:0,y:0,z:500,enableDamping:!1,enablePan:!1,enableZoom:!1,autoRotate:!1,autoRotateSpeed:2,minAzimuthAngle:-1/0,maxAzimuthAngle:1/0,azimuthAngle:0,polarAngle:0}),[zx,PQ]=zo();class Yv extends eu{constructor(e=new jn(75,1,Bv,Uv)){super(),this.camera=e,this.updateDebounced=No(()=>this.controls.update(),0,"trailing"),this.enableZoomState=new X_(!1),this.enabledState=new X_(!0),this._minPolarAngle=bS*rn,this._maxPolarAngle=TS*rn,this._minAzimuthAngle=-1/0,this._maxAzimuthAngle=1/0,this.outerObject3d=e;const t=this.controls=new Cq(e,Rn);this.initOuterObject3d(),this.initCamera(),t.enabled=!1,t.enablePan=!1,t.enableZoom=!1,t.minPolarAngle=this._minPolarAngle,t.maxPolarAngle=this._maxPolarAngle,t.minAzimuthAngle=this._minAzimuthAngle,t.maxAzimuthAngle=this._maxAzimuthAngle,e.position.z=5,this.updateDebounced(),this.createEffect(()=>{if(!Ng()||St()!==e||!this.enabledState.get())return;t.enabled=!0;const a=ir(this.updateDebounced);if(this.enableZoomState.get()){const u=c=>{c.preventDefault();const f=e.getWorldDirection(Zt);let d=e.position.clone().add(f.clone().multiplyScalar(-c.deltaY*je));const p=e.worldToLocal(d.clone()),g=e.worldToLocal(t.target.clone());p.z-g.z<=0&&(d=t.target.clone().add(f.multiplyScalar(-.001))),e.position.copy(d),this.updateDebounced()};Rn.addEventListener("wheel",u),a.then(()=>Rn.removeEventListener("wheel",u))}return()=>{t.enabled=!1,a.cancel()}},[St,Ng,this.enableZoomState.get,this.enabledState.get]);let i=0,r=0,s=Zt,o=!1;t.addEventListener("start",()=>{o=!0,i=t.getAzimuthalAngle()*Fn,r=t.getPolarAngle()*Fn,s=t.target.clone(),e===Ni&&zx("start")}),t.addEventListener("change",()=>{if(!o)return;const a=Math.abs(t.getAzimuthalAngle()*Fn-i),u=Math.abs(t.getPolarAngle()*Fn-r),{x:c,y:f,z:d}=t.target,{x:p,y:g,z:v}=s,y=Math.max(Math.abs(p-c),Math.abs(g-f),Math.abs(v-d));(a>2||u>2||y>.02)&&(vw(!1),e===Ni&&zx("move"))}),t.addEventListener("end",()=>{o=!1,vw(!0),e===Ni&&zx("stop")}),this.then(()=>t.dispose())}get targetX(){var e;return(e=this._targetX)!==null&&e!==void 0?e:this._targetX=0}set targetX(e){this._targetX=e,this.controls.target.x=e*je}get targetY(){var e;return(e=this._targetY)!==null&&e!==void 0?e:this._targetY=0}set targetY(e){this._targetY=e,this.controls.target.y=e*je}get targetZ(){var e;return(e=this._targetZ)!==null&&e!==void 0?e:this._targetZ=0}set targetZ(e){this._targetZ=e,this.controls.target.z=e*je}get target(){return this._target}set target(e){var t;this._target=e,this.controls.target=(t=e==null?void 0:e.outerObject3d.position)!==null&&t!==void 0?t:new O}append(e){var t;if(this._target){super.append(e);return}(t=this.outerObject3d.parent)===null||t===void 0||t.add(e.outerObject3d),this.target=e}get x(){return this.camera.position.x*sn}set x(e){this.camera.position.x=e*je}get y(){return this.camera.position.y*sn}set y(e){this.camera.position.y=e*je}get z(){return this.camera.position.z*sn}set z(e){this.camera.position.z=e*je}get rotationX(){return this.camera.rotation.x*Fn}get rotationY(){return this.camera.rotation.y*Fn}get rotationZ(){return this.camera.rotation.z*Fn}get enableDamping(){return this.controls.enableDamping}set enableDamping(e){this.controls.enableDamping=e}get enablePan(){return this.controls.enablePan}set enablePan(e){this.controls.enablePan=e}get enableZoom(){return this.enableZoomState.get()}set enableZoom(e){this.enableZoomState.set(e)}get enabled(){return this.enabledState.get()}set enabled(e){this.enabledState.set(e)}get autoRotate(){return this.controls.autoRotate}set autoRotate(e){this.controls.autoRotate=e}get autoRotateSpeed(){return this.controls.autoRotateSpeed}set autoRotateSpeed(e){this.controls.autoRotateSpeed=e}get minPolarAngle(){return this._minPolarAngle*Fn}set minPolarAngle(e){this.controls.minPolarAngle=this._minPolarAngle=e*rn}get maxPolarAngle(){return this._maxPolarAngle*Fn}set maxPolarAngle(e){this.controls.maxPolarAngle=this._maxPolarAngle=e*rn}get minAzimuthAngle(){return this._minAzimuthAngle*Fn}set minAzimuthAngle(e){this.controls.minAzimuthAngle=this._minAzimuthAngle=e*rn}get maxAzimuthAngle(){return this._maxAzimuthAngle*Fn}set maxAzimuthAngle(e){this.controls.maxAzimuthAngle=this._maxAzimuthAngle=e*rn}get azimuthAngle(){return this.controls.getAzimuthalAngle()*Fn}set azimuthAngle(e){this.controls.minAzimuthAngle=this.controls.maxAzimuthAngle=e*rn,this.controls.update(),this.queueMicrotask(()=>{this.controls.minAzimuthAngle=this._minAzimuthAngle,this.controls.maxAzimuthAngle=this._maxAzimuthAngle})}get polarAngle(){return this.controls.getPolarAngle()*Fn}set polarAngle(e){this.controls.minPolarAngle=this.controls.maxPolarAngle=e*rn,this.controls.update(),this.queueMicrotask(()=>{this.controls.minPolarAngle=this._minPolarAngle,this.controls.maxPolarAngle=this._maxPolarAngle})}get distance(){return this.controls.getDistance()*sn}set distance(e){this.controls.minDistance=this.controls.maxDistance=e*je,this.controls.update(),this.queueMicrotask(()=>{this.controls.minDistance=-1/0,this.controls.maxDistance=1/0})}}Yv.componentName="orbitCamera";Yv.defaults=Lq;Yl(Yv,[PD]);var Dq={};const _a=new Yv(Ni);_a.enablePan=!0;_a.enableZoom=!0;const DD=_a.controls;Aq(n=>DD.screenSpacePanning=n);Qt(()=>{const n=$f()&&Ng()&&St()===Ni;_a.enabled=n,Rn.style.cursor=n?"grab":"auto"},[$f,Ng,St]);Qt(()=>{if(!$f())return;let n=!0;return queueMicrotask(()=>n&&(_a.polarAngle=60)),()=>{n=!1,DD.reset(),_a.polarAngle=90,_a.azimuthAngle=0,_a.distance=ZL()}},[$f]);const[OC,LQ]=zo(),[DQ,FC]=Ge("translate"),[IQ,kC]=Ge("world"),[OQ,NC]=Ge(null);var Iq={};const Oq=Xa(async()=>{const{TransformControls:n}=await import("./TransformControls.115c0b60.js"),e=new n(St(),Rn);St(i=>e.camera=i),e.enabled=!1;let t=!1;return e.addEventListener("dragging-changed",({value:i})=>{t=i,Eq(!t),vw(!t),OC(t?"start":"stop")}),e.addEventListener("change",()=>t&&OC("move")),e});Qt(()=>{const n=ed(),e=FC(),t=kC(),i=NC();if(!n)return;const{physics:r}=n;let s=!1;n.mass!==0&&r!=="map"&&r!=="map-debug"&&(n.physics=!1,s=!0);const o=new ui;return Oq().then(a=>{a.setMode(e),a.setSpace(t),a.setScaleSnap(i),a.setRotationSnap(i),a.setTranslationSnap(i),Ke.add(a),a.attach(n.outerObject3d),a.enabled=!0,o.then(()=>{Ke.remove(a),a.detach(),a.enabled=!1})}),()=>{o.cancel(),s&&(n.physics=r)}},[ed,FC,kC,NC]);var Fq={};const zC=10*KL,BC=new RL(zC,zC);HL(n=>n?Ke.add(BC):Ke.remove(BC));const[FQ,kq]=Ge(!1);var Nq={};const zg=new un(new fd(Sr,Sr,4,4),iD);kq(n=>n?Ke.add(zg):Ke.remove(zg));Lg(([n,e])=>[zg.scale.x,zg.scale.y]=[n*je,e*je]);const[kQ,zq]=Ge({turbidity:10,rayleigh:3,mieCoefficient:.005,mieDirectionalG:.5,inclination:.49,azimuth:.25});class xd extends un{constructor(){const e=xd.SkyShader,t=new Nt({name:"SkyShader",fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:di.clone(e.uniforms),side:wr,depthWrite:!1});super(new Jl(1,1,1),t)}}xd.prototype.isSky=!0;xd.SkyShader={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new O},up:{value:new O(0,1,0)}},vertexShader:`
		uniform vec3 sunPosition;
		uniform float rayleigh;
		uniform float turbidity;
		uniform float mieCoefficient;
		uniform vec3 up;

		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		// constants for atmospheric scattering
		const float e = 2.71828182845904523536028747135266249775724709369995957;
		const float pi = 3.141592653589793238462643383279502884197169;

		// wavelength of used primaries, according to preetham
		const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
		// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
		// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
		const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

		// mie stuff
		// K coefficient for the primaries
		const float v = 4.0;
		const vec3 K = vec3( 0.686, 0.678, 0.666 );
		// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
		const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

		// earth shadow hack
		// cutoffAngle = pi / 1.95;
		const float cutoffAngle = 1.6110731556870734;
		const float steepness = 1.5;
		const float EE = 1000.0;

		float sunIntensity( float zenithAngleCos ) {
			zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
			return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
		}

		vec3 totalMie( float T ) {
			float c = ( 0.2 * T ) * 10E-18;
			return 0.434 * c * MieConst;
		}

		void main() {

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vWorldPosition = worldPosition.xyz;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			gl_Position.z = gl_Position.w; // set z to camera.far

			vSunDirection = normalize( sunPosition );

			vSunE = sunIntensity( dot( vSunDirection, up ) );

			vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

			float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

			// extinction (absorbtion + out scattering)
			// rayleigh coefficients
			vBetaR = totalRayleigh * rayleighCoefficient;

			// mie coefficients
			vBetaM = totalMie( turbidity ) * mieCoefficient;

		}`,fragmentShader:`
		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		uniform float mieDirectionalG;
		uniform vec3 up;

		const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

		// constants for atmospheric scattering
		const float pi = 3.141592653589793238462643383279502884197169;

		const float n = 1.0003; // refractive index of air
		const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

		// optical length at zenith for molecules
		const float rayleighZenithLength = 8.4E3;
		const float mieZenithLength = 1.25E3;
		// 66 arc seconds -> degrees, and the cosine of that
		const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

		// 3.0 / ( 16.0 * pi )
		const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
		// 1.0 / ( 4.0 * pi )
		const float ONE_OVER_FOURPI = 0.07957747154594767;

		float rayleighPhase( float cosTheta ) {
			return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
		}

		float hgPhase( float cosTheta, float g ) {
			float g2 = pow( g, 2.0 );
			float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
			return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
		}

		void main() {

			vec3 direction = normalize( vWorldPosition - cameraPos );

			// optical length
			// cutoff angle at 90 to avoid singularity in next formula.
			float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
			float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
			float sR = rayleighZenithLength * inverse;
			float sM = mieZenithLength * inverse;

			// combined extinction factor
			vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

			// in scattering
			float cosTheta = dot( direction, vSunDirection );

			float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
			vec3 betaRTheta = vBetaR * rPhase;

			float mPhase = hgPhase( cosTheta, mieDirectionalG );
			vec3 betaMTheta = vBetaM * mPhase;

			vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
			Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

			// nightsky
			float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
			float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
			vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
			vec3 L0 = vec3( 0.1 ) * Fex;

			// composition + solar disc
			float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
			L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

			vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

			vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

			gl_FragColor = vec4( retColor, 1.0 );

			#include <tonemapping_fragment>
			#include <encodings_fragment>

		}`};const[Bq,Uq]=Ge(!1);var Vq={};const UC=Xa(()=>{const n=new xd;return n.scale.setScalar(45e4),zq(e=>{const t=n.material.uniforms;t.turbidity.value=e.turbidity,t.rayleigh.value=e.rayleigh,t.mieCoefficient.value=e.mieCoefficient,t.mieDirectionalG.value=e.mieDirectionalG;const i=Math.PI*(e.inclination-.5),r=2*Math.PI*(e.azimuth-.5);Zt.x=Math.cos(r),Zt.y=Math.sin(r)*Math.sin(i),Zt.z=Math.sin(r)*Math.cos(i),t.sunPosition.value.copy(Zt)}),n});let VC=!1;Uq(n=>{VC!==n&&(VC=n,n?Ke.add(UC()):Ke.remove(UC()))});const Hq=Ii(vt({},qv),{animations:{}}),Gq=Ii(vt({},Hq),{maxAngularVelocityX:1/0,maxAngularVelocityY:1/0,maxAngularVelocityZ:1/0,maxVelocityX:1/0,maxVelocityY:1/0,maxVelocityZ:1/0,velocity:{x:0,y:0,z:0},physics:!1,physicsShape:vD}),Wq=Ii(vt({},Gq),{name:"",width:100,height:100,depth:100,x:0,y:0,z:0,scaleX:1,scaleY:1,scaleZ:1,scale:1,rotationX:0,rotationY:0,rotationZ:0,rotation:0,bloom:!1,reflection:!1,outline:!1,visible:!0,innerVisible:!0,frustumCulled:!0,metalnessFactor:1,roughnessFactor:1,environmentFactor:1,toon:!1,pbr:!1}),$a=Ii(vt({},Wq),{innerRotationX:0,innerRotationY:0,innerRotationZ:0,innerRotation:0,innerX:0,innerY:0,innerZ:0}),ID={color:"#ffffff",vertexColors:!1,fog:!0,opacity:1},jq={color:"#ffffff",emissiveColor:"#000000",flatShading:!1,wireframe:!1,aoMapIntensity:1,bumpScale:1,displacementScale:1,displacementBias:0,emissiveIntensity:1,lightMapIntensity:1,metalness:0,roughness:1,normalScale:{x:1,y:1}},Vo=vt(vt(vt({},$a),ID),jq);class Ho extends zc{constructor(e){super(e);const t=this.outerObject3d=new cn;this.initOuterObject3d(),Ke.add(t),t.add(e)}get innerRotationX(){return this.object3d.rotation.x*Fn}set innerRotationX(e){this.object3d.rotation.x=e*rn}get innerRotationY(){return this.object3d.rotation.y*Fn}set innerRotationY(e){this.object3d.rotation.y=e*rn}get innerRotationZ(){return this.object3d.rotation.z*Fn}set innerRotationZ(e){this.object3d.rotation.z=e*rn}get innerRotation(){return this.innerRotationZ}set innerRotation(e){this.innerRotationZ=e}get innerX(){return this.object3d.position.x*sn}set innerX(e){this.object3d.position.x=e*je}get innerY(){return this.object3d.position.y*sn}set innerY(e){this.object3d.position.y=e*je}get innerZ(){return this.object3d.position.z*sn}set innerZ(e){this.object3d.position.z=e*je}}const OD=[n=>n],Xq=["map","alphaMap"];class VS{get color(){return"#"+this.material.color.getHexString()}set color(e){this.material.color=new ve(e)}get vertexColors(){return this.material.vertexColors}set vertexColors(e){this.material.vertexColors=e}get fog(){return this.material.fog}set fog(e){this.material.fog=e}get opacity(){var e;return(e=this._opacity)!==null&&e!==void 0?e:this._opacity=1}set opacity(e){var t;this._opacity=e,this.material.opacity=e,this.material.transparent=(t=this.transparent)!==null&&t!==void 0?t:e<1,this.object3d.visible=!!e}get texture(){return this._texture}set texture(e){var t;if(this._texture=e,(t=this.materialHandle)===null||t===void 0||t.cancel(),e)if(Array.isArray(e)){const i=e.map(r=>new pi({map:oi(r)}));this.object3d.material=i,this.materialHandle=this.cancellable(()=>{this.object3d.material=this.material;for(const r of i)r.dispose()})}else if(OD[0](e).endsWith(".mp4")){const i=document.createElement("video");i.src=e,i.loop=!0,i.autoplay=!0,i.muted=!0,i.playsInline=!0,i.play();const r=new nL(i);this.material.map=r,this.materialHandle=this.cancellable(()=>{r.dispose(),i.pause()})}else this.material.map=oi(e);else this.material.map=null;this.material.needsUpdate=!0,this.applyTextureRepeat(this.material.map)}get alphaMap(){return this._alphaMap}set alphaMap(e){this._alphaMap=e,this.material.alphaMap=e?oi(e):null,this.applyTextureRepeat(this.material.alphaMap)}applyTextureRepeat(e){e&&this._textureRepeat&&(e.repeat=this._textureRepeat)}get textureRepeat(){return this._textureRepeat}set textureRepeat(e){if(typeof e=="number"&&(e=new ie(e,e)),this._textureRepeat=e,!!e)for(const t of Xq)this.applyTextureRepeat(this.material[t])}}class FD{get color(){return"#"+this.material.color.getHexString()}set color(e){this.material.color=new ve(e)}get emissiveColor(){return"#"+this.material.emissive.getHexString()}set emissiveColor(e){this.material.emissive=new ve(e)}get flatShading(){return this.material.flatShading}set flatShading(e){this.material.flatShading=e}get wireframe(){return this.material.wireframe}set wireframe(e){this.material.wireframe=e}get envMap(){return this._envMap}set envMap(e){this._envMap=e,this.material.envMap=e?oi(e):null,this.applyTextureRepeat(this.material.envMap)}get aoMap(){return this._aoMap}set aoMap(e){this._aoMap=e,this.material.aoMap=e?oi(e):null,this.applyTextureRepeat(this.material.aoMap)}get aoMapIntensity(){return this.material.aoMapIntensity}set aoMapIntensity(e){this.material.aoMapIntensity=e}get bumpMap(){return this._bumpMap}set bumpMap(e){this._bumpMap=e,this.material.bumpMap=e?oi(e):null,this.applyTextureRepeat(this.material.bumpMap)}get bumpScale(){return this.material.bumpScale}set bumpScale(e){this.material.bumpScale=e}get displacementMap(){return this._displacementMap}set displacementMap(e){this._displacementMap=e,this.material.displacementMap=e?oi(e):null,this.applyTextureRepeat(this.material.displacementMap)}get displacementScale(){return this.material.displacementScale}set displacementScale(e){this.material.displacementScale=e}get displacementBias(){return this.material.displacementBias}set displacementBias(e){this.material.displacementBias=e}get emissiveMap(){return this._emissiveMap}set emissiveMap(e){this._emissiveMap=e,this.material.emissiveMap=e?oi(e):null,this.applyTextureRepeat(this.material.emissiveMap)}get emissiveIntensity(){return this.material.emissiveIntensity}set emissiveIntensity(e){this.material.emissiveIntensity=e}get lightMap(){return this._lightMap}set lightMap(e){this._lightMap=e,this.material.lightMap=e?oi(e):null,this.applyTextureRepeat(this.material.lightMap)}get lightMapIntensity(){return this.material.lightMapIntensity}set lightMapIntensity(e){this.material.lightMapIntensity=e}get metalnessMap(){return this._metalnessMap}set metalnessMap(e){this._metalnessMap=e,this.material.metalnessMap=e?oi(e):null,this.applyTextureRepeat(this.material.metalnessMap)}get metalness(){return this.material.metalness}set metalness(e){this.material.metalness=e}get roughnessMap(){return this._roughnessMap}set roughnessMap(e){this._roughnessMap=e,this.material.roughnessMap=e?oi(e):null,this.applyTextureRepeat(this.material.roughnessMap)}get roughness(){return this.material.roughness}set roughness(e){this.material.roughness=e}get normalMap(){return this._normalMap}set normalMap(e){this._normalMap=e,this.material.normalMap=e?oi(e):null,this.applyTextureRepeat(this.material.normalMap)}get normalScale(){return this.material.normalScale}set normalScale(e){typeof e=="number"?this.material.normalScale=new ie(e,e):this.material.normalScale=e}get normalMapType(){return this._normalMapType}set normalMapType(e){this._normalMapType=e,this.material.normalMapType=e==="objectSpace"?kP:qa}}class Ys extends Ho{constructor(e,t){const i=new Ss(t?{transparent:!0}:void 0),r=new un(e,i);super(r),this.material=i,this.transparent=t}dispose(){return this.done?this:(super.dispose(),this.material.dispose(),this)}}Yl(Ys,[VS,FD]);const kD=new Jl(Sr,Sr,Sr,1,1,1);class _d extends Ys{constructor(){super(kD)}}_d.componentName="cube";_d.defaults=Vo;const[ND,Dw]=Ge(!1),[zD,Iw]=Ge(!1),[qq,HC]=Ge(!1),[Yq,Ow]=Ge(!1),[Zq,Bg]=Ge(!1),GC={defines:{DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tColor:{value:null},tDepth:{value:null},focus:{value:1},aspect:{value:1},aperture:{value:.025},maxblur:{value:.01},nearClip:{value:1},farClip:{value:1e3}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#include <common>

		varying vec2 vUv;

		uniform sampler2D tColor;
		uniform sampler2D tDepth;

		uniform float maxblur; // max blur amount
		uniform float aperture; // aperture - bigger values for shallower depth of field

		uniform float nearClip;
		uniform float farClip;

		uniform float focus;
		uniform float aspect;

		#include <packing>

		float getDepth( const in vec2 screenPosition ) {
			#if DEPTH_PACKING == 1
			return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );
			#else
			return texture2D( tDepth, screenPosition ).x;
			#endif
		}

		float getViewZ( const in float depth ) {
			#if PERSPECTIVE_CAMERA == 1
			return perspectiveDepthToViewZ( depth, nearClip, farClip );
			#else
			return orthographicDepthToViewZ( depth, nearClip, farClip );
			#endif
		}


		void main() {

			vec2 aspectcorrect = vec2( 1.0, aspect );

			float viewZ = getViewZ( getDepth( vUv ) );

			float factor = ( focus + viewZ ); // viewZ is <= 0, so this is a difference equation

			vec2 dofblur = vec2 ( clamp( factor * aperture, -maxblur, maxblur ) );

			vec2 dofblur9 = dofblur * 0.9;
			vec2 dofblur7 = dofblur * 0.7;
			vec2 dofblur4 = dofblur * 0.4;

			vec4 col = vec4( 0.0 );

			col += texture2D( tColor, vUv.xy );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur );

			col += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur9 );

			col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur7 );

			col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.4,   0.0  ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur4 );

			gl_FragColor = col / 41.0;
			gl_FragColor.a = 1.0;

		}`};class Kq extends Uo{constructor(e,t,i){super(),this.scene=e,this.camera=t;const r=i.focus!==void 0?i.focus:1,s=i.aspect!==void 0?i.aspect:t.aspect,o=i.aperture!==void 0?i.aperture:.025,a=i.maxblur!==void 0?i.maxblur:1,u=i.width||window.innerWidth||1,c=i.height||window.innerHeight||1;this.renderTargetDepth=new Gt(u,c,{minFilter:Ft,magFilter:Ft}),this.renderTargetDepth.texture.name="BokehPass.depth",this.materialDepth=new Xc,this.materialDepth.depthPacking=gv,this.materialDepth.blending=Yt,GC===void 0&&console.error("THREE.BokehPass relies on BokehShader");const f=GC,d=di.clone(f.uniforms);d.tDepth.value=this.renderTargetDepth.texture,d.focus.value=r,d.aspect.value=s,d.aperture.value=o,d.maxblur.value=a,d.nearClip.value=t.near,d.farClip.value=t.far,this.materialBokeh=new Nt({defines:Object.assign({},f.defines),uniforms:d,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader}),this.uniforms=d,this.needsSwap=!1,this.fsQuad=new $c(this.materialBokeh),this._oldClearColor=new ve}render(e,t,i){this.scene.overrideMaterial=this.materialDepth,e.getClearColor(this._oldClearColor);const r=e.getClearAlpha(),s=e.autoClear;e.autoClear=!1,e.setClearColor(16777215),e.setClearAlpha(1),e.setRenderTarget(this.renderTargetDepth),e.clear(),e.render(this.scene,this.camera),this.uniforms.tColor.value=i.texture,this.uniforms.nearClip.value=this.camera.near,this.uniforms.farClip.value=this.camera.far,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),e.clear(),this.fsQuad.render(e)),this.scene.overrideMaterial=null,e.setClearColor(this._oldClearColor),e.setClearAlpha(r),e.autoClear=s}}const HS=new Kq(Ke,St(),{});St(n=>HS.camera=n);const GS=HS.uniforms;ED(n=>GS.focus.value=n);TD(n=>GS.aperture.value=n);AD(n=>GS.maxblur.value=n);const $q={uniforms:{tDiffuse:{value:null},resolution:{value:new ie(1/1024,1/512)}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
	precision highp float;

	uniform sampler2D tDiffuse;

	uniform vec2 resolution;

	varying vec2 vUv;

	// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)

	//----------------------------------------------------------------------------------
	// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag
	// SDK Version: v3.00
	// Email:       gameworks@nvidia.com
	// Site:        http://developer.nvidia.com/
	//
	// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.
	//
	// Redistribution and use in source and binary forms, with or without
	// modification, are permitted provided that the following conditions
	// are met:
	//  * Redistributions of source code must retain the above copyright
	//    notice, this list of conditions and the following disclaimer.
	//  * Redistributions in binary form must reproduce the above copyright
	//    notice, this list of conditions and the following disclaimer in the
	//    documentation and/or other materials provided with the distribution.
	//  * Neither the name of NVIDIA CORPORATION nor the names of its
	//    contributors may be used to endorse or promote products derived
	//    from this software without specific prior written permission.
	//
	// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY
	// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
	// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
	// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
	// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
	// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
	// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
	// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
	// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
	// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
	// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	//
	//----------------------------------------------------------------------------------

	#ifndef FXAA_DISCARD
			//
			// Only valid for PC OpenGL currently.
			// Probably will not work when FXAA_GREEN_AS_LUMA = 1.
			//
			// 1 = Use discard on pixels which don't need AA.
			//     For APIs which enable concurrent TEX+ROP from same surface.
			// 0 = Return unchanged color on pixels which don't need AA.
			//
			#define FXAA_DISCARD 0
	#endif

	/*--------------------------------------------------------------------------*/
	#define FxaaTexTop(t, p) texture2D(t, p, -100.0)
	#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)
	/*--------------------------------------------------------------------------*/

	#define NUM_SAMPLES 5

	// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha
	float contrast( vec4 a, vec4 b ) {
			vec4 diff = abs( a - b );
			return max( max( max( diff.r, diff.g ), diff.b ), diff.a );
	}

	/*============================================================================

									FXAA3 QUALITY - PC

	============================================================================*/

	/*--------------------------------------------------------------------------*/
	vec4 FxaaPixelShader(
			vec2 posM,
			sampler2D tex,
			vec2 fxaaQualityRcpFrame,
			float fxaaQualityEdgeThreshold,
			float fxaaQualityinvEdgeThreshold
	) {
			vec4 rgbaM = FxaaTexTop(tex, posM);
			vec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);
			// . S .
			// W M E
			// . N .

			bool earlyExit = max( max( max(
					contrast( rgbaM, rgbaN ),
					contrast( rgbaM, rgbaS ) ),
					contrast( rgbaM, rgbaE ) ),
					contrast( rgbaM, rgbaW ) )
					< fxaaQualityEdgeThreshold;
			// . 0 .
			// 0 0 0
			// . 0 .

			#if (FXAA_DISCARD == 1)
					if(earlyExit) FxaaDiscard;
			#else
					if(earlyExit) return rgbaM;
			#endif

			float contrastN = contrast( rgbaM, rgbaN );
			float contrastS = contrast( rgbaM, rgbaS );
			float contrastE = contrast( rgbaM, rgbaE );
			float contrastW = contrast( rgbaM, rgbaW );

			float relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );
			relativeVContrast *= fxaaQualityinvEdgeThreshold;

			bool horzSpan = relativeVContrast > 0.;
			// . 1 .
			// 0 0 0
			// . 1 .

			// 45 deg edge detection and corners of objects, aka V/H contrast is too similar
			if( abs( relativeVContrast ) < .3 ) {
					// locate the edge
					vec2 dirToEdge;
					dirToEdge.x = contrastE > contrastW ? 1. : -1.;
					dirToEdge.y = contrastS > contrastN ? 1. : -1.;
					// . 2 .      . 1 .
					// 1 0 2  ~=  0 0 1
					// . 1 .      . 0 .

					// tap 2 pixels and see which ones are "outside" the edge, to
					// determine if the edge is vertical or horizontal

					vec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);
					float matchAlongH = contrast( rgbaM, rgbaAlongH );
					// . 1 .
					// 0 0 1
					// . 0 H

					vec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);
					float matchAlongV = contrast( rgbaM, rgbaAlongV );
					// V 1 .
					// 0 0 1
					// . 0 .

					relativeVContrast = matchAlongV - matchAlongH;
					relativeVContrast *= fxaaQualityinvEdgeThreshold;

					if( abs( relativeVContrast ) < .3 ) { // 45 deg edge
							// 1 1 .
							// 0 0 1
							// . 0 1

							// do a simple blur
							return mix(
									rgbaM,
									(rgbaN + rgbaS + rgbaE + rgbaW) * .25,
									.4
							);
					}

					horzSpan = relativeVContrast > 0.;
			}

			if(!horzSpan) rgbaN = rgbaW;
			if(!horzSpan) rgbaS = rgbaE;
			// . 0 .      1
			// 1 0 1  ->  0
			// . 0 .      1

			bool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );
			if(!pairN) rgbaN = rgbaS;

			vec2 offNP;
			offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;
			offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;

			bool doneN = false;
			bool doneP = false;

			float nDist = 0.;
			float pDist = 0.;

			vec2 posN = posM;
			vec2 posP = posM;

			int iterationsUsed = 0;
			int iterationsUsedN = 0;
			int iterationsUsedP = 0;
			for( int i = 0; i < NUM_SAMPLES; i++ ) {
					iterationsUsed = i;

					float increment = float(i + 1);

					if(!doneN) {
							nDist += increment;
							posN = posM + offNP * nDist;
							vec4 rgbaEndN = FxaaTexTop(tex, posN.xy);
							doneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );
							iterationsUsedN = i;
					}

					if(!doneP) {
							pDist += increment;
							posP = posM - offNP * pDist;
							vec4 rgbaEndP = FxaaTexTop(tex, posP.xy);
							doneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );
							iterationsUsedP = i;
					}

					if(doneN || doneP) break;
			}


			if ( !doneP && !doneN ) return rgbaM; // failed to find end of edge

			float dist = min(
					doneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,
					doneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.
			);

			// hacky way of reduces blurriness of mostly diagonal edges
			// but reduces AA quality
			dist = pow(dist, .5);

			dist = 1. - dist;

			return mix(
					rgbaM,
					rgbaN,
					dist * .5
			);
	}

	void main() {
			const float edgeDetectionQuality = .2;
			const float invEdgeDetectionQuality = 1. / edgeDetectionQuality;

			gl_FragColor = FxaaPixelShader(
					vUv,
					tDiffuse,
					resolution,
					edgeDetectionQuality, // [0,1] contrast needed, otherwise early discard
					invEdgeDetectionQuality
			);

	}
	`},Fw=new Fg($q);Qt(()=>{const[n,e]=Ui(),t=bs();Fw.material.uniforms.resolution.value.x=1/(n*t),Fw.material.uniforms.resolution.value.y=1/(e*t)},[bs,Ui]);const Qq=new Fg(new Nt({uniforms:{baseTexture:{value:null},bloomTexture:{value:Ra.renderTarget2.texture}},vertexShader:`varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}`,fragmentShader:`uniform sampler2D baseTexture;
uniform sampler2D bloomTexture;
varying vec2 vUv;
void main() {
    gl_FragColor = texture2D(baseTexture, vUv) + texture2D(bloomTexture, vUv);
}`,defines:{}}),"baseTexture"),Yh={defines:{NUM_SAMPLES:7,NUM_RINGS:4,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:0,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new ie(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new Me},cameraInverseProjectionMatrix:{value:new Me},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {
			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`

		#include <common>

		varying vec2 vUv;

		#if DIFFUSE_TEXTURE == 1
		uniform sampler2D tDiffuse;
		#endif

		uniform sampler2D tDepth;

		#if NORMAL_TEXTURE == 1
		uniform sampler2D tNormal;
		#endif

		uniform float cameraNear;
		uniform float cameraFar;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;

		uniform float scale;
		uniform float intensity;
		uniform float bias;
		uniform float kernelRadius;
		uniform float minResolution;
		uniform vec2 size;
		uniform float randomSeed;

		// RGBA depth

		#include <packing>

		vec4 getDefaultColor( const in vec2 screenPosition ) {
			#if DIFFUSE_TEXTURE == 1
			return texture2D( tDiffuse, vUv );
			#else
			return vec4( 1.0 );
			#endif
		}

		float getDepth( const in vec2 screenPosition ) {
			#if DEPTH_PACKING == 1
			return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );
			#else
			return texture2D( tDepth, screenPosition ).x;
			#endif
		}

		float getViewZ( const in float depth ) {
			#if PERSPECTIVE_CAMERA == 1
			return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
			return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}

		vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {
			float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];
			vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );
			clipPosition *= clipW; // unprojection.

			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;
		}

		vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {
			#if NORMAL_TEXTURE == 1
			return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );
			#else
			return normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );
			#endif
		}

		float scaleDividedByCameraFar;
		float minResolutionMultipliedByCameraFar;

		float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {
			vec3 viewDelta = sampleViewPosition - centerViewPosition;
			float viewDistance = length( viewDelta );
			float scaledScreenDistance = scaleDividedByCameraFar * viewDistance;

			return max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );
		}

		// moving costly divides into consts
		const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );
		const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );

		float getAmbientOcclusion( const in vec3 centerViewPosition ) {
			// precompute some variables require in getOcclusion.
			scaleDividedByCameraFar = scale / cameraFar;
			minResolutionMultipliedByCameraFar = minResolution * cameraFar;
			vec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );

			// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/
			float angle = rand( vUv + randomSeed ) * PI2;
			vec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;
			vec2 radiusStep = radius;

			float occlusionSum = 0.0;
			float weightSum = 0.0;

			for( int i = 0; i < NUM_SAMPLES; i ++ ) {
				vec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;
				radius += radiusStep;
				angle += ANGLE_STEP;

				float sampleDepth = getDepth( sampleUv );
				if( sampleDepth >= ( 1.0 - EPSILON ) ) {
					continue;
				}

				float sampleViewZ = getViewZ( sampleDepth );
				vec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );
				occlusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );
				weightSum += 1.0;
			}

			if( weightSum == 0.0 ) discard;

			return occlusionSum * ( intensity / weightSum );
		}

		void main() {
			float centerDepth = getDepth( vUv );
			if( centerDepth >= ( 1.0 - EPSILON ) ) {
				discard;
			}

			float centerViewZ = getViewZ( centerDepth );
			vec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );

			float ambientOcclusion = getAmbientOcclusion( viewPosition );

			gl_FragColor = getDefaultColor( vUv );
			gl_FragColor.xyz *=  1.0 - ambientOcclusion;
		}`},ho={defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new ie(512,512)},sampleUvOffsets:{value:[new ie(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1e3},depthCutoff:{value:10}},vertexShader:`

		#include <common>

		uniform vec2 size;

		varying vec2 vUv;
		varying vec2 vInvSize;

		void main() {
			vUv = uv;
			vInvSize = 1.0 / size;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
		}`,fragmentShader:`

		#include <common>
		#include <packing>

		uniform sampler2D tDiffuse;
		uniform sampler2D tDepth;

		uniform float cameraNear;
		uniform float cameraFar;
		uniform float depthCutoff;

		uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];
		uniform float sampleWeights[ KERNEL_RADIUS + 1 ];

		varying vec2 vUv;
		varying vec2 vInvSize;

		float getDepth( const in vec2 screenPosition ) {
			#if DEPTH_PACKING == 1
			return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );
			#else
			return texture2D( tDepth, screenPosition ).x;
			#endif
		}

		float getViewZ( const in float depth ) {
			#if PERSPECTIVE_CAMERA == 1
			return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
			return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}

		void main() {
			float depth = getDepth( vUv );
			if( depth >= ( 1.0 - EPSILON ) ) {
				discard;
			}

			float centerViewZ = -getViewZ( depth );
			bool rBreak = false, lBreak = false;

			float weightSum = sampleWeights[0];
			vec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;

			for( int i = 1; i <= KERNEL_RADIUS; i ++ ) {

				float sampleWeight = sampleWeights[i];
				vec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;

				vec2 sampleUv = vUv + sampleUvOffset;
				float viewZ = -getViewZ( getDepth( sampleUv ) );

				if( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;

				if( ! rBreak ) {
					diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;
					weightSum += sampleWeight;
				}

				sampleUv = vUv - sampleUvOffset;
				viewZ = -getViewZ( getDepth( sampleUv ) );

				if( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;

				if( ! lBreak ) {
					diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;
					weightSum += sampleWeight;
				}

			}

			gl_FragColor = diffuseSum / weightSum;
		}`},Ug={createSampleWeights:function(n,e){const t=[];for(let i=0;i<=n;i++)t.push(Jq(i,e));return t},createSampleOffsets:function(n,e){const t=[];for(let i=0;i<=n;i++)t.push(e.clone().multiplyScalar(i));return t},configure:function(n,e,t,i){n.defines.KERNEL_RADIUS=e,n.uniforms.sampleUvOffsets.value=Ug.createSampleOffsets(e,i),n.uniforms.sampleWeights.value=Ug.createSampleWeights(e,t),n.needsUpdate=!0}};function Jq(n,e){return Math.exp(-(n*n)/(2*(e*e)))/(Math.sqrt(2*Math.PI)*e)}const Em={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		#include <packing>

		void main() {

			float depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );
			gl_FragColor = vec4( vec3( depth ), opacity );

		}`};class BD extends Uo{constructor(e,t,i=!1,r=!1,s=new ie(256,256)){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.supportsDepthTextureExtension=i,this.supportsNormalTexture=r,this.originalClearColor=new ve,this._oldClearColor=new ve,this.oldClearAlpha=1,this.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},this.resolution=new ie(s.x,s.y),this.saoRenderTarget=new Gt(this.resolution.x,this.resolution.y),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone(),this.beautyRenderTarget=this.saoRenderTarget.clone(),this.normalRenderTarget=new Gt(this.resolution.x,this.resolution.y,{minFilter:Ft,magFilter:Ft}),this.depthRenderTarget=this.normalRenderTarget.clone();let o;this.supportsDepthTextureExtension&&(o=new wv,o.type=Gl,this.beautyRenderTarget.depthTexture=o,this.beautyRenderTarget.depthBuffer=!0),this.depthMaterial=new Xc,this.depthMaterial.depthPacking=gv,this.depthMaterial.blending=Yt,this.normalMaterial=new Iv,this.normalMaterial.blending=Yt,Yh===void 0&&console.error("THREE.SAOPass relies on SAOShader"),this.saoMaterial=new Nt({defines:Object.assign({},Yh.defines),fragmentShader:Yh.fragmentShader,vertexShader:Yh.vertexShader,uniforms:di.clone(Yh.uniforms)}),this.saoMaterial.extensions.derivatives=!0,this.saoMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.saoMaterial.defines.NORMAL_TEXTURE=this.supportsNormalTexture?1:0,this.saoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?o:this.depthRenderTarget.texture,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.blending=Yt,ho===void 0&&console.error("THREE.SAOPass relies on DepthLimitedBlurShader"),this.vBlurMaterial=new Nt({uniforms:di.clone(ho.uniforms),defines:Object.assign({},ho.defines),vertexShader:ho.vertexShader,fragmentShader:ho.fragmentShader}),this.vBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.vBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?o:this.depthRenderTarget.texture,this.vBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=Yt,this.hBlurMaterial=new Nt({uniforms:di.clone(ho.uniforms),defines:Object.assign({},ho.defines),vertexShader:ho.vertexShader,fragmentShader:ho.fragmentShader}),this.hBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.hBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms.tDiffuse.value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?o:this.depthRenderTarget.texture,this.hBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=Yt,xr===void 0&&console.error("THREE.SAOPass relies on CopyShader"),this.materialCopy=new Nt({uniforms:di.clone(xr.uniforms),vertexShader:xr.vertexShader,fragmentShader:xr.fragmentShader,blending:Yt}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=q_,this.materialCopy.blendSrc=PP,this.materialCopy.blendDst=Y_,this.materialCopy.blendEquation=Os,this.materialCopy.blendSrcAlpha=RP,this.materialCopy.blendDstAlpha=Y_,this.materialCopy.blendEquationAlpha=Os,Em===void 0&&console.error("THREE.SAOPass relies on UnpackDepthRGBAShader"),this.depthCopy=new Nt({uniforms:di.clone(Em.uniforms),vertexShader:Em.vertexShader,fragmentShader:Em.fragmentShader,blending:Yt}),this.fsQuad=new $c(null)}render(e,t,i){if(this.renderToScreen&&(this.materialCopy.blending=Yt,this.materialCopy.uniforms.tDiffuse.value=i.texture,this.materialCopy.needsUpdate=!0,this.renderPass(e,this.materialCopy,null)),this.params.output===1)return;e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const r=e.autoClear;e.autoClear=!1,e.setRenderTarget(this.depthRenderTarget),e.clear(),this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;const s=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);this.vBlurMaterial.uniforms.depthCutoff.value=s,this.hBlurMaterial.uniforms.depthCutoff.value=s,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),(this.prevStdDev!==this.params.saoBlurStdDev||this.prevNumSamples!==this.params.saoBlurRadius)&&(Ug.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new ie(0,1)),Ug.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new ie(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),e.setClearColor(0),e.setRenderTarget(this.beautyRenderTarget),e.clear(),e.render(this.scene,this.camera),this.supportsDepthTextureExtension||this.renderOverride(e,this.depthMaterial,this.depthRenderTarget,0,1),this.supportsNormalTexture&&this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(e,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(e,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(e,this.hBlurMaterial,this.saoRenderTarget,16777215,1));let o=this.materialCopy;this.params.output===3?this.supportsDepthTextureExtension?(this.materialCopy.uniforms.tDiffuse.value=this.beautyRenderTarget.depthTexture,this.materialCopy.needsUpdate=!0):(this.depthCopy.uniforms.tDiffuse.value=this.depthRenderTarget.texture,this.depthCopy.needsUpdate=!0,o=this.depthCopy):this.params.output===4?(this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),this.params.output===0?o.blending=q_:o.blending=Yt,this.renderPass(e,o,this.renderToScreen?null:i),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=r}renderPass(e,t,i,r,s){e.getClearColor(this.originalClearColor);const o=e.getClearAlpha(),a=e.autoClear;e.setRenderTarget(i),e.autoClear=!1,r!=null&&(e.setClearColor(r),e.setClearAlpha(s||0),e.clear()),this.fsQuad.material=t,this.fsQuad.render(e),e.autoClear=a,e.setClearColor(this.originalClearColor),e.setClearAlpha(o)}renderOverride(e,t,i,r,s){e.getClearColor(this.originalClearColor);const o=e.getClearAlpha(),a=e.autoClear;e.setRenderTarget(i),e.autoClear=!1,r=t.clearColor||r,s=t.clearAlpha||s,r!=null&&(e.setClearColor(r),e.setClearAlpha(s||0),e.clear()),this.scene.overrideMaterial=t,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=a,e.setClearColor(this.originalClearColor),e.setClearAlpha(o)}setSize(e,t){this.beautyRenderTarget.setSize(e,t),this.saoRenderTarget.setSize(e,t),this.blurIntermediateRenderTarget.setSize(e,t),this.normalRenderTarget.setSize(e,t),this.depthRenderTarget.setSize(e,t),this.saoMaterial.uniforms.size.value.set(e,t),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(e,t),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(e,t),this.hBlurMaterial.needsUpdate=!0}}BD.OUTPUT={Beauty:1,Default:0,SAO:2,Depth:3,Normal:4};const wd=new BD(Ke,St(),!1,!0);wd.params.saoKernelRadius=80;wd.params.saoBlurStdDev=5;Bg(n=>wd.params.saoScale=n==="light"?3e3:2e3);St(n=>wd.camera=n);const dc=new aD(yn());Qt(()=>{dc.renderer=yn();const[n,e]=Ui();dc.setSize(n,e),dc.setPixelRatio(bs())},[yn,Ui,bs]);Qt(()=>{const n=[DS];HC()&&n.push(Hv),Bg()&&n.push(wd),Ow()&&n.push(yd),Iw()&&n.push(Qq),Lw()&&n.push(HS),Dw()&&n.push(Us),n.push(Fw);for(const e of n)dc.addPass(e);return()=>{for(const e of n)dc.removePass(e)}},[HC,Bg,Ow,Iw,Lw,Dw]);async function eY(){const{Sphere:n,Cylinder:e,Vec3:t}=await Jc(),{x:i,y:r}=Qc(this),s=i*.5,o=r*.5,a=new n(s),u=new n(s),c=new e(s,s,Math.abs(r-i));this.cannonBody.addShape(a,new t(0,-o+s,0)),this.cannonBody.addShape(u,new t(0,o-s,0)),this.cannonBody.addShape(c)}const WC=Math.PI*.5;class UD extends Ho{constructor(e){super(new cn),this._physicsShape=eY,this.updatePolarAngle=No(()=>this.gyrate(0,0),0,"trailing"),this._minPolarAngle=bS*rn,this._maxPolarAngle=TS*rn,this.camera=e,this.object3d.add(e),this.initCamera()}getRay(){return nD.set(this.camera.getWorldPosition(Tl),this.camera.getWorldDirection(Zt))}append(e){this.camera.add(e.outerObject3d)}get width(){return this.object3d.scale.x*sn}set width(e){const t=e*je;this.object3d.scale.x=t,this.camera.scale.x=1/t}get height(){return this.object3d.scale.y*sn}set height(e){const t=e*je;this.object3d.scale.y=t,this.camera.scale.y=1/t}get depth(){return this.object3d.scale.z*sn}set depth(e){const t=e*je;this.object3d.scale.z=t,this.camera.scale.z=1/t}lookAt(e){super.lookAt(e),this.rotationY+=180}_gyrate(e,t,i){const r=i?this.object3d:this.outerObject3d;jr.setFromQuaternion(r.quaternion),jr.y-=e*.002,jr.x-=t*.002,jr.x=Math.max(WC-this._maxPolarAngle,Math.min(WC-this._minPolarAngle,jr.x)),r.quaternion.setFromEuler(jr),!i&&this.physicsRotate()}gyrate(e,t){this.mouseControlMode==="orbit"?this._gyrate(e,t):(this._gyrate(e,0),this._gyrate(0,t,!0))}get minPolarAngle(){return this._minPolarAngle*Fn}set minPolarAngle(e){this._minPolarAngle=e*rn,this.updatePolarAngle()}get maxPolarAngle(){return this._maxPolarAngle*Fn}set maxPolarAngle(e){this._maxPolarAngle=e*rn,this.updatePolarAngle()}get mouseControl(){return this._mouseControl}set mouseControl(e){var t;if(this._mouseControl===e||(this._mouseControl=e,(t=this.mouseControlHandle)===null||t===void 0||t.cancel(),!e))return;const i=this.mouseControlHandle=this.cancellable();import("./enableMouseControl.c3ad94c0.js").then(r=>r.default.call(this,i))}}Yl(UD,[PD]);const Am=5.7;var tY={};const jC=(n,e)=>Math.abs(n*.5/Math.cos(e.fov*.6*rn));Qt(()=>{const[n,e]=Ui(),[t,i]=Lg(),r=St(),s=n/e;r instanceof jn&&!Fc()?(r.aspect=s,r.updateProjectionMatrix()):r instanceof Za&&([r.left,r.right,r.top,r.bottom]=[s*Am*-.5,s*Am*.5,Am*.5,Am*-.5],r.updateProjectionMatrix());const o={width:n,height:i-(t-n)*i/t},a={width:t-(i-e)*t/i,height:e},u=Math.min(n-o.width,e-o.height),c=Math.min(n-a.width,e-a.height);u>c?(r===Ni&&oC(jC(t/s,Ni)*je),Object.assign(Gs.style,{width:o.width+"px",height:o.height+"px"}),iC(o.width/t)):(r===Ni&&oC(jC(i,Ni)*je),Object.assign(Gs.style,{width:a.width+"px",height:a.height+"px"}),iC(a.width/t)),Object.assign(Rn.style,{width:n+"px",height:e+"px"})},[Ui,Lg,St,Fc]);Zl(tY);var nY={};const[Bx,NQ]=zo(),[Ux,zQ]=zo();Qt(()=>{const n=Fc(),e=St(),t=yn();if(Oc()==="speed"||n==="webxr"){const a=ir(()=>{Bx(),t.render(Ke,e),Ux()});return()=>{a.cancel()}}if(n&&e instanceof jn){const a=new _d;a.scale=.5,a.visible=!1;const u=1e3,c=-u*.5,[f,d]=Ui(),p=f*.5,g=d*1;e.aspect=p/g,e.updateProjectionMatrix();const v=new zc(e),y=ir(()=>{Bx(),t.setViewport(0,0,p,g),t.setScissor(0,0,p,g),t.setScissorTest(!0),a.outerObject3d.position.copy(e.getWorldPosition(Zt)),a.outerObject3d.quaternion.copy(e.quaternion),a.translateZ(-u);const x=a.outerObject3d.position.clone(),M=e.quaternion.clone(),S=e.position.clone();a.moveRight(c),v.moveRight(-3),e.lookAt(a.outerObject3d.position),t.render(Ke,e),a.outerObject3d.position.copy(x),e.quaternion.copy(M),e.position.copy(S),t.setViewport(p,0,p,g),t.setScissor(p,0,p,g),a.moveRight(-c),v.moveRight(3),e.lookAt(a.outerObject3d.position),t.render(Ke,e),a.outerObject3d.position.copy(x),e.quaternion.copy(M),e.position.copy(S),Ux()});return()=>{a.dispose(),y.cancel(),t.setViewport(0,0,f,d),t.setScissor(0,0,f,d),t.setScissorTest(!1)}}let i=!1,r=!1,s=!1;const o=ir(()=>{Bx(),fD[0]&&(i||(zD(!0),i=!0),iq()),IS[0]&&!r&&(qq(!0),r=!0),SD[0]&&!s&&(ND(!0),s=!0),dc.render(),Ux()});return()=>{o.cancel()}},[Oc,Fc,St,Ui,yn]);Zl([nY,Vq,Nq,Fq,Iq,Dq,Tq]);var iY={};async function rY(){const{Sphere:n}=await Jc(),e=new n(Qc(this).x*.5);this.cannonBody.addShape(e)}const sY=new Dv(Eo,16,16);class WS extends Ys{constructor(){super(sY),this._physicsShape=rY}}WS.componentName="sphere";WS.defaults=Vo;const oY=new fS(Eo,Sr,16);class jS extends Ys{constructor(){super(oY)}}jS.componentName="cone";jS.defaults=Vo;async function aY(){const{Cylinder:n}=await Jc(),{x:e,y:t}=Qc(this),i=e*.5,r=new n(i,i,t);this.cannonBody.addShape(r)}const lY=new Cv(Eo,Eo,Sr,16);class XS extends Ys{constructor(){super(lY),this._physicsShape=aY}}XS.componentName="cylinder";XS.defaults=Vo;const uY=new Lv(Eo);class qS extends Ys{constructor(){super(uY)}}qS.componentName="octahedron";qS.defaults=Vo;const Zv=new pS(61*je);Zv.rotateY(45*rn);Zv.rotateX(125*rn);Zv.translate(0,-.2,.2);class YS extends Ys{constructor(){super(Zv)}}YS.componentName="tetrahedron";YS.defaults=Vo;async function cY(){const{Box:n,Vec3:e}=await Jc(),t=Qc(this),i=t.clone().multiply(new O(.15,.5,.1)),r=t.clone().multiply(new O(.5,.15,.1)),s=new n(i),o=new n(r);this.cannonBody.addShape(s,new e(-r.x,0,0)),this.cannonBody.addShape(s,new e(r.x,0,0)),this.cannonBody.addShape(o,new e(0,-i.y,0)),this.cannonBody.addShape(o,new e(0,i.y,0))}const hY=new mS(40*je,10*je,8,16);class ZS extends Ys{constructor(){super(hY),this._physicsShape=cY}}ZS.componentName="torus";ZS.defaults=Vo;const KS=new fd(Sr,Sr,1,1);class $S extends Ys{constructor(){super(KS,!0),this.object3d.scale.z=Vv}}$S.componentName="plane";$S.defaults=Vo;async function fY(){const{Sphere:n}=await Jc();this.cannonBody.addShape(new n(Qc(this).x*.5))}const QS=new hS(Eo,32);class JS extends Ys{constructor(){super(QS,!0),this._physicsShape=fY,this.object3d.scale.z=Vv}}JS.componentName="circle";JS.defaults=Vo;const VD=[],xl=new ve,Cm=new ve;let XC="",qC="";const dY=()=>{var n;return(n=VD.pop())!==null&&n!==void 0?n:new pY},kw=new Set;ir(()=>{for(const n of kw)n.update()});class pY{constructor(){this.material=new dd,this.sprite=new sS(this.material)}init(e,t,i,r=i,s,o=s,a,u=a,c,f,d,p,g,v,y,x,M,S){kw.add(this),this.material.map=e,t?dD(this.sprite):pD(this.sprite),this.accelX=p*je,this.accelY=g*je,this.accelZ=v*je,this.speedX=y*je,this.speedY=x*je,this.speedZ=M*je,this.lifeTime=S,this.startTime=Date.now(),Ke.add(this.sprite),this.scaleStart=this.sprite.scale.x=this.sprite.scale.y=i*je,this.sizeRange=(r-i)*je,this.opacityStart=this.material.opacity=s,this.opacityRange=o-s,a!==XC&&(XC=a,xl.set(a)),qC!==u&&(qC=u,Cm.set(u)),this.rStart=this.material.color.r=xl.r,this.rRange=Cm.r-xl.r,this.gStart=this.material.color.g=xl.g,this.gRange=Cm.g-xl.g,this.bStart=this.material.color.b=xl.b,this.bRange=Cm.b-xl.b,this.sprite.position.set(c,f,d)}update(){const e=Date.now()-this.startTime;if(e>this.lifeTime){this.dispose();return}this.sprite.position.x+=this.speedX+=this.accelX,this.sprite.position.y+=this.speedY+=this.accelY,this.sprite.position.z+=this.speedZ+=this.accelZ;const t=e/this.lifeTime,i=t*this.sizeRange;this.sprite.scale.x=this.sprite.scale.y=this.scaleStart+i;const r=t*this.opacityRange;this.material.opacity=this.opacityStart+r;const s=t*this.rRange;this.material.color.r=this.rStart+s;const o=t*this.gRange;this.material.color.g=this.gStart+o;const a=t*this.bRange;this.material.color.b=this.bStart+a}dispose(){Ke.remove(this.sprite),kw.delete(this),VD.push(this)}}var mY="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAErklEQVRoQ92aiZNUNRDGu9NJRgUKESguFZQVEFg5ZAWLv9+SZZH7dhEQQSxEpcDjJem09Y1vqGFh2cNZljepSqVezZskv/elO52DacTJzISIekMZz0hKRM0gMzOeR5Z4FDWZ2Xoi2kRE60opa4noXWYGTCAi17ZRiSibGWD+9t4/I6KnRPQrMz/5v/1YNoiZRSLaTkSbSykba63vA6jWutbM3oMizPwCiJllKMLMfznnngHAOfeH9/4xET0iogfMnJYDtWQQM0PnPi6lbKu1bjWzzaq6ycw2ENF6M1tba10DEMAyc18RM6ttJxvn3J/MDEWeMPPvIgJVHjnnHnrvfyaiH5kZ0ItOSwIxs22ASCl9ZGbbVRUgW2qtAPmgVWWdma0xs3faoTVsI5mZ/2FmgDyFGsz8m3MOIL+IyENmfhBjvNfCAGpRaVEgrQFPlFI+UdWdqgqQHaq6vda6BarUWjeaGexi0YmZoc7jVg2AYGjdF5F7InLXe3+biGYX4xgWBGm/7L6U0oSZAWRXKWVnrfXDWusOqLHonr/mRajinLvvnPvJe39XRO4w8+0Y4ywRXYeSr2vntSAYIkS0P6W0p9Y6kXPeDZhSyi6AjAJgbh0tSB8ihHDLOTcbY7xJRFcxJOdrc16QVonJnPO+nPNeVd2jqhO11k9rrXC3K5acc/BmP4jIrIjcDCHcCCFcJ6JL8ynzSpDWJiZTSgdKKZ+r6j5VBcxnS7WD5dLCfkTkexG5ISLXvffXYoxXWpiXJtP5QPamlCZrrQdyzgdUtQ9jZn65HVvO/5i5AEJEroUQrjjnrsQYocqNufW9BAIXW0o5pKpQZFJVD6rq/jelxEsd/E+ZqyJyGRAicsl7f4GZX3DNL4C0k93RpmkOq+oXpRRkKLOiNrGQWrAZ7z0ALorIxV6vd56Izg5PmnNBdqeUjpRSDrf50Ep5p4U6P483u+C9P48cYzzHzLcG7z0HQThRSvlKVY+WUo7knAF0aKkNruT7GFIhhHPe+3MictZ7f3oQmw2D7EopHSulAORLlKOa7EYFh0nTew+A71DGGM8w8x3UPwwy1TQNQI7lnAHyVqkx+BitKgA50+v1ADLzHAThdynl65TSlKr2YRBHjepLjrIexGOAEJEzMcYZ7/23WA70FTEzGPlUzhk2gnJqtdztQtCYKEMIMyIyE0I4DRgY/QDkcNM0x2HsgCmlHFyowtX83Xt/GRAw9l6vN83M5xnhCIZVzvm4qgIE5c7V7OhCbSPEDyFMi8hplP3hhWVpKeVkSulEKQWqHH/bvNUr5hR4LwBMxxhPee+/AcgGVT3ZNE0fJOd8AsvVhb7Kav6OZXIIAQDTvV7vlIj0QbaqKjzWiYEqb6uhP5/FmZuBGlBERPpDC0vWPgTUaBV5o1HuUtVFVAxFkFuQU2MFMjZDa2yMfWzc73hMiG2s1f0QZdyCxvEI41tVur+wakHGZqk7HpsPQ0bf7e2gFgSnUd3foGthur9lOginzaz7m9itKjj36/6xQguDw8xuH/QMDbHuH70NwUCZbh+GDsHAZrp9PD28MdD5CwNzYLp/hWMOULcv1bxqD6rT15zm21RbrYtn/wLboDECn0+AWAAAAABJRU5ErkJggg==";const gY=JL.load(mY),Zh=(n,e)=>j_(n-e,n+e);class vY extends _d{constructor(){super(),this.speed=0,this.speedRange=.5,this.accel=0,this.accelRange=0,this.lifeTime=500,this.lifeTimeRange=0,this.spread=0,this.size=20,this.sizeRange=0,this.opacityRange=0,this._frequency=50,this.width=this.height=this.depth=20,this.object3d.visible=!1,this.start()}get frequency(){return this._frequency}set frequency(e){this._frequency=e,this.handle&&this.start()}start(){var e;(e=this.handle)===null||e===void 0||e.cancel(),this.handle=this.timer(1e3/this._frequency,1/0,()=>{const[,,,,t,i,r]=this.outerObject3d.matrixWorld.elements,s=Zh(this.speed,this.speedRange),[o,a,u]=[s*t,s*i,s*r],c=Zh(this.accel,this.accelRange),[f,d,p]=[c*t,c*i,c*r],g=Zh(this.size,this.sizeRange),v=Zh(this.opacity,this.opacityRange);this.outerObject3d.getWorldPosition(Zt),dY().init(gY,this.bloom,g,this.sizeEnd,v,this.opacityEnd,this.color,this.colorEnd,Zt.x,Zt.y,Zt.z,f,d,p,o+j_(-this.spread,this.spread),a,u+j_(-this.spread,this.spread),Zh(this.lifeTime,this.lifeTimeRange))})}stop(){var e;(e=this.handle)===null||e===void 0||e.cancel(),this.handle=void 0}}vY.componentName="particleSystem";var HD=n=>{const e=new O;return kc.setFromObject(n).getSize(e),e};const YC=new Map;var GD=(n,e)=>{const t=YC.get(e);if(t){const[a,u,c]=t;return n.scale.multiplyScalar(a),n.position.copy(u).multiplyScalar(-1),c}const i=HD(n),r=1/i.y;n.scale.multiplyScalar(r);const s=RS(n);n.position.copy(s).multiplyScalar(-1);const o=i.multiplyScalar(r);return YC.set(e,[r,s.clone(),o.clone()]),o};class eM extends Ho{constructor(){super(new un(kD,iD)),this.loadedGroup=new cn,this.loadedResolvable=new _g,this.outerObject3d.add(this.loadedGroup)}get src(){return this._src}set src(e){this._src!==e&&(this._src=e,e&&(this.loadedResolvable.done&&(this.loadedResolvable=new _g,this.loadedGroup.clear()),this.load(e).then(t=>{this.done||this._src!==e||(this.object3d.visible=!!this._boxVisible,this.resolveLoaded(t))})))}get onLoad(){return this._onLoad}set onLoad(e){var t;this._onLoad=e,(t=this.loadedHandle)===null||t===void 0||t.cancel(),e&&(this.loadedHandle=this.loadedResolvable.then(e))}get width(){return super.width}set width(e){super.width=e,this.widthSet=!0}get height(){return super.height}set height(e){super.height=e,this.heightSet=!0}get depth(){return super.depth}set depth(e){super.depth=e,this.depthSet=!0}get innerRotationX(){return super.innerRotationX}set innerRotationX(e){super.innerRotationX=e,this.loadedGroup.rotation.x=this.object3d.rotation.x}get innerRotationY(){return super.innerRotationY}set innerRotationY(e){super.innerRotationY=e,this.loadedGroup.rotation.y=this.object3d.rotation.y}get innerRotationZ(){return super.innerRotationZ}set innerRotationZ(e){super.innerRotationZ=e,this.loadedGroup.rotation.z=this.object3d.rotation.z}get innerX(){return super.innerX}set innerX(e){super.innerX=e,this.loadedGroup.position.x=this.object3d.position.x}get innerY(){return super.innerY}set innerY(e){super.innerY=e,this.loadedGroup.position.y=this.object3d.position.y}get innerZ(){return super.innerZ}set innerZ(e){super.innerZ=e,this.loadedGroup.position.z=this.object3d.position.z}get innerVisible(){return this.loadedGroup.visible}set innerVisible(e){this.loadedGroup.visible=e}get frustumCulled(){return this.outerObject3d.frustumCulled}set frustumCulled(e){this.outerObject3d.frustumCulled!==e&&(this.outerObject3d.frustumCulled=e,this.loadedResolvable.then(()=>super.frustumCulled=e))}get physics(){var e;return(e=this._physics)!==null&&e!==void 0?e:!1}set physics(e){var t;if(this._physics===e)return;this._physics=e,(t=this.physicsHandle)===null||t===void 0||t.cancel();const i=this.physicsHandle=this.cancellable();this.loadedResolvable.then(()=>this.initPhysics(e,i))}get boxVisible(){var e;return(e=this._boxVisible)!==null&&e!==void 0?e:this.object3d.visible}set boxVisible(e){this._boxVisible=e,this.object3d.visible=e}get outline(){return!!this._outline}set outline(e){var t;this._outline!==e&&(this._outline=e,(t=this._outlineHandle)===null||t===void 0||t.cancel(),e&&(this._outlineHandle=this.loadedResolvable.then(i=>{e?MD(i):bD(i)})))}}const tM=Ii(vt({},$a),{boxVisible:!1}),yY=vt({},tM),xY=Xa(()=>Promise.resolve().then(function(){return XZ})),_Y=Xa(()=>Promise.resolve().then(function(){return TK}));class Kv extends eM{async loadAnimation(e,t=e){var i;const r=new _g;((i=this.loadingAnims)!==null&&i!==void 0?i:this.loadingAnims=[]).push(r);let s;try{s=await this.load(e)}catch{r.resolve();return}const o=s.animations[0];o&&(this.animations[t]=this.watch(new Aw(o,await this.loadedResolvable))),r.resolve()}get animations(){var e;return(e=this.animationManagers)!==null&&e!==void 0?e:this.animationManagers={}}set animations(e){for(const[t,i]of Object.entries(e))typeof i=="string"?this.loadAnimation(i,t):this.animations[t]=i}async load(e){var t;const i=new _g;((t=this.loadingAnims)!==null&&t!==void 0?t:this.loadingAnims=[]).push(i);let r;try{OD[0](e).endsWith(".fbx")?r=await(await xY()).default(e,!0):r=await(await _Y()).default(e,!0)}catch{return i.resolve(),new cn}return i.resolve(),r}get loadedScale(){return this._loadedScale}set loadedScale(e){this._loadedScale=e}get loadedX(){return this._loadedX}set loadedX(e){this._loadedX=e,this._loadedPos=!0}get loadedY(){return this._loadedY}set loadedY(e){this._loadedY=e,this._loadedPos=!0}get loadedZ(){return this._loadedZ}set loadedZ(e){this._loadedZ=e,this._loadedPos=!0}resolveLoaded(e){for(const t of e.animations)this.animations[t.name]=this.watch(new Aw(t,e));if(this._loadedScale)e.scale.multiplyScalar(this._loadedScale);else{const t=GD(e,this._src);!this.widthSet&&(this.object3d.scale.x=t.x),!this.heightSet&&(this.object3d.scale.y=t.y),!this.depthSet&&(this.object3d.scale.z=t.z)}if(this._loadedPos){let{x:t,y:i,z:r}=e.position;this._loadedX&&(t=this._loadedX*je),this._loadedY&&(i=this._loadedY*je),this._loadedZ&&(r=this._loadedZ*je),e.position.set(t,i,r)}this.loadedGroup.add(e),this.loadedResolvable.resolve(e)}}Kv.componentName="model";Kv.defaults=yY;const wY=vt({},tM),SY=Xa(()=>import("./loadSVG.b22d2d72.js")),MY=new WeakMap;class $v extends eM{constructor(){super(...arguments),this.material=new Ss}dispose(){return this.done?this:(super.dispose(),this.material.dispose(),this)}load(e){return SY().then(t=>t.default(e))}resolveLoaded(e){const t=new cn,i=Ts(MY,e,()=>{const s=[];for(const c of e.paths)for(const f of c.toShapes(!0))s.push(f);if(!s.length)return[];const o=new cn;for(const c of s)o.add(new un(new Na(c,{depth:0,bevelEnabled:!1})));const a=HD(o),u=[];for(const c of s)u.push(new Na(c,{depth:a.y,bevelEnabled:!1}));return u});for(const s of i){const o=new un(s,this.material);t.add(o)}const r=GD(t,this._src);!this.widthSet&&(this.object3d.scale.x=r.x),!this.heightSet&&(this.object3d.scale.y=r.y),!this.depthSet&&(this.object3d.scale.z=r.z),t.scale.y*=-1,this.loadedGroup.add(t),this.loadedResolvable.resolve(t)}}$v.componentName="svgMesh";$v.defaults=wY;Yl($v,[VS,FD]);const bY=vt(vt({},$a),ID);class Qv extends Ho{constructor(){const e=new dd({transparent:!0});super(new sS(e)),this.material=e}dispose(){return this.done?this:(super.dispose(),this.material.dispose(),this)}}Qv.componentName="sprite";Qv.defaults=bY;Yl(Qv,[VS]);const TY=Ii(vt({},$a),{contrast:.5,blur:2});KS.clone();QS.clone();class nM extends Ho{constructor(){super(new cn),this.contrast=.5,this.blur=2,this.object3d.scale.z=Vv}}nM.componentName="reflector";nM.defaults=TY;const EY=vt({},$a),AY=Xa(()=>import("./ReflectorForSSRPass.c007e072.js"));class WD extends Ho{constructor(){super(new cn),this.object3d.scale.z=Vv,this.rotationX=-90,this.scale=9999,(async()=>{const{ReflectorForSSRPass:e}=await AY();if(this.done)return;const t=new e(this.shape==="circle"?QS:KS,{clipBias:3e-4,textureWidth:Nv,textureHeight:zv,color:8947848,useDepthTexture:!0});this.createEffect(()=>{const i=t.getRenderTarget(),[r,s]=Ui();i.setSize(r,s),i.setPixelRatio(bs())},[Ui,bs]),t.material.depthWrite=!1,t.visible=!1,this.object3d.add(t),t.fresnel=!0,t.distanceAttenuation=!0,t.maxDistance=5,MC(t)})()}dispose(){return this.done?this:(super.dispose(),MC(null),this)}}WD.componentName="groundReflector";WD.defaults=EY;const CY=vt(vt({},$a),LD),jD=vt({},CY);class Jv extends UD{constructor(e=new jn(75,1,Bv,Uv)){super(e)}}Jv.componentName="camera";Jv.defaults=jD;class Sd extends Ho{constructor(e,t){super(e),t&&this.createEffect(()=>{if(!Kf()||St()!==Ni)return;const i=new t(this.object3d);return Ke.add(i),()=>{i.dispose(),Ke.remove(i)}},[St,Kf])}dispose(){return this.done?this:(super.dispose(),this.object3d.dispose(),this)}lookAt(e){super.lookAt(e),this.rotationY+=180}get color(){return"#"+this.object3d.color.getHexString()}set color(e){this.object3d.color=new ve(e)}get intensity(){return this.object3d.intensity}set intensity(e){this.object3d.intensity=e}}const Md=Ii(vt({},$a),{color:"#ffffff",intensity:1}),XD=vt({},Md),RY=vt({},XD);class iM extends Sd{constructor(){super(new xS)}}iM.componentName="ambientLight";iM.defaults=RY;class PY extends Oa{constructor(e,t){const i=[1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],r=new ct;r.setAttribute("position",new it(i,3)),r.computeBoundingSphere();const s=new Ar({fog:!1});super(r,s),this.light=e,this.color=t,this.type="RectAreaLightHelper";const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],a=new ct;a.setAttribute("position",new it(o,3)),a.computeBoundingSphere(),this.add(new un(a,new pi({side:wr,fog:!1})))}updateMatrixWorld(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),this.color!==void 0)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);const e=this.material.color,t=Math.max(e.r,e.g,e.b);t>1&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}this.matrixWorld.extractRotation(this.light.matrixWorld).scale(this.scale).copyPosition(this.light.matrixWorld),this.children[0].matrixWorld.copy(this.matrixWorld)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Ps=Ii(vt({},Md),{width:1e3,height:1e3,depth:0,scaleZ:0,power:10*Math.PI}),LY=Xa(async()=>{const{RectAreaLightUniformsLib:n}=await import("./RectAreaLightUniformsLib.6b2ed05d.js");n.init()});class e0 extends Ho{constructor(){super(new cn),(async()=>{if(await LY(),this.done)return;const e=this.light=new SL(this._color,this._intensity,this.width*this.scaleX*je,this.height*this.scaleY*je);this._power&&(e.power=this._power),this.object3d.add(e),this.then(()=>e.dispose()),this.createEffect(()=>{if(!Kf()||St()!==Ni)return;const t=new PY(e);return Ke.add(t),()=>{t.dispose(),Ke.remove(t)}},[St,Kf])})()}lookAt(e){super.lookAt(e),this.rotationY+=180}get color(){var e;return(e=this._color)!==null&&e!==void 0?e:Ps.color}set color(e){this._color=e,this.light&&(this.light.color=new ve(e))}get intensity(){var e;return(e=this._intensity)!==null&&e!==void 0?e:Ps.intensity}set intensity(e){this._intensity=e,this.light&&(this.light.intensity=e)}get power(){var e;return(e=this._power)!==null&&e!==void 0?e:Ps.power}set power(e){this._power=e,this.light&&(this.light.power=e)}get width(){var e;return(e=this._width)!==null&&e!==void 0?e:Ps.width}set width(e){this._width=e,this.light&&(this.light.width=e*this.scaleX*je)}get height(){var e;return(e=this._height)!==null&&e!==void 0?e:Ps.height}set height(e){this._height=e,this.light&&(this.light.height=e*this.scaleY*je)}get depth(){return Ps.depth}set depth(e){}get scaleX(){var e;return(e=this._scaleX)!==null&&e!==void 0?e:Ps.scaleX}set scaleX(e){this._scaleX=e,this.light&&(this.light.width=e*this.width*je)}get scaleY(){var e;return(e=this._scaleY)!==null&&e!==void 0?e:Ps.scaleY}set scaleY(e){this._scaleY=e,this.light&&(this.light.height=e*this.height*je)}get scaleZ(){return Ps.scaleZ}set scaleZ(e){}}e0.componentName="areaLight";e0.defaults=Ps;var DY=Object.freeze(Object.defineProperty({__proto__:null,default:e0},Symbol.toStringTag,{value:"Module"}));const IY=vt({},XD);class rM extends Sd{constructor(){super(new pd,Dj)}}rM.componentName="directionalLight";rM.defaults=IY;const OY=Ii(vt({},Md),{groundColor:"#ffffff"});class sM extends Sd{constructor(){super(new vS,Lj)}get groundColor(){return"#"+this.object3d.groundColor.getHexString()}set groundColor(e){this.object3d.groundColor=new ve(e)}}sM.componentName="skyLight";sM.defaults=OY;const FY=Ii(vt({},Md),{decay:1,distance:0,power:12.566});class qD{get decay(){return this.object3d.decay}set decay(e){this.object3d.decay=e}get distance(){return this.object3d.distance}set distance(e){this.object3d.distance=e}get power(){return this.object3d.power}set power(e){this.object3d.power=e}}class t0 extends Sd{constructor(){super(new Zf,Rj)}}t0.componentName="pointLight";t0.defaults=FY;Yl(t0,[qD]);const kY=Ii(vt({},Md),{angle:1,penumbra:0});class n0 extends Sd{constructor(){super(new Fv,Aj)}get angle(){return this.object3d.angle}set angle(e){this.object3d.angle=e}get penumbra(){return this.object3d.penumbra}set penumbra(e){this.object3d.penumbra=e}}n0.componentName="spotLight";n0.defaults=kY;Yl(n0,[qD]);const NY=vt({},$a),Nw=new Set,zY=q1(()=>{for(const n of Nw){const{parent:e}=n.outerObject3d;e==null||e.remove(n.outerObject3d),kc.setFromObject(n.outerObject3d),n.object3d.scale.copy(kc.getSize(Zt)),e==null||e.add(n.outerObject3d)}Nw.clear()},0,"trailing");var zw=n=>{Nw.add(n),zY()};class oM extends Ho{constructor(){super(new cn)}append(e){super.append(e),zw(this)}attach(e){super.attach(e),zw(this)}}oM.componentName="group";oM.defaults=NY;const BY=wH({group:()=>new oM,model:()=>new Kv,svgMesh:()=>new $v,sprite:()=>new Qv,reflector:()=>new nM,scene:()=>new aM,camera:()=>new Jv,ambientLight:()=>new iM,areaLight:()=>new e0,directionalLight:()=>new rM,skyLight:()=>new sM,pointLight:()=>new t0,spotLight:()=>new n0,circle:()=>new JS,cone:()=>new jS,cube:()=>new _d,cylinder:()=>new XS,octahedron:()=>new qS,plane:()=>new $S,sphere:()=>new WS,tetrahedron:()=>new YS,torus:()=>new ZS});var UY=n=>BY[n]();const VY=["type","uuid","name","children"];var Vx={get texture(){return yw()},set texture(n){BX(n)},get skybox(){return _w()},set skybox(n){xw(n)},get color(){return Qf()},set color(n){pX(n)}},HY=!!window.chrome,Hx={get logarithmicDepth(){return ES()},set logarithmicDepth(n){YL||!HY||mX(n)},get encoding(){return Jf()},set encoding(n){vX(n)},get exposure(){return uw()},set exposure(n){zj(n)},get pbr(){return mw()},set pbr(n){yX(n)},get selectiveBloom(){return Iw()},set selectiveBloom(n){zD(n)},get bloom(){return Ow()},set bloom(n){Yq(n)},get bloomStrength(){return cD()},set bloomStrength(n){QX(n)},get bloomRadius(){return uD()},set bloomRadius(n){$X(n)},get bloomThreshold(){return hD()},set bloomThreshold(n){JX(n)},get bokeh(){return Lw()},set bokeh(n){NS(n)},get bokehFocus(){return ED()},set bokehFocus(n){BS(n)},get bokehMaxBlur(){return AD()},set bokehMaxBlur(n){US(n)},get bokehAperture(){return TD()},set bokehAperture(n){zS(n)},get ambientOcclusion(){return Bg()},set ambientOcclusion(n){Zq(n)},get outline(){return Dw()},set outline(n){ND(n)},get outlineColor(){return Cw()},set outlineColor(n){mq(n)},get outlineHiddenColor(){return Rw()},set outlineHiddenColor(n){gq(n)},get outlinePattern(){return Pw()},set outlinePattern(n){vq(n)},get outlinePulse(){return xD()},set outlinePulse(n){yq(n)},get outlineStrength(){return _D()},set outlineStrength(n){xq(n)},get outlineThickness(){return wD()},set outlineThickness(n){_q(n)}};let _l;const GY=["performance","gridHelper","cameraHelper","lightHelper","defaultFog","defaultLight","defaultOrbitControls","gravity","mapPhysics"];var Vg=No(n=>{var e,t,i;_l!=null||(_l=vt(vt(vt({},Ua),Hx),Vx));for(const r of GY)Ua[r]=(e=n[r])!==null&&e!==void 0?e:_l[r];for(const r of Object.keys(Hx))Hx[r]=(t=n[r])!==null&&t!==void 0?t:_l[r];for(const r of Object.keys(Vx))Vx[r]=(i=n[r])!==null&&i!==void 0?i:_l[r]},0,"trailing");const YD=(n,e,t,i)=>{var r;if(e&&("src"in n&&(n.src=e+"/"+n.src),"texture"in n&&(n.texture=e+"/"+n.texture),"skybox"in n&&(n.skybox=e+"/"+n.skybox)),n.type==="setup"){t?n.skybox?Array.isArray(n.skybox)?eD(n.skybox):oi(n.skybox):n.texture&&oi(n.texture):Vg(n);return}if(n.type==="animation")return;const s=UY(n.type);return i&&"loadedResolvable"in s&&i.push(s.loadedResolvable),Object.assign(s,G_.exports.omit(n,VY)),n.name&&(s.outerObject3d.name=n.name),(r=n.children)===null||r===void 0||r.map(o=>YD(o,e,t,i)).forEach(o=>o&&s.append(o)),s};var WY=(n,e,t,i)=>n.map(r=>YD(r,e,t,i));const jY=new Map,XY=new Ba;var qY=n=>Ts(jY,n,()=>new Promise((e,t)=>{gd(),XY.load(n,i=>{Ws();try{yH(typeof i=="string"),e(Object.freeze(JSON.parse(i)))}catch{}},vd,()=>{Ws(),t()})}));const YY=vt({},tM);class aM extends eM{constructor(){super(...arguments),this.load=qY}applySetup(){this.setupNode&&Vg(this.setupNode)}resolveLoaded(e){var t;for(const o of e)if(o.type==="setup"){this.setupNode=o;break}const i=new cn,r=[],s=(t=this.src)===null||t===void 0?void 0:t.split("/");s==null||s.pop();for(const o of WY(e,s==null?void 0:s.join("/"),!this.visible,r))o&&i.add(o.outerObject3d);this.loadedGroup.add(i),zw(this),Promise.all(r).then(()=>{this.done||this.loadedResolvable.resolve(i)})}}aM.componentName="scene";aM.defaults=YY;const ZY=vt({},qv);let Gx;class lM extends eu{constructor(){super(),this.outerObject3d=new cn,this.initOuterObject3d(),Gx=this,this.then(()=>Gx===this&&xw(void 0))}get texture(){return this._texture}set texture(e){this._texture=e,Gx===this&&xw(e)}}lM.componentName="skybox";lM.defaults=ZY;const KY=vt({},qv);class ZD extends eu{constructor(){super(),this.outerObject3d=new cn,this.initOuterObject3d(),Bq(!0)}}ZD.componentName="sky";ZD.defaults=KY;const KD=vt({},jD);class $D extends Jv{constructor(){super(...arguments),this.setTarget=No(()=>{var e,t;let i=0;for(const r of[(e=this._target)===null||e===void 0?void 0:e.outerObject3d,...this.camera.children]){const s=r==null?void 0:r.userData.manager;!s||s.done||(++i===1?((t=this.outerObject3d.parent)===null||t===void 0||t.add(s.outerObject3d),this.target=s):s.z=-100)}i===0&&(this.target=void 0)},0,"trailing")}get target(){return this._target}set target(e){var t;e!==this._target&&(this._target=e,(t=this.targetHandle)===null||t===void 0||t.cancel(),e&&(this.queueMicrotask(()=>this.outerObject3d.quaternion.copy(e.outerObject3d.quaternion)),this.updatePolarAngle(),this.targetHandle=this.loop(()=>{this.outerObject3d.position.copy(e.outerObject3d.position),jr.setFromQuaternion(this.outerObject3d.quaternion),jr.x=0,jr.z=0,jr.y+=Math.PI,e.outerObject3d.quaternion.setFromEuler(jr)}),e.frustumCulled=!1))}append(e){super.append(e),this.setTarget()}get gyroControl(){return!!this._gyroControl}set gyroControl(e){var t;if(this._gyroControl===e)return;this._gyroControl,(t=this.gyroControlHandle)===null||t===void 0||t.cancel();const i=jr,r=Ig,s=GX,o=new Mn(-Math.sqrt(.5),0,0,Math.sqrt(.5)),a=this.object3d.getWorldQuaternion(Ig).clone(),u=0,c=f=>{var d,p,g;this.object3d.quaternion.copy(a),i.set(((d=f.beta)!==null&&d!==void 0?d:0)*rn,((p=f.alpha)!==null&&p!==void 0?p:0)*rn,-((g=f.gamma)!==null&&g!==void 0?g:0)*rn,"YXZ"),this.object3d.quaternion.multiply(r.setFromEuler(i));const v=-u*.5;s.set(0,Math.sin(v),0,Math.cos(v)),this.object3d.quaternion.multiply(s),this.object3d.quaternion.multiply(o)};window.addEventListener("deviceorientation",c),this.gyroControlHandle=this.cancellable(()=>window.removeEventListener("deviceorientation",c))}}class uM extends $D{constructor(){super(),this.innerZ=200,this.mouseControlMode="orbit",import("./enableBVHCamera.54bd42c8.js").then(e=>e.default.call(this))}}uM.componentName="thirdPersonCamera";uM.defaults=KD;class QD extends $D{constructor(){super();const e=this.camera;Ke.attach(e),this.then(()=>Ke.remove(e)),this.loop(()=>{e.position.copy(this.object3d.getWorldPosition(Zt)),e.quaternion.copy(this.object3d.getWorldQuaternion(Ig))})}get innerY(){return this.object3d.position.y*sn}set innerY(e){this._innerY=this.object3d.position.y=e*je}get target(){return this._target}set target(e){e&&this._innerY===void 0&&(this.innerY=e.height*.4),super.target=e}}QD.componentName="firstPersonCamera";QD.defaults=KD;const[$Y,QY]=zo(),[JD,JY]=zo(),[eZ,tZ]=zo(),Ji=new Set;ir(()=>Ji.size>0&&eZ());const eI=n=>(n=n.length===1?n.toLowerCase():n,n===" "&&(n="Space"),n);document.addEventListener("keydown",n=>{const e=eI(n.key);Ji.add(e),$Y(e),Ji.has("Meta")&&Ji.has("Shift")&&i0()});document.addEventListener("keyup",n=>{const e=eI(n.key);Ji.delete(e),JD(e)});const i0=()=>{if(!Ji.size)return;const n=[...Ji];Ji.clear();for(const e of n)JD(e)};window.addEventListener("blur",i0);window.addEventListener("focus",i0);document.addEventListener("visibilitychange",i0);class tI extends eu{constructor(){super(),this.outerObject3d=new cn,this.initOuterObject3d(),this.watch(tZ(()=>{if(!!this.onKeyPress)for(const e of Ji)this.onKeyPress(e,Ji)})),this.watch(JY(e=>{var t;return(t=this.onKeyUp)===null||t===void 0?void 0:t.call(this,e,Ji)})),this.watch(QY(e=>{var t;return(t=this.onKeyDown)===null||t===void 0?void 0:t.call(this,e,Ji)}))}}new tI;"getGamepads"in navigator&&ir(()=>{for(const n of navigator.getGamepads())if(!!n){for(let e=0;e<n.buttons.length;e++){const t=n.buttons[e],i=Math.round(t.value*100)+"%";t.pressed&&console.log(e,t.value,t.pressed,i)}for(let e=0;e<n.axes.length;e++){const t=Number(n.axes[e].toFixed(2));t!==0&&console.log(e,t)}}});const nZ=new Map,bd=(n,e)=>{for(const t of e)nZ.set(t,n);return e};bd("image",["jpg","jpeg","gif","png","svg","tiff","webp","hdr"]);bd("audio",["m4a","mp3","wav","wma","ogg","flax","flac","aac"]);bd("plainText",["ls","js","ts","jsx","tsx","py","txt","md","json","yaml","c","cpp","h","hpp","css","scss","sass","html"]);bd("model",["gltf","glb","fbx"]);bd("scene",["l3d"]);/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var ZC={},Bw=function(n){return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},nI=function(n){return new Worker(n)};try{URL.revokeObjectURL(Bw(""))}catch{Bw=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},nI=function(e){return new Worker(e,{type:"module"})}}var iZ=function(n,e,t,i,r){var s=nI(ZC[e]||(ZC[e]=Bw(n)));return s.onerror=function(o){return r(o.error,null)},s.onmessage=function(o){return r(null,o.data)},s.postMessage(t,i),s},Pt=Uint8Array,li=Uint16Array,Oo=Uint32Array,eh=new Pt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),th=new Pt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),td=new Pt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),iI=function(n,e){for(var t=new li(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new Oo(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},rI=iI(eh,2),cM=rI[0],Hg=rI[1];cM[28]=258,Hg[258]=28;var sI=iI(th,0),oI=sI[0],Uw=sI[1],nd=new li(32768);for(var gn=0;gn<32768;++gn){var ca=(gn&43690)>>>1|(gn&21845)<<1;ca=(ca&52428)>>>2|(ca&13107)<<2,ca=(ca&61680)>>>4|(ca&3855)<<4,nd[gn]=((ca&65280)>>>8|(ca&255)<<8)>>>1}var Qr=function(n,e,t){for(var i=n.length,r=0,s=new li(e);r<i;++r)++s[n[r]-1];var o=new li(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new li(1<<e);var u=15-e;for(r=0;r<i;++r)if(n[r])for(var c=r<<4|n[r],f=e-n[r],d=o[n[r]-1]++<<f,p=d|(1<<f)-1;d<=p;++d)a[nd[d]>>>u]=c}else for(a=new li(i),r=0;r<i;++r)n[r]&&(a[r]=nd[o[n[r]-1]++]>>>15-n[r]);return a},Fo=new Pt(288);for(var gn=0;gn<144;++gn)Fo[gn]=8;for(var gn=144;gn<256;++gn)Fo[gn]=9;for(var gn=256;gn<280;++gn)Fo[gn]=7;for(var gn=280;gn<288;++gn)Fo[gn]=8;var Bc=new Pt(32);for(var gn=0;gn<32;++gn)Bc[gn]=5;var aI=Qr(Fo,9,0),lI=Qr(Fo,9,1),uI=Qr(Bc,5,0),cI=Qr(Bc,5,1),jm=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Hr=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},Xm=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Td=function(n){return(n/8|0)+(n&7&&1)},Jr=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof li?li:n instanceof Oo?Oo:Pt)(t-e);return i.set(n.subarray(e,t)),i},Ed=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new Pt(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new Pt(i*3));var o=function(oe){var rt=e.length;if(oe>rt){var Xe=new Pt(Math.max(rt*2,oe));Xe.set(e),e=Xe}},a=t.f||0,u=t.p||0,c=t.b||0,f=t.l,d=t.d,p=t.m,g=t.n,v=i*8;do{if(!f){t.f=a=Hr(n,u,1);var y=Hr(n,u+1,3);if(u+=3,y)if(y==1)f=lI,d=cI,p=9,g=5;else if(y==2){var _=Hr(n,u,31)+257,w=Hr(n,u+10,15)+4,T=_+Hr(n,u+5,31)+1;u+=14;for(var E=new Pt(T),R=new Pt(19),P=0;P<w;++P)R[td[P]]=Hr(n,u+P*3,7);u+=w*3;for(var V=jm(R),F=(1<<V)-1,C=Qr(R,V,1),P=0;P<T;){var N=C[Hr(n,u,F)];u+=N&15;var x=N>>>4;if(x<16)E[P++]=x;else{var Q=0,G=0;for(x==16?(G=3+Hr(n,u,3),u+=2,Q=E[P-1]):x==17?(G=3+Hr(n,u,7),u+=3):x==18&&(G=11+Hr(n,u,127),u+=7);G--;)E[P++]=Q}}var Y=E.subarray(0,_),X=E.subarray(_);p=jm(Y),g=jm(X),f=Qr(Y,p,1),d=Qr(X,g,1)}else throw"invalid block type";else{var x=Td(u)+4,M=n[x-4]|n[x-3]<<8,S=x+M;if(S>i){if(s)throw"unexpected EOF";break}r&&o(c+M),e.set(n.subarray(x,S),c),t.b=c+=M,t.p=u=S*8;continue}if(u>v){if(s)throw"unexpected EOF";break}}r&&o(c+131072);for(var K=(1<<p)-1,B=(1<<g)-1,Z=u;;Z=u){var Q=f[Xm(n,u)&K],ee=Q>>>4;if(u+=Q&15,u>v){if(s)throw"unexpected EOF";break}if(!Q)throw"invalid length/literal";if(ee<256)e[c++]=ee;else if(ee==256){Z=u,f=null;break}else{var se=ee-254;if(ee>264){var P=ee-257,ae=eh[P];se=Hr(n,u,(1<<ae)-1)+cM[P],u+=ae}var Le=d[Xm(n,u)&B],ze=Le>>>4;if(!Le)throw"invalid distance";u+=Le&15;var X=oI[ze];if(ze>3){var ae=th[ze];X+=Xm(n,u)&(1<<ae)-1,u+=ae}if(u>v){if(s)throw"unexpected EOF";break}r&&o(c+131072);for(var Pe=c+se;c<Pe;c+=4)e[c]=e[c-X],e[c+1]=e[c+1-X],e[c+2]=e[c+2-X],e[c+3]=e[c+3-X];c=Pe}}t.l=f,t.p=Z,t.b=c,f&&(a=1,t.m=p,t.d=d,t.n=g)}while(!a);return c==e.length?e:Jr(e,0,c)},Ls=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>>8},Hu=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>>8,n[i+2]|=t>>>16},qm=function(n,e){for(var t=[],i=0;i<n.length;++i)n[i]&&t.push({s:i,f:n[i]});var r=t.length,s=t.slice();if(!r)return[So,0];if(r==1){var o=new Pt(t[0].s+1);return o[t[0].s]=1,[o,1]}t.sort(function(T,E){return T.f-E.f}),t.push({s:-1,f:25001});var a=t[0],u=t[1],c=0,f=1,d=2;for(t[0]={s:-1,f:a.f+u.f,l:a,r:u};f!=r-1;)a=t[t[c].f<t[d].f?c++:d++],u=t[c!=f&&t[c].f<t[d].f?c++:d++],t[f++]={s:-1,f:a.f+u.f,l:a,r:u};for(var p=s[0].s,i=1;i<r;++i)s[i].s>p&&(p=s[i].s);var g=new li(p+1),v=Gg(t[f-1],g,0);if(v>e){var i=0,y=0,x=v-e,M=1<<x;for(s.sort(function(E,R){return g[R.s]-g[E.s]||E.f-R.f});i<r;++i){var S=s[i].s;if(g[S]>e)y+=M-(1<<v-g[S]),g[S]=e;else break}for(y>>>=x;y>0;){var _=s[i].s;g[_]<e?y-=1<<e-g[_]++-1:++i}for(;i>=0&&y;--i){var w=s[i].s;g[w]==e&&(--g[w],++y)}v=e}return[new Pt(g),v]},Gg=function(n,e,t){return n.s==-1?Math.max(Gg(n.l,e,t+1),Gg(n.r,e,t+1)):e[n.s]=t},Vw=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new li(++e),i=0,r=n[0],s=1,o=function(u){t[i++]=u},a=1;a<=e;++a)if(n[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=n[a]}return[t.subarray(0,i),e]},Gu=function(n,e){for(var t=0,i=0;i<e.length;++i)t+=n[i]*e[i];return t},_f=function(n,e,t){var i=t.length,r=Td(e+2);n[r]=i&255,n[r+1]=i>>>8,n[r+2]=n[r]^255,n[r+3]=n[r+1]^255;for(var s=0;s<i;++s)n[r+s+4]=t[s];return(r+4+i)*8},Hw=function(n,e,t,i,r,s,o,a,u,c,f){Ls(e,f++,t),++r[256];for(var d=qm(r,15),p=d[0],g=d[1],v=qm(s,15),y=v[0],x=v[1],M=Vw(p),S=M[0],_=M[1],w=Vw(y),T=w[0],E=w[1],R=new li(19),P=0;P<S.length;++P)R[S[P]&31]++;for(var P=0;P<T.length;++P)R[T[P]&31]++;for(var V=qm(R,7),F=V[0],C=V[1],N=19;N>4&&!F[td[N-1]];--N);var Q=c+5<<3,G=Gu(r,Fo)+Gu(s,Bc)+o,Y=Gu(r,p)+Gu(s,y)+o+14+3*N+Gu(R,F)+(2*R[16]+3*R[17]+7*R[18]);if(Q<=G&&Q<=Y)return _f(e,f,n.subarray(u,u+c));var X,K,B,Z;if(Ls(e,f,1+(Y<G)),f+=2,Y<G){X=Qr(p,g,0),K=p,B=Qr(y,x,0),Z=y;var ee=Qr(F,C,0);Ls(e,f,_-257),Ls(e,f+5,E-1),Ls(e,f+10,N-4),f+=14;for(var P=0;P<N;++P)Ls(e,f+3*P,F[td[P]]);f+=3*N;for(var se=[S,T],ae=0;ae<2;++ae)for(var Le=se[ae],P=0;P<Le.length;++P){var ze=Le[P]&31;Ls(e,f,ee[ze]),f+=F[ze],ze>15&&(Ls(e,f,Le[P]>>>5&127),f+=Le[P]>>>12)}}else X=aI,K=Fo,B=uI,Z=Bc;for(var P=0;P<a;++P)if(i[P]>255){var ze=i[P]>>>18&31;Hu(e,f,X[ze+257]),f+=K[ze+257],ze>7&&(Ls(e,f,i[P]>>>23&31),f+=eh[ze]);var Pe=i[P]&31;Hu(e,f,B[Pe]),f+=Z[Pe],Pe>3&&(Hu(e,f,i[P]>>>5&8191),f+=th[Pe])}else Hu(e,f,X[i[P]]),f+=K[i[P]];return Hu(e,f,X[256]),f+K[256]},hI=new Oo([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),So=new Pt(0),fI=function(n,e,t,i,r,s){var o=n.length,a=new Pt(i+o+5*(1+Math.ceil(o/7e3))+r),u=a.subarray(i,a.length-r),c=0;if(!e||o<8)for(var f=0;f<=o;f+=65535){var d=f+65535;d<o?c=_f(u,c,n.subarray(f,d)):(u[f]=s,c=_f(u,c,n.subarray(f,o)))}else{for(var p=hI[e-1],g=p>>>13,v=p&8191,y=(1<<t)-1,x=new li(32768),M=new li(y+1),S=Math.ceil(t/3),_=2*S,w=function(ye){return(n[ye]^n[ye+1]<<S^n[ye+2]<<_)&y},T=new Oo(25e3),E=new li(288),R=new li(32),P=0,V=0,f=0,F=0,C=0,N=0;f<o;++f){var Q=w(f),G=f&32767,Y=M[Q];if(x[G]=Y,M[Q]=G,C<=f){var X=o-f;if((P>7e3||F>24576)&&X>423){c=Hw(n,u,0,T,E,R,V,F,N,f-N,c),F=P=V=0,N=f;for(var K=0;K<286;++K)E[K]=0;for(var K=0;K<30;++K)R[K]=0}var B=2,Z=0,ee=v,se=G-Y&32767;if(X>2&&Q==w(f-se))for(var ae=Math.min(g,X)-1,Le=Math.min(32767,f),ze=Math.min(258,X);se<=Le&&--ee&&G!=Y;){if(n[f+B]==n[f+B-se]){for(var Pe=0;Pe<ze&&n[f+Pe]==n[f+Pe-se];++Pe);if(Pe>B){if(B=Pe,Z=se,Pe>ae)break;for(var oe=Math.min(se,Pe-2),rt=0,K=0;K<oe;++K){var Xe=f-se+K+32768&32767,Ze=x[Xe],Se=Xe-Ze+32768&32767;Se>rt&&(rt=Se,Y=Xe)}}}G=Y,Y=x[G],se+=G-Y+32768&32767}if(Z){T[F++]=268435456|Hg[B]<<18|Uw[Z];var Qe=Hg[B]&31,ue=Uw[Z]&31;V+=eh[Qe]+th[ue],++E[257+Qe],++R[ue],C=f+B,++P}else T[F++]=n[f],++E[n[f]]}}c=Hw(n,u,s,T,E,R,V,F,N,f-N,c),!s&&c&7&&(c=_f(u,c+1,So))}return Jr(a,0,i+Td(c)+r)},dI=function(){for(var n=new Oo(256),e=0;e<256;++e){for(var t=e,i=9;--i;)t=(t&1&&3988292384)^t>>>1;n[e]=t}return n}(),nh=function(){var n=-1;return{p:function(e){for(var t=n,i=0;i<e.length;++i)t=dI[t&255^e[i]]^t>>>8;n=t},d:function(){return~n}}},hM=function(){var n=1,e=0;return{p:function(t){for(var i=n,r=e,s=t.length,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)r+=i+=t[o];i=(i&65535)+15*(i>>16),r=(r&65535)+15*(r>>16)}n=i,e=r},d:function(){return n%=65521,e%=65521,(n&255)<<24|n>>>8<<16|(e&255)<<8|e>>>8}}},tu=function(n,e,t,i,r){return fI(n,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+e.mem,t,i,!r)},Ad=function(n,e){var t={};for(var i in n)t[i]=n[i];for(var i in e)t[i]=e[i];return t},KC=function(n,e,t){for(var i=n(),r=n.toString(),s=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/ /g,"").split(","),o=0;o<i.length;++o){var a=i[o],u=s[o];if(typeof a=="function"){e+=";"+u+"=";var c=a.toString();if(a.prototype)if(c.indexOf("[native code]")!=-1){var f=c.indexOf(" ",8)+1;e+=c.slice(f,c.indexOf("(",f))}else{e+=c;for(var d in a.prototype)e+=";"+u+".prototype."+d+"="+a.prototype[d].toString()}else e+=c}else t[u]=a}return[e,t]},Rm=[],rZ=function(n){var e=[];for(var t in n)(n[t]instanceof Pt||n[t]instanceof li||n[t]instanceof Oo)&&e.push((n[t]=new n[t].constructor(n[t])).buffer);return e},pI=function(n,e,t,i){var r;if(!Rm[t]){for(var s="",o={},a=n.length-1,u=0;u<a;++u)r=KC(n[u],s,o),s=r[0],o=r[1];Rm[t]=KC(n[a],s,o)}var c=Ad({},Rm[t][1]);return iZ(Rm[t][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",t,c,rZ(c),i)},ih=function(){return[Pt,li,Oo,eh,th,td,cM,oI,lI,cI,nd,Qr,jm,Hr,Xm,Td,Jr,Ed,ah,Qa,fM]},rh=function(){return[Pt,li,Oo,eh,th,td,Hg,Uw,aI,Fo,uI,Bc,nd,hI,So,Qr,Ls,Hu,qm,Gg,Vw,Gu,_f,Hw,Td,Jr,fI,tu,Cd,Qa]},mI=function(){return[dM,mM,$t,nh,dI]},gI=function(){return[pM,xI]},vI=function(){return[gM,$t,hM]},yI=function(){return[_I]},Qa=function(n){return postMessage(n,[n.buffer])},fM=function(n){return n&&n.size&&new Pt(n.size)},sh=function(n,e,t,i,r,s){var o=pI(t,i,r,function(a,u){o.terminate(),s(a,u)});return o.postMessage([n,e],e.consume?[n.buffer]:[]),function(){o.terminate()}},ts=function(n){return n.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(e){return n.push(e.data[0],e.data[1])}},oh=function(n,e,t,i,r){var s,o=pI(n,i,r,function(a,u){a?(o.terminate(),e.ondata.call(e,a)):(u[1]&&o.terminate(),e.ondata.call(e,a,u[0],u[1]))});o.postMessage(t),e.push=function(a,u){if(s)throw"stream finished";if(!e.ondata)throw"no stream handler";o.postMessage([a,s=u],[a.buffer])},e.terminate=function(){o.terminate()}},ki=function(n,e){return n[e]|n[e+1]<<8},Xn=function(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0},Wx=function(n,e){return Xn(n,e)+Xn(n,e+4)*4294967296},$t=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},dM=function(n,e){var t=e.filename;if(n[0]=31,n[1]=139,n[2]=8,n[8]=e.level<2?4:e.level==9?2:0,n[9]=3,e.mtime!=0&&$t(n,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){n[3]=8;for(var i=0;i<=t.length;++i)n[i+10]=t.charCodeAt(i)}},pM=function(n){if(n[0]!=31||n[1]!=139||n[2]!=8)throw"invalid gzip data";var e=n[3],t=10;e&4&&(t+=n[10]|(n[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!n[t++]);return t+(e&2)},xI=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},mM=function(n){return 10+(n.filename&&n.filename.length+1||0)},gM=function(n,e){var t=e.level,i=t==0?0:t<6?1:t==9?3:2;n[0]=120,n[1]=i<<6|(i?32-2*i:1)},_I=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function vM(n,e){return!e&&typeof n=="function"&&(e=n,n={}),this.ondata=e,n}var js=function(){function n(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return n.prototype.p=function(e,t){this.ondata(tu(e,this.o,0,0,!t),t)},n.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},n}(),wI=function(){function n(e,t){oh([rh,function(){return[ts,js]}],this,vM.call(this,e,t),function(i){var r=new js(i.data);onmessage=ts(r)},6)}return n}();function SI(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return sh(n,e,[rh],function(i){return Qa(Cd(i.data[0],i.data[1]))},0,t)}function Cd(n,e){return tu(n,e||{},0,0)}var rr=function(){function n(e){this.s={},this.p=new Pt(0),this.ondata=e}return n.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,i=new Pt(t+e.length);i.set(this.p),i.set(e,t),this.p=i},n.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,i=Ed(this.p,this.o,this.s);this.ondata(Jr(i,t,this.s.b),this.d),this.o=Jr(i,this.s.b-32768),this.s.b=this.o.length,this.p=Jr(this.p,this.s.p/8|0),this.s.p&=7},n.prototype.push=function(e,t){this.e(e),this.c(t)},n}(),yM=function(){function n(e){this.ondata=e,oh([ih,function(){return[ts,rr]}],this,0,function(){var t=new rr;onmessage=ts(t)},7)}return n}();function xM(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return sh(n,e,[ih],function(i){return Qa(ah(i.data[0],fM(i.data[1])))},1,t)}function ah(n,e){return Ed(n,e)}var Wg=function(){function n(e,t){this.c=nh(),this.l=0,this.v=1,js.call(this,e,t)}return n.prototype.push=function(e,t){js.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var i=tu(e,this.o,this.v&&mM(this.o),t&&8,!t);this.v&&(dM(i,this.o),this.v=0),t&&($t(i,i.length-8,this.c.d()),$t(i,i.length-4,this.l)),this.ondata(i,t)},n}(),$C=function(){function n(e,t){oh([rh,mI,function(){return[ts,js,Wg]}],this,vM.call(this,e,t),function(i){var r=new Wg(i.data);onmessage=ts(r)},8)}return n}();function QC(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return sh(n,e,[rh,mI,function(){return[jg]}],function(i){return Qa(jg(i.data[0],i.data[1]))},2,t)}function jg(n,e){e||(e={});var t=nh(),i=n.length;t.p(n);var r=tu(n,e,mM(e),8),s=r.length;return dM(r,e),$t(r,s-8,t.d()),$t(r,s-4,i),r}var Xg=function(){function n(e){this.v=1,rr.call(this,e)}return n.prototype.push=function(e,t){if(rr.prototype.e.call(this,e),this.v){var i=this.p.length>3?pM(this.p):4;if(i>=this.p.length&&!t)return;this.p=this.p.subarray(i),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}rr.prototype.c.call(this,t)},n}(),MI=function(){function n(e){this.ondata=e,oh([ih,gI,function(){return[ts,rr,Xg]}],this,0,function(){var t=new Xg;onmessage=ts(t)},9)}return n}();function bI(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return sh(n,e,[ih,gI,function(){return[qg]}],function(i){return Qa(qg(i.data[0]))},3,t)}function qg(n,e){return Ed(n.subarray(pM(n),-8),e||new Pt(xI(n)))}var Gw=function(){function n(e,t){this.c=hM(),this.v=1,js.call(this,e,t)}return n.prototype.push=function(e,t){js.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e);var i=tu(e,this.o,this.v&&2,t&&4,!t);this.v&&(gM(i,this.o),this.v=0),t&&$t(i,i.length-4,this.c.d()),this.ondata(i,t)},n}(),sZ=function(){function n(e,t){oh([rh,vI,function(){return[ts,js,Gw]}],this,vM.call(this,e,t),function(i){var r=new Gw(i.data);onmessage=ts(r)},10)}return n}();function oZ(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return sh(n,e,[rh,vI,function(){return[Ww]}],function(i){return Qa(Ww(i.data[0],i.data[1]))},4,t)}function Ww(n,e){e||(e={});var t=hM();t.p(n);var i=tu(n,e,2,4);return gM(i,e),$t(i,i.length-4,t.d()),i}var Yg=function(){function n(e){this.v=1,rr.call(this,e)}return n.prototype.push=function(e,t){if(rr.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}rr.prototype.c.call(this,t)},n}(),TI=function(){function n(e){this.ondata=e,oh([ih,yI,function(){return[ts,rr,Yg]}],this,0,function(){var t=new Yg;onmessage=ts(t)},11)}return n}();function EI(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return sh(n,e,[ih,yI,function(){return[id]}],function(i){return Qa(id(i.data[0],fM(i.data[1])))},5,t)}function id(n,e){return Ed((_I(n),n.subarray(2,-4)),e)}var AI=function(){function n(e){this.G=Xg,this.I=rr,this.Z=Yg,this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var i=new Pt(this.p.length+e.length);i.set(this.p),i.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var r=this,s=function(){r.ondata.apply(r,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(s):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(s):new this.Z(s),this.s.push(this.p,t),this.p=null}}},n}(),aZ=function(){function n(e){this.G=MI,this.I=yM,this.Z=TI,this.ondata=e}return n.prototype.push=function(e,t){AI.prototype.push.call(this,e,t)},n}();function lZ(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return n[0]==31&&n[1]==139&&n[2]==8?bI(n,e,t):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?xM(n,e,t):EI(n,e,t)}function uZ(n,e){return n[0]==31&&n[1]==139&&n[2]==8?qg(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?ah(n,e):id(n,e)}var _M=function(n,e,t,i){for(var r in n){var s=n[r],o=e+r;s instanceof Pt?t[o]=[s,i]:Array.isArray(s)?t[o]=[s[0],Ad(i,s[1])]:_M(s,o+"/",t,i)}},JC=typeof TextEncoder!="undefined"&&new TextEncoder,jw=typeof TextDecoder!="undefined"&&new TextDecoder,CI=0;try{jw.decode(So,{stream:!0}),CI=1}catch{}var RI=function(n){for(var e="",t=0;;){var i=n[t++],r=(i>127)+(i>223)+(i>239);if(t+r>n.length)return[e,Jr(n,t-1)];r?r==3?(i=((i&15)<<18|(n[t++]&63)<<12|(n[t++]&63)<<6|n[t++]&63)-65536,e+=String.fromCharCode(55296|i>>10,56320|i&1023)):r&1?e+=String.fromCharCode((i&31)<<6|n[t++]&63):e+=String.fromCharCode((i&15)<<12|(n[t++]&63)<<6|n[t++]&63):e+=String.fromCharCode(i)}},cZ=function(){function n(e){this.ondata=e,CI?this.t=new TextDecoder:this.p=So}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var i=new Pt(this.p.length+e.length);i.set(this.p),i.set(e,this.p.length);var r=RI(i),s=r[0],o=r[1];if(t){if(o.length)throw"invalid utf-8 data";this.p=null}else this.p=o;this.ondata(s,t)},n}(),hZ=function(){function n(e){this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(Ha(e),this.d=t||!1)},n}();function Ha(n,e){if(e){for(var t=new Pt(n.length),i=0;i<n.length;++i)t[i]=n.charCodeAt(i);return t}if(JC)return JC.encode(n);for(var r=n.length,s=new Pt(n.length+(n.length>>1)),o=0,a=function(f){s[o++]=f},i=0;i<r;++i){if(o+5>s.length){var u=new Pt(o+8+(r-i<<1));u.set(s),s=u}var c=n.charCodeAt(i);c<128||e?a(c):c<2048?(a(192|c>>6),a(128|c&63)):c>55295&&c<57344?(c=65536+(c&1023<<10)|n.charCodeAt(++i)&1023,a(240|c>>18),a(128|c>>12&63),a(128|c>>6&63),a(128|c&63)):(a(224|c>>12),a(128|c>>6&63),a(128|c&63))}return Jr(s,0,o)}function wM(n,e){if(e){for(var t="",i=0;i<n.length;i+=16384)t+=String.fromCharCode.apply(null,n.subarray(i,i+16384));return t}else{if(jw)return jw.decode(n);var r=RI(n),s=r[0],o=r[1];if(o.length)throw"invalid utf-8 data";return s}}var PI=function(n){return n==1?3:n<6?2:n==9?1:0},LI=function(n,e){return e+30+ki(n,e+26)+ki(n,e+28)},DI=function(n,e,t){var i=ki(n,e+28),r=wM(n.subarray(e+46,e+46+i),!(ki(n,e+8)&2048)),s=e+46+i,o=Xn(n,e+20),a=t&&o==4294967295?II(n,s):[o,Xn(n,e+24),Xn(n,e+42)],u=a[0],c=a[1],f=a[2];return[ki(n,e+10),u,c,r,s+ki(n,e+30)+ki(n,e+32),f]},II=function(n,e){for(;ki(n,e)!=1;e+=4+ki(n,e+2));return[Wx(n,e+12),Wx(n,e+4),Wx(n,e+20)]},Pa=function(n){var e=0;if(n)for(var t in n){var i=n[t].length;if(i>65535)throw"extra field too long";e+=i+4}return e},Uc=function(n,e,t,i,r,s,o,a){var u=i.length,c=t.extra,f=a&&a.length,d=Pa(c);$t(n,e,o!=null?33639248:67324752),e+=4,o!=null&&(n[e++]=20,n[e++]=t.os),n[e]=20,e+=2,n[e++]=t.flag<<1|(s==null&&8),n[e++]=r&&8,n[e++]=t.compression&255,n[e++]=t.compression>>8;var p=new Date(t.mtime==null?Date.now():t.mtime),g=p.getFullYear()-1980;if(g<0||g>119)throw"date not in range 1980-2099";if($t(n,e,g<<25|p.getMonth()+1<<21|p.getDate()<<16|p.getHours()<<11|p.getMinutes()<<5|p.getSeconds()>>>1),e+=4,s!=null&&($t(n,e,t.crc),$t(n,e+4,s),$t(n,e+8,t.size)),$t(n,e+12,u),$t(n,e+14,d),e+=16,o!=null&&($t(n,e,f),$t(n,e+6,t.attrs),$t(n,e+10,o),e+=14),n.set(i,e),e+=u,d)for(var v in c){var y=c[v],x=y.length;$t(n,e,+v),$t(n,e+2,x),n.set(y,e+4),e+=4+x}return f&&(n.set(a,e),e+=f),e},SM=function(n,e,t,i,r){$t(n,e,101010256),$t(n,e+8,t),$t(n,e+10,t),$t(n,e+12,i),$t(n,e+16,r)},rd=function(){function n(e){this.filename=e,this.c=nh(),this.size=0,this.compression=0}return n.prototype.process=function(e,t){this.ondata(null,e,t)},n.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},n}(),fZ=function(){function n(e,t){var i=this;t||(t={}),rd.call(this,e),this.d=new js(t,function(r,s){i.ondata(null,r,s)}),this.compression=8,this.flag=PI(t.level)}return n.prototype.process=function(e,t){try{this.d.push(e,t)}catch(i){this.ondata(i,null,t)}},n.prototype.push=function(e,t){rd.prototype.push.call(this,e,t)},n}(),dZ=function(){function n(e,t){var i=this;t||(t={}),rd.call(this,e),this.d=new wI(t,function(r,s,o){i.ondata(r,s,o)}),this.compression=8,this.flag=PI(t.level),this.terminate=this.d.terminate}return n.prototype.process=function(e,t){this.d.push(e,t)},n.prototype.push=function(e,t){rd.prototype.push.call(this,e,t)},n}(),pZ=function(){function n(e){this.ondata=e,this.u=[],this.d=1}return n.prototype.add=function(e){var t=this;if(this.d&2)throw"stream finished";var i=Ha(e.filename),r=i.length,s=e.comment,o=s&&Ha(s),a=r!=e.filename.length||o&&s.length!=o.length,u=r+Pa(e.extra)+30;if(r>65535)throw"filename too long";var c=new Pt(u);Uc(c,0,e,i,a);var f=[c],d=function(){for(var x=0,M=f;x<M.length;x++){var S=M[x];t.ondata(null,S,!1)}f=[]},p=this.d;this.d=0;var g=this.u.length,v=Ad(e,{f:i,u:a,o,t:function(){e.terminate&&e.terminate()},r:function(){if(d(),p){var x=t.u[g+1];x?x.r():t.d=1}p=1}}),y=0;e.ondata=function(x,M,S){if(x)t.ondata(x,M,S),t.terminate();else if(y+=M.length,f.push(M),S){var _=new Pt(16);$t(_,0,134695760),$t(_,4,e.crc),$t(_,8,y),$t(_,12,e.size),f.push(_),v.c=y,v.b=u+y+16,v.crc=e.crc,v.size=e.size,p&&v.r(),p=1}else p&&d()},this.u.push(v)},n.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){!(e.d&1)||(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},n.prototype.e=function(){for(var e=0,t=0,i=0,r=0,s=this.u;r<s.length;r++){var o=s[r];i+=46+o.f.length+Pa(o.extra)+(o.o?o.o.length:0)}for(var a=new Pt(i+22),u=0,c=this.u;u<c.length;u++){var o=c[u];Uc(a,e,o,o.f,o.u,o.c,t,o.o),e+=46+o.f.length+Pa(o.extra)+(o.o?o.o.length:0),t+=o.b}SM(a,e,this.u.length,i,t),this.ondata(null,a,!0),this.d=2},n.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var i=t[e];i.t()}this.d=2},n}();function mZ(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";var i={};_M(n,"",i,e);var r=Object.keys(i),s=r.length,o=0,a=0,u=s,c=new Array(s),f=[],d=function(){for(var y=0;y<f.length;++y)f[y]()},p=function(){var y=new Pt(a+22),x=o,M=a-o;a=0;for(var S=0;S<u;++S){var _=c[S];try{var w=_.c.length;Uc(y,a,_,_.f,_.u,w);var T=30+_.f.length+Pa(_.extra),E=a+T;y.set(_.c,E),Uc(y,o,_,_.f,_.u,w,a,_.m),o+=16+T+(_.m?_.m.length:0),a=E+w}catch(R){return t(R,null)}}SM(y,o,c.length,M,x),t(null,y)};s||p();for(var g=function(y){var x=r[y],M=i[x],S=M[0],_=M[1],w=nh(),T=S.length;w.p(S);var E=Ha(x),R=E.length,P=_.comment,V=P&&Ha(P),F=V&&V.length,C=Pa(_.extra),N=_.level==0?0:8,Q=function(G,Y){if(G)d(),t(G,null);else{var X=Y.length;c[y]=Ad(_,{size:T,crc:w.d(),c:Y,f:E,m:V,u:R!=x.length||V&&P.length!=F,compression:N}),o+=30+R+C+X,a+=76+2*(R+C)+(F||0)+X,--s||p()}};if(R>65535&&Q("filename too long",null),!N)Q(null,S);else if(T<16e4)try{Q(null,Cd(S,_))}catch(G){Q(G,null)}else f.push(SI(S,_,Q))},v=0;v<u;++v)g(v);return d}function gZ(n,e){e||(e={});var t={},i=[];_M(n,"",t,e);var r=0,s=0;for(var o in t){var a=t[o],u=a[0],c=a[1],f=c.level==0?0:8,d=Ha(o),p=d.length,g=c.comment,v=g&&Ha(g),y=v&&v.length,x=Pa(c.extra);if(p>65535)throw"filename too long";var M=f?Cd(u,c):u,S=M.length,_=nh();_.p(u),i.push(Ad(c,{size:u.length,crc:_.d(),c:M,f:d,m:v,u:p!=o.length||v&&g.length!=y,o:r,compression:f})),r+=30+p+x+S,s+=76+2*(p+x)+(y||0)+S}for(var w=new Pt(s+22),T=r,E=s-r,R=0;R<i.length;++R){var d=i[R];Uc(w,d.o,d,d.f,d.u,d.c.length);var P=30+d.f.length+Pa(d.extra);w.set(d.c,d.o+P),Uc(w,r,d,d.f,d.u,d.c.length,d.o,d.m),r+=16+P+(d.m?d.m.length:0)}return SM(w,r,i.length,E,T),w}var OI=function(){function n(){}return n.prototype.push=function(e,t){this.ondata(null,e,t)},n.compression=0,n}(),vZ=function(){function n(){var e=this;this.i=new rr(function(t,i){e.ondata(null,t,i)})}return n.prototype.push=function(e,t){try{this.i.push(e,t)}catch(i){this.ondata(i,e,t)}},n.compression=8,n}(),yZ=function(){function n(e,t){var i=this;t<32e4?this.i=new rr(function(r,s){i.ondata(null,r,s)}):(this.i=new yM(function(r,s,o){i.ondata(r,s,o)}),this.terminate=this.i.terminate)}return n.prototype.push=function(e,t){this.i.terminate&&(e=Jr(e,0)),this.i.push(e,t)},n.compression=8,n}(),xZ=function(){function n(e){this.onfile=e,this.k=[],this.o={0:OI},this.p=So}return n.prototype.push=function(e,t){var i=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var r=Math.min(this.c,e.length),s=e.subarray(0,r);if(this.c-=r,this.d?this.d.push(s,!this.c):this.k[0].push(s),e=e.subarray(r),e.length)return this.push(e,t)}else{var o=0,a=0,u=void 0,c=void 0;this.p.length?e.length?(c=new Pt(this.p.length+e.length),c.set(this.p),c.set(e,this.p.length)):c=this.p:c=e;for(var f=c.length,d=this.c,p=d&&this.d,g=function(){var M,S=Xn(c,a);if(S==67324752){o=1,u=a,v.d=null,v.c=0;var _=ki(c,a+6),w=ki(c,a+8),T=_&2048,E=_&8,R=ki(c,a+26),P=ki(c,a+28);if(f>a+30+R+P){var V=[];v.k.unshift(V),o=2;var F=Xn(c,a+18),C=Xn(c,a+22),N=wM(c.subarray(a+30,a+=30+R),!T);F==4294967295?(M=E?[-2]:II(c,a),F=M[0],C=M[1]):E&&(F=-1),a+=P,v.c=F;var Q,G={name:N,compression:w,start:function(){if(!G.ondata)throw"no callback";if(!F)G.ondata(null,So,!0);else{var Y=i.o[w];if(!Y)throw"unknown compression type "+w;Q=F<0?new Y(N):new Y(N,F,C),Q.ondata=function(Z,ee,se){G.ondata(Z,ee,se)};for(var X=0,K=V;X<K.length;X++){var B=K[X];Q.push(B,!1)}i.k[0]==V&&i.c?i.d=Q:Q.push(So,!0)}},terminate:function(){Q&&Q.terminate&&Q.terminate()}};F>=0&&(G.size=F,G.originalSize=C),v.onfile(G)}return"break"}else if(d){if(S==134695760)return u=a+=12+(d==-2&&8),o=3,v.c=0,"break";if(S==33639248)return u=a-=4,o=3,v.c=0,"break"}},v=this;a<f-4;++a){var y=g();if(y==="break")break}if(this.p=So,d<0){var x=o?c.subarray(0,u-12-(d==-2&&8)-(Xn(c,u-16)==134695760&&4)):c.subarray(0,a);p?p.push(x,!!o):this.k[+(o==2)].push(x)}if(o&2)return this.push(c.subarray(a),t);this.p=c.subarray(a)}if(t){if(this.c)throw"invalid zip file";this.p=null}},n.prototype.register=function(e){this.o[e.compression]=e},n}();function _Z(n,e){if(typeof e!="function")throw"no callback";for(var t=[],i=function(){for(var p=0;p<t.length;++p)t[p]()},r={},s=n.length-22;Xn(n,s)!=101010256;--s)if(!s||n.length-s>65558){e("invalid zip file",null);return}var o=ki(n,s+8);o||e(null,{});var a=o,u=Xn(n,s+16),c=u==4294967295;if(c){if(s=Xn(n,s-12),Xn(n,s)!=101075792){e("invalid zip file",null);return}a=o=Xn(n,s+32),u=Xn(n,s+48)}for(var f=function(p){var g=DI(n,u,c),v=g[0],y=g[1],x=g[2],M=g[3],S=g[4],_=g[5],w=LI(n,_);u=S;var T=function(R,P){R?(i(),e(R,null)):(r[M]=P,--o||e(null,r))};if(!v)T(null,Jr(n,w,w+y));else if(v==8){var E=n.subarray(w,w+y);if(y<32e4)try{T(null,ah(E,new Pt(x)))}catch(R){T(R,null)}else t.push(xM(E,{size:x},T))}else T("unknown compression type "+v,null)},d=0;d<a;++d)f();return i}function wZ(n){for(var e={},t=n.length-22;Xn(n,t)!=101010256;--t)if(!t||n.length-t>65558)throw"invalid zip file";var i=ki(n,t+8);if(!i)return{};var r=Xn(n,t+16),s=r==4294967295;if(s){if(t=Xn(n,t-12),Xn(n,t)!=101075792)throw"invalid zip file";i=Xn(n,t+32),r=Xn(n,t+48)}for(var o=0;o<i;++o){var a=DI(n,r,s),u=a[0],c=a[1],f=a[2],d=a[3],p=a[4],g=a[5],v=LI(n,g);if(r=p,!u)e[d]=Jr(n,v,v+c);else if(u==8)e[d]=ah(n.subarray(v,v+c),new Pt(f));else throw"unknown compression type "+u}return e}var SZ=Object.freeze(Object.defineProperty({__proto__:null,Deflate:js,AsyncDeflate:wI,deflate:SI,deflateSync:Cd,Inflate:rr,AsyncInflate:yM,inflate:xM,inflateSync:ah,Gzip:Wg,AsyncGzip:$C,gzip:QC,gzipSync:jg,Gunzip:Xg,AsyncGunzip:MI,gunzip:bI,gunzipSync:qg,Zlib:Gw,AsyncZlib:sZ,zlib:oZ,zlibSync:Ww,Unzlib:Yg,AsyncUnzlib:TI,unzlib:EI,unzlibSync:id,compress:QC,AsyncCompress:$C,compressSync:jg,Compress:Wg,Decompress:AI,AsyncDecompress:aZ,decompress:lZ,decompressSync:uZ,DecodeUTF8:cZ,EncodeUTF8:hZ,strToU8:Ha,strFromU8:wM,ZipPassThrough:rd,ZipDeflate:fZ,AsyncZipDeflate:dZ,Zip:pZ,zip:mZ,zipSync:gZ,UnzipPassThrough:OI,UnzipInflate:vZ,AsyncUnzipInflate:yZ,Unzip:xZ,unzip:_Z,unzipSync:wZ},Symbol.toStringTag,{value:"Module"}));function FI(n,e,t){const i=t.length-n-1;if(e>=t[i])return i-1;if(e<=t[n])return n;let r=n,s=i,o=Math.floor((r+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:r=o,o=Math.floor((r+s)/2);return o}function MZ(n,e,t,i){const r=[],s=[],o=[];r[0]=1;for(let a=1;a<=t;++a){s[a]=e-i[n+1-a],o[a]=i[n+a]-e;let u=0;for(let c=0;c<a;++c){const f=o[c+1],d=s[a-c],p=r[c]/(f+d);r[c]=u+f*p,u=d*p}r[a]=u}return r}function bZ(n,e,t,i){const r=FI(n,i,e),s=MZ(r,i,n,e),o=new Wt(0,0,0,0);for(let a=0;a<=n;++a){const u=t[r-n+a],c=s[a],f=u.w*c;o.x+=u.x*f,o.y+=u.y*f,o.z+=u.z*f,o.w+=u.w*c}return o}function TZ(n,e,t,i,r){const s=[];for(let d=0;d<=t;++d)s[d]=0;const o=[];for(let d=0;d<=i;++d)o[d]=s.slice(0);const a=[];for(let d=0;d<=t;++d)a[d]=s.slice(0);a[0][0]=1;const u=s.slice(0),c=s.slice(0);for(let d=1;d<=t;++d){u[d]=e-r[n+1-d],c[d]=r[n+d]-e;let p=0;for(let g=0;g<d;++g){const v=c[g+1],y=u[d-g];a[d][g]=v+y;const x=a[g][d-1]/a[d][g];a[g][d]=p+v*x,p=y*x}a[d][d]=p}for(let d=0;d<=t;++d)o[0][d]=a[d][t];for(let d=0;d<=t;++d){let p=0,g=1;const v=[];for(let y=0;y<=t;++y)v[y]=s.slice(0);v[0][0]=1;for(let y=1;y<=i;++y){let x=0;const M=d-y,S=t-y;d>=y&&(v[g][0]=v[p][0]/a[S+1][M],x=v[g][0]*a[M][S]);const _=M>=-1?1:-M,w=d-1<=S?y-1:t-d;for(let E=_;E<=w;++E)v[g][E]=(v[p][E]-v[p][E-1])/a[S+1][M+E],x+=v[g][E]*a[M+E][S];d<=S&&(v[g][y]=-v[p][y-1]/a[S+1][d],x+=v[g][y]*a[d][S]),o[y][d]=x;const T=p;p=g,g=T}}let f=t;for(let d=1;d<=i;++d){for(let p=0;p<=t;++p)o[d][p]*=f;f*=t-d}return o}function EZ(n,e,t,i,r){const s=r<n?r:n,o=[],a=FI(n,i,e),u=TZ(a,i,n,s,e),c=[];for(let f=0;f<t.length;++f){const d=t[f].clone(),p=d.w;d.x*=p,d.y*=p,d.z*=p,c[f]=d}for(let f=0;f<=s;++f){const d=c[a-n].clone().multiplyScalar(u[f][0]);for(let p=1;p<=n;++p)d.add(c[a-n+p].clone().multiplyScalar(u[f][p]));o[f]=d}for(let f=s+1;f<=r+1;++f)o[f]=new Wt(0,0,0);return o}function AZ(n,e){let t=1;for(let r=2;r<=n;++r)t*=r;let i=1;for(let r=2;r<=e;++r)i*=r;for(let r=2;r<=n-e;++r)i*=r;return t/i}function CZ(n){const e=n.length,t=[],i=[];for(let s=0;s<e;++s){const o=n[s];t[s]=new O(o.x,o.y,o.z),i[s]=o.w}const r=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(r[s-a].clone().multiplyScalar(AZ(s,a)*i[a]));r[s]=o.divideScalar(i[0])}return r}function RZ(n,e,t,i,r){const s=EZ(n,e,t,i,r);return CZ(s)}class eR extends br{constructor(e,t,i,r,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<i.length;++o){const a=i[o];this.controlPoints[o]=new Wt(a.x,a.y,a.z,a.w)}}getPoint(e,t=new O){const i=t,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=bZ(this.degree,this.knots,this.controlPoints,r);return s.w!==1&&s.divideScalar(s.w),i.set(s.x,s.y,s.z)}getTangent(e,t=new O){const i=t,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=RZ(this.degree,this.knots,this.controlPoints,r,1);return i.copy(s[1]).normalize(),i}}let At,Hn,Yi;class PZ extends ns{constructor(e){super(e)}load(e,t,i,r){const s=this,o=s.path===""?Ms.extractUrlBase(e):s.path,a=new Ba(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(u){try{t(s.parse(u,o))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e,t){if(kZ(e))At=new FZ().parse(e);else{const r=BI(e);if(!NZ(r))throw new Error("THREE.FBXLoader: Unknown format.");if(nR(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+nR(r));At=new OZ().parse(r)}const i=new Ov(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new LZ(i,this.manager).parse(At)}}class LZ{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Hn=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),r=this.parseDeformers(),s=new DZ().parse(r);return this.parseScene(r,s,i),Yi}parseConnections(){const e=new Map;return"Connections"in At&&At.Connections.connections.forEach(function(i){const r=i[0],s=i[1],o=i[2];e.has(r)||e.set(r,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(r).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const u={ID:r,relationship:o};e.get(s).children.push(u)}),e}parseImages(){const e={},t={};if("Video"in At.Objects){const i=At.Objects.Video;for(const r in i){const s=i[r],o=parseInt(r);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,u=typeof s.Content=="string"&&s.Content!=="";if(a||u){const c=this.parseImage(i[r]);t[s.RelativeFilename||s.Filename]=c}}}}for(const i in e){const r=e[i];t[r]!==void 0?e[i]=t[r]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const t=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in At.Objects){const i=At.Objects.Texture;for(const r in i){const s=this.parseTexture(i[r],e);t.set(parseInt(r),s)}}return t}parseTexture(e,t){const i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,o=r!==void 0?r.value:0,a=s!==void 0?s.value:0;if(i.wrapS=o===0?Do:bi,i.wrapT=a===0?Do:bi,"Scaling"in e){const u=e.Scaling.value;i.repeat.x=u[0],i.repeat.y=u[1]}return i}loadTexture(e,t){let i;const r=this.textureLoader.path,s=Hn.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(i=t[s[0].ID],(i.indexOf("blob:")===0||i.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const u=this.manager.getHandler(".tga");u===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new zn):(u.setPath(this.textureLoader.path),o=u.load(i))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new zn):o=this.textureLoader.load(i);return this.textureLoader.setPath(r),o}parseMaterials(e){const t=new Map;if("Material"in At.Objects){const i=At.Objects.Material;for(const r in i){const s=this.parseMaterial(i[r],e);s!==null&&t.set(parseInt(r),s)}}return t}parseMaterial(e,t){const i=e.id,r=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!Hn.has(i))return null;const o=this.parseParameters(e,t,i);let a;switch(s.toLowerCase()){case"phong":a=new yf;break;case"lambert":a=new gS;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new yf;break}return a.setValues(o),a.name=r,a}parseParameters(e,t,i){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=new ve().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=new ve().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=new ve().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=new ve().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=new ve().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=new ve().fromArray(e.SpecularColor.value));const s=this;return Hn.get(i).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":r.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(t,o.ID),r.map!==void 0&&(r.map.encoding=Mt);break;case"DisplacementColor":r.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(t,o.ID),r.emissiveMap!==void 0&&(r.emissiveMap.encoding=Mt);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":r.envMap=s.getTexture(t,o.ID),r.envMap!==void 0&&(r.envMap.mapping=Ec,r.envMap.encoding=Mt);break;case"SpecularColor":r.specularMap=s.getTexture(t,o.ID),r.specularMap!==void 0&&(r.specularMap.encoding=Mt);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(t,o.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),r}getTexture(e,t){return"LayeredTexture"in At.Objects&&t in At.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Hn.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in At.Objects){const i=At.Objects.Deformer;for(const r in i){const s=i[r],o=Hn.get(parseInt(r));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,i);a.ID=r,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[r]=a}else if(s.attrType==="BlendShape"){const a={id:r};a.rawTargets=this.parseMorphTargets(o,i),a.id=r,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const i=[];return e.children.forEach(function(r){const s=t[r.ID];if(s.attrType!=="Cluster")return;const o={ID:r.ID,indices:[],weights:[],transformLink:new Me().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),i.push(o)}),{rawBones:i,bones:[]}}parseMorphTargets(e,t){const i=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=Hn.get(parseInt(s.ID)).children.filter(function(u){return u.relationship===void 0})[0].ID,i.push(a)}return i}parseScene(e,t,i){Yi=new cn;const r=this.parseModels(e.skeletons,t,i),s=At.Objects.Model,o=this;r.forEach(function(u){const c=s[u.ID];o.setLookAtProperties(u,c),Hn.get(u.ID).parents.forEach(function(d){const p=r.get(d.ID);p!==void 0&&p.add(u)}),u.parent===null&&Yi.add(u)}),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),Yi.traverse(function(u){if(u.userData.transformData){u.parent&&(u.userData.transformData.parentMatrix=u.parent.matrix,u.userData.transformData.parentMatrixWorld=u.parent.matrixWorld);const c=NI(u.userData.transformData);u.applyMatrix4(c),u.updateWorldMatrix()}});const a=new IZ().parse();Yi.children.length===1&&Yi.children[0].isGroup&&(Yi.children[0].animations=a,Yi=Yi.children[0]),Yi.animations=a}parseModels(e,t,i){const r=new Map,s=At.Objects.Model;for(const o in s){const a=parseInt(o),u=s[o],c=Hn.get(a);let f=this.buildSkeleton(c,e,a,u.attrName);if(!f){switch(u.attrType){case"Camera":f=this.createCamera(c);break;case"Light":f=this.createLight(c);break;case"Mesh":f=this.createMesh(c,t,i);break;case"NurbsCurve":f=this.createCurve(c,t);break;case"LimbNode":case"Root":f=new Wf;break;case"Null":default:f=new cn;break}f.name=u.attrName?Rt.sanitizeNodeName(u.attrName):"",f.ID=a}this.getTransformData(f,u),r.set(a,f)}return r}buildSkeleton(e,t,i,r){let s=null;return e.parents.forEach(function(o){for(const a in t){const u=t[a];u.rawBones.forEach(function(c,f){if(c.ID===o.ID){const d=s;s=new Wf,s.matrixWorld.copy(c.transformLink),s.name=r?Rt.sanitizeNodeName(r):"",s.ID=i,u.bones[f]=s,d!==null&&s.add(d)}})}}),s}createCamera(e){let t,i;if(e.children.forEach(function(r){const s=At.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new Lt;else{let r=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(r=1);let s=1;i.NearPlane!==void 0&&(s=i.NearPlane.value/1e3);let o=1e3;i.FarPlane!==void 0&&(o=i.FarPlane.value/1e3);let a=window.innerWidth,u=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(a=i.AspectWidth.value,u=i.AspectHeight.value);const c=a/u;let f=45;i.FieldOfView!==void 0&&(f=i.FieldOfView.value);const d=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:t=new jn(f,c,s,o),d!==null&&t.setFocalLength(d);break;case 1:t=new Za(-a/2,a/2,u/2,-u/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new Lt;break}}return t}createLight(e){let t,i;if(e.children.forEach(function(r){const s=At.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new Lt;else{let r;i.LightType===void 0?r=0:r=i.LightType.value;let s=16777215;i.Color!==void 0&&(s=new ve().fromArray(i.Color.value));let o=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(o=0);let a=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?a=0:a=i.FarAttenuationEnd.value);const u=1;switch(r){case 0:t=new Zf(s,o,a,u);break;case 1:t=new pd(s,o);break;case 2:let c=Math.PI/3;i.InnerAngle!==void 0&&(c=Qi.degToRad(i.InnerAngle.value));let f=0;i.OuterAngle!==void 0&&(f=Qi.degToRad(i.OuterAngle.value),f=Math.max(f,1)),t=new Fv(s,o,a,c,f,u);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new Zf(s,o);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,i){let r,s=null,o=null;const a=[];return e.children.forEach(function(u){t.has(u.ID)&&(s=t.get(u.ID)),i.has(u.ID)&&a.push(i.get(u.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new yf({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(u){u.vertexColors=!0}),s.FBX_Deformer?(r=new Mv(s,o),r.normalizeSkinWeights()):r=new un(s,o),r}createCurve(e,t){const i=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),r=new Ar({color:3342591,linewidth:1});return new Oa(i,r)}getTransformData(e,t){const i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?i.eulerOrder=zI(t.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){"LookAtProperty"in t&&Hn.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){const s=At.Objects.Model[r.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),Yi.add(e.target)):e.lookAt(new O().fromArray(o))}}})}bindSkeleton(e,t,i){const r=this.parsePoseNodes();for(const s in e){const o=e[s];Hn.get(parseInt(o.ID)).parents.forEach(function(u){if(t.has(u.ID)){const c=u.ID;Hn.get(c).parents.forEach(function(d){i.has(d.ID)&&i.get(d.ID).bind(new bv(o.bones),r[d.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in At.Objects){const t=At.Objects.Pose;for(const i in t)if(t[i].attrType==="BindPose"&&t[i].NbPoseNodes>0){const r=t[i].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=new Me().fromArray(s.Matrix.a)}):e[r.Node]=new Me().fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in At&&"AmbientColor"in At.GlobalSettings){const e=At.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],r=e[2];if(t!==0||i!==0||r!==0){const s=new ve(t,i,r);Yi.add(new xS(s,1))}}}}class DZ{parse(e){const t=new Map;if("Geometry"in At.Objects){const i=At.Objects.Geometry;for(const r in i){const s=Hn.get(parseInt(r)),o=this.parseGeometry(s,i[r],e);t.set(parseInt(r),o)}}return t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){const r=i.skeletons,s=[],o=e.parents.map(function(d){return At.Objects.Model[d.ID]});if(o.length===0)return;const a=e.children.reduce(function(d,p){return r[p.ID]!==void 0&&(d=r[p.ID]),d},null);e.children.forEach(function(d){i.morphTargets[d.ID]!==void 0&&s.push(i.morphTargets[d.ID])});const u=o[0],c={};"RotationOrder"in u&&(c.eulerOrder=zI(u.RotationOrder.value)),"InheritType"in u&&(c.inheritType=parseInt(u.InheritType.value)),"GeometricTranslation"in u&&(c.translation=u.GeometricTranslation.value),"GeometricRotation"in u&&(c.rotation=u.GeometricRotation.value),"GeometricScaling"in u&&(c.scale=u.GeometricScaling.value);const f=NI(c);return this.genGeometry(t,a,s,f)}genGeometry(e,t,i,r){const s=new ct;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),u=new it(a.vertex,3);if(u.applyMatrix4(r),s.setAttribute("position",u),a.colors.length>0&&s.setAttribute("color",new it(a.colors,3)),t&&(s.setAttribute("skinIndex",new eS(a.weightsIndices,4)),s.setAttribute("skinWeight",new it(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const c=new Pn().getNormalMatrix(r),f=new it(a.normal,3);f.applyNormalMatrix(c),s.setAttribute("normal",f)}if(a.uvs.forEach(function(c,f){let d="uv"+(f+1).toString();f===0&&(d="uv"),s.setAttribute(d,new it(a.uvs[f],2))}),o.material&&o.material.mappingType!=="AllSame"){let c=a.materialIndex[0],f=0;if(a.materialIndex.forEach(function(d,p){d!==c&&(s.addGroup(f,p-f,c),c=d,f=p)}),s.groups.length>0){const d=s.groups[s.groups.length-1],p=d.start+d.count;p!==a.materialIndex.length&&s.addGroup(p,a.materialIndex.length-p,c)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,i,r),s}parseGeoNode(e,t){const i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},t!==null&&(i.skeleton=t,t.rawBones.forEach(function(r,s){r.indices.forEach(function(o,a){i.weightTable[o]===void 0&&(i.weightTable[o]=[]),i.weightTable[o].push({id:s,weight:r.weights[a]})})})),i}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,r=0,s=!1,o=[],a=[],u=[],c=[],f=[],d=[];const p=this;return e.vertexIndices.forEach(function(g,v){let y,x=!1;g<0&&(g=g^-1,x=!0);let M=[],S=[];if(o.push(g*3,g*3+1,g*3+2),e.color){const _=Pm(v,i,g,e.color);u.push(_[0],_[1],_[2])}if(e.skeleton){if(e.weightTable[g]!==void 0&&e.weightTable[g].forEach(function(_){S.push(_.weight),M.push(_.id)}),S.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const _=[0,0,0,0],w=[0,0,0,0];S.forEach(function(T,E){let R=T,P=M[E];w.forEach(function(V,F,C){if(R>V){C[F]=R,R=V;const N=_[F];_[F]=P,P=N}})}),M=_,S=w}for(;S.length<4;)S.push(0),M.push(0);for(let _=0;_<4;++_)f.push(S[_]),d.push(M[_])}if(e.normal){const _=Pm(v,i,g,e.normal);a.push(_[0],_[1],_[2])}e.material&&e.material.mappingType!=="AllSame"&&(y=Pm(v,i,g,e.material)[0]),e.uv&&e.uv.forEach(function(_,w){const T=Pm(v,i,g,_);c[w]===void 0&&(c[w]=[]),c[w].push(T[0]),c[w].push(T[1])}),r++,x&&(p.genFace(t,e,o,y,a,u,c,f,d,r),i++,r=0,o=[],a=[],u=[],c=[],f=[],d=[])}),t}genFace(e,t,i,r,s,o,a,u,c,f){for(let d=2;d<f;d++)e.vertex.push(t.vertexPositions[i[0]]),e.vertex.push(t.vertexPositions[i[1]]),e.vertex.push(t.vertexPositions[i[2]]),e.vertex.push(t.vertexPositions[i[(d-1)*3]]),e.vertex.push(t.vertexPositions[i[(d-1)*3+1]]),e.vertex.push(t.vertexPositions[i[(d-1)*3+2]]),e.vertex.push(t.vertexPositions[i[d*3]]),e.vertex.push(t.vertexPositions[i[d*3+1]]),e.vertex.push(t.vertexPositions[i[d*3+2]]),t.skeleton&&(e.vertexWeights.push(u[0]),e.vertexWeights.push(u[1]),e.vertexWeights.push(u[2]),e.vertexWeights.push(u[3]),e.vertexWeights.push(u[(d-1)*4]),e.vertexWeights.push(u[(d-1)*4+1]),e.vertexWeights.push(u[(d-1)*4+2]),e.vertexWeights.push(u[(d-1)*4+3]),e.vertexWeights.push(u[d*4]),e.vertexWeights.push(u[d*4+1]),e.vertexWeights.push(u[d*4+2]),e.vertexWeights.push(u[d*4+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(d-1)*4]),e.weightsIndices.push(c[(d-1)*4+1]),e.weightsIndices.push(c[(d-1)*4+2]),e.weightsIndices.push(c[(d-1)*4+3]),e.weightsIndices.push(c[d*4]),e.weightsIndices.push(c[d*4+1]),e.weightsIndices.push(c[d*4+2]),e.weightsIndices.push(c[d*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(d-1)*3]),e.colors.push(o[(d-1)*3+1]),e.colors.push(o[(d-1)*3+2]),e.colors.push(o[d*3]),e.colors.push(o[d*3+1]),e.colors.push(o[d*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(d-1)*3]),e.normal.push(s[(d-1)*3+1]),e.normal.push(s[(d-1)*3+2]),e.normal.push(s[d*3]),e.normal.push(s[d*3+1]),e.normal.push(s[d*3+2])),t.uv&&t.uv.forEach(function(p,g){e.uvs[g]===void 0&&(e.uvs[g]=[]),e.uvs[g].push(a[g][0]),e.uvs[g].push(a[g][1]),e.uvs[g].push(a[g][(d-1)*2]),e.uvs[g].push(a[g][(d-1)*2+1]),e.uvs[g].push(a[g][d*2]),e.uvs[g].push(a[g][d*2+1])})}addMorphTargets(e,t,i,r){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;i.forEach(function(o){o.rawTargets.forEach(function(a){const u=At.Objects.Geometry[a.geoID];u!==void 0&&s.genMorphGeometry(e,t,u,r,a.name)})})}genMorphGeometry(e,t,i,r,s){const o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],a=i.Vertices!==void 0?i.Vertices.a:[],u=i.Indexes!==void 0?i.Indexes.a:[],c=e.attributes.position.count*3,f=new Float32Array(c);for(let v=0;v<u.length;v++){const y=u[v]*3;f[y]=a[v*3],f[y+1]=a[v*3+1],f[y+2]=a[v*3+2]}const d={vertexIndices:o,vertexPositions:f},p=this.genBuffers(d),g=new it(p.vertex,3);g.name=s||i.attrName,g.applyMatrix4(r),e.morphAttributes.position.push(g)}parseNormals(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Normals.a;let s=[];return i==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:s,mappingType:t,referenceType:i}}parseUVs(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.UV.a;let s=[];return i==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:r,indices:s,mappingType:t,referenceType:i}}parseVertexColors(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Colors.a;let s=[];return i==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:r,indices:s,mappingType:t,referenceType:i}}parseMaterialIndices(e){const t=e.MappingInformationType,i=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const r=e.Materials.a,s=[];for(let o=0;o<r.length;++o)s.push(o);return{dataSize:1,buffer:r,indices:s,mappingType:t,referenceType:i}}parseNurbsGeometry(e){if(eR===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new ct;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new ct;const i=t-1,r=e.KnotVector.a,s=[],o=e.Points.a;for(let d=0,p=o.length;d<p;d+=4)s.push(new Wt().fromArray(o,d));let a,u;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=i,u=r.length-1-a;for(let d=0;d<i;++d)s.push(s[d])}const f=new eR(i,r,s,a,u).getPoints(s.length*12);return new ct().setFromPoints(f)}}class IZ{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const i in t){const r=t[i],s=this.addClip(r);e.push(s)}return e}parseClips(){if(At.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=At.Objects.AnimationCurveNode,t=new Map;for(const i in e){const r=e[i];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:r.id,attr:r.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=At.Objects.AnimationCurve;for(const i in t){const r={id:t[i].id,times:t[i].KeyTime.a.map(zZ),values:t[i].KeyValueFloat.a},s=Hn.get(r.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=r:a.match(/Y/)?e.get(o).curves.y=r:a.match(/Z/)?e.get(o).curves.z=r:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=r)}}}parseAnimationLayers(e){const t=At.Objects.AnimationLayer,i=new Map;for(const r in t){const s=[],o=Hn.get(parseInt(r));o!==void 0&&(o.children.forEach(function(u,c){if(e.has(u.ID)){const f=e.get(u.ID);if(f.curves.x!==void 0||f.curves.y!==void 0||f.curves.z!==void 0){if(s[c]===void 0){const d=Hn.get(u.ID).parents.filter(function(p){return p.relationship!==void 0})[0].ID;if(d!==void 0){const p=At.Objects.Model[d.toString()];if(p===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",u);return}const g={modelName:p.attrName?Rt.sanitizeNodeName(p.attrName):"",ID:p.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Yi.traverse(function(v){v.ID===p.id&&(g.transform=v.matrix,v.userData.transformData&&(g.eulerOrder=v.userData.transformData.eulerOrder))}),g.transform||(g.transform=new Me),"PreRotation"in p&&(g.preRotation=p.PreRotation.value),"PostRotation"in p&&(g.postRotation=p.PostRotation.value),s[c]=g}}s[c]&&(s[c][f.attr]=f)}else if(f.curves.morph!==void 0){if(s[c]===void 0){const d=Hn.get(u.ID).parents.filter(function(M){return M.relationship!==void 0})[0].ID,p=Hn.get(d).parents[0].ID,g=Hn.get(p).parents[0].ID,v=Hn.get(g).parents[0].ID,y=At.Objects.Model[v],x={modelName:y.attrName?Rt.sanitizeNodeName(y.attrName):"",morphName:At.Objects.Deformer[d].attrName};s[c]=x}s[c][f.attr]=f}}}),i.set(parseInt(r),s))}return i}parseAnimStacks(e){const t=At.Objects.AnimationStack,i={};for(const r in t){const s=Hn.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);i[r]={name:t[r].attrName,layer:o}}return i}addClip(e){let t=[];const i=this;return e.layer.forEach(function(r){t=t.concat(i.generateTracks(r))}),new Yf(e.name,-1,t)}generateTracks(e){const t=[];let i=new O,r=new Mn,s=new O;if(e.transform&&e.transform.decompose(i,r,s),i=i.toArray(),r=new yr().setFromQuaternion(r,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,i,r){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,i);return new Lc(e+"."+r,s,o)}generateRotationTrack(e,t,i,r,s,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(Qi.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(Qi.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(Qi.degToRad));const a=this.getTimesForAllAxes(t),u=this.getKeyframeTrackValues(a,t,i);r!==void 0&&(r=r.map(Qi.degToRad),r.push(o),r=new yr().fromArray(r),r=new Mn().setFromEuler(r)),s!==void 0&&(s=s.map(Qi.degToRad),s.push(o),s=new yr().fromArray(s),s=new Mn().setFromEuler(s).invert());const c=new Mn,f=new yr,d=[];for(let p=0;p<u.length;p+=3)f.set(u[p],u[p+1],u[p+2],o),c.setFromEuler(f),r!==void 0&&c.premultiply(r),s!==void 0&&c.multiply(s),c.toArray(d,p/3*4);return new za(e+".quaternion",a,d)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,i=t.values.map(function(s){return s/100}),r=Yi.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Wl(e.modelName+".morphTargetInfluences["+r+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(i,r){return i-r}),t.length>1){let i=1,r=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==r&&(t[i]=o,r=o,i++)}t=t.slice(0,i)}return t}getKeyframeTrackValues(e,t,i){const r=i,s=[];let o=-1,a=-1,u=-1;return e.forEach(function(c){if(t.x&&(o=t.x.times.indexOf(c)),t.y&&(a=t.y.times.indexOf(c)),t.z&&(u=t.z.times.indexOf(c)),o!==-1){const f=t.x.values[o];s.push(f),r[0]=f}else s.push(r[0]);if(a!==-1){const f=t.y.values[a];s.push(f),r[1]=f}else s.push(r[1]);if(u!==-1){const f=t.z.values[u];s.push(f),r[2]=f}else s.push(r[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const i=e.values[t-1],r=e.values[t]-i,s=Math.abs(r);if(s>=180){const o=s/180,a=r/o;let u=i+a;const c=e.times[t-1],d=(e.times[t]-c)/o;let p=c+d;const g=[],v=[];for(;p<e.times[t];)g.push(p),p+=d,v.push(u),u+=a;e.times=iR(e.times,t,g),e.values=iR(e.values,t,v)}}}}class OZ{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new kI,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,i=e.split(/[\r\n]+/);return i.forEach(function(r,s){const o=r.match(/^[\s\t]*;/),a=r.match(/^[\s\t]*$/);if(o||a)return;const u=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),c=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),f=r.match("^\\t{"+(t.currentIndent-1)+"}}");u?t.parseNodeBegin(r,u):c?t.parseNodeProperty(r,c,i[++s]):f?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){const i=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(u){return u.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:i},o=this.parseNodeAttr(r),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,s):i in a?(i==="PoseNode"?a.PoseNode.push(s):a[i].id!==void 0&&(a[i]={},a[i][a[i].id]=a[i]),o.id!==""&&(a[i][o.id]=s)):typeof o.id=="number"?(a[i]={},a[i][o.id]=s):i!=="Properties70"&&(i==="PoseNode"?a[i]=[s]:a[i]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:i,type:r}}parseNodeProperty(e,t,i){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&s===","&&(s=i.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,r,s);return}if(r==="C"){const u=s.split(",").slice(1),c=parseInt(u[0]),f=parseInt(u[1]);let d=s.split(",").slice(3);d=d.map(function(p){return p.trim().replace(/^"/,"")}),r="connections",s=[c,f],UZ(s,d),o[r]===void 0&&(o[r]=[])}r==="Node"&&(o.id=s),r in o&&Array.isArray(o[r])?o[r].push(s):r!=="a"?o[r]=s:o.a=s,this.setCurrentProp(o,r),r==="a"&&s.slice(-1)!==","&&(o.a=Xx(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=Xx(t.a))}parseNodeSpecialProperty(e,t,i){const r=i.split('",').map(function(f){return f.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],o=r[1],a=r[2],u=r[3];let c=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=Xx(c);break}this.getPrevNode()[s]={type:o,type2:a,flag:u,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class FZ{parse(e){const t=new tR(e);t.skip(23);const i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const r=new kI;for(;!this.endOfContent(t);){const s=this.parseNode(t,i);s!==null&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const i={},r=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(r===0)return null;const u=[];for(let p=0;p<s;p++)u.push(this.parseProperty(e));const c=u.length>0?u[0]:"",f=u.length>1?u[1]:"",d=u.length>2?u[2]:"";for(i.singleProperty=s===1&&e.getOffset()===r;r>e.getOffset();){const p=this.parseNode(e,t);p!==null&&this.parseSubNode(a,i,p)}return i.propertyList=u,typeof c=="number"&&(i.id=c),f!==""&&(i.attrName=f),d!==""&&(i.attrType=d),a!==""&&(i.name=a),i}parseSubNode(e,t,i){if(i.singleProperty===!0){const r=i.propertyList[0];Array.isArray(r)?(t[i.name]=i,i.a=r):t[i.name]=r}else if(e==="Connections"&&i.name==="C"){const r=[];i.propertyList.forEach(function(s,o){o!==0&&r.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(r)}else if(i.name==="Properties70")Object.keys(i).forEach(function(s){t[s]=i[s]});else if(e==="Properties70"&&i.name==="P"){let r=i.propertyList[0],s=i.propertyList[1];const o=i.propertyList[2],a=i.propertyList[3];let u;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?u=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:u=i.propertyList[4],t[r]={type:s,type2:o,flag:a,value:u}}else t[i.name]===void 0?typeof i.id=="number"?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:i.name==="PoseNode"?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):t[i.name][i.id]===void 0&&(t[i.name][i.id]=i)}parseProperty(e){const t=e.getString(1);let i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}typeof SZ=="undefined"&&console.error("THREE.FBXLoader: External library fflate.min.js required.");const a=id(new Uint8Array(e.getArrayBuffer(o))),u=new tR(a.buffer);switch(t){case"b":case"c":return u.getBooleanArray(r);case"d":return u.getFloat64Array(r);case"f":return u.getFloat32Array(r);case"i":return u.getInt32Array(r);case"l":return u.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class tR{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let r=0;r<e;r++)t[r]=this.getUint8();const i=t.indexOf(0);return i>=0&&(t=t.slice(0,i)),Ms.decodeText(new Uint8Array(t))}}class kI{add(e,t){this[e]=t}}function kZ(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===BI(n,0,e.length)}function NZ(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function i(r){const s=n[r-1];return n=n.slice(t+r),t++,s}for(let r=0;r<e.length;++r)if(i(1)===e[r])return!1;return!0}function nR(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function zZ(n){return n/46186158e3}const BZ=[];function Pm(n,e,t,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=n;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(r=i.indices[r]);const s=r*i.dataSize,o=s+i.dataSize;return VZ(BZ,i.buffer,s,o)}const jx=new yr,Uu=new O;function NI(n){const e=new Me,t=new Me,i=new Me,r=new Me,s=new Me,o=new Me,a=new Me,u=new Me,c=new Me,f=new Me,d=new Me,p=new Me,g=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(Uu.fromArray(n.translation)),n.preRotation){const F=n.preRotation.map(Qi.degToRad);F.push(n.eulerOrder),t.makeRotationFromEuler(jx.fromArray(F))}if(n.rotation){const F=n.rotation.map(Qi.degToRad);F.push(n.eulerOrder),i.makeRotationFromEuler(jx.fromArray(F))}if(n.postRotation){const F=n.postRotation.map(Qi.degToRad);F.push(n.eulerOrder),r.makeRotationFromEuler(jx.fromArray(F)),r.invert()}n.scale&&s.scale(Uu.fromArray(n.scale)),n.scalingOffset&&a.setPosition(Uu.fromArray(n.scalingOffset)),n.scalingPivot&&o.setPosition(Uu.fromArray(n.scalingPivot)),n.rotationOffset&&u.setPosition(Uu.fromArray(n.rotationOffset)),n.rotationPivot&&c.setPosition(Uu.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(d.copy(n.parentMatrix),f.copy(n.parentMatrixWorld));const v=t.clone().multiply(i).multiply(r),y=new Me;y.extractRotation(f);const x=new Me;x.copyPosition(f);const M=x.clone().invert().multiply(f),S=y.clone().invert().multiply(M),_=s,w=new Me;if(g===0)w.copy(y).multiply(v).multiply(S).multiply(_);else if(g===1)w.copy(y).multiply(S).multiply(v).multiply(_);else{const C=new Me().scale(new O().setFromMatrixScale(d)).clone().invert(),N=S.clone().multiply(C);w.copy(y).multiply(v).multiply(N).multiply(_)}const T=c.clone().invert(),E=o.clone().invert();let R=e.clone().multiply(u).multiply(c).multiply(t).multiply(i).multiply(r).multiply(T).multiply(a).multiply(o).multiply(s).multiply(E);const P=new Me().copyPosition(R),V=f.clone().multiply(P);return p.copyPosition(V),R=p.clone().multiply(w),R.premultiply(f.invert()),R}function zI(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function Xx(n){return n.split(",").map(function(t){return parseFloat(t)})}function BI(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),Ms.decodeText(new Uint8Array(n,e,t))}function UZ(n,e){for(let t=0,i=n.length,r=e.length;t<r;t++,i++)n[i]=e[t]}function VZ(n,e,t,i){for(let r=t,s=0;r<i;r++,s++)n[s]=e[r];return n}function iR(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}function HZ(n){const e=new Map,t=new Map,i=n.clone();return UI(n,i,function(r,s){e.set(s,r),t.set(r,s)}),i.traverse(function(r){if(!r.isSkinnedMesh)return;const s=r,o=e.get(r),a=o.skeleton.bones;s.skeleton=o.skeleton.clone(),s.bindMatrix.copy(o.bindMatrix),s.skeleton.bones=a.map(function(u){return t.get(u)}),s.bind(s.skeleton,s.bindMatrix)}),i}function UI(n,e,t){t(n,e);for(let i=0;i<n.children.length;i++)UI(n.children[i],e.children[i],t)}var VI=(n,e=n.animations)=>{const t=HZ(n);return t.animations=e,t};const GZ=new Map,WZ=new PZ;var jZ=async(n,e)=>{const t=await Ts(GZ,n,()=>new Promise((i,r)=>{gd(),WZ.load(n,s=>{Ws(),Jf()==="linear"?s.traverse(o=>{var a;!((a=o.material)===null||a===void 0)&&a.map&&(o.material.map.encoding=sr)}):s.traverse(o=>{var a;!((a=o.material)===null||a===void 0)&&a.map&&(o.material.map.encoding=Mt)}),i(s)},vd,()=>{Ws(),r()})}));return e?VI(t):t},XZ=Object.freeze(Object.defineProperty({__proto__:null,default:jZ},Symbol.toStringTag,{value:"Module"}));class qZ extends ns{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new $Z(t)}),this.register(function(t){return new iK(t)}),this.register(function(t){return new rK(t)}),this.register(function(t){return new QZ(t)}),this.register(function(t){return new JZ(t)}),this.register(function(t){return new eK(t)}),this.register(function(t){return new tK(t)}),this.register(function(t){return new nK(t)}),this.register(function(t){return new ZZ(t)}),this.register(function(t){return new sK(t)})}load(e,t,i,r){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=Ms.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},u=new Ba(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(c){try{s.parse(c,o,function(f){t(f),s.manager.itemEnd(e)},a)}catch(f){a(f)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if(typeof e=="string")s=e;else if(Ms.decodeText(new Uint8Array(e,0,4))===HI){try{o[kt.KHR_BINARY_GLTF]=new oK(e)}catch(d){r&&r(d);return}s=o[kt.KHR_BINARY_GLTF].content}else s=Ms.decodeText(new Uint8Array(e));const u=JSON.parse(s);if(u.asset===void 0||u.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new xK(u,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const d=this.pluginCallbacks[f](c);a[d.name]=d,o[d.name]=!0}if(u.extensionsUsed)for(let f=0;f<u.extensionsUsed.length;++f){const d=u.extensionsUsed[f],p=u.extensionsRequired||[];switch(d){case kt.KHR_MATERIALS_UNLIT:o[d]=new KZ;break;case kt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[d]=new uK;break;case kt.KHR_DRACO_MESH_COMPRESSION:o[d]=new aK(u,this.dracoLoader);break;case kt.KHR_TEXTURE_TRANSFORM:o[d]=new lK;break;case kt.KHR_MESH_QUANTIZATION:o[d]=new cK;break;default:p.indexOf(d)>=0&&a[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function YZ(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const kt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class ZZ{constructor(e){this.parser=e,this.name=kt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,u=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const f=new ve(16777215);u.color!==void 0&&f.fromArray(u.color);const d=u.range!==void 0?u.range:0;switch(u.type){case"directional":c=new pd(f),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Zf(f),c.distance=d;break;case"spot":c=new Fv(f),c.distance=d,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,c.angle=u.spot.outerConeAngle,c.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return c.position.set(0,0,0),c.decay=2,u.intensity!==void 0&&(c.intensity=u.intensity),c.name=t.createUniqueName(u.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(u){return i._getNodeRef(t.cache,a,u)})}}class KZ{constructor(){this.name=kt.KHR_MATERIALS_UNLIT}getMaterialType(){return pi}extendParams(e,t,i){const r=[];e.color=new ve(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Mt))}return Promise.all(r)}}class $Z{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ka}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ie(a,a)}return Promise.all(s)}}class QZ{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ka}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new ve(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Mt)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class JZ{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ka}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class eK{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ka}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new ve(a[0],a[1],a[2]),Promise.all(s)}}class tK{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ka}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class nK{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Ka}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new ve(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Mt)),Promise.all(s)}}class iK{constructor(e){this.parser=e,this.name=kt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class rK{constructor(e){this.parser=e,this.name=kt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let u=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(u=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class sK{constructor(e){this.name=kt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,o.ready]).then(function(a){const u=r.byteOffset||0,c=r.byteLength||0,f=r.count,d=r.byteStride,p=new ArrayBuffer(f*d),g=new Uint8Array(a[0],u,c);return o.decodeGltfBuffer(new Uint8Array(p),f,d,g,r.mode,r.filter),p})}else return null}}const HI="glTF",Kh=12,rR={JSON:1313821514,BIN:5130562};class oK{constructor(e){this.name=kt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Kh);if(this.header={magic:Ms.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==HI)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Kh,r=new DataView(e,Kh);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===rR.JSON){const u=new Uint8Array(e,Kh+s,o);this.content=Ms.decodeText(u)}else if(a===rR.BIN){const u=Kh+s;this.body=e.slice(u,u+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class aK{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=kt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},u={},c={};for(const f in o){const d=qw[f]||f.toLowerCase();a[d]=o[f]}for(const f in e.attributes){const d=qw[f]||f.toLowerCase();if(o[f]!==void 0){const p=i.accessors[e.attributes[f]],g=sd[p.componentType];c[d]=g,u[d]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(f){return new Promise(function(d){r.decodeDracoFile(f,function(p){for(const g in p.attributes){const v=p.attributes[g],y=u[g];y!==void 0&&(v.normalized=y)}d(p)},a,c)})})}}class lK{constructor(){this.name=kt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Xw extends Ss{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),i=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),a={specular:{value:new ve().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(u){for(const c in a)u.uniforms[c]=a[c];u.fragmentShader=u.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(u){a.specular.value=u}},specularMap:{get:function(){return a.specularMap.value},set:function(u){a.specularMap.value=u,u?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(u){a.glossiness.value=u}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(u){a.glossinessMap.value=u,u?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class uK{constructor(){this.name=kt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return Xw}extendParams(e,t,i){const r=t.extensions[this.name];e.color=new ve(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(r.diffuseTexture!==void 0&&s.push(i.assignTexture(e,"map",r.diffuseTexture,Mt)),e.emissive=new ve(0,0,0),e.glossiness=r.glossinessFactor!==void 0?r.glossinessFactor:1,e.specular=new ve(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),r.specularGlossinessTexture!==void 0){const o=r.specularGlossinessTexture;s.push(i.assignTexture(e,"glossinessMap",o)),s.push(i.assignTexture(e,"specularMap",o,Mt))}return Promise.all(s)}createMaterial(e){const t=new Xw(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=qa,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t}}class cK{constructor(){this.name=kt.KHR_MESH_QUANTIZATION}}class jl extends Io{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}}jl.prototype.beforeStart_=jl.prototype.copySampleValue_;jl.prototype.afterEnd_=jl.prototype.copySampleValue_;jl.prototype.interpolate_=function(n,e,t,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=o*2,u=o*3,c=i-e,f=(t-e)/c,d=f*f,p=d*f,g=n*u,v=g-u,y=-2*p+3*d,x=p-d,M=1-y,S=x-d+f;for(let _=0;_!==o;_++){const w=s[v+_+o],T=s[v+_+a]*c,E=s[g+_+o],R=s[g+_]*c;r[_]=M*w+S*T+y*E+x*R}return r};const hK=new Mn;class fK extends jl{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return hK.fromArray(s).normalize().toArray(s),s}}const fo={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},sd={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},sR={9728:Ft,9729:An,9984:$_,9985:IP,9986:Q_,9987:Kl},oR={33071:bi,33648:bg,10497:Do},aR={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},qw={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ha={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},dK={CUBICSPLINE:void 0,LINEAR:Cc,STEP:Uf},qx={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function pK(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Ss({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Mc})),n.DefaultMaterial}function $h(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function El(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function mK(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,f=e.length;c<f;c++){const d=e[c];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(r=!0),d.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],u=[];for(let c=0,f=e.length;c<f;c++){const d=e[c];if(i){const p=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(p)}if(r){const p=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;u.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(u)]).then(function(c){const f=c[0],d=c[1],p=c[2];return i&&(n.morphAttributes.position=f),r&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function gK(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function vK(n){const e=n.extensions&&n.extensions[kt.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+lR(e.attributes):t=n.indices+":"+lR(n.attributes)+":"+n.mode,t}function lR(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function Yw(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function yK(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class xK{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new YZ,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={},typeof createImageBitmap!="undefined"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!1?this.textureLoader=new bL(this.options.manager):this.textureLoader=new Ov(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ba(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};$h(s,a,r),El(a,r),Promise.all(i._invokeAll(function(u){return u.afterRoot&&u.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,u=o.length;a<u;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const u=this.associations.get(o);u!=null&&this.associations.set(a,u);for(const[c,f]of o.children.entries())s(f,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[kt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(Ms.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0)return Promise.resolve(null);const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],u=aR[r.type],c=sd[r.componentType],f=c.BYTES_PER_ELEMENT,d=f*u,p=r.byteOffset||0,g=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,v=r.normalized===!0;let y,x;if(g&&g!==d){const M=Math.floor(p/g),S="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+M+":"+r.count;let _=t.cache.get(S);_||(y=new c(a,M*g,r.count*g/f),_=new qc(y,g/f),t.cache.add(S,_)),x=new Pc(_,u,p%g/f,v)}else a===null?y=new c(r.count*u):y=new c(a,p,r.count*u),x=new hn(y,u,v);if(r.sparse!==void 0){const M=aR.SCALAR,S=sd[r.sparse.indices.componentType],_=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,T=new S(o[1],_,r.sparse.count*M),E=new c(o[2],w,r.sparse.count*u);a!==null&&(x=new hn(x.array.slice(),x.itemSize,x.normalized));for(let R=0,P=T.length;R<P;R++){const V=T[R];if(x.setX(V,E[R*u]),u>=2&&x.setY(V,E[R*u+1]),u>=3&&x.setZ(V,E[R*u+2]),u>=4&&x.setW(V,E[R*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return x})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const u=i.manager.getHandler(o.uri);u!==null&&(a=u)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],u=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[u])return this.textureCache[u];const c=this.loadImageSource(t,i).then(function(f){f.flipY=!1,o.name&&(f.name=o.name);const p=(s.samplers||{})[o.sampler]||{};return f.magFilter=sR[p.magFilter]||An,f.minFilter=sR[p.minFilter]||Kl,f.wrapS=oR[p.wrapS]||Do,f.wrapT=oR[p.wrapT]||Do,r.associations.set(f,{textures:e}),f}).catch(function(){return null});return this.textureCache[u]=c,c}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=r.images[e],a=self.URL||self.webkitURL;let u=o.uri||"",c=!1;if(o.bufferView!==void 0)u=i.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const p=new Blob([d],{type:o.mimeType});return u=a.createObjectURL(p),u});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const f=Promise.resolve(u).then(function(d){return new Promise(function(p,g){let v=p;t.isImageBitmapLoader===!0&&(v=function(y){const x=new zn(y);x.needsUpdate=!0,p(x)}),t.load(Ms.resolveURL(d,s.path),v,void 0,g)})}).then(function(d){return c===!0&&a.revokeObjectURL(u),d.userData.mimeType=o.mimeType||yK(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),d});return this.sourceCache[e]=f,f}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(i.texCoord!==void 0&&i.texCoord!=0&&!(t==="aoMap"&&i.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),s.extensions[kt.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[kt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const u=s.associations.get(o);o=s.extensions[kt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,u)}}return r!==void 0&&(o.encoding=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let u=this.cache.get(a);u||(u=new Tv,Nn.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,u.sizeAttenuation=!1,this.cache.add(a,u)),i=u}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let u=this.cache.get(a);u||(u=new Ar,Nn.prototype.copy.call(u,i),u.color.copy(i.color),this.cache.add(a,u)),i=u}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let u=this.cache.get(a);u||(u=i.clone(),s&&(u.vertexColors=!0),o&&(u.flatShading=!0),r&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(a,u),this.associations.set(u,this.associations.get(i))),i=u}i.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return Ss}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},u=s.extensions||{},c=[];if(u[kt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const d=r[kt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else if(u[kt.KHR_MATERIALS_UNLIT]){const d=r[kt.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new ve(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",d.baseColorTexture,Mt)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Lo);const f=s.alphaMode||qx.OPAQUE;if(f===qx.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,f===qx.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==pi&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ie(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}return s.occlusionTexture!==void 0&&o!==pi&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==pi&&(a.emissive=new ve().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==pi&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Mt)),Promise.all(c).then(function(){let d;return o===Xw?d=r[kt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):d=new o(a),s.name&&(d.name=s.name),El(d,s),t.associations.set(d,{materials:e}),s.extensions&&$h(r,d,s),d})}createUniqueName(e){const t=Rt.sanitizeNodeName(e||"");let i=t;for(let r=1;this.nodeNamesUsed[i];++r)i=t+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[kt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(u){return uR(u,a,t)})}const o=[];for(let a=0,u=e.length;a<u;a++){const c=e[a],f=vK(c),d=r[f];if(d)o.push(d.promise);else{let p;c.extensions&&c.extensions[kt.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=uR(new ct,c,t),r[f]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let u=0,c=o.length;u<c;u++){const f=o[u].material===void 0?pK(this.cache):this.getDependency("material",o[u].material);a.push(f)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(u){const c=u.slice(0,u.length-1),f=u[u.length-1],d=[];for(let g=0,v=f.length;g<v;g++){const y=f[g],x=o[g];let M;const S=c[g];if(x.mode===fo.TRIANGLES||x.mode===fo.TRIANGLE_STRIP||x.mode===fo.TRIANGLE_FAN||x.mode===void 0)M=s.isSkinnedMesh===!0?new Mv(y,S):new un(y,S),M.isSkinnedMesh===!0&&!M.geometry.attributes.skinWeight.normalized&&M.normalizeSkinWeights(),x.mode===fo.TRIANGLE_STRIP?M.geometry=cR(M.geometry,p6):x.mode===fo.TRIANGLE_FAN&&(M.geometry=cR(M.geometry,FP));else if(x.mode===fo.LINES)M=new Fa(y,S);else if(x.mode===fo.LINE_STRIP)M=new Oa(y,S);else if(x.mode===fo.LINE_LOOP)M=new eL(y,S);else if(x.mode===fo.POINTS)M=new tL(y,S);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+x.mode);Object.keys(M.geometry.morphAttributes).length>0&&gK(M,s),M.name=t.createUniqueName(s.name||"mesh_"+e),El(M,s),x.extensions&&$h(r,M,x),t.assignFinalMaterial(M),d.push(M)}for(let g=0,v=d.length;g<v;g++)t.associations.set(d[g],{meshes:e,primitives:g});if(d.length===1)return d[0];const p=new cn;t.associations.set(p,{meshes:e});for(let g=0,v=d.length;g<v;g++)p.add(d[g]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new jn(Qi.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Za(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),El(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(r){return i.inverseBindMatrices=r,i})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],o=[],a=[],u=[];for(let c=0,f=i.channels.length;c<f;c++){const d=i.channels[c],p=i.samplers[d.sampler],g=d.target,v=g.node!==void 0?g.node:g.id,y=i.parameters!==void 0?i.parameters[p.input]:p.input,x=i.parameters!==void 0?i.parameters[p.output]:p.output;r.push(this.getDependency("node",v)),s.push(this.getDependency("accessor",y)),o.push(this.getDependency("accessor",x)),a.push(p),u.push(g)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(u)]).then(function(c){const f=c[0],d=c[1],p=c[2],g=c[3],v=c[4],y=[];for(let M=0,S=f.length;M<S;M++){const _=f[M],w=d[M],T=p[M],E=g[M],R=v[M];if(_===void 0)continue;_.updateMatrix(),_.matrixAutoUpdate=!0;let P;switch(ha[R.path]){case ha.weights:P=Wl;break;case ha.rotation:P=za;break;case ha.position:case ha.scale:default:P=Lc;break}const V=_.name?_.name:_.uuid,F=E.interpolation!==void 0?dK[E.interpolation]:Cc,C=[];ha[R.path]===ha.weights?_.traverse(function(Q){Q.morphTargetInfluences&&C.push(Q.name?Q.name:Q.uuid)}):C.push(V);let N=T.array;if(T.normalized){const Q=Yw(N.constructor),G=new Float32Array(N.length);for(let Y=0,X=N.length;Y<X;Y++)G[Y]=N[Y]*Q;N=G}for(let Q=0,G=C.length;Q<G;Q++){const Y=new P(C[Q]+"."+ha[R.path],w.array,N,F);E.interpolation==="CUBICSPLINE"&&(Y.createInterpolant=function(K){const B=this instanceof za?fK:jl;return new B(this.times,this.values,this.getValueSize()/3,K)},Y.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),y.push(Y)}}const x=i.name?i.name:"animation_"+e;return new Yf(x,void 0,y)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(!!a.isMesh)for(let u=0,c=r.weights.length;u<c;u++)a.morphTargetInfluences[u]=r.weights[u]}),o})}loadNode(e){const t=this.json,i=this.extensions,r=this,s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"";return function(){const a=[],u=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return u&&a.push(u),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),Promise.all(a)}().then(function(a){let u;if(s.isBone===!0?u=new Wf:a.length>1?u=new cn:a.length===1?u=a[0]:u=new Lt,u!==a[0])for(let c=0,f=a.length;c<f;c++)u.add(a[c]);if(s.name&&(u.userData.name=s.name,u.name=o),El(u,s),s.extensions&&$h(i,u,s),s.matrix!==void 0){const c=new Me;c.fromArray(s.matrix),u.applyMatrix4(c)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u})}loadScene(e){const t=this.json,i=this.extensions,r=this.json.scenes[e],s=this,o=new cn;r.name&&(o.name=s.createUniqueName(r.name)),El(o,r),r.extensions&&$h(i,o,r);const a=r.nodes||[],u=[];for(let c=0,f=a.length;c<f;c++)u.push(GI(a[c],o,t,s));return Promise.all(u).then(function(){const c=f=>{const d=new Map;for(const[p,g]of s.associations)(p instanceof Nn||p instanceof zn)&&d.set(p,g);return f.traverse(p=>{const g=s.associations.get(p);g!=null&&d.set(p,g)}),d};return s.associations=c(o),o})}}function GI(n,e,t,i){const r=t.nodes[n];return i.getDependency("node",n).then(function(s){if(r.skin===void 0)return s;let o;return i.getDependency("skin",r.skin).then(function(a){o=a;const u=[];for(let c=0,f=o.joints.length;c<f;c++)u.push(i.getDependency("node",o.joints[c]));return Promise.all(u)}).then(function(a){return s.traverse(function(u){if(!u.isMesh)return;const c=[],f=[];for(let d=0,p=a.length;d<p;d++){const g=a[d];if(g){c.push(g);const v=new Me;o.inverseBindMatrices!==void 0&&v.fromArray(o.inverseBindMatrices.array,d*16),f.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[d])}u.bind(new bv(c,f),u.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(r.children){const a=r.children;for(let u=0,c=a.length;u<c;u++){const f=a[u];o.push(GI(f,s,t,i))}}return Promise.all(o)})}function _K(n,e,t){const i=e.attributes,r=new Gi;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],u=a.min,c=a.max;if(u!==void 0&&c!==void 0){if(r.set(new O(u[0],u[1],u[2]),new O(c[0],c[1],c[2])),a.normalized){const f=Yw(sd[a.componentType]);r.min.multiplyScalar(f),r.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new O,u=new O;for(let c=0,f=s.length;c<f;c++){const d=s[c];if(d.POSITION!==void 0){const p=t.json.accessors[d.POSITION],g=p.min,v=p.max;if(g!==void 0&&v!==void 0){if(u.setX(Math.max(Math.abs(g[0]),Math.abs(v[0]))),u.setY(Math.max(Math.abs(g[1]),Math.abs(v[1]))),u.setZ(Math.max(Math.abs(g[2]),Math.abs(v[2]))),p.normalized){const y=Yw(sd[p.componentType]);u.multiplyScalar(y)}a.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new Ql;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function uR(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(u){n.setAttribute(a,u)})}for(const o in i){const a=qw[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return El(n,e),_K(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?mK(n,e.targets,t):n})}function cR(n,e){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let u=0;u<a.count;u++)o.push(u);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(e===FP)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s}const Yx=new WeakMap;class wK extends ns{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new Ba(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const u in t.attributeTypes){const c=t.attributeTypes[u];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[u]=c.name)}const i=JSON.stringify(t);if(Yx.has(e)){const u=Yx.get(e);if(u.key===i)return u.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(u=>(r=u,new Promise((c,f)=>{r._callbacks[s]={resolve:c,reject:f},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(u=>this._createGeometry(u.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),Yx.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new ct;e.index&&t.setIndex(new hn(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new hn(o,a))}return t}_loadLibrary(e,t){const i=new Ba(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=SK.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function SK(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(f){n.onModuleLoaded=function(d){f({draco:d})},DracoDecoderModule(n)});break;case"decode":const u=a.buffer,c=a.taskConfig;e.then(f=>{const d=f.draco,p=new d.Decoder,g=new d.DecoderBuffer;g.Init(new Int8Array(u),u.byteLength);try{const v=t(d,p,g,c),y=v.attributes.map(x=>x.array.buffer);v.index&&y.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},y)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{d.destroy(g),d.destroy(p)}});break}};function t(o,a,u,c){const f=c.attributeIDs,d=c.attributeTypes;let p,g;const v=a.GetEncodedGeometryType(u);if(v===o.TRIANGULAR_MESH)p=new o.Mesh,g=a.DecodeBufferToMesh(u,p);else if(v===o.POINT_CLOUD)p=new o.PointCloud,g=a.DecodeBufferToPointCloud(u,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!g.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+g.error_msg());const y={index:null,attributes:[]};for(const x in f){const M=self[d[x]];let S,_;if(c.useUniqueIDs)_=f[x],S=a.GetAttributeByUniqueId(p,_);else{if(_=a.GetAttributeId(p,o[f[x]]),_===-1)continue;S=a.GetAttribute(p,_)}y.attributes.push(r(o,a,p,x,M,S))}return v===o.TRIANGULAR_MESH&&(y.index=i(o,a,p)),o.destroy(p),y}function i(o,a,u){const f=u.num_faces()*3,d=f*4,p=o._malloc(d);a.GetTrianglesUInt32Array(u,d,p);const g=new Uint32Array(o.HEAPF32.buffer,p,f).slice();return o._free(p),{array:g,itemSize:1}}function r(o,a,u,c,f,d){const p=d.num_components(),v=u.num_points()*p,y=v*f.BYTES_PER_ELEMENT,x=s(o,f),M=o._malloc(y);a.GetAttributeDataArrayForAllPoints(u,d,x,y,M);const S=new f(o.HEAPF32.buffer,M,v).slice();return o._free(M),{name:c,array:S,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}const MK=new Map,WI=new qZ,jI=new wK;jI.setDecoderPath(Ua.wasmPath);WI.setDRACOLoader(jI);var bK=async(n,e)=>{const t=await Ts(MK,n,()=>new Promise((i,r)=>{gd(),WI.load(n,s=>{Ws();for(const o of s.scenes)Jf()==="linear"?o.traverse(a=>{var u;!((u=a.material)===null||u===void 0)&&u.map&&(a.material.map.encoding=sr)}):o.traverse(a=>{var u;!((u=a.material)===null||u===void 0)&&u.map&&(a.material.map.encoding=Mt)});i(s)},vd,()=>{Ws(),r()})}));return e?VI(t.scene,t.animations):t.scene},TK=Object.freeze(Object.defineProperty({__proto__:null,default:bK},Symbol.toStringTag,{value:"Module"}));Zl(iY);var EK={};const AK=n=>(pt.exports.useLayoutEffect(()=>(Vg(n),()=>{Vg({})}),[JSON.stringify(n)]),null);var CK=AK,RK=(n,e)=>{const t=pt.exports.useRef();return e===void 0?n&&(t.current=n):e&&(t.current=n),t.current},MM=n=>{const e=pt.exports.useRef(n);return e.current=n,e};const PK=console.log;let Zw=[];const LK=()=>Zw=[],DK=parseFloat(Gn.version)>17,Zx=new WeakSet;let hR=!1;var XI=(n,e,t)=>{if(DK){const r=pt.exports.useMemo(n,[]),[s]=pt.exports.useState(()=>{const o={};return queueMicrotask(()=>{Zx.has(o)||(hR=!0,e==null||e(r))}),o});return pt.exports.useLayoutEffect(()=>Zx.has(s)?()=>{e==null||e(r),t==null||t(r)}:(Zx.add(s),()=>{queueMicrotask(()=>{hR||(e==null||e(r),t==null||t(r))})}),[]),r}const[i]=pt.exports.useState(()=>{if(PK===console.log){queueMicrotask(LK);const r=n();return Zw.push(r),r}return Zw.shift()});return pt.exports.useLayoutEffect(()=>()=>{e==null||e(i),t==null||t(i)},[]),i};(function(){if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function n(_){try{return _.defaultView&&_.defaultView.frameElement||null}catch{return null}}var e=function(_){for(var w=_,T=n(w);T;)w=T.ownerDocument,T=n(w);return w}(window.document),t=[],i=null,r=null;function s(_){this.time=_.time,this.target=_.target,this.rootBounds=v(_.rootBounds),this.boundingClientRect=v(_.boundingClientRect),this.intersectionRect=v(_.intersectionRect||g()),this.isIntersecting=!!_.intersectionRect;var w=this.boundingClientRect,T=w.width*w.height,E=this.intersectionRect,R=E.width*E.height;T?this.intersectionRatio=Number((R/T).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function o(_,w){var T=w||{};if(typeof _!="function")throw new Error("callback must be a function");if(T.root&&T.root.nodeType!=1&&T.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=u(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=_,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(T.rootMargin),this.thresholds=this._initThresholds(T.threshold),this.root=T.root||null,this.rootMargin=this._rootMarginValues.map(function(E){return E.value+E.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}o.prototype.THROTTLE_TIMEOUT=100,o.prototype.POLL_INTERVAL=null,o.prototype.USE_MUTATION_OBSERVER=!0,o._setupCrossOriginUpdater=function(){return i||(i=function(_,w){!_||!w?r=g():r=y(_,w),t.forEach(function(T){T._checkForIntersections()})}),i},o._resetCrossOriginUpdater=function(){i=null,r=null},o.prototype.observe=function(_){var w=this._observationTargets.some(function(T){return T.element==_});if(!w){if(!(_&&_.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:_,entry:null}),this._monitorIntersections(_.ownerDocument),this._checkForIntersections()}},o.prototype.unobserve=function(_){this._observationTargets=this._observationTargets.filter(function(w){return w.element!=_}),this._unmonitorIntersections(_.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},o.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},o.prototype.takeRecords=function(){var _=this._queuedEntries.slice();return this._queuedEntries=[],_},o.prototype._initThresholds=function(_){var w=_||[0];return Array.isArray(w)||(w=[w]),w.sort().filter(function(T,E,R){if(typeof T!="number"||isNaN(T)||T<0||T>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return T!==R[E-1]})},o.prototype._parseRootMargin=function(_){var w=_||"0px",T=w.split(/\s+/).map(function(E){var R=/^(-?\d*\.?\d+)(px|%)$/.exec(E);if(!R)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(R[1]),unit:R[2]}});return T[1]=T[1]||T[0],T[2]=T[2]||T[0],T[3]=T[3]||T[1],T},o.prototype._monitorIntersections=function(_){var w=_.defaultView;if(!!w&&this._monitoringDocuments.indexOf(_)==-1){var T=this._checkForIntersections,E=null,R=null;this.POLL_INTERVAL?E=w.setInterval(T,this.POLL_INTERVAL):(c(w,"resize",T,!0),c(_,"scroll",T,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in w&&(R=new w.MutationObserver(T),R.observe(_,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(_),this._monitoringUnsubscribes.push(function(){var F=_.defaultView;F&&(E&&F.clearInterval(E),f(F,"resize",T,!0)),f(_,"scroll",T,!0),R&&R.disconnect()});var P=this.root&&(this.root.ownerDocument||this.root)||e;if(_!=P){var V=n(_);V&&this._monitorIntersections(V.ownerDocument)}}},o.prototype._unmonitorIntersections=function(_){var w=this._monitoringDocuments.indexOf(_);if(w!=-1){var T=this.root&&(this.root.ownerDocument||this.root)||e,E=this._observationTargets.some(function(V){var F=V.element.ownerDocument;if(F==_)return!0;for(;F&&F!=T;){var C=n(F);if(F=C&&C.ownerDocument,F==_)return!0}return!1});if(!E){var R=this._monitoringUnsubscribes[w];if(this._monitoringDocuments.splice(w,1),this._monitoringUnsubscribes.splice(w,1),R(),_!=T){var P=n(_);P&&this._unmonitorIntersections(P.ownerDocument)}}}},o.prototype._unmonitorAllIntersections=function(){var _=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var w=0;w<_.length;w++)_[w]()},o.prototype._checkForIntersections=function(){if(!(!this.root&&i&&!r)){var _=this._rootIsInDom(),w=_?this._getRootRect():g();this._observationTargets.forEach(function(T){var E=T.element,R=p(E),P=this._rootContainsTarget(E),V=T.entry,F=_&&P&&this._computeTargetAndRootIntersection(E,R,w),C=null;this._rootContainsTarget(E)?(!i||this.root)&&(C=w):C=g();var N=T.entry=new s({time:a(),target:E,boundingClientRect:R,rootBounds:C,intersectionRect:F});V?_&&P?this._hasCrossedThreshold(V,N)&&this._queuedEntries.push(N):V&&V.isIntersecting&&this._queuedEntries.push(N):this._queuedEntries.push(N)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},o.prototype._computeTargetAndRootIntersection=function(_,w,T){if(window.getComputedStyle(_).display!="none"){for(var E=w,R=M(_),P=!1;!P&&R;){var V=null,F=R.nodeType==1?window.getComputedStyle(R):{};if(F.display=="none")return null;if(R==this.root||R.nodeType==9)if(P=!0,R==this.root||R==e)i&&!this.root?!r||r.width==0&&r.height==0?(R=null,V=null,E=null):V=r:V=T;else{var C=M(R),N=C&&p(C),Q=C&&this._computeTargetAndRootIntersection(C,N,T);N&&Q?(R=C,V=y(N,Q)):(R=null,E=null)}else{var G=R.ownerDocument;R!=G.body&&R!=G.documentElement&&F.overflow!="visible"&&(V=p(R))}if(V&&(E=d(V,E)),!E)break;R=R&&M(R)}return E}},o.prototype._getRootRect=function(){var _;if(this.root&&!S(this.root))_=p(this.root);else{var w=S(this.root)?this.root:e,T=w.documentElement,E=w.body;_={top:0,left:0,right:T.clientWidth||E.clientWidth,width:T.clientWidth||E.clientWidth,bottom:T.clientHeight||E.clientHeight,height:T.clientHeight||E.clientHeight}}return this._expandRectByRootMargin(_)},o.prototype._expandRectByRootMargin=function(_){var w=this._rootMarginValues.map(function(E,R){return E.unit=="px"?E.value:E.value*(R%2?_.width:_.height)/100}),T={top:_.top-w[0],right:_.right+w[1],bottom:_.bottom+w[2],left:_.left-w[3]};return T.width=T.right-T.left,T.height=T.bottom-T.top,T},o.prototype._hasCrossedThreshold=function(_,w){var T=_&&_.isIntersecting?_.intersectionRatio||0:-1,E=w.isIntersecting?w.intersectionRatio||0:-1;if(T!==E)for(var R=0;R<this.thresholds.length;R++){var P=this.thresholds[R];if(P==T||P==E||P<T!=P<E)return!0}},o.prototype._rootIsInDom=function(){return!this.root||x(e,this.root)},o.prototype._rootContainsTarget=function(_){var w=this.root&&(this.root.ownerDocument||this.root)||e;return x(w,_)&&(!this.root||w==_.ownerDocument)},o.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},o.prototype._unregisterInstance=function(){var _=t.indexOf(this);_!=-1&&t.splice(_,1)};function a(){return window.performance&&performance.now&&performance.now()}function u(_,w){var T=null;return function(){T||(T=setTimeout(function(){_(),T=null},w))}}function c(_,w,T,E){typeof _.addEventListener=="function"?_.addEventListener(w,T,E||!1):typeof _.attachEvent=="function"&&_.attachEvent("on"+w,T)}function f(_,w,T,E){typeof _.removeEventListener=="function"?_.removeEventListener(w,T,E||!1):typeof _.detatchEvent=="function"&&_.detatchEvent("on"+w,T)}function d(_,w){var T=Math.max(_.top,w.top),E=Math.min(_.bottom,w.bottom),R=Math.max(_.left,w.left),P=Math.min(_.right,w.right),V=P-R,F=E-T;return V>=0&&F>=0&&{top:T,bottom:E,left:R,right:P,width:V,height:F}||null}function p(_){var w;try{w=_.getBoundingClientRect()}catch{}return w?(w.width&&w.height||(w={top:w.top,right:w.right,bottom:w.bottom,left:w.left,width:w.right-w.left,height:w.bottom-w.top}),w):g()}function g(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function v(_){return!_||"x"in _?_:{top:_.top,y:_.top,bottom:_.bottom,left:_.left,x:_.left,right:_.right,width:_.width,height:_.height}}function y(_,w){var T=w.top-_.top,E=w.left-_.left;return{top:T,left:E,height:w.height,width:w.width,bottom:T+w.height,right:E+w.width}}function x(_,w){for(var T=w;T;){if(T==_)return!0;T=M(T)}return!1}function M(_){var w=_.parentNode;return _.nodeType==9&&_!=e?n(_):(w&&w.assignedSlot&&(w=w.assignedSlot.parentNode),w&&w.nodeType==11&&w.host?w.host:w)}function S(_){return _&&_.nodeType===9}window.IntersectionObserver=o,window.IntersectionObserverEntry=s})();var r0={exports:{}},s0={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IK=pt.exports,OK=Symbol.for("react.element"),FK=Symbol.for("react.fragment"),kK=Object.prototype.hasOwnProperty,NK=IK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zK={key:!0,ref:!0,__self:!0,__source:!0};function qI(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)kK.call(e,i)&&!zK.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:OK,type:n,key:s,ref:o,props:r,_owner:NK.current}}s0.Fragment=FK;s0.jsx=qI;s0.jsxs=qI;r0.exports=s0;const qt=r0.exports.jsx,Zg=r0.exports.jsxs,YI=r0.exports.Fragment;Zl(EK);Gs.style.border="none";Gs.style.pointerEvents="none";Gs.style.userSelect="none";Gs.style.overflow="hidden";Ua.autoMout=!1;const BK=s=>{var o=s,{style:n,className:e,position:t,children:i}=o,r=yu(o,["style","className","position","children"]);const a=pt.exports.useRef(null);return XI(()=>{for(const u of[...Ke.children])u.userData.manager&&Ke.remove(u)}),pt.exports.useLayoutEffect(()=>{const u=a.current;if(!u)return;u.appendChild(Rn);const c=new ResizeObserver(()=>{Ua.resolution=Ua.viewportSize=[u.clientWidth,u.clientHeight]});return c.observe(u),()=>{c.disconnect()}},[]),Zg(YI,{children:[qt(CK,vt({},r)),qt("div",{ref:a,style:vt({width:"100%",height:"100%",position:t!=null?t:"absolute",top:0,left:0},n),children:i})]})};var UK=BK,ZI=(n,e)=>{const t=pt.exports.useRef({}),i=[],r=[];if(e)return[i,r];const s=t.current;for(const[o,a]of Object.entries(n)){if(o==="children")continue;const u=s[o];u!==a&&(a&&typeof a=="object"?JSON.stringify(a)!==JSON.stringify(u)&&i.push([o,a]):i.push([o,a]))}for(const o of Object.keys(s))!(o in n)&&r.push(o);return t.current=n,[i,r]};const Vc=Gn.createContext(void 0),KI=new WeakMap,VK=()=>new Map,$I=(n,e,t)=>{var i,r;const s=Ts(KI,n,VK);for(const[o,a]of e){if((i=s.get(o))===null||i===void 0||i.cancel(),a instanceof X_){s.set(o,a.get(u=>n[o]=u));continue}n[o]=a}for(const o of t)n[o]=(r=n.constructor.defaults)===null||r===void 0?void 0:r[o]},Kx=new WeakSet;var bM=(n,e,t)=>{const c=n,{children:i}=c,r=yu(c,["children"]),s=pt.exports.useContext(Vc),o=XI(()=>{const f=new t;return s&&(s.append(f),Kx.add(f)),f},f=>{const d=KI.get(f);if(d)for(const p of d.values())p.cancel();f.dispose()});pt.exports.useLayoutEffect(()=>{!s||Kx.has(o)||(s.append(o),Kx.add(o))},[s]);const[a,u]=ZI(r);return $I(o,a,u),pt.exports.useLayoutEffect(()=>{!e||(typeof e=="function"?e(o):e.current=o)},[e]),o};const HK=Gn.forwardRef((n,e)=>{const t=bM(n,e,Kv);return Gn.createElement(Vc.Provider,{value:t},n.children)});var Vr=HK;const GK=Gn.forwardRef((n,e)=>{const t=bM(n,e,lM);return Gn.createElement(Vc.Provider,{value:t})});var WK=GK;const jK=Gn.forwardRef((n,e)=>{const t=bM(n,e,uM);return Gn.createElement(Vc.Provider,{value:t},n.children)});var XK=jK;const qK=Gn.forwardRef((r,i)=>{var s=r,{name:n,onLoad:e}=s,t=yu(s,["name","onLoad"]);const o=pt.exports.useContext(Vc),[a,u]=pt.exports.useState();pt.exports.useLayoutEffect(()=>{if(!(!o||!n)){if("loadedResolvable"in o){const d=o.loadedResolvable.then(()=>u(o.find(n)));return()=>{d.cancel()}}u(o.find(n))}},[o,n]);const[c,f]=ZI(t,!a);return a&&$I(a,c,f),pt.exports.useLayoutEffect(()=>{!i||!a||(typeof i=="function"?i(a):i.current=a)},[i,a]),pt.exports.useLayoutEffect(()=>{a&&(e==null||e())},[a]),qt(Vc.Provider,{value:a,children:t.children})});var wl=qK,Qh=(n,e=!0)=>{const t=MM(n);pt.exports.useLayoutEffect(()=>{if(!e)return;const i=ir(()=>t.current());return()=>{i.cancel()}},[e])},YK=n=>{const[e,t]=pt.exports.useState(""),i=MM(n);return pt.exports.useLayoutEffect(()=>{const r=new tI;let s="";return r.onKeyDown=o=>{s!==o&&(s=o,t([...Ji].join(" ")))},r.onKeyUp=()=>{s="",t([...Ji].join(" "))},r.onKeyPress=o=>{var a;return(a=i.current)===null||a===void 0?void 0:a.call(i,o)},()=>{r.dispose()}},[]),e};const ZK=[Gn.lazy(()=>import("./Reticle0.a407c57d.js")),Gn.lazy(()=>import("./Reticle1.3af1c6fd.js")),Gn.lazy(()=>import("./Reticle2.515cf7c5.js")),Gn.lazy(()=>import("./Reticle3.f693652b.js")),Gn.lazy(()=>import("./Reticle4.a8847cd8.js")),Gn.lazy(()=>import("./Reticle5.108aaba5.js")),Gn.lazy(()=>import("./Reticle6.bb8fedbf.js")),Gn.lazy(()=>import("./Reticle7.c48196db.js"))],KK=t=>{var i=t,{variant:n=0}=i,e=yu(i,["variant"]);return Gn.createElement(Gn.Suspense,{fallback:null},Gn.createElement(ZK[n],e))};var $K=KK,Ve={},Kw={exports:{}};(function(n,e){(function(t,i){var r="1.0.2",s="",o="?",a="function",u="undefined",c="object",f="string",d="major",p="model",g="name",v="type",y="vendor",x="version",M="architecture",S="console",_="mobile",w="tablet",T="smarttv",E="wearable",R="embedded",P=255,V="Amazon",F="Apple",C="ASUS",N="BlackBerry",Q="Browser",G="Chrome",Y="Edge",X="Firefox",K="Google",B="Huawei",Z="LG",ee="Microsoft",se="Motorola",ae="Opera",Le="Samsung",ze="Sony",Pe="Xiaomi",oe="Zebra",rt="Facebook",Xe=function(k,D){var J={};for(var he in k)D[he]&&D[he].length%2===0?J[he]=D[he].concat(k[he]):J[he]=k[he];return J},Ze=function(k){for(var D={},J=0;J<k.length;J++)D[k[J].toUpperCase()]=k[J];return D},Se=function(k,D){return typeof k===f?Qe(D).indexOf(Qe(k))!==-1:!1},Qe=function(k){return k.toLowerCase()},ue=function(k){return typeof k===f?k.replace(/[^\d\.]/g,s).split(".")[0]:i},fe=function(k,D){if(typeof k===f)return k=k.replace(/^\s\s*/,s).replace(/\s\s*$/,s),typeof D===u?k:k.substring(0,P)},ye=function(k,D){for(var J=0,he,me,Ce,be,z,xe;J<D.length&&!z;){var He=D[J],Ee=D[J+1];for(he=me=0;he<He.length&&!z;)if(z=He[he++].exec(k),z)for(Ce=0;Ce<Ee.length;Ce++)xe=z[++me],be=Ee[Ce],typeof be===c&&be.length>0?be.length===2?typeof be[1]==a?this[be[0]]=be[1].call(this,xe):this[be[0]]=be[1]:be.length===3?typeof be[1]===a&&!(be[1].exec&&be[1].test)?this[be[0]]=xe?be[1].call(this,xe,be[2]):i:this[be[0]]=xe?xe.replace(be[1],be[2]):i:be.length===4&&(this[be[0]]=xe?be[3].call(this,xe.replace(be[1],be[2])):i):this[be]=xe||i;J+=2}},Ne=function(k,D){for(var J in D)if(typeof D[J]===c&&D[J].length>0){for(var he=0;he<D[J].length;he++)if(Se(D[J][he],k))return J===o?i:J}else if(Se(D[J],k))return J===o?i:J;return k},De={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},qe={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},$e={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[x,[g,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[x,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,x],[/opios[\/ ]+([\w\.]+)/i],[x,[g,ae+" Mini"]],[/\bopr\/([\w\.]+)/i],[x,[g,ae]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[g,x],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[x,[g,"UC"+Q]],[/\bqbcore\/([\w\.]+)/i],[x,[g,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[x,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[x,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[x,[g,"IE"]],[/yabrowser\/([\w\.]+)/i],[x,[g,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure "+Q],x],[/\bfocus\/([\w\.]+)/i],[x,[g,X+" Focus"]],[/\bopt\/([\w\.]+)/i],[x,[g,ae+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[x,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[x,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[x,[g,ae+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[x,[g,"MIUI "+Q]],[/fxios\/([-\w\.]+)/i],[x,[g,X]],[/\bqihu|(qi?ho?o?|360)browser/i],[[g,"360 "+Q]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1 "+Q],x],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],x],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[g,x],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,rt],x],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[g,x],[/\bgsa\/([\w\.]+) .*safari\//i],[x,[g,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[x,[g,G+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,G+" WebView"],x],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[x,[g,"Android "+Q]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,x],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[x,[g,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[x,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[x,Ne,De]],[/(webkit|khtml)\/([\w\.]+)/i],[g,x],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],x],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[x,[g,X+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[g,x]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[M,"amd64"]],[/(ia32(?=;))/i],[[M,Qe]],[/((?:i[346]|x)86)[;\)]/i],[[M,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[M,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[M,"armhf"]],[/windows (ce|mobile); ppc;/i],[[M,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[M,/ower/,s,Qe]],[/(sun4\w)[;\)]/i],[[M,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[M,Qe]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[p,[y,Le],[v,w]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[p,[y,Le],[v,_]],[/\((ip(?:hone|od)[\w ]*);/i],[p,[y,F],[v,_]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[p,[y,F],[v,w]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[p,[y,B],[v,w]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[p,[y,B],[v,_]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[p,/_/g," "],[y,Pe],[v,_]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[p,/_/g," "],[y,Pe],[v,w]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[p,[y,"OPPO"],[v,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[p,[y,"Vivo"],[v,_]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[p,[y,"Realme"],[v,_]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[p,[y,se],[v,_]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[p,[y,se],[v,w]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[p,[y,Z],[v,w]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[p,[y,Z],[v,_]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[p,[y,"Lenovo"],[v,w]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[p,/_/g," "],[y,"Nokia"],[v,_]],[/(pixel c)\b/i],[p,[y,K],[v,w]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[p,[y,K],[v,_]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[y,ze],[v,_]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[p,"Xperia Tablet"],[y,ze],[v,w]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[p,[y,"OnePlus"],[v,_]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[p,[y,V],[v,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[p,/(.+)/g,"Fire Phone $1"],[y,V],[v,_]],[/(playbook);[-\w\),; ]+(rim)/i],[p,y,[v,w]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[p,[y,N],[v,_]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[p,[y,C],[v,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[p,[y,C],[v,_]],[/(nexus 9)/i],[p,[y,"HTC"],[v,w]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[y,[p,/_/g," "],[v,_]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[p,[y,"Acer"],[v,w]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[p,[y,"Meizu"],[v,_]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[p,[y,"Sharp"],[v,_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[y,p,[v,_]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[y,p,[v,w]],[/(surface duo)/i],[p,[y,ee],[v,w]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[p,[y,"Fairphone"],[v,_]],[/(u304aa)/i],[p,[y,"AT&T"],[v,_]],[/\bsie-(\w*)/i],[p,[y,"Siemens"],[v,_]],[/\b(rct\w+) b/i],[p,[y,"RCA"],[v,w]],[/\b(venue[\d ]{2,7}) b/i],[p,[y,"Dell"],[v,w]],[/\b(q(?:mv|ta)\w+) b/i],[p,[y,"Verizon"],[v,w]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[p,[y,"Barnes & Noble"],[v,w]],[/\b(tm\d{3}\w+) b/i],[p,[y,"NuVision"],[v,w]],[/\b(k88) b/i],[p,[y,"ZTE"],[v,w]],[/\b(nx\d{3}j) b/i],[p,[y,"ZTE"],[v,_]],[/\b(gen\d{3}) b.+49h/i],[p,[y,"Swiss"],[v,_]],[/\b(zur\d{3}) b/i],[p,[y,"Swiss"],[v,w]],[/\b((zeki)?tb.*\b) b/i],[p,[y,"Zeki"],[v,w]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[y,"Dragon Touch"],p,[v,w]],[/\b(ns-?\w{0,9}) b/i],[p,[y,"Insignia"],[v,w]],[/\b((nxa|next)-?\w{0,9}) b/i],[p,[y,"NextBook"],[v,w]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[y,"Voice"],p,[v,_]],[/\b(lvtel\-)?(v1[12]) b/i],[[y,"LvTel"],p,[v,_]],[/\b(ph-1) /i],[p,[y,"Essential"],[v,_]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[p,[y,"Envizen"],[v,w]],[/\b(trio[-\w\. ]+) b/i],[p,[y,"MachSpeed"],[v,w]],[/\btu_(1491) b/i],[p,[y,"Rotor"],[v,w]],[/(shield[\w ]+) b/i],[p,[y,"Nvidia"],[v,w]],[/(sprint) (\w+)/i],[y,p,[v,_]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[y,ee],[v,_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[p,[y,oe],[v,w]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[p,[y,oe],[v,_]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[y,p,[v,S]],[/droid.+; (shield) bui/i],[p,[y,"Nvidia"],[v,S]],[/(playstation [345portablevi]+)/i],[p,[y,ze],[v,S]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[p,[y,ee],[v,S]],[/smart-tv.+(samsung)/i],[y,[v,T]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[y,Le],[v,T]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[y,Z],[v,T]],[/(apple) ?tv/i],[y,[p,F+" TV"],[v,T]],[/crkey/i],[[p,G+"cast"],[y,K],[v,T]],[/droid.+aft(\w)( bui|\))/i],[p,[y,V],[v,T]],[/\(dtv[\);].+(aquos)/i],[p,[y,"Sharp"],[v,T]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[y,fe],[p,fe],[v,T]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[v,T]],[/((pebble))app/i],[y,p,[v,E]],[/droid.+; (glass) \d/i],[p,[y,K],[v,E]],[/droid.+; (wt63?0{2,3})\)/i],[p,[y,oe],[v,E]],[/(quest( 2)?)/i],[p,[y,rt],[v,E]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[y,[v,R]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[p,[v,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[p,[v,w]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[v,w]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[v,_]],[/(android[-\w\. ]{0,9});.+buil/i],[p,[y,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[x,[g,Y+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[x,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[g,x],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[x,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,x],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[g,[x,Ne,qe]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[g,"Windows"],[x,Ne,qe]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[x,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,"Mac OS"],[x,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[x,g],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[g,x],[/\(bb(10);/i],[x,[g,N]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[x,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[x,[g,X+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[x,[g,"webOS"]],[/crkey\/([\d\.]+)/i],[x,[g,G+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[g,"Chromium OS"],x],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,x],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],x],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[g,x]]},Ue=function(k,D){if(typeof k===c&&(D=k,k=i),!(this instanceof Ue))return new Ue(k,D).getResult();var J=k||(typeof t!==u&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:s),he=D?Xe($e,D):$e;return this.getBrowser=function(){var me={};return me[g]=i,me[x]=i,ye.call(me,J,he.browser),me.major=ue(me.version),me},this.getCPU=function(){var me={};return me[M]=i,ye.call(me,J,he.cpu),me},this.getDevice=function(){var me={};return me[y]=i,me[p]=i,me[v]=i,ye.call(me,J,he.device),me},this.getEngine=function(){var me={};return me[g]=i,me[x]=i,ye.call(me,J,he.engine),me},this.getOS=function(){var me={};return me[g]=i,me[x]=i,ye.call(me,J,he.os),me},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return J},this.setUA=function(me){return J=typeof me===f&&me.length>P?fe(me,P):me,this},this.setUA(J),this};Ue.VERSION=r,Ue.BROWSER=Ze([g,x,d]),Ue.CPU=Ze([M]),Ue.DEVICE=Ze([p,y,v,S,_,T,w,E,R]),Ue.ENGINE=Ue.OS=Ze([g,x]),n.exports&&(e=n.exports=Ue),e.UAParser=Ue;var _t=typeof t!==u&&(t.jQuery||t.Zepto);if(_t&&!_t.ua){var st=new Ue;_t.ua=st.getResult(),_t.ua.get=function(){return st.getUA()},_t.ua.set=function(k){st.setUA(k);var D=st.getResult();for(var J in D)_t.ua[J]=D[J]}}})(typeof window=="object"?window:Vu)})(Kw,Kw.exports);Object.defineProperty(Ve,"__esModule",{value:!0});function QK(n){return n&&typeof n=="object"&&"default"in n?n.default:n}var Ti=pt.exports,fn=QK(Ti),QI=Kw.exports,Ja=new QI,Ci=Ja.getBrowser(),JK=Ja.getCPU(),Cr=Ja.getDevice(),TM=Ja.getEngine(),el=Ja.getOS(),Rd=Ja.getUA(),JI=function(e){return Ja.setUA(e)},Pd=function(e){if(!e){console.error("No userAgent string was provided");return}var t=new QI(e);return{UA:t,browser:t.getBrowser(),cpu:t.getCPU(),device:t.getDevice(),engine:t.getEngine(),os:t.getOS(),ua:t.getUA(),setUserAgent:function(r){return t.setUA(r)}}},eO=Object.freeze({ClientUAInstance:Ja,browser:Ci,cpu:JK,device:Cr,engine:TM,os:el,ua:Rd,setUa:JI,parseUserAgent:Pd});function fR(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function e$(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fR(Object(t),!0).forEach(function(i){i$(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fR(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function wf(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wf=function(e){return typeof e}:wf=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wf(n)}function t$(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function dR(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function n$(n,e,t){return e&&dR(n.prototype,e),t&&dR(n,t),n}function i$(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $w(){return $w=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},$w.apply(this,arguments)}function r$(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&Jw(n,e)}function Qw(n){return Qw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Qw(n)}function Jw(n,e){return Jw=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},Jw(n,e)}function s$(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function is(n,e){if(n==null)return{};var t=s$(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,i)||(t[i]=n[i]))}return t}function Ym(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function o$(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ym(n)}function a$(n,e){return l$(n)||u$(n,e)||c$(n,e)||h$()}function l$(n){if(Array.isArray(n))return n}function u$(n,e){var t=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(u){s=!0,a=u}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function c$(n,e){if(!!n){if(typeof n=="string")return pR(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return pR(n,e)}}function pR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function h$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Mi={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},or={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},lh={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},f$={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},d$=function(e){switch(e){case Mi.Mobile:return{isMobile:!0};case Mi.Tablet:return{isTablet:!0};case Mi.SmartTv:return{isSmartTV:!0};case Mi.Console:return{isConsole:!0};case Mi.Wearable:return{isWearable:!0};case Mi.Browser:return{isBrowser:!0};case Mi.Embedded:return{isEmbedded:!0};default:return f$}},p$=function(e){return JI(e)},at=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return e||t},EM=function(){return typeof window!="undefined"&&(window.navigator||navigator)?window.navigator||navigator:!1},AM=function(e){var t=EM();return t&&t.platform&&(t.platform.indexOf(e)!==-1||t.platform==="MacIntel"&&t.maxTouchPoints>1&&!window.MSStream)},m$=function(e,t,i,r,s){return{isBrowser:e,browserMajorVersion:at(t.major),browserFullVersion:at(t.version),browserName:at(t.name),engineName:at(i.name),engineVersion:at(i.version),osName:at(r.name),osVersion:at(r.version),userAgent:at(s)}},mR=function(e,t,i,r){return e$({},e,{vendor:at(t.vendor),model:at(t.model),os:at(i.name),osVersion:at(i.version),ua:at(r)})},g$=function(e,t,i,r){return{isSmartTV:e,engineName:at(t.name),engineVersion:at(t.version),osName:at(i.name),osVersion:at(i.version),userAgent:at(r)}},v$=function(e,t,i,r){return{isConsole:e,engineName:at(t.name),engineVersion:at(t.version),osName:at(i.name),osVersion:at(i.version),userAgent:at(r)}},y$=function(e,t,i,r){return{isWearable:e,engineName:at(t.name),engineVersion:at(t.version),osName:at(i.name),osVersion:at(i.version),userAgent:at(r)}},x$=function(e,t,i,r,s){return{isEmbedded:e,vendor:at(t.vendor),model:at(t.model),engineName:at(i.name),engineVersion:at(i.version),osName:at(r.name),osVersion:at(r.version),userAgent:at(s)}};function _$(n){var e=n?Pd(n):eO,t=e.device,i=e.browser,r=e.engine,s=e.os,o=e.ua,a=d$(t.type),u=a.isBrowser,c=a.isMobile,f=a.isTablet,d=a.isSmartTV,p=a.isConsole,g=a.isWearable,v=a.isEmbedded;if(u)return m$(u,i,r,s,o);if(d)return g$(d,r,s,o);if(p)return v$(p,r,s,o);if(c||f)return mR(a,t,s,o);if(g)return y$(g,r,s,o);if(v)return x$(v,t,r,s,o)}var tO=function(e){var t=e.type;return t===Mi.Mobile},nO=function(e){var t=e.type;return t===Mi.Tablet},iO=function(e){var t=e.type;return t===Mi.Mobile||t===Mi.Tablet},rO=function(e){var t=e.type;return t===Mi.SmartTv},Kg=function(e){var t=e.type;return t===Mi.Browser},sO=function(e){var t=e.type;return t===Mi.Wearable},oO=function(e){var t=e.type;return t===Mi.Console},aO=function(e){var t=e.type;return t===Mi.Embedded},lO=function(e){var t=e.vendor;return at(t)},uO=function(e){var t=e.model;return at(t)},cO=function(e){var t=e.type;return at(t,"browser")},hO=function(e){var t=e.name;return t===lh.Android},fO=function(e){var t=e.name;return t===lh.Windows},dO=function(e){var t=e.name;return t===lh.MAC_OS},pO=function(e){var t=e.name;return t===lh.WindowsPhone},mO=function(e){var t=e.name;return t===lh.IOS},gO=function(e){var t=e.version;return at(t)},vO=function(e){var t=e.name;return at(t)},yO=function(e){var t=e.name;return t===or.Chrome},xO=function(e){var t=e.name;return t===or.Firefox},_O=function(e){var t=e.name;return t===or.Chromium},$g=function(e){var t=e.name;return t===or.Edge},wO=function(e){var t=e.name;return t===or.Yandex},SO=function(e){var t=e.name;return t===or.Safari||t===or.MobileSafari},MO=function(e){var t=e.name;return t===or.MobileSafari},bO=function(e){var t=e.name;return t===or.Opera},TO=function(e){var t=e.name;return t===or.InternetExplorer||t===or.Ie},EO=function(e){var t=e.name;return t===or.MIUI},AO=function(e){var t=e.name;return t===or.SamsungBrowser},CO=function(e){var t=e.version;return at(t)},RO=function(e){var t=e.major;return at(t)},PO=function(e){var t=e.name;return at(t)},LO=function(e){var t=e.name;return at(t)},DO=function(e){var t=e.version;return at(t)},IO=function(){var e=EM(),t=e&&e.userAgent&&e.userAgent.toLowerCase();return typeof t=="string"?/electron/.test(t):!1},pc=function(e){return typeof e=="string"&&e.indexOf("Edg/")!==-1},OO=function(){var e=EM();return e&&(/iPad|iPhone|iPod/.test(e.platform)||e.platform==="MacIntel"&&e.maxTouchPoints>1)&&!window.MSStream},Fs=function(){return AM("iPad")},FO=function(){return AM("iPhone")},kO=function(){return AM("iPod")},NO=function(e){return at(e)};function zO(n){var e=n||eO,t=e.device,i=e.browser,r=e.os,s=e.engine,o=e.ua;return{isSmartTV:rO(t),isConsole:oO(t),isWearable:sO(t),isEmbedded:aO(t),isMobileSafari:MO(i)||Fs(),isChromium:_O(i),isMobile:iO(t)||Fs(),isMobileOnly:tO(t),isTablet:nO(t)||Fs(),isBrowser:Kg(t),isDesktop:Kg(t),isAndroid:hO(r),isWinPhone:pO(r),isIOS:mO(r)||Fs(),isChrome:yO(i),isFirefox:xO(i),isSafari:SO(i),isOpera:bO(i),isIE:TO(i),osVersion:gO(r),osName:vO(r),fullBrowserVersion:CO(i),browserVersion:RO(i),browserName:PO(i),mobileVendor:lO(t),mobileModel:uO(t),engineName:LO(s),engineVersion:DO(s),getUA:NO(o),isEdge:$g(i)||pc(o),isYandex:wO(i),deviceType:cO(t),isIOS13:OO(),isIPad13:Fs(),isIPhone13:FO(),isIPod13:kO(),isElectron:IO(),isEdgeChromium:pc(o),isLegacyEdge:$g(i)&&!pc(o),isWindows:fO(r),isMacOs:dO(r),isMIUI:EO(i),isSamsungBrowser:AO(i)}}var BO=rO(Cr),UO=oO(Cr),VO=sO(Cr),w$=aO(Cr),S$=MO(Ci)||Fs(),M$=_O(Ci),o0=iO(Cr)||Fs(),HO=tO(Cr),GO=nO(Cr)||Fs(),WO=Kg(Cr),b$=Kg(Cr),jO=hO(el),XO=pO(el),qO=mO(el)||Fs(),T$=yO(Ci),E$=xO(Ci),A$=SO(Ci),C$=bO(Ci),YO=TO(Ci),R$=gO(el),P$=vO(el),L$=CO(Ci),D$=RO(Ci),I$=PO(Ci),O$=lO(Cr),F$=uO(Cr),k$=LO(TM),N$=DO(TM),z$=NO(Rd),B$=$g(Ci)||pc(Rd),U$=wO(Ci),V$=cO(Cr),H$=OO(),G$=Fs(),W$=FO(),j$=kO(),X$=IO(),q$=pc(Rd),Y$=$g(Ci)&&!pc(Rd),Z$=fO(el),K$=dO(el),$$=EO(Ci),Q$=AO(Ci),J$=function(e){if(!e||typeof e!="string"){console.error("No valid user agent string was provided");return}var t=Pd(e),i=t.device,r=t.browser,s=t.os,o=t.engine,a=t.ua;return zO({device:i,browser:r,os:s,engine:o,ua:a})},eQ=function(e){var t=e.renderWithFragment,i=e.children,r=is(e,["renderWithFragment","children"]);return jO?t?fn.createElement(Ti.Fragment,null,i):fn.createElement("div",r,i):null},tQ=function(e){var t=e.renderWithFragment,i=e.children,r=is(e,["renderWithFragment","children"]);return WO?t?fn.createElement(Ti.Fragment,null,i):fn.createElement("div",r,i):null},nQ=function(e){var t=e.renderWithFragment,i=e.children,r=is(e,["renderWithFragment","children"]);return YO?t?fn.createElement(Ti.Fragment,null,i):fn.createElement("div",r,i):null},iQ=function(e){var t=e.renderWithFragment,i=e.children,r=is(e,["renderWithFragment","children"]);return qO?t?fn.createElement(Ti.Fragment,null,i):fn.createElement("div",r,i):null},rQ=function(e){var t=e.renderWithFragment,i=e.children,r=is(e,["renderWithFragment","children"]);return o0?t?fn.createElement(Ti.Fragment,null,i):fn.createElement("div",r,i):null},sQ=function(e){var t=e.renderWithFragment,i=e.children,r=is(e,["renderWithFragment","children"]);return GO?t?fn.createElement(Ti.Fragment,null,i):fn.createElement("div",r,i):null},oQ=function(e){var t=e.renderWithFragment,i=e.children,r=is(e,["renderWithFragment","children"]);return XO?t?fn.createElement(Ti.Fragment,null,i):fn.createElement("div",r,i):null},aQ=function(e){var t=e.renderWithFragment,i=e.children;e.viewClassName,e.style;var r=is(e,["renderWithFragment","children","viewClassName","style"]);return HO?t?fn.createElement(Ti.Fragment,null,i):fn.createElement("div",r,i):null},lQ=function(e){var t=e.renderWithFragment,i=e.children,r=is(e,["renderWithFragment","children"]);return BO?t?fn.createElement(Ti.Fragment,null,i):fn.createElement("div",r,i):null},uQ=function(e){var t=e.renderWithFragment,i=e.children,r=is(e,["renderWithFragment","children"]);return UO?t?fn.createElement(Ti.Fragment,null,i):fn.createElement("div",r,i):null},cQ=function(e){var t=e.renderWithFragment,i=e.children,r=is(e,["renderWithFragment","children"]);return VO?t?fn.createElement(Ti.Fragment,null,i):fn.createElement("div",r,i):null},hQ=function(e){var t=e.renderWithFragment,i=e.children;e.viewClassName,e.style;var r=e.condition,s=is(e,["renderWithFragment","children","viewClassName","style","condition"]);return r?t?fn.createElement(Ti.Fragment,null,i):fn.createElement("div",s,i):null};function fQ(n){return function(e){r$(t,e);function t(i){var r;return t$(this,t),r=o$(this,Qw(t).call(this,i)),r.isEventListenerAdded=!1,r.handleOrientationChange=r.handleOrientationChange.bind(Ym(r)),r.onOrientationChange=r.onOrientationChange.bind(Ym(r)),r.onPageLoad=r.onPageLoad.bind(Ym(r)),r.state={isLandscape:!1,isPortrait:!1},r}return n$(t,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var r=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:r===0,isLandscape:r===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window=="undefined"?"undefined":wf(window))!==void 0&&o0&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return fn.createElement(n,$w({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),t}(fn.Component)}function dQ(){var n=Ti.useState(function(){var s=window.innerWidth>window.innerHeight?90:0;return{isPortrait:s===0,isLandscape:s===90,orientation:s===0?"portrait":"landscape"}}),e=a$(n,2),t=e[0],i=e[1],r=Ti.useCallback(function(){var s=window.innerWidth>window.innerHeight?90:0,o={isPortrait:s===0,isLandscape:s===90,orientation:s===0?"portrait":"landscape"};t.orientation!==o.orientation&&i(o)},[t.orientation]);return Ti.useEffect(function(){return(typeof window=="undefined"?"undefined":wf(window))!==void 0&&o0&&(r(),window.addEventListener("load",r,!1),window.addEventListener("resize",r,!1)),function(){window.removeEventListener("resize",r,!1),window.removeEventListener("load",r,!1)}},[r]),t}function ZO(n){var e=n||window.navigator.userAgent;return Pd(e)}function pQ(n){var e=n||window.navigator.userAgent,t=ZO(e),i=zO(t);return[i,t]}Ve.AndroidView=eQ;Ve.BrowserTypes=or;Ve.BrowserView=tQ;Ve.ConsoleView=uQ;Ve.CustomView=hQ;Ve.IEView=nQ;Ve.IOSView=iQ;Ve.MobileOnlyView=aQ;Ve.MobileView=rQ;Ve.OsTypes=lh;Ve.SmartTVView=lQ;Ve.TabletView=sQ;Ve.WearableView=cQ;Ve.WinPhoneView=oQ;Ve.browserName=I$;Ve.browserVersion=D$;Ve.deviceDetect=_$;Ve.deviceType=V$;Ve.engineName=k$;Ve.engineVersion=N$;Ve.fullBrowserVersion=L$;Ve.getSelectorsByUserAgent=J$;Ve.getUA=z$;Ve.isAndroid=jO;Ve.isBrowser=WO;Ve.isChrome=T$;Ve.isChromium=M$;Ve.isConsole=UO;Ve.isDesktop=b$;Ve.isEdge=B$;Ve.isEdgeChromium=q$;Ve.isElectron=X$;Ve.isEmbedded=w$;Ve.isFirefox=E$;Ve.isIE=YO;Ve.isIOS=qO;Ve.isIOS13=H$;Ve.isIPad13=G$;Ve.isIPhone13=W$;Ve.isIPod13=j$;Ve.isLegacyEdge=Y$;Ve.isMIUI=$$;Ve.isMacOs=K$;var gR=Ve.isMobile=o0;Ve.isMobileOnly=HO;Ve.isMobileSafari=S$;Ve.isOpera=C$;Ve.isSafari=A$;Ve.isSamsungBrowser=Q$;Ve.isSmartTV=BO;Ve.isTablet=GO;Ve.isWearable=VO;Ve.isWinPhone=XO;Ve.isWindows=Z$;Ve.isYandex=U$;Ve.mobileModel=F$;Ve.mobileVendor=O$;Ve.osName=P$;Ve.osVersion=R$;Ve.parseUserAgent=Pd;Ve.setUserAgent=p$;Ve.useDeviceData=ZO;Ve.useDeviceSelectors=pQ;Ve.useMobileOrientation=dQ;Ve.withOrientationChange=fQ;const e1=100,$x=e1/2,mQ=n=>{const[e,t]=pt.exports.useState(null);return pt.exports.useEffect(()=>{if(!e)return;let i=!1;const r=()=>{const{left:d,right:p,top:g,bottom:v}=e.getBoundingClientRect();return{x:(d+p)/2,y:(g+v)/2}},s=d=>{i=!0;const{x:p,y:g}=r();n({deltaX:d.clientX-p,deltaY:d.clientY-g})},o=d=>{d.stopPropagation(),d.preventDefault(),i=!0;const{x:p,y:g}=r();n({deltaX:d.targetTouches[0].clientX-p,deltaY:d.targetTouches[0].clientY-g})},a=d=>{if(!i)return;const{x:p,y:g}=r();n({deltaX:d.clientX-p,deltaY:d.clientY-g})},u=d=>{if(d.stopPropagation(),!i)return;const{x:p,y:g}=r();n({deltaX:d.targetTouches[0].clientX-p,deltaY:d.targetTouches[0].clientY-g})},c=()=>{i=!1,n({deltaX:0,deltaY:0})},f=d=>{d.stopPropagation(),i=!1,n({deltaX:0,deltaY:0})};return gR?(e.addEventListener("touchstart",o),e.addEventListener("touchmove",u),e.addEventListener("touchend",f)):(e.addEventListener("mousedown",s),document.addEventListener("mousemove",a),document.addEventListener("mouseup",c)),()=>{gR?(e.removeEventListener("touchstart",o),e.removeEventListener("touchmove",u),e.removeEventListener("touchend",f)):(e.removeEventListener("mousedown",s),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",c))}},[e]),t},vR=qt("div",{style:{width:"100%",height:"100%",borderRadius:9999,backgroundColor:"currentColor",border:"1px solid white",opacity:.25}}),gQ=u=>{var c=u,{onMove:n,onMoveStart:e,onMoveEnd:t,position:i="bottom-left",style:r,outerElement:s,innerElement:o}=c,a=yu(c,["onMove","onMoveStart","onMoveEnd","position","style","outerElement","innerElement"]);const[f,d]=pt.exports.useState([0,0,0]),p=MM(f),g=f[0]!==0||f[1]!==0,v=RK(g);pt.exports.useLayoutEffect(()=>{if(!v)return;const S={x:0,y:0,angle:0};if(g?e==null||e(S):t==null||t(S),n==null||n(S),!g)return;let _;const w=()=>_=requestAnimationFrame(()=>{w();const[T,E,R]=p.current;n==null||n({x:T,y:E,angle:R})});return w(),()=>{cancelAnimationFrame(_)}},[g,v]);const y=mQ(({deltaX:S,deltaY:_})=>{const w=Math.atan2(_,S)*Fn,T=Math.min(kj(0,0,S,_),$x),{x:E,y:R}=Nj(0,0,w,T);d([E,R,w])}),[x,M]=i.split("-");return Zg("div",Ii(vt({},a),{ref:y,style:vt({width:e1,height:e1,color:"#999999",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:M==="left"?"0px":void 0,right:M==="right"?"0px":void 0,top:x==="top"?"0px":void 0,bottom:x==="bottom"?"0px":void 0,margin:"5%"},r),children:[qt("div",{style:{position:"absolute",width:"100%",height:"100%"},children:s!=null?s:vR}),qt("div",{style:{width:$x,height:$x,transform:`translate(${f[0]}px, ${f[1]}px)`},children:o!=null?o:vR})]}))};var vQ=gQ;function yQ(){const n=YK(),[e,t]=pt.exports.useState(!1),[i,r]=pt.exports.useState(!1),[s,o]=pt.exports.useState(!1),[a,u]=pt.exports.useState(!1),[c,f]=pt.exports.useState(!1),[d,p]=pt.exports.useState(!1),[g,v]=pt.exports.useState(!1),[y,x]=pt.exports.useState(!1),M=pt.exports.createRef(),S=pt.exports.createRef(),_=pt.exports.createRef();let[w,T]=pt.exports.useState(new Set),E="idle";return n==="w"&&(E="running"),n==="s"&&(E="walkingBackwards"),n==="w e"&&(E="running"),n==="e"&&(E="running"),n==="Space"&&(E="jumping"),n==="d"&&(E="dancing"),Qh(()=>{S.current.moveForward(-10)},n==="w"),Qh(()=>{S.current.moveForward(1.8)},n==="s"),Qh(()=>{S.current.moveForward(-15)},n==="w e"),Qh(()=>{S.current.moveForward(-10)},n==="e"),Qh(()=>{S.current.moveForward(-2),S.current.y+=5},n==="Space"),Zg(YI,{children:[Zg(UK,{children:[qt(WK,{texture:"skybox.jpg"}),qt(XK,{active:!0,mouseControl:!0,innerY:66,ref:_,children:qt(Vr,{ref:S,src:"girl.fbx",physics:w.size<9?"character":"map",animations:{idle:"idle.fbx",walking:"walking.fbx",walkingBackwards:"walking-backwards.fbx",running:"running.fbx",jumping:"jumping.fbx",dancing:"dancing.fbx"},animation:E,scale:1,x:w.size<9?-221.3:209.39,y:w.size<9?-1300.07:-317.7,z:w.size<9?-6722.07:703.66,rotationY:180})}),qt(Vr,{ref:M,src:w.size<9?"map/scene.gltf":"myhome.fbx",scale:40,physics:"map"}),qt(Vr,{src:"dragon_balls\\scene.gltf",scale:3,physics:"map",x:-221.3,y:-1300.07,z:-6722.07}),qt(Vr,{src:"dragon_ball.fbx",physics:"map",x:516.29,y:-1198.63,z:173.6,scale:.5,children:qt(wl,{name:"Two Star_02 - Default_0",outline:e,onClick:()=>{t(!0),w.add(1),console.log(w),w.size===7&&alert("\u9F99\u73E0\u6536\u96C6\u6210\u529F\uFF0C\u9F99\u5DF2\u7ECF\u51FA\u73B0\u5728\u67D0\u4E2A\u5730\u65B9")}})}),qt(Vr,{id:"two",src:"dragon_ball.fbx",physics:"map",x:-980.8,y:-801.4,z:2693.9,scale:.8,children:qt(wl,{name:"Two Star_02 - Default_0",outline:i,onClick:()=>{r(!0),w.add(2),console.log(w),w.size===7&&alert("\u9F99\u73E0\u6536\u96C6\u6210\u529F\uFF0C\u9F99\u5DF2\u7ECF\u51FA\u73B0\u5728\u67D0\u4E2A\u5730\u65B9")}})}),qt(Vr,{src:"dragon_ball.fbx",physics:"map",x:-420.9,y:-1289.5,z:-3538.2,scale:.5,children:qt(wl,{name:"Two Star_02 - Default_0",outline:s,onClick:()=>{o(!0),w.add(3),console.log(w),w.size===7&&alert("\u9F99\u73E0\u6536\u96C6\u6210\u529F\uFF0C\u9F99\u5DF2\u7ECF\u51FA\u73B0\u5728\u67D0\u4E2A\u5730\u65B9")}})}),qt(Vr,{src:"dragon_ball.fbx",physics:"map",x:-676.3,y:-1900.2,z:6343.7,scale:.8,children:qt(wl,{name:"Two Star_02 - Default_0",outline:a,onClick:()=>{u(!0),w.add(4),console.log(w),w.size===7&&alert("\u9F99\u73E0\u6536\u96C6\u6210\u529F\uFF0C\u9F99\u5DF2\u7ECF\u51FA\u73B0\u5728\u67D0\u4E2A\u5730\u65B9")}})}),qt(Vr,{src:"dragon_ball.fbx",physics:"map",x:-898.7,y:-1231.8,z:3563.8,scale:.5,children:qt(wl,{name:"Two Star_02 - Default_0",outline:c,onClick:()=>{f(!0),w.add(5),console.log(w),w.size===7&&alert("\u9F99\u73E0\u6536\u96C6\u6210\u529F\uFF0C\u9F99\u5DF2\u7ECF\u51FA\u73B0\u5728\u67D0\u4E2A\u5730\u65B9")}})}),qt(Vr,{src:"dragon_ball.fbx",physics:"map",x:395.9,y:-1308.6,z:5900.3,scale:.8,children:qt(wl,{name:"Two Star_02 - Default_0",outline:d,onClick:()=>{p(!0),w.add(6),console.log(w),w.size===7&&alert("\u9F99\u73E0\u6536\u96C6\u6210\u529F\uFF0C\u9F99\u5DF2\u7ECF\u51FA\u73B0\u5728\u67D0\u4E2A\u5730\u65B9")}})}),qt(Vr,{src:"dragon_ball.fbx",physics:"map",x:455.8,y:-1267,z:3867.4,scale:.8,children:qt(wl,{name:"Two Star_02 - Default_0",outline:g,onClick:()=>{v(!0),w.add(7),console.log(w),w.size===7&&alert("\u9F99\u73E0\u6536\u96C6\u6210\u529F\uFF0C\u9F99\u5DF2\u7ECF\u51FA\u73B0\u5728\u67D0\u4E2A\u5730\u65B9")}})}),qt(Vr,{visible:w.size===7,src:"sl2.fbx",scale:1,x:-221.3,y:-1300.07,z:-3700,onClick:()=>{x(!0),w.add(0)}}),qt(Vr,{visible:y&&w.size===8,src:"sl0.fbx",scale:37.82,x:-214.9,y:-804.91,z:-8364,onClick:()=>{w.add(8),console.log(w)}})]}),qt($K,{color:"white",variant:1}),qt(vQ,{onMove:R=>{R.y<0?(S.current.moveForward(-10),S.current.animation="running"):R.y>0?(S.current.moveForward(5),S.current.animation="walkingBackwards"):S.current.animation="idle",S.current.rotationY=R.angle+90,_.current.rotationY=R.angle+90}})]})}Qx.createRoot(document.getElementById("root")).render(qt(Gn.StrictMode,{children:qt(yQ,{})}));export{yr as $,Nt as A,md as B,ve as C,wv as D,di as E,Ba as F,vo as G,Fe as H,oS as I,xs as J,DP as K,ns as L,Pn as M,Ft as N,bi as O,Cg as P,An as Q,qr as R,To as S,Sm as T,Gl as U,ie as V,Gt as W,_s as X,Ej as Y,Mn as Z,Lt as _,AQ as a,pi as a0,Ar as a1,Cv as a2,Jl as a3,Lv as a4,Oa as a5,Dv as a6,mS as a7,fd as a8,Lo as a9,Ys as aA,iD as aB,GL as aC,dX as aD,TC as aE,Qc as aF,YL as aa,Rn as ab,AX as ac,St as ad,bQ as ae,vw as af,Jc as ag,hq as ah,AL as ai,Kn as aj,Ql as ak,Gi as al,hn as am,Mc as an,cn as ao,JH as ap,Hm as aq,Hl as ar,$H as as,QH as at,c6 as au,l6 as av,o6 as aw,u6 as ax,a6 as ay,wr as az,kc as b,Qt as c,Zt as d,zo as e,Tl as f,Ge as g,EP as h,O as i,Ca as j,ct as k,ir as l,it as m,_Q as n,Ts as o,TP as p,Ig as q,pt as r,Ke as s,gd as t,Ws as u,EQ as v,vd as w,un as x,Me as y,jn as z};
